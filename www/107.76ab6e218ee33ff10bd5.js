(window.webpackJsonp=window.webpackJsonp||[]).push([[107],{uFKL:function(n,e,t){"use strict";t.r(e),t.d(e,"CoreLoginSitePageModule",(function(){return Q}));var i=t("tyNb"),o=t("L3Fv"),c=t("mrSG"),r=t("nvXB"),a=t("GGba"),l=t("BBqZ"),s=t("9+EE"),g=t("bFG1"),_=t("3LXp"),d=t("mv9v"),m=t("kxYv"),u=t("93ts"),h=t("BaYo"),p=t("j3ag"),f=t("oZnq"),C=t("mvS9"),P=t("JpIC"),O=t("m2Ry"),M=t("pHTc"),S=t("y9BN"),b=t("vuGA"),v=t("4reR"),L=t("fXoL"),y=t("3Pt+"),x=t("TEn/"),w=t("ACYt"),E=t("3CSS"),T=t("nt/U"),k=t("ofXK"),D=t("6uVz"),I=t("sYmb");const U=["siteFormEl"];function CoreLoginSitePage_form_17_ng_container_2_Template(n,e){if(1&n&&(L.Cc(0),L.Ec(1,"ion-item"),L.Ec(2,"ion-label",15),L.Ec(3,"h2"),L.pd(4),L.Pc(5,"translate"),L.Dc(),L.Dc(),L.zc(6,"ion-input",16),L.Pc(7,"translate"),L.Dc(),L.Bc()),2&n){const n=L.Oc(2);L.lc(4),L.qd(L.Qc(5,3,"core.login.siteaddress")),L.lc(2),L.Wc("placeholder",L.Qc(7,5,"core.login.siteaddressplaceholder")),L.Vc("core-auto-focus",n.showKeyboard&&!n.showScanQR)}}function CoreLoginSitePage_form_17_ng_container_3_ion_item_14_Template(n,e){if(1&n){const n=L.Fc();L.Ec(0,"ion-item",27),L.Mc("click",(function CoreLoginSitePage_form_17_ng_container_3_ion_item_14_Template_ion_item_click_0_listener(e){L.fd(n);const t=L.Oc(3);return t.connect(e,t.enteredSiteUrl.url)})),L.Pc(1,"translate"),L.Ec(2,"ion-thumbnail",28),L.zc(3,"ion-icon",29),L.Dc(),L.Ec(4,"ion-label"),L.Ec(5,"h2",30),L.pd(6),L.Pc(7,"translate"),L.Dc(),L.Ec(8,"p"),L.pd(9),L.Dc(),L.Dc(),L.Dc()}if(2&n){const n=L.Oc(3);L.mc("aria-label",L.Qc(1,3,"core.login.connect")),L.lc(6),L.qd(L.Qc(7,5,"core.login.yourenteredsite")),L.lc(3),L.qd(n.enteredSiteUrl.noProtocolUrl)}}function CoreLoginSitePage_form_17_ng_container_3_div_16_Template(n,e){1&n&&(L.Ec(0,"div",31),L.zc(1,"ion-spinner"),L.Pc(2,"translate"),L.Dc()),2&n&&(L.lc(1),L.mc("aria-label",L.Qc(2,1,"core.loading")))}function CoreLoginSitePage_form_17_ng_container_3_ng_container_17_ng_container_1_Template(n,e){1&n&&L.Ac(0)}const _c1=function(n){return{site:n}};function CoreLoginSitePage_form_17_ng_container_3_ng_container_17_Template(n,e){if(1&n&&(L.Cc(0),L.nd(1,CoreLoginSitePage_form_17_ng_container_3_ng_container_17_ng_container_1_Template,1,0,"ng-container",32),L.Bc()),2&n){const n=e.$implicit;L.Oc(3);const t=L.ed(24);L.lc(1),L.Vc("ngTemplateOutlet",t)("ngTemplateOutletContext",L.ad(2,_c1,n))}}function CoreLoginSitePage_form_17_ng_container_3_div_18_Template(n,e){1&n&&(L.Ec(0,"div",33),L.zc(1,"ion-spinner"),L.Pc(2,"translate"),L.Dc()),2&n&&(L.lc(1),L.mc("aria-label",L.Qc(2,1,"core.loading")))}function CoreLoginSitePage_form_17_ng_container_3_Template(n,e){if(1&n){const n=L.Fc();L.Cc(0),L.Ec(1,"ion-item"),L.Ec(2,"ion-label",17),L.Ec(3,"h2"),L.pd(4),L.Pc(5,"translate"),L.Dc(),L.Dc(),L.Ec(6,"ion-input",18),L.Mc("ionChange",(function CoreLoginSitePage_form_17_ng_container_3_Template_ion_input_ionChange_6_listener(e){L.fd(n);const t=L.Oc(2);return t.searchSite(e,t.siteForm.value.siteUrl)})),L.Pc(7,"translate"),L.Dc(),L.Dc(),L.Ec(8,"ion-list",19),L.Ec(9,"ion-item",20),L.Ec(10,"ion-label"),L.Ec(11,"h2",21),L.pd(12),L.Pc(13,"translate"),L.Dc(),L.Dc(),L.Dc(),L.nd(14,CoreLoginSitePage_form_17_ng_container_3_ion_item_14_Template,10,7,"ion-item",22),L.Ec(15,"div",23),L.nd(16,CoreLoginSitePage_form_17_ng_container_3_div_16_Template,3,3,"div",24),L.nd(17,CoreLoginSitePage_form_17_ng_container_3_ng_container_17_Template,2,4,"ng-container",25),L.Dc(),L.Dc(),L.nd(18,CoreLoginSitePage_form_17_ng_container_3_div_18_Template,3,3,"div",26),L.Bc()}if(2&n){const n=L.Oc(2);L.lc(4),L.qd(L.Qc(5,14,"core.login.siteaddress")),L.lc(2),L.Wc("placeholder",L.Qc(7,16,"core.login.siteaddressplaceholder")),L.Vc("core-auto-focus",n.showKeyboard&&!n.showScanQR),L.lc(2),L.qc("hidden",!n.hasSites&&!n.enteredSiteUrl),L.lc(4),L.qd(L.Qc(13,18,"core.login.selectsite")),L.lc(2),L.Vc("ngIf",n.enteredSiteUrl),L.lc(1),L.qc("hidden",!n.hasSites)("dimmed",n.loadingSites),L.lc(1),L.Vc("ngIf",n.loadingSites),L.lc(1),L.Vc("ngForOf",n.sites),L.lc(1),L.Vc("ngIf",!n.hasSites&&n.loadingSites)}}function CoreLoginSitePage_form_17_ion_item_4_Template(n,e){if(1&n&&(L.Ec(0,"ion-item"),L.Ec(1,"ion-label"),L.Ec(2,"ion-button",34),L.pd(3),L.Pc(4,"translate"),L.Dc(),L.Dc(),L.Dc()),2&n){const n=L.Oc(2);L.lc(2),L.Vc("disabled",!n.siteForm.valid),L.lc(1),L.rd(" ",L.Qc(4,2,"core.login.connect")," ")}}function CoreLoginSitePage_form_17_Template(n,e){if(1&n){const n=L.Fc();L.Ec(0,"form",13,14),L.Mc("ngSubmit",(function CoreLoginSitePage_form_17_Template_form_ngSubmit_0_listener(e){L.fd(n);const t=L.Oc();return t.connect(e,t.siteForm.value.siteUrl)})),L.nd(2,CoreLoginSitePage_form_17_ng_container_2_Template,8,7,"ng-container",10),L.nd(3,CoreLoginSitePage_form_17_ng_container_3_Template,19,20,"ng-container",10),L.nd(4,CoreLoginSitePage_form_17_ion_item_4_Template,5,4,"ion-item",10),L.Dc()}if(2&n){const n=L.Oc();L.Vc("formGroup",n.siteForm),L.lc(2),L.Vc("ngIf","url"==n.siteSelector),L.lc(1),L.Vc("ngIf","url"!=n.siteSelector),L.lc(1),L.Vc("ngIf","url"==n.siteSelector)}}function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template(n,e){if(1&n){const n=L.Fc();L.Ec(0,"ion-searchbar",36),L.Mc("ngModelChange",(function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ngModelChange_0_listener(e){L.fd(n);return L.Oc(3).filter=e}))("ionInput",(function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ionInput_0_listener(e){L.fd(n);return L.Oc(3).filterChanged(e)}))("ionCancel",(function CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template_ion_searchbar_ionCancel_0_listener(){L.fd(n);return L.Oc(3).filterChanged()})),L.Pc(1,"translate"),L.Dc()}if(2&n){const n=L.Oc(3);L.Vc("ngModel",n.filter)("placeholder",L.Qc(1,2,"core.login.findyoursite"))}}function CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_ng_container_1_Template(n,e){1&n&&L.Ac(0)}function CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_Template(n,e){if(1&n&&(L.Cc(0),L.nd(1,CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_ng_container_1_Template,1,0,"ng-container",32),L.Bc()),2&n){const n=e.$implicit;L.Oc(3);const t=L.ed(24);L.lc(1),L.Vc("ngTemplateOutlet",t)("ngTemplateOutletContext",L.ad(2,_c1,n))}}function CoreLoginSitePage_ng_container_18_ion_list_1_Template(n,e){if(1&n&&(L.Ec(0,"ion-list"),L.Ec(1,"ion-item"),L.Ec(2,"ion-label"),L.Ec(3,"h2",21),L.pd(4),L.Pc(5,"translate"),L.Dc(),L.Dc(),L.Dc(),L.nd(6,CoreLoginSitePage_ng_container_18_ion_list_1_ion_searchbar_6_Template,2,4,"ion-searchbar",35),L.nd(7,CoreLoginSitePage_ng_container_18_ion_list_1_ng_container_7_Template,2,4,"ng-container",25),L.Dc()),2&n){const n=L.Oc(2);L.lc(4),L.qd(L.Qc(5,3,"core.login.selectsite")),L.lc(2),L.Vc("ngIf",n.fixedSites.length>4),L.lc(1),L.Vc("ngForOf",n.filteredSites)}}function CoreLoginSitePage_ng_container_18_Template(n,e){if(1&n&&(L.Cc(0),L.nd(1,CoreLoginSitePage_ng_container_18_ion_list_1_Template,8,5,"ion-list",10),L.Bc()),2&n){const n=L.Oc();L.lc(1),L.Vc("ngIf","list"==n.siteSelector)}}function CoreLoginSitePage_ng_container_19_Template(n,e){if(1&n){const n=L.Fc();L.Cc(0),L.Ec(1,"div",37),L.pd(2),L.Pc(3,"translate"),L.Dc(),L.Ec(4,"ion-button",38),L.Mc("click",(function CoreLoginSitePage_ng_container_19_Template_ion_button_click_4_listener(){L.fd(n);return L.Oc().showInstructionsAndScanQR()})),L.zc(5,"ion-icon",39),L.pd(6),L.Pc(7,"translate"),L.Dc(),L.Bc()}2&n&&(L.lc(2),L.qd(L.Qc(3,2,"core.login.or")),L.lc(4),L.rd(" ",L.Qc(7,4,"core.scanqr")," "))}function CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_1_Template(n,e){if(1&n&&L.zc(0,"img",45),2&n){const n=L.Oc(2).site;L.Vc("src",n.imageurl,L.id)}}function CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_2_Template(n,e){1&n&&L.zc(0,"img",46)}function CoreLoginSitePage_ng_template_23_ion_thumbnail_1_Template(n,e){if(1&n&&(L.Ec(0,"ion-thumbnail",0),L.nd(1,CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_1_Template,1,1,"img",43),L.nd(2,CoreLoginSitePage_ng_template_23_ion_thumbnail_1_img_2_Template,1,0,"img",44),L.Dc()),2&n){const n=L.Oc().site;L.lc(1),L.Vc("ngIf",n.imageurl),L.lc(1),L.Vc("ngIf",!n.imageurl)}}function CoreLoginSitePage_ng_template_23_p_3_Template(n,e){if(1&n&&(L.Ec(0,"p",47),L.pd(1),L.Dc()),2&n){const n=L.Oc().site;L.lc(1),L.qd(n.title)}}function CoreLoginSitePage_ng_template_23_p_4_Template(n,e){if(1&n&&(L.Ec(0,"p"),L.pd(1),L.Dc()),2&n){const n=L.Oc().site;L.lc(1),L.qd(n.noProtocolUrl)}}function CoreLoginSitePage_ng_template_23_p_5_Template(n,e){if(1&n&&(L.Ec(0,"p"),L.pd(1),L.Dc()),2&n){const n=L.Oc().site;L.lc(1),L.qd(n.location)}}function CoreLoginSitePage_ng_template_23_Template(n,e){if(1&n){const n=L.Fc();L.Ec(0,"ion-item",40),L.Mc("click",(function CoreLoginSitePage_ng_template_23_Template_ion_item_click_0_listener(t){L.fd(n);const i=e.site;return L.Oc().connect(t,i.url,i)})),L.nd(1,CoreLoginSitePage_ng_template_23_ion_thumbnail_1_Template,3,2,"ion-thumbnail",41),L.Ec(2,"ion-label"),L.nd(3,CoreLoginSitePage_ng_template_23_p_3_Template,2,1,"p",42),L.nd(4,CoreLoginSitePage_ng_template_23_p_4_Template,2,1,"p",10),L.nd(5,CoreLoginSitePage_ng_template_23_p_5_Template,2,1,"p",10),L.Dc(),L.Dc()}if(2&n){const n=e.site,t=L.Oc();L.mc("aria-label",n.name),L.lc(1),L.Vc("ngIf",t.siteFinderSettings.displayimage),L.lc(2),L.Vc("ngIf",n.title),L.lc(1),L.Vc("ngIf",n.noProtocolUrl),L.lc(1),L.Vc("ngIf",n.location)}}let F=(()=>{class CoreLoginSitePage{constructor(n){this.formBuilder=n,this.siteSelector="sitefinder",this.showKeyboard=!1,this.filter="",this.sites=[],this.hasSites=!1,this.loadingSites=!1;let e="";this.siteSelector=h.a.CONFIG.multisitesdisplay;this.siteFinderSettings=Object.assign({displaysitename:!0,displayimage:!0,displayalias:!0,displaycity:!0,displaycountry:!0,displayurl:!0},h.a.CONFIG.sitefindersettings||{}),d.a.hasSeveralFixedSites()?e=this.initSiteSelector():h.a.CONFIG.enableonboarding&&!r.a.isIOS()&&this.initOnboarding(),this.showScanQR=d.a.displayQRInSiteScreen(),this.siteForm=this.formBuilder.group({siteUrl:[e,this.moodleUrlValidator()]}),this.searchFunction=g.a.debounce((n=>Object(c.a)(this,void 0,void 0,(function*(){if((n=n.trim()).length>=3){const e=yield s.b.findSites(n);this.sites=this.extendCoreLoginSiteInfo(e),this.hasSites=!!this.sites.length}else this.hasSites=!1;this.loadingSites=!1}))),1e3)}ngOnInit(){this.showKeyboard=!!M.a.getRouteBooleanParam("showKeyboard")}initSiteSelector(){return this.fixedSites=this.extendCoreLoginSiteInfo(d.a.getFixedSites()),this.siteSelector="list",this.fixedSites.some((n=>!!n.imageurl))||(this.siteFinderSettings.displayimage=!1),this.filteredSites=this.fixedSites,this.fixedSites[0].url}initOnboarding(){return Object(c.a)(this,void 0,void 0,(function*(){(yield l.a.get(d.b.ONBOARDING_DONE,!1))||this.showOnboarding()}))}extendCoreLoginSiteInfo(n){return n.map((n=>{n.noProtocolUrl=this.siteFinderSettings.displayurl&&n.url?f.a.removeProtocol(n.url):"";const e=this.siteFinderSettings.displaysitename?n.name:"",t=this.siteFinderSettings.displayalias&&n.alias?n.alias:"";n.title=e&&t?e+" ("+t+")":e+t;const i=this.siteFinderSettings.displaycountry&&n.countrycode?g.a.getCountryName(n.countrycode):"",o=this.siteFinderSettings.displaycity&&n.city?n.city:"";return n.location=o&&i?o+" - "+i:o+i,n}))}moodleUrlValidator(){return n=>{const e=n.value.trim();let t=e.length>=3&&f.a.isValidMoodleUrl(e);if(!t){!!s.b.getDemoSiteData(e)&&(t=!0)}return t?null:{siteUrl:{value:n.value}}}}showHelp(){return Object(c.a)(this,void 0,void 0,(function*(){yield _.a.openModal({component:P.a,cssClass:"core-modal-fullscreen"})}))}showOnboarding(){return Object(c.a)(this,void 0,void 0,(function*(){yield _.a.openModal({component:O.a,cssClass:"core-modal-fullscreen"})}))}connect(n,e,t){return Object(c.a)(this,void 0,void 0,(function*(){if(n.preventDefault(),n.stopPropagation(),r.a.closeKeyboard(),!e)return _.a.showErrorModal("core.login.siteurlrequired",!0),void 0;if(!a.a.isOnline())return _.a.showErrorModal("core.networkerrormsg",!0),void 0;if((e=e.trim()).match(/^(https?:\/\/)?campus\.example\.edu/))return this.showLoginIssue(null,new u.a(p.J.instant("core.login.errorexampleurl"))),void 0;const i=s.b.getDemoSiteData(e);if(i)yield this.loginDemoSite(i);else{const n=yield _.a.showModalLoading();let i;try{i=yield s.b.checkSite(e)}catch(t){const o=f.a.guessMoodleDomain(e);if(!o||o==e)return n.dismiss(),this.showLoginIssue(e,t);try{i=yield s.b.checkSite(o)}catch(i){return n.dismiss(),this.showLoginIssue(e,t||i)}}yield this.login(i,t),n.dismiss()}}))}loginDemoSite(n){return Object(c.a)(this,void 0,void 0,(function*(){const e=yield _.a.showModalLoading();try{const t=yield s.b.getUserToken(n.url,n.username,n.password);return yield s.b.newSite(t.siteUrl,t.token,t.privateToken),v.a.triggerFormSubmittedEvent(this.formElement,!0),yield M.a.navigateToSiteHome(),void 0}catch(e){d.a.treatUserTokenError(n.url,e,n.username,n.password),e.loggedout&&M.a.navigate("/login/sites",{reset:!0})}finally{e.dismiss()}}))}login(n,e){var t;return Object(c.a)(this,void 0,void 0,(function*(){try{if(yield s.b.checkApplication(n.config),v.a.triggerFormSubmittedEvent(this.formElement,!0),d.a.isSSOLoginNeeded(n.code))d.a.confirmAndOpenBrowserForSSOLogin(n.siteUrl,n.code,n.service,null===(t=n.config)||void 0===t?void 0:t.launchurl);else{const t={siteUrl:n.siteUrl,siteConfig:n.config};e&&!this.fixedSites&&(t.siteName=e.name,t.logoUrl=e.imageurl),M.a.navigate("/login/credentials",{params:t})}}catch(n){}}))}showLoginIssue(n,e){let t=_.a.getErrorMessage(e);if(t==p.J.instant("core.cannotconnecttrouble")){this.sites.find((e=>e.url==n))||(t+=" "+p.J.instant("core.cannotconnectverify"))}let i="<p>"+t+"</p>";if(n){i+='<p padding><a href="'+(C.a.isAbsoluteURL(n)?n:"https://"+n)+'" core-link>'+n+"</a></p>"}const o=[{text:p.J.instant("core.needhelp"),cssClass:"core-login-need-help",handler:()=>{this.showHelp()}},{text:p.J.instant("core.tryagain"),role:"cancel"}];_.a.showAlertWithOptions({header:p.J.instant("core.cannotconnect",{$a:m.a.MINIMUM_MOODLE_VERSION}),message:i,buttons:o})}filterChanged(n){var e;const t=null===(e=null==n?void 0:n.target.value)||void 0===e?void 0:e.trim().toLowerCase();this.filteredSites=t&&this.fixedSites?this.fixedSites.filter((n=>n.title.toLowerCase().indexOf(t)>-1||n.noProtocolUrl.toLowerCase().indexOf(t)>-1||n.location.toLowerCase().indexOf(t)>-1)):this.fixedSites}searchSite(n,e){this.loadingSites=!0,e=e.trim(),this.enteredSiteUrl=this.siteForm.valid&&e.length>=3?{url:e,name:"connect",title:"",location:"",noProtocolUrl:f.a.removeProtocol(e)}:void 0,this.searchFunction(e.trim())}showInstructionsAndScanQR(){return Object(c.a)(this,void 0,void 0,(function*(){try{yield d.a.showScanQRInstructions(),yield this.scanQR()}catch(n){}}))}scanQR(){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield g.a.scanQR();if(!n)return;if(S.a.isCustomURL(n)){try{yield S.a.handleCustomURL(n)}catch(e){e&&e.data&&e.data.isAuthenticationURL&&e.data.siteUrl?this.treatErrorInAuthenticationCustomURL(n,e):S.a.treatHandleCustomURLError(e)}return}const e=C.a.getUrlProtocol(n);if(e&&"http"!=e&&"https"!=e)return _.a.showErrorModal(p.J.instant("core.errorurlschemeinvalidscheme",{$a:n})),void 0;(yield d.a.isSiteUrlAllowed(n))?(this.siteForm.controls.siteUrl.setValue(n),this.connect(new Event("click"),n)):_.a.showErrorModal("core.errorurlschemeinvalidsite",!0)}))}treatErrorInAuthenticationCustomURL(n,e){var t;return Object(c.a)(this,void 0,void 0,(function*(){const n=(null===(t=e.data)||void 0===t?void 0:t.siteUrl)||"",i=yield _.a.showModalLoading();this.siteForm.controls.siteUrl.setValue(n);try{const e=yield s.b.checkSite(n);yield s.b.checkApplication(e.config),d.a.isSSOLoginNeeded(e.code)||(yield M.a.navigate("/login/credentials",{params:{siteUrl:e.siteUrl,siteConfig:e.config}}))}catch(n){}finally{i.dismiss()}e.error=b.a.addTextToError(e.error,"<br><br>"+p.J.instant("core.login.youcanstillconnectwithcredentials")),S.a.treatHandleCustomURLError(e)}))}openSettings(){M.a.navigate("/settings")}}return CoreLoginSitePage.ɵfac=function CoreLoginSitePage_Factory(n){return new(n||CoreLoginSitePage)(L.yc(y.f))},CoreLoginSitePage.ɵcmp=L.sc({type:CoreLoginSitePage,selectors:[["page-core-login-site"]],viewQuery:function CoreLoginSitePage_Query(n,e){var t;(1&n&&L.ud(U,!0),2&n)&&(L.dd(t=L.Nc())&&(e.formElement=t.first))},decls:25,vars:17,consts:[["slot","start"],[3,"text"],["slot","end"],["fill","clear",3,"click"],["slot","icon-only","name","fas-cog","aria-hidden","true"],[1,"ion-padding"],[1,"list-item-limited-width"],[1,"ion-text-center","ion-padding","ion-margin-bottom","core-login-site-logo"],["src","assets/img/login_logo.png","role","presentation","alt","",1,"avatar-full","login-logo"],[3,"formGroup","ngSubmit",4,"ngIf"],[4,"ngIf"],["aria-haspopup","dialog","expand","block","fill","clear",1,"ion-margin-top","core-login-need-help","core-button-as-link","ion-text-wrap",3,"click"],["sitelisting",""],[3,"formGroup","ngSubmit"],["siteFormEl",""],["position"," stacked"],["name","url","type","url","formControlName","siteUrl",3,"placeholder","core-auto-focus"],["position","stacked"],["name","url","formControlName","siteUrl",3,"placeholder","core-auto-focus","ionChange"],[1,"core-login-site-list"],[1,"core-login-site-list-title"],[1,"item-heading"],["button","","detail","true","class","core-login-entered-site",3,"click",4,"ngIf"],[1,"core-login-site-list-found"],["class","core-login-site-list-loading",4,"ngIf"],[4,"ngFor","ngForOf"],["class","core-login-site-nolist-loading",4,"ngIf"],["button","","detail","true",1,"core-login-entered-site",3,"click"],["slot","start","aria-hidden","true"],["name","fas-pen","aria-hidden","true"],[1,"ion-text-wrap"],[1,"core-login-site-list-loading"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[1,"core-login-site-nolist-loading"],["expand","block","type","submit",1,"ion-text-wrap",3,"disabled"],[3,"ngModel","placeholder","ngModelChange","ionInput","ionCancel",4,"ngIf"],[3,"ngModel","placeholder","ngModelChange","ionInput","ionCancel"],[1,"ion-text-center","ion-padding","ion-margin-top"],["expand","block","fill","outline","aria-haspopup","dialog",1,"ion-margin",3,"click"],["slot","start","name","fas-qrcode","aria-hidden","true"],["button","","detail","true",3,"click"],["slot","start",4,"ngIf"],["class","item-heading ion-text-wrap",4,"ngIf"],["onError","this.src='assets/icon/icon.png'","alt","","role","presentation",3,"src",4,"ngIf"],["src","assets/icon/icon.png","class","core-login-default-icon","alt","","role","presentation",4,"ngIf"],["onError","this.src='assets/icon/icon.png'","alt","","role","presentation",3,"src"],["src","assets/icon/icon.png","alt","","role","presentation",1,"core-login-default-icon"],[1,"item-heading","ion-text-wrap"]],template:function CoreLoginSitePage_Template(n,e){1&n&&(L.Ec(0,"ion-header"),L.Ec(1,"ion-toolbar"),L.Ec(2,"ion-buttons",0),L.zc(3,"ion-back-button",1),L.Pc(4,"translate"),L.Dc(),L.Ec(5,"ion-title"),L.Ec(6,"h1"),L.pd(7),L.Pc(8,"translate"),L.Dc(),L.Dc(),L.Ec(9,"ion-buttons",2),L.Ec(10,"ion-button",3),L.Mc("click",(function CoreLoginSitePage_Template_ion_button_click_10_listener(){return e.openSettings()})),L.Pc(11,"translate"),L.zc(12,"ion-icon",4),L.Dc(),L.Dc(),L.Dc(),L.Dc(),L.Ec(13,"ion-content",5),L.Ec(14,"div",6),L.Ec(15,"div",7),L.zc(16,"img",8),L.Dc(),L.nd(17,CoreLoginSitePage_form_17_Template,5,4,"form",9),L.nd(18,CoreLoginSitePage_ng_container_18_Template,2,1,"ng-container",10),L.nd(19,CoreLoginSitePage_ng_container_19_Template,8,6,"ng-container",10),L.Ec(20,"ion-button",11),L.Mc("click",(function CoreLoginSitePage_Template_ion_button_click_20_listener(){return e.showHelp()})),L.pd(21),L.Pc(22,"translate"),L.Dc(),L.Dc(),L.Dc(),L.nd(23,CoreLoginSitePage_ng_template_23_Template,6,5,"ng-template",null,12,L.od)),2&n&&(L.lc(3),L.Vc("text",L.Qc(4,9,"core.back")),L.lc(4),L.qd(L.Qc(8,11,"core.login.connecttomoodle")),L.lc(3),L.mc("aria-label",L.Qc(11,13,"core.settings.appsettings")),L.lc(5),L.qc("hidden",e.hasSites||e.enteredSiteUrl),L.lc(2),L.Vc("ngIf",!e.fixedSites),L.lc(1),L.Vc("ngIf",e.fixedSites),L.lc(1),L.Vc("ngIf",e.showScanQR&&!e.hasSites&&!e.enteredSiteUrl),L.lc(2),L.rd(" ",L.Qc(22,15,"core.needhelp")," "))},directives:[x.C,x.Ab,x.m,x.h,x.i,x.yb,w.a,x.l,x.D,E.a,T.a,x.v,k.t,y.H,y.s,y.k,x.I,x.O,x.H,x.Pb,y.r,y.i,D.a,x.P,k.s,x.xb,x.qb,k.A,x.ib,y.u],pipes:[I.d],styles:["[_nghost-%COMP%]{--list-item-max-width:600px}.item-input[_ngcontent-%COMP%]:last-child{margin-bottom:20px}.item.core-login-need-help[_ngcontent-%COMP%]{margin-top:16px}.item.core-login-site-qrcode[_ngcontent-%COMP%]   .item-inner[_ngcontent-%COMP%]{border-bottom:0}.core-login-site-connect[_ngcontent-%COMP%]{margin-top:1.4rem}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{min-width:50px;min-height:50px;width:50px;height:50px;border-radius:20%;box-shadow:0 0 4px var(--gray-200);text-align:center;overflow:hidden}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-height:50px;max-width:-webkit-fit-content;max-width:fit-content;width:auto;height:auto;margin:0 auto 0 50%;transform:translate3d(-50%,0,0);object-fit:cover;object-position:50% 50%}[dir=rtl][_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl][_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{transform:translate3d(calc(-1 * -50%),0,0)}.item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin:0 auto;font-size:35px;height:50px}[dir=rtl][_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], [dir=rtl]   [_nghost-%COMP%]   .item[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{margin-left:0;margin-right:50%}.core-login-site-list[_ngcontent-%COMP%], .core-login-site-list-found[_ngcontent-%COMP%], .core-login-site-logo[_ngcontent-%COMP%]{transition-delay:0s;visibility:visible;opacity:1;transition:all .7s ease-in-out;max-height:9999px}.core-login-site-list-found.hidden[_ngcontent-%COMP%], .core-login-site-list.hidden[_ngcontent-%COMP%], .core-login-site-logo.hidden[_ngcontent-%COMP%]{opacity:0;visibility:hidden;margin-top:0;margin-bottom:0;padding:0;max-height:0}.core-login-site-list-found.dimmed[_ngcontent-%COMP%]{pointer-events:none;position:relative}.core-login-site-list-loading[_ngcontent-%COMP%]{position:absolute;top:0;bottom:0;left:0;right:0;width:100%;height:100%;display:flex;align-content:center;align-items:center;background-color:hsla(0,0%,100%,.5);z-index:1}.core-login-site-list-loading[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin:0 auto}.core-login-site-nolist-loading[_ngcontent-%COMP%]{margin-top:16px;text-align:center}.item.core-login-site-list-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], .item.core-login-site-list-title[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2.item-heading[_ngcontent-%COMP%]{margin-top:0}@media (min-width:768px){ion-content[_ngcontent-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]{margin-top:20%}ion-content[_ngcontent-%COMP%]   .core-login-site-logo.hidden[_ngcontent-%COMP%]{margin-top:0}}.core-login-entered-site[_ngcontent-%COMP%]{background-color:var(--light)}.core-login-entered-site[_ngcontent-%COMP%]   ion-thumbnail[_ngcontent-%COMP%]{box-shadow:0 0 4px var(--gray-300)}.core-login-default-icon[_ngcontent-%COMP%]{filter:grayscale(100%)}","[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{--background:var(--core-login-background);--ion-item-background:var(--core-login-background)}[_nghost-%COMP%]   ion-content[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-list[_ngcontent-%COMP%]{--color:var(--core-login-text-color)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .core-oauth-icon[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], [_nghost-%COMP%]   ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--color)}[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%]{--color:var(--core-login-text-color);-webkit-text-decoration-color:var(--core-login-text-color);text-decoration-color:var(--core-login-text-color)}[_nghost-%COMP%]   ion-button.core-button-as-link[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{color:var(--core-login-text-color)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .item.item-input[_ngcontent-%COMP%]{margin-bottom:16px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.ios[_ngcontent-%COMP%]{--inner-border-width:0 0 1px 0}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%], [_nghost-%COMP%]   form[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{--background:var(--core-login-input-background);--color:var(--core-login-input-color)}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:16px}[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item.md[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   form[_ngcontent-%COMP%]   .core-username.item.md[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{padding-left:unset;-webkit-padding-start:8px;padding-inline-start:8px}}[_nghost-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%}[_nghost-%COMP%]   .core-sitename[_ngcontent-%COMP%] + .core-siteurl[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   .core-sitename[_ngcontent-%COMP%]{font-size:1.2rem;margin-bottom:0}[_nghost-%COMP%]   .core-login-site-logo[_ngcontent-%COMP%]{width:90%;max-width:300px;margin:5px auto}[_nghost-%COMP%]   .core-login-forgotten-password[_ngcontent-%COMP%]{text-decoration:underline}body.dark[_nghost-%COMP%]   core-loading[_ngcontent-%COMP%], body.dark   [_nghost-%COMP%]   core-loading[_ngcontent-%COMP%]{--loading-background:var(--core-login-background-dark);--loading-text-color:#fff;--loading-spinner:#fff}"]}),CoreLoginSitePage})();const V=[{path:"",component:F}];let Q=(()=>{class CoreLoginSitePageModule{}return CoreLoginSitePageModule.ɵmod=L.wc({type:CoreLoginSitePageModule}),CoreLoginSitePageModule.ɵinj=L.vc({factory:function CoreLoginSitePageModule_Factory(n){return new(n||CoreLoginSitePageModule)},imports:[[i.m.forChild(V),o.a],i.m]}),CoreLoginSitePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&L.kd(Q,{declarations:[F],imports:[i.m,o.a],exports:[i.m]}))}}]);