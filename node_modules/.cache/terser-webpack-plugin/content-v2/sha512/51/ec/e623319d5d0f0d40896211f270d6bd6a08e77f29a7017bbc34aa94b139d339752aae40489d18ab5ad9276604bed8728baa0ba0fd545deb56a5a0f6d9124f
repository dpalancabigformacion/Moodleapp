{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{j1Gh:function(t,o,e){\"use strict\";e.r(o),e.d(o,\"AddonModBookContentsPageModule\",(function(){return R}));var n=e(\"tyNb\"),a=e(\"L3Fv\"),i=e(\"mrSG\"),d=e(\"BaYo\"),s=e(\"93ts\"),r=e(\"kBKO\"),c=e(\"qwWh\"),l=e(\"MpCO\"),u=e(\"ULAo\"),h=e(\"zbKZ\"),g=e(\"kWmn\"),m=e(\"GGba\"),p=e(\"pHTc\"),v=e(\"3LXp\"),_=e(\"vuGA\"),f=e(\"bFG1\"),b=e(\"j3ag\"),I=e(\"Fb4V\"),M=e(\"7ZBW\"),C=e(\"fXoL\"),k=e(\"TEn/\"),B=e(\"hMzs\"),P=e(\"ofXK\"),y=e(\"nt/U\"),A=e(\"PgjG\"),w=e(\"ACYt\"),E=e(\"3CSS\"),D=e(\"vSVd\"),O=e(\"/BoF\"),T=e(\"3jOR\"),x=e(\"sYmb\");function AddonModBookContentsPage_ion_button_9_Template(t,o){if(1&t){const t=C.Fc();C.Ec(0,\"ion-button\",12),C.Mc(\"click\",(function AddonModBookContentsPage_ion_button_9_Template_ion_button_click_0_listener(){C.fd(t);return C.Oc().showToc()})),C.Pc(1,\"translate\"),C.zc(2,\"ion-icon\",13),C.Dc()}2&t&&C.mc(\"aria-label\",C.Qc(1,1,\"addon.mod_book.toc\"))}function AddonModBookContentsPage_ion_card_16_Template(t,o){if(1&t&&(C.Ec(0,\"ion-card\",14),C.Ec(1,\"ion-item\"),C.zc(2,\"ion-icon\",15),C.Ec(3,\"ion-label\"),C.zc(4,\"span\",16),C.Dc(),C.Dc(),C.Dc()),2&t){const t=C.Oc();C.lc(4),C.Vc(\"innerHTML\",t.warning,C.gd)}}function AddonModBookContentsPage_ng_template_18_div_2_Template(t,o){if(1&t&&(C.Ec(0,\"div\",20),C.Ec(1,\"strong\"),C.pd(2),C.Pc(3,\"translate\"),C.Dc(),C.zc(4,\"core-tag-list\",21),C.Dc()),2&t){const t=C.Oc().item;C.lc(2),C.rd(\"\",C.Qc(3,2,\"core.tag.tags\"),\": \"),C.lc(2),C.Vc(\"tags\",t.tags)}}function AddonModBookContentsPage_ng_template_18_Template(t,o){if(1&t&&(C.Ec(0,\"div\",17),C.zc(1,\"core-format-text\",18),C.nd(2,AddonModBookContentsPage_ng_template_18_div_2_Template,5,4,\"div\",19),C.Dc()),2&t){const t=o.item,e=C.Oc();C.lc(1),C.Vc(\"component\",e.component)(\"componentId\",e.cmId)(\"text\",t.content)(\"contextInstanceId\",e.cmId)(\"courseId\",e.courseId),C.lc(1),C.Vc(\"ngIf\",(null==t.tags?null:t.tags.length)>0)}}function AddonModBookContentsPage_core_navigation_bar_19_Template(t,o){if(1&t){const t=C.Fc();C.Ec(0,\"core-navigation-bar\",22),C.Mc(\"action\",(function AddonModBookContentsPage_core_navigation_bar_19_Template_core_navigation_bar_action_0_listener(o){C.fd(t);return C.Oc().changeChapter(o.id)})),C.Dc()}if(2&t){const t=C.Oc();C.Vc(\"items\",t.navigationItems)}}let S=(()=>{class AddonModBookContentsPage{constructor(){this.title=\"\",this.component=M.b.COMPONENT,this.warning=\"\",this.displayNavBar=!0,this.navigationItems=[],this.slidesOpts={autoHeight:!0,scrollOnChange:\"top\"},this.loaded=!1}ngOnInit(){try{this.cmId=p.a.getRequiredRouteNumberParam(\"cmId\"),this.courseId=p.a.getRequiredRouteNumberParam(\"courseId\"),this.initialChapterId=p.a.getRouteNumberParam(\"chapterId\")}catch(t){return v.a.showErrorModal(t),p.a.back(),void 0}const t=new contents_AddonModBookSlidesItemsManagerSource(this.courseId,this.cmId,g.a.areTagsAvailableInSite(),this.initialChapterId);this.manager=new r.a(t),this.managerUnsubscribe=this.manager.addListener({onSelectedItemUpdated:t=>{this.onChapterViewed(t.id)}}),this.fetchContent()}get module(){var t;return null===(t=this.manager)||void 0===t?void 0:t.getSource().module}get book(){var t;return null===(t=this.manager)||void 0===t?void 0:t.getSource().book}get chapters(){var t;return(null===(t=this.manager)||void 0===t?void 0:t.getSource().chapters)||[]}fetchContent(t=!1){var o;return Object(i.a)(this,void 0,void 0,(function*(){try{const e=null===(o=this.manager)||void 0===o?void 0:o.getSource();if(!e)return;const{module:n,book:a}=yield e.loadBookData(),i=yield this.downloadResourceIfNeeded(n,t);if(this.displayNavBar=0!=a.navstyle,this.title=a.name,yield e.loadContents(),yield e.load(),null==i?void 0:i.failed){const t=_.a.getErrorMessageFromError(i.error)||i.error;this.warning=b.J.instant(\"core.errordownloadingsomefiles\")+(t?\" \"+t:\"\")}else this.warning=\"\"}catch(t){v.a.showErrorModalDefault(t,\"core.course.errorgetmodule\",!0)}finally{this.loaded=!0}}))}downloadResourceIfNeeded(t,o=!1){var e;return Object(i.a)(this,void 0,void 0,(function*(){const n={failed:!1};let a=!1;if((yield h.a.getModuleStatus(t,this.courseId,void 0,o))!==d.a.DOWNLOADED)try{yield h.a.downloadModule(t,this.courseId),a=!0}catch(t){n.failed=!0,n.error=t}if(!(null===(e=t.contents)||void 0===e?void 0:e.length)||o&&!a){const e=o&&m.a.isOnline();try{yield u.a.loadModuleContents(t,void 0,void 0,!1,e)}catch(o){if(e&&!t.contents)yield u.a.loadModuleContents(t);else if(!t.contents)throw o}}return n}))}changeChapter(t){var o;t&&(null===(o=this.slides)||void 0===o?void 0:o.slideToItem({id:t}))}doRefresh(t){return Object(i.a)(this,void 0,void 0,(function*(){this.manager&&(yield f.a.ignoreErrors(Promise.all([this.manager.getSource().invalidateContent(),h.a.invalidateCourseUpdates(this.courseId)]))),yield f.a.ignoreErrors(this.fetchContent(!0)),null==t||t.complete()}))}showToc(){var t;return Object(i.a)(this,void 0,void 0,(function*(){const o=null===(t=this.manager)||void 0===t?void 0:t.getSelectedItem(),e=yield v.a.openSideModal({component:I.a,componentProps:{moduleId:this.cmId,chapters:this.chapters,selected:null==o?void 0:o.id,courseId:this.courseId,book:this.book}});e&&this.changeChapter(e)}))}onChapterViewed(t){return Object(i.a)(this,void 0,void 0,(function*(){if(this.displayNavBar&&(this.navigationItems=this.getNavigationItems(t)),this.book&&M.a.storeLastChapterViewed(this.book.id,t,this.courseId),!this.module)return;yield f.a.ignoreErrors(M.a.logView(this.module.instance,t,this.module.name));const o=this.chapters.findIndex((o=>o.id==t));(o<0||void 0===this.chapters[o+1])&&u.a.checkModuleCompletion(this.courseId,this.module.completiondata)}))}getNavigationItems(t){return this.chapters.map((o=>({item:o,title:o.title,current:o.id==t,enabled:!0})))}ngOnDestroy(){var t;this.managerUnsubscribe&&this.managerUnsubscribe(),null===(t=this.manager)||void 0===t||t.destroy()}}return AddonModBookContentsPage.ɵfac=function AddonModBookContentsPage_Factory(t){return new(t||AddonModBookContentsPage)},AddonModBookContentsPage.ɵcmp=C.sc({type:AddonModBookContentsPage,selectors:[[\"page-addon-mod-book-contents\"]],viewQuery:function AddonModBookContentsPage_Query(t,o){var e;(1&t&&C.ud(l.a,!0),2&t)&&(C.dd(e=C.Nc())&&(o.slides=e.first))},decls:20,vars:16,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"contextLevel\",\"module\",3,\"text\",\"contextInstanceId\",\"courseId\"],[\"slot\",\"end\"],[\"aria-haspopup\",\"true\",3,\"click\",4,\"ngIf\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[1,\"safe-area-padding-horizontal\",\"core-swipe-slides-container\"],[\"class\",\"core-warning-card\",4,\"ngIf\"],[3,\"manager\",\"options\"],[\"collapsible-footer\",\"\",\"appearOnBottom\",\"\",\"previousTranslate\",\"addon.mod_book.navprevtitle\",\"nextTranslate\",\"addon.mod_book.navnexttitle\",\"slot\",\"fixed\",3,\"items\",\"action\",4,\"ngIf\"],[\"aria-haspopup\",\"true\",3,\"click\"],[\"name\",\"fas-bookmark\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"],[1,\"core-warning-card\"],[\"name\",\"fas-exclamation-triangle\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[3,\"innerHTML\"],[1,\"ion-padding\"],[\"contextLevel\",\"module\",3,\"component\",\"componentId\",\"text\",\"contextInstanceId\",\"courseId\"],[\"class\",\"ion-margin-top\",4,\"ngIf\"],[1,\"ion-margin-top\"],[3,\"tags\"],[\"collapsible-footer\",\"\",\"appearOnBottom\",\"\",\"previousTranslate\",\"addon.mod_book.navprevtitle\",\"nextTranslate\",\"addon.mod_book.navnexttitle\",\"slot\",\"fixed\",3,\"items\",\"action\"]],template:function AddonModBookContentsPage_Template(t,o){1&t&&(C.Ec(0,\"ion-header\"),C.Ec(1,\"ion-toolbar\"),C.Ec(2,\"ion-buttons\",0),C.zc(3,\"ion-back-button\",1),C.Pc(4,\"translate\"),C.Dc(),C.Ec(5,\"ion-title\"),C.Ec(6,\"h1\"),C.zc(7,\"core-format-text\",2),C.Dc(),C.Dc(),C.Ec(8,\"ion-buttons\",3),C.nd(9,AddonModBookContentsPage_ion_button_9_Template,3,3,\"ion-button\",4),C.Dc(),C.Dc(),C.Dc(),C.Ec(10,\"ion-content\"),C.Ec(11,\"ion-refresher\",5),C.Mc(\"ionRefresh\",(function AddonModBookContentsPage_Template_ion_refresher_ionRefresh_11_listener(t){return o.doRefresh(t.target)})),C.zc(12,\"ion-refresher-content\",6),C.Pc(13,\"translate\"),C.Dc(),C.Ec(14,\"core-loading\",7),C.Ec(15,\"div\",8),C.nd(16,AddonModBookContentsPage_ion_card_16_Template,5,1,\"ion-card\",9),C.Ec(17,\"core-swipe-slides\",10),C.nd(18,AddonModBookContentsPage_ng_template_18_Template,3,6,\"ng-template\"),C.Dc(),C.Dc(),C.Dc(),C.nd(19,AddonModBookContentsPage_core_navigation_bar_19_Template,1,1,\"core-navigation-bar\",11),C.Dc()),2&t&&(C.lc(3),C.Vc(\"text\",C.Qc(4,12,\"core.back\")),C.lc(4),C.Vc(\"text\",o.title)(\"contextInstanceId\",o.cmId)(\"courseId\",o.courseId),C.lc(2),C.Vc(\"ngIf\",o.loaded),C.lc(2),C.Vc(\"disabled\",!o.loaded),C.lc(1),C.Wc(\"pullingText\",C.Qc(13,14,\"core.pulltorefresh\")),C.lc(2),C.Vc(\"hideUntil\",o.loaded),C.lc(2),C.Vc(\"ngIf\",o.warning),C.lc(1),C.Vc(\"manager\",o.manager)(\"options\",o.slidesOpts),C.lc(2),C.Vc(\"ngIf\",o.loaded&&o.displayNavBar&&o.navigationItems.length>1))},directives:[k.C,k.Ab,k.m,k.h,k.i,k.yb,B.a,P.t,y.a,k.v,k.bb,k.cb,A.a,l.a,w.a,k.l,k.D,E.a,k.n,k.I,k.O,D.a,O.a,T.a],pipes:[x.d],styles:[\"[_nghost-%COMP%]   .core-swipe-slides-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{flex:none}\"]}),AddonModBookContentsPage})();class contents_AddonModBookSlidesItemsManagerSource extends c.a{constructor(t,o,e,n){super(n?{id:n}:void 0),this.chapters=[],this.contentsMap={},this.COURSE_ID=t,this.CM_ID=o,this.TAGS_ENABLED=e}getItemId(t){return t.id}loadBookData(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.module=yield u.a.getModule(this.CM_ID,this.COURSE_ID),this.book=yield M.a.getBook(this.COURSE_ID,this.CM_ID),!this.initialItem){const t=yield M.a.getLastChapterViewed(this.book.id);t&&(this.initialItem={id:t})}return{module:this.module,book:this.book}}))}loadContents(){return Object(i.a)(this,void 0,void 0,(function*(){if(!this.module)return;const t=yield u.a.getModuleContents(this.module,this.COURSE_ID);this.contentsMap=M.a.getContentsMap(t),this.chapters=M.a.getTocList(t)}))}loadItems(){return Object(i.a)(this,void 0,void 0,(function*(){try{return yield Promise.all(this.chapters.map((t=>Object(i.a)(this,void 0,void 0,(function*(){const o=yield M.a.getChapterContent(this.contentsMap,t.id,this.CM_ID);return{id:t.id,content:o,tags:this.TAGS_ENABLED?this.contentsMap[t.id].tags:[]}})))))}catch(t){if(!_.a.getErrorMessageFromError(t))throw new s.a(b.J.instant(\"addon.mod_book.errorchapter\"));throw t}}))}invalidateContent(){return M.a.invalidateContent(this.CM_ID,this.COURSE_ID)}}var V=e(\"yQkb\");const N=[{path:\"\",component:S}];let R=(()=>{class AddonModBookContentsPageModule{}return AddonModBookContentsPageModule.ɵmod=C.wc({type:AddonModBookContentsPageModule}),AddonModBookContentsPageModule.ɵinj=C.vc({factory:function AddonModBookContentsPageModule_Factory(t){return new(t||AddonModBookContentsPageModule)},imports:[[n.m.forChild(N),a.a,V.a],n.m]}),AddonModBookContentsPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&C.kd(R,{declarations:[S],imports:[n.m,a.a,V.a],exports:[n.m]}))}}]);","name":"53.2e04211efca2cabfab20.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[53],{\n\n/***/ \"j1Gh\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonModBookContentsPageModule\", function() { return /* binding */ contents_module_AddonModBookContentsPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/constants.ts\nvar constants = __webpack_require__(\"BaYo\");\n\n// EXTERNAL MODULE: ./src/core/classes/errors/error.ts\nvar errors_error = __webpack_require__(\"93ts\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/swipe-slides-items-manager.ts\nvar swipe_slides_items_manager = __webpack_require__(\"kBKO\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/swipe-slides-items-manager-source.ts\nvar swipe_slides_items_manager_source = __webpack_require__(\"qwWh\");\n\n// EXTERNAL MODULE: ./src/core/components/swipe-slides/swipe-slides.ts\nvar swipe_slides = __webpack_require__(\"MpCO\");\n\n// EXTERNAL MODULE: ./src/core/features/course/services/course.ts\nvar course = __webpack_require__(\"ULAo\");\n\n// EXTERNAL MODULE: ./src/core/features/course/services/module-prefetch-delegate.ts\nvar module_prefetch_delegate = __webpack_require__(\"zbKZ\");\n\n// EXTERNAL MODULE: ./src/core/features/tag/services/tag.ts\nvar tag = __webpack_require__(\"kWmn\");\n\n// EXTERNAL MODULE: ./src/core/services/network.ts + 2 modules\nvar network = __webpack_require__(\"GGba\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/text.ts + 1 modules\nvar utils_text = __webpack_require__(\"vuGA\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/addons/mod/book/components/toc/toc.ts\nvar toc = __webpack_require__(\"Fb4V\");\n\n// EXTERNAL MODULE: ./src/addons/mod/book/services/book.ts\nvar services_book = __webpack_require__(\"7ZBW\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar directives_content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/features/tag/components/list/list.ts\nvar list = __webpack_require__(\"vSVd\");\n\n// EXTERNAL MODULE: ./src/core/components/navigation-bar/navigation-bar.ts\nvar navigation_bar = __webpack_require__(\"/BoF\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-footer.ts\nvar collapsible_footer = __webpack_require__(\"3jOR\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/addons/mod/book/pages/contents/contents.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonModBookContentsPage_ion_button_9_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r5 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 12);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonModBookContentsPage_ion_button_9_Template_ion_button_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r5); const ctx_r4 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r4.showToc(); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"addon.mod_book.toc\"));\n    }\n}\nfunction AddonModBookContentsPage_ion_card_16_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 14);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 15);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"zc\" /* ɵɵelement */](4, \"span\", 16);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r1 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"Vc\" /* ɵɵproperty */](\"innerHTML\", ctx_r1.warning, core[\"gd\" /* ɵɵsanitizeHtml */]);\n    }\n}\nfunction AddonModBookContentsPage_ng_template_18_div_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 20);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"strong\");\n        core[\"pd\" /* ɵɵtext */](2);\n        core[\"Pc\" /* ɵɵpipe */](3, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"zc\" /* ɵɵelement */](4, \"core-tag-list\", 21);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const chapter_r6 = core[\"Oc\" /* ɵɵnextContext */]().item;\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\"\", core[\"Qc\" /* ɵɵpipeBind1 */](3, 2, \"core.tag.tags\"), \": \");\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"tags\", chapter_r6.tags);\n    }\n}\nfunction AddonModBookContentsPage_ng_template_18_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 17);\n        core[\"zc\" /* ɵɵelement */](1, \"core-format-text\", 18);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonModBookContentsPage_ng_template_18_div_2_Template, 5, 4, \"div\", 19);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const chapter_r6 = ctx.item;\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"component\", ctx_r2.component)(\"componentId\", ctx_r2.cmId)(\"text\", chapter_r6.content)(\"contextInstanceId\", ctx_r2.cmId)(\"courseId\", ctx_r2.courseId);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", (chapter_r6.tags == null ? null : chapter_r6.tags.length) > 0);\n    }\n}\nfunction AddonModBookContentsPage_core_navigation_bar_19_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r10 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"core-navigation-bar\", 22);\n        core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModBookContentsPage_core_navigation_bar_19_Template_core_navigation_bar_action_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r10); const ctx_r9 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r9.changeChapter($event.id); });\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"items\", ctx_r3.navigationItems);\n    }\n}\n/**\n * Page that displays a book contents.\n */\nlet contents_AddonModBookContentsPage = /*@__PURE__*/ (() => {\n    class AddonModBookContentsPage {\n        constructor() {\n            this.title = '';\n            this.component = services_book[\"b\" /* AddonModBookProvider */].COMPONENT;\n            this.warning = '';\n            this.displayNavBar = true;\n            this.navigationItems = [];\n            this.slidesOpts = {\n                autoHeight: true,\n                scrollOnChange: 'top',\n            };\n            this.loaded = false;\n        }\n        /**\n         * @inheritdoc\n         */\n        ngOnInit() {\n            try {\n                this.cmId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('cmId');\n                this.courseId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('courseId');\n                this.initialChapterId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('chapterId');\n            }\n            catch (error) {\n                dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                services_navigator[\"a\" /* CoreNavigator */].back();\n                return;\n            }\n            const source = new contents_AddonModBookSlidesItemsManagerSource(this.courseId, this.cmId, tag[\"a\" /* CoreTag */].areTagsAvailableInSite(), this.initialChapterId);\n            this.manager = new swipe_slides_items_manager[\"a\" /* CoreSwipeSlidesItemsManager */](source);\n            this.managerUnsubscribe = this.manager.addListener({\n                onSelectedItemUpdated: (item) => {\n                    this.onChapterViewed(item.id);\n                },\n            });\n            this.fetchContent();\n        }\n        get module() {\n            var _a;\n            return (_a = this.manager) === null || _a === void 0 ? void 0 : _a.getSource().module;\n        }\n        get book() {\n            var _a;\n            return (_a = this.manager) === null || _a === void 0 ? void 0 : _a.getSource().book;\n        }\n        get chapters() {\n            var _a;\n            return ((_a = this.manager) === null || _a === void 0 ? void 0 : _a.getSource().chapters) || [];\n        }\n        /**\n         * Download book contents and load the current chapter.\n         *\n         * @param refresh Whether we're refreshing data.\n         * @return Promise resolved when done.\n         */\n        fetchContent(refresh = false) {\n            var _a;\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const source = (_a = this.manager) === null || _a === void 0 ? void 0 : _a.getSource();\n                    if (!source) {\n                        return;\n                    }\n                    const { module, book } = yield source.loadBookData();\n                    const downloadResult = yield this.downloadResourceIfNeeded(module, refresh);\n                    this.displayNavBar = book.navstyle != 0 /* TOC_ONLY */;\n                    this.title = book.name;\n                    // Get contents. No need to refresh, it has been done in downloadResourceIfNeeded.\n                    yield source.loadContents();\n                    yield source.load();\n                    if (downloadResult === null || downloadResult === void 0 ? void 0 : downloadResult.failed) {\n                        const error = utils_text[\"a\" /* CoreTextUtils */].getErrorMessageFromError(downloadResult.error) || downloadResult.error;\n                        this.warning = singletons[\"J\" /* Translate */].instant('core.errordownloadingsomefiles') + (error ? ' ' + error : '');\n                    }\n                    else {\n                        this.warning = '';\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.course.errorgetmodule', true);\n                }\n                finally {\n                    this.loaded = true;\n                }\n            });\n        }\n        /**\n         * Download a resource if needed.\n         * If the download call fails the promise won't be rejected, but the error will be included in the returned object.\n         * If module.contents cannot be loaded then the Promise will be rejected.\n         *\n         * @param refresh Whether we're refreshing data.\n         * @return Promise resolved when done.\n         */\n        downloadResourceIfNeeded(module, refresh = false) {\n            var _a;\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const result = {\n                    failed: false,\n                };\n                let contentsAlreadyLoaded = false;\n                // Get module status to determine if it needs to be downloaded.\n                const status = yield module_prefetch_delegate[\"a\" /* CoreCourseModulePrefetchDelegate */].getModuleStatus(module, this.courseId, undefined, refresh);\n                if (status !== constants[\"a\" /* CoreConstants */].DOWNLOADED) {\n                    // Download content. This function also loads module contents if needed.\n                    try {\n                        yield module_prefetch_delegate[\"a\" /* CoreCourseModulePrefetchDelegate */].downloadModule(module, this.courseId);\n                        // If we reach here it means the download process already loaded the contents, no need to do it again.\n                        contentsAlreadyLoaded = true;\n                    }\n                    catch (error) {\n                        // Mark download as failed but go on since the main files could have been downloaded.\n                        result.failed = true;\n                        result.error = error;\n                    }\n                }\n                if (!((_a = module.contents) === null || _a === void 0 ? void 0 : _a.length) || (refresh && !contentsAlreadyLoaded)) {\n                    // Try to load the contents.\n                    const ignoreCache = refresh && network[\"a\" /* CoreNetwork */].isOnline();\n                    try {\n                        yield course[\"a\" /* CoreCourse */].loadModuleContents(module, undefined, undefined, false, ignoreCache);\n                    }\n                    catch (error) {\n                        // Error loading contents. If we ignored cache, try to get the cached value.\n                        if (ignoreCache && !module.contents) {\n                            yield course[\"a\" /* CoreCourse */].loadModuleContents(module);\n                        }\n                        else if (!module.contents) {\n                            // Not able to load contents, throw the error.\n                            throw error;\n                        }\n                    }\n                }\n                return result;\n            });\n        }\n        /**\n         * Change the current chapter.\n         *\n         * @param chapterId Chapter to load.\n         * @return Promise resolved when done.\n         */\n        changeChapter(chapterId) {\n            var _a;\n            if (!chapterId) {\n                return;\n            }\n            (_a = this.slides) === null || _a === void 0 ? void 0 : _a.slideToItem({ id: chapterId });\n        }\n        /**\n         * Refresh the data.\n         *\n         * @param refresher Refresher.\n         * @return Promise resolved when done.\n         */\n        doRefresh(refresher) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (this.manager) {\n                    yield utils[\"a\" /* CoreUtils */].ignoreErrors(Promise.all([\n                        this.manager.getSource().invalidateContent(),\n                        module_prefetch_delegate[\"a\" /* CoreCourseModulePrefetchDelegate */].invalidateCourseUpdates(this.courseId),\n                    ]));\n                }\n                yield utils[\"a\" /* CoreUtils */].ignoreErrors(this.fetchContent(true));\n                refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n            });\n        }\n        /**\n         * Show the TOC.\n         */\n        showToc() {\n            var _a;\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                // Create the toc modal.\n                const visibleChapter = (_a = this.manager) === null || _a === void 0 ? void 0 : _a.getSelectedItem();\n                const modalData = yield dom[\"a\" /* CoreDomUtils */].openSideModal({\n                    component: toc[\"a\" /* AddonModBookTocComponent */],\n                    componentProps: {\n                        moduleId: this.cmId,\n                        chapters: this.chapters,\n                        selected: visibleChapter === null || visibleChapter === void 0 ? void 0 : visibleChapter.id,\n                        courseId: this.courseId,\n                        book: this.book,\n                    },\n                });\n                if (modalData) {\n                    this.changeChapter(modalData);\n                }\n            });\n        }\n        /**\n         * Update data related to chapter being viewed.\n         *\n         * @param chapterId Chapter viewed.\n         * @return Promise resolved when done.\n         */\n        onChapterViewed(chapterId) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (this.displayNavBar) {\n                    this.navigationItems = this.getNavigationItems(chapterId);\n                }\n                if (this.book) {\n                    services_book[\"a\" /* AddonModBook */].storeLastChapterViewed(this.book.id, chapterId, this.courseId);\n                }\n                if (!this.module) {\n                    return;\n                }\n                // Chapter loaded, log view.\n                yield utils[\"a\" /* CoreUtils */].ignoreErrors(services_book[\"a\" /* AddonModBook */].logView(this.module.instance, chapterId, this.module.name));\n                const currentChapterIndex = this.chapters.findIndex((chapter) => chapter.id == chapterId);\n                const isLastChapter = currentChapterIndex < 0 || this.chapters[currentChapterIndex + 1] === undefined;\n                // Module is completed when last chapter is viewed, so we only check completion if the last is reached.\n                if (isLastChapter) {\n                    course[\"a\" /* CoreCourse */].checkModuleCompletion(this.courseId, this.module.completiondata);\n                }\n            });\n        }\n        /**\n         * Converts chapters to navigation items.\n         *\n         * @param chapterId Current chapter Id.\n         * @return Navigation items.\n         */\n        getNavigationItems(chapterId) {\n            return this.chapters.map((chapter) => ({\n                item: chapter,\n                title: chapter.title,\n                current: chapter.id == chapterId,\n                enabled: true,\n            }));\n        }\n        /**\n         * @inheritdoc\n         */\n        ngOnDestroy() {\n            var _a;\n            this.managerUnsubscribe && this.managerUnsubscribe();\n            (_a = this.manager) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n    }\n    AddonModBookContentsPage.ɵfac = function AddonModBookContentsPage_Factory(t) { return new (t || AddonModBookContentsPage)(); };\n    AddonModBookContentsPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonModBookContentsPage, selectors: [[\"page-addon-mod-book-contents\"]], viewQuery: function AddonModBookContentsPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](swipe_slides[\"a\" /* CoreSwipeSlidesComponent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.slides = _t.first);\n            }\n        }, decls: 20, vars: 16, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [\"slot\", \"end\"], [\"aria-haspopup\", \"true\", 3, \"click\", 4, \"ngIf\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [1, \"safe-area-padding-horizontal\", \"core-swipe-slides-container\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [3, \"manager\", \"options\"], [\"collapsible-footer\", \"\", \"appearOnBottom\", \"\", \"previousTranslate\", \"addon.mod_book.navprevtitle\", \"nextTranslate\", \"addon.mod_book.navnexttitle\", \"slot\", \"fixed\", 3, \"items\", \"action\", 4, \"ngIf\"], [\"aria-haspopup\", \"true\", 3, \"click\"], [\"name\", \"fas-bookmark\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [1, \"core-warning-card\"], [\"name\", \"fas-exclamation-triangle\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [3, \"innerHTML\"], [1, \"ion-padding\"], [\"contextLevel\", \"module\", 3, \"component\", \"componentId\", \"text\", \"contextInstanceId\", \"courseId\"], [\"class\", \"ion-margin-top\", 4, \"ngIf\"], [1, \"ion-margin-top\"], [3, \"tags\"], [\"collapsible-footer\", \"\", \"appearOnBottom\", \"\", \"previousTranslate\", \"addon.mod_book.navprevtitle\", \"nextTranslate\", \"addon.mod_book.navnexttitle\", \"slot\", \"fixed\", 3, \"items\", \"action\"]], template: function AddonModBookContentsPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"zc\" /* ɵɵelement */](7, \"core-format-text\", 2);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](8, \"ion-buttons\", 3);\n                core[\"nd\" /* ɵɵtemplate */](9, AddonModBookContentsPage_ion_button_9_Template, 3, 3, \"ion-button\", 4);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](10, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](11, \"ion-refresher\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonModBookContentsPage_Template_ion_refresher_ionRefresh_11_listener($event) { return ctx.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](12, \"ion-refresher-content\", 6);\n                core[\"Pc\" /* ɵɵpipe */](13, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](14, \"core-loading\", 7);\n                core[\"Ec\" /* ɵɵelementStart */](15, \"div\", 8);\n                core[\"nd\" /* ɵɵtemplate */](16, AddonModBookContentsPage_ion_card_16_Template, 5, 1, \"ion-card\", 9);\n                core[\"Ec\" /* ɵɵelementStart */](17, \"core-swipe-slides\", 10);\n                core[\"nd\" /* ɵɵtemplate */](18, AddonModBookContentsPage_ng_template_18_Template, 3, 6, \"ng-template\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"nd\" /* ɵɵtemplate */](19, AddonModBookContentsPage_core_navigation_bar_19_Template, 1, 1, \"core-navigation-bar\", 11);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 12, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", ctx.title)(\"contextInstanceId\", ctx.cmId)(\"courseId\", ctx.courseId);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](13, 14, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.warning);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"manager\", ctx.manager)(\"options\", ctx.slidesOpts);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.loaded && ctx.displayNavBar && ctx.navigationItems.length > 1);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], format_text[\"a\" /* CoreFormatTextDirective */], common[\"t\" /* NgIf */], directives_content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], swipe_slides[\"a\" /* CoreSwipeSlidesComponent */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], ionic_angular[\"n\" /* IonCard */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"O\" /* IonLabel */], list[\"a\" /* CoreTagListComponent */], navigation_bar[\"a\" /* CoreNavigationBarComponent */], collapsible_footer[\"a\" /* CoreCollapsibleFooterDirective */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], styles: [\"[_nghost-%COMP%]   .core-swipe-slides-container[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]{flex:none}\"] });\n    return AddonModBookContentsPage;\n})();\n/**\n * Helper to manage swiping within a collection of chapters.\n */\nclass contents_AddonModBookSlidesItemsManagerSource extends swipe_slides_items_manager_source[\"a\" /* CoreSwipeSlidesItemsManagerSource */] {\n    constructor(courseId, cmId, tagsEnabled, initialChapterId) {\n        super(initialChapterId ? { id: initialChapterId } : undefined);\n        this.chapters = [];\n        this.contentsMap = {};\n        this.COURSE_ID = courseId;\n        this.CM_ID = cmId;\n        this.TAGS_ENABLED = tagsEnabled;\n    }\n    /**\n     * @inheritdoc\n     */\n    getItemId(item) {\n        return item.id;\n    }\n    /**\n     * Load book data from WS.\n     *\n     * @return Promise resolved when done.\n     */\n    loadBookData() {\n        return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n            this.module = yield course[\"a\" /* CoreCourse */].getModule(this.CM_ID, this.COURSE_ID);\n            this.book = yield services_book[\"a\" /* AddonModBook */].getBook(this.COURSE_ID, this.CM_ID);\n            if (!this.initialItem) {\n                // No chapter ID specified. Calculate last viewed.\n                const lastViewed = yield services_book[\"a\" /* AddonModBook */].getLastChapterViewed(this.book.id);\n                if (lastViewed) {\n                    this.initialItem = { id: lastViewed };\n                }\n            }\n            return {\n                module: this.module,\n                book: this.book,\n            };\n        });\n    }\n    /**\n     * Load module contents.\n     */\n    loadContents() {\n        return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n            if (!this.module) {\n                return;\n            }\n            const contents = yield course[\"a\" /* CoreCourse */].getModuleContents(this.module, this.COURSE_ID);\n            this.contentsMap = services_book[\"a\" /* AddonModBook */].getContentsMap(contents);\n            this.chapters = services_book[\"a\" /* AddonModBook */].getTocList(contents);\n        });\n    }\n    /**\n     * @inheritdoc\n     */\n    loadItems() {\n        return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n            try {\n                const newChapters = yield Promise.all(this.chapters.map((chapter) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                    const content = yield services_book[\"a\" /* AddonModBook */].getChapterContent(this.contentsMap, chapter.id, this.CM_ID);\n                    return {\n                        id: chapter.id,\n                        content,\n                        tags: this.TAGS_ENABLED ? this.contentsMap[chapter.id].tags : [],\n                    };\n                })));\n                return newChapters;\n            }\n            catch (error) {\n                if (!utils_text[\"a\" /* CoreTextUtils */].getErrorMessageFromError(error)) {\n                    throw new errors_error[\"a\" /* CoreError */](singletons[\"J\" /* Translate */].instant('addon.mod_book.errorchapter'));\n                }\n                throw error;\n            }\n        });\n    }\n    /**\n     * Perform the invalidate content function.\n     *\n     * @return Resolved when done.\n     */\n    invalidateContent() {\n        return services_book[\"a\" /* AddonModBook */].invalidateContent(this.CM_ID, this.COURSE_ID);\n    }\n}\n\n// EXTERNAL MODULE: ./src/core/features/tag/components/components.module.ts\nvar components_module = __webpack_require__(\"yQkb\");\n\n// CONCATENATED MODULE: ./src/addons/mod/book/pages/contents/contents.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: contents_AddonModBookContentsPage,\n    },\n];\nlet contents_module_AddonModBookContentsPageModule = /*@__PURE__*/ (() => {\n    class AddonModBookContentsPageModule {\n    }\n    AddonModBookContentsPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonModBookContentsPageModule });\n    AddonModBookContentsPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonModBookContentsPageModule_Factory(t) { return new (t || AddonModBookContentsPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* CoreTagComponentsModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return AddonModBookContentsPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](contents_module_AddonModBookContentsPageModule, { declarations: [contents_AddonModBookContentsPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* CoreTagComponentsModule */]], exports: [router[\"m\" /* RouterModule */]] });\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}