{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{eoiU:function(t,i,s){\"use strict\";s.d(i,\"a\",(function(){return CoreSwipeNavigationItemsManager}));var o=s(\"mrSG\"),n=s(\"pHTc\"),e=s(\"CtbY\");class CoreSwipeNavigationItemsManager extends e.a{start(){return Object(o.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,\"forward\")}))}navigateToPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,\"back\")}))}hasNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return n.a.getCurrentRoute()}getSelectedItemPathFromRoute(t){const i=[];for(;t&&(i.push(...t.url),t.firstChild);)t=t.firstChild;return i.map((t=>t.path)).join(\"/\").replace(/\\/+/,\"/\").trim()||null}navigateToItemBy(t,i){return Object(o.a)(this,void 0,void 0,(function*(){const s=yield this.getItemBy(t);s&&(yield this.navigateToItem(s,{animationDirection:i,replace:!0}))}))}getItemBy(t){var i;return Object(o.a)(this,void 0,void 0,(function*(){const s=this.getSource().getItems(),o=null!==(i=this.selectedItem&&(null==s?void 0:s.indexOf(this.selectedItem)))&&void 0!==i?i:-1;if(-1===o||null===s)return null;const n=t>0?1:-1;let e=o,c=0;for(;c!==t&&(e+=n,!(e<0||e>=s.length));)this.skipItemInSwipe(s[e])||(c+=n);return c===t?s[e]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(t))}))}skipItemInSwipe(t){return!1}}},v7Sk:function(t,i,s){\"use strict\";s.r(i),s.d(i,\"AddonForumDiscussionPageModule\",(function(){return oi}));var o=s(\"tyNb\"),n=s(\"AzLI\"),e=s(\"MLi9\"),c=s(\"L3Fv\"),a=s(\"mrSG\"),r=s(\"BaYo\"),d=s(\"baaQ\"),u=s(\"hSQQ\"),l=s(\"FLKP\"),m=s(\"y+FG\"),h=s(\"R+GZ\"),_=s(\"4pns\"),f=s(\"TEn/\"),g=s(\"GGba\"),p=s(\"pHTc\"),I=s(\"Y+03\"),P=s(\"9+EE\"),b=s(\"3LXp\"),D=s(\"bFG1\"),v=s(\"j3ag\"),y=s(\"Wsfw\"),A=s(\"6s78\"),M=s(\"fjkH\"),O=s(\"LVzu\"),S=s(\"nFEd\"),F=s(\"ZCW2\"),E=s(\"VF9H\"),T=s(\"h709\"),C=s(\"pET4\"),w=s(\"fXoL\"),x=s(\"46ml\");function AddonModForumDiscussionPage_h1_6_Template(t,i){if(1&t&&(w.Ec(0,\"h1\"),w.zc(1,\"core-format-text\",23),w.Dc()),2&t){const t=w.Oc();w.lc(1),w.Vc(\"text\",t.startingPost.subject)(\"contextInstanceId\",t.cmId)(\"courseId\",t.courseId)}}function AddonModForumDiscussionPage_core_context_menu_item_10_Template(t,i){if(1&t){const t=w.Fc();w.Ec(0,\"core-context-menu-item\",24),w.Mc(\"action\",(function AddonModForumDiscussionPage_core_context_menu_item_10_Template_core_context_menu_item_action_0_listener(i){w.fd(t);return w.Oc().doRefresh(null,i)})),w.Pc(1,\"translate\"),w.Dc()}if(2&t){const t=w.Oc();w.Vc(\"priority\",650)(\"content\",w.Qc(1,4,\"addon.mod_forum.refreshposts\"))(\"iconAction\",t.refreshIcon)(\"closeOnClick\",!1)}}function AddonModForumDiscussionPage_core_context_menu_item_11_Template(t,i){if(1&t){const t=w.Fc();w.Ec(0,\"core-context-menu-item\",24),w.Mc(\"action\",(function AddonModForumDiscussionPage_core_context_menu_item_11_Template_core_context_menu_item_action_0_listener(i){w.fd(t);return w.Oc().doRefresh(null,i,!0)})),w.Pc(1,\"translate\"),w.Dc()}if(2&t){const t=w.Oc();w.Vc(\"priority\",550)(\"content\",w.Qc(1,4,\"core.settings.synchronizenow\"))(\"iconAction\",t.syncIcon)(\"closeOnClick\",!1)}}const _c0=function(t){return{$a:t}};function AddonModForumDiscussionPage_ion_card_37_Template(t,i){if(1&t&&(w.Ec(0,\"ion-card\",25),w.Ec(1,\"ion-item\"),w.zc(2,\"ion-icon\",26),w.Ec(3,\"ion-label\"),w.pd(4),w.Pc(5,\"translate\"),w.Dc(),w.Dc(),w.Dc()),2&t){const t=w.Oc();w.lc(4),w.qd(w.Rc(5,1,\"core.hasdatatosync\",w.ad(4,_c0,t.discussionStr)))}}function AddonModForumDiscussionPage_ion_card_38_Template(t,i){if(1&t&&(w.Ec(0,\"ion-card\",27),w.Ec(1,\"ion-item\"),w.zc(2,\"ion-icon\",28),w.Ec(3,\"ion-label\"),w.pd(4),w.Dc(),w.Dc(),w.Dc()),2&t){const t=w.Oc();w.lc(4),w.qd(t.availabilityMessage)}}function AddonModForumDiscussionPage_ion_card_39_Template(t,i){1&t&&(w.Ec(0,\"ion-card\",27),w.Ec(1,\"ion-item\"),w.zc(2,\"ion-icon\",29),w.Ec(3,\"ion-label\"),w.pd(4),w.Pc(5,\"translate\"),w.Dc(),w.Dc(),w.Dc()),2&t&&(w.lc(4),w.qd(w.Qc(5,1,\"addon.mod_forum.discussionlocked\")))}function AddonModForumDiscussionPage_ion_card_40_Template(t,i){1&t&&(w.Ec(0,\"ion-card\",27),w.Ec(1,\"ion-item\"),w.zc(2,\"ion-icon\",28),w.Ec(3,\"ion-label\"),w.pd(4),w.Pc(5,\"translate\"),w.Dc(),w.Dc(),w.Dc()),2&t&&(w.lc(4),w.qd(w.Qc(5,1,\"addon.mod_forum.qandanotify\")))}function AddonModForumDiscussionPage_div_41_Template(t,i){if(1&t){const t=w.Fc();w.Ec(0,\"div\",30),w.Ec(1,\"addon-mod-forum-post\",31),w.Mc(\"onPostChange\",(function AddonModForumDiscussionPage_div_41_Template_addon_mod_forum_post_onPostChange_1_listener(){w.fd(t);return w.Oc().postListChanged()})),w.Dc(),w.Dc()}if(2&t){const t=w.Oc();w.lc(1),w.Vc(\"post\",t.startingPost)(\"discussion\",t.discussion)(\"courseId\",t.courseId)(\"highlight\",!0)(\"discussionId\",t.discussionId)(\"component\",t.component)(\"componentId\",t.cmId)(\"formData\",t.formData)(\"originalData\",t.originalData)(\"forum\",t.forum)(\"accessInfo\",t.accessInfo)(\"trackPosts\",t.trackPosts)(\"ratingInfo\",t.ratingInfo)(\"leavingPage\",t.leavingPage)}}function AddonModForumDiscussionPage_ion_card_42_ng_container_1_core_spacer_1_Template(t,i){1&t&&w.zc(0,\"core-spacer\")}function AddonModForumDiscussionPage_ion_card_42_ng_container_1_Template(t,i){if(1&t){const t=w.Fc();w.Cc(0),w.nd(1,AddonModForumDiscussionPage_ion_card_42_ng_container_1_core_spacer_1_Template,1,0,\"core-spacer\",2),w.Ec(2,\"addon-mod-forum-post\",33),w.Mc(\"onPostChange\",(function AddonModForumDiscussionPage_ion_card_42_ng_container_1_Template_addon_mod_forum_post_onPostChange_2_listener(){w.fd(t);return w.Oc(2).postListChanged()})),w.Dc(),w.Bc()}if(2&t){const t=i.$implicit,s=i.first,o=w.Oc(2);w.lc(1),w.Vc(\"ngIf\",!s),w.lc(1),w.Vc(\"post\",t)(\"courseId\",o.courseId)(\"discussionId\",o.discussionId)(\"component\",o.component)(\"componentId\",o.cmId)(\"formData\",o.formData)(\"originalData\",o.originalData)(\"parentSubject\",o.postSubjects[t.parentid])(\"forum\",o.forum)(\"accessInfo\",o.accessInfo)(\"trackPosts\",o.trackPosts)(\"ratingInfo\",o.ratingInfo)(\"leavingPage\",o.leavingPage)}}function AddonModForumDiscussionPage_ion_card_42_Template(t,i){if(1&t&&(w.Ec(0,\"ion-card\"),w.nd(1,AddonModForumDiscussionPage_ion_card_42_ng_container_1_Template,3,14,\"ng-container\",32),w.Dc()),2&t){const t=w.Oc();w.lc(1),w.Vc(\"ngForOf\",t.posts)}}function AddonModForumDiscussionPage_ng_container_43_ng_container_1_ng_container_1_Template(t,i){1&t&&w.Ac(0)}const _c1=function(t){return{post:t}};function AddonModForumDiscussionPage_ng_container_43_ng_container_1_Template(t,i){if(1&t&&(w.Cc(0),w.nd(1,AddonModForumDiscussionPage_ng_container_43_ng_container_1_ng_container_1_Template,1,0,\"ng-container\",34),w.Bc()),2&t){const t=i.$implicit;w.Oc(2);const s=w.ed(45);w.lc(1),w.Vc(\"ngTemplateOutlet\",s)(\"ngTemplateOutletContext\",w.ad(2,_c1,t))}}function AddonModForumDiscussionPage_ng_container_43_Template(t,i){if(1&t&&(w.Cc(0),w.nd(1,AddonModForumDiscussionPage_ng_container_43_ng_container_1_Template,2,4,\"ng-container\",32),w.Bc()),2&t){const t=w.Oc();w.lc(1),w.Vc(\"ngForOf\",t.posts)}}function AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_ng_container_1_Template(t,i){1&t&&w.Ac(0)}function AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_Template(t,i){if(1&t&&(w.Cc(0),w.nd(1,AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_ng_container_1_Template,1,0,\"ng-container\",34),w.Bc()),2&t){const t=i.$implicit;w.Oc(3);const s=w.ed(45);w.lc(1),w.Vc(\"ngTemplateOutlet\",s)(\"ngTemplateOutletContext\",w.ad(2,_c1,t))}}function AddonModForumDiscussionPage_ng_template_44_div_2_Template(t,i){if(1&t&&(w.Ec(0,\"div\",36),w.nd(1,AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_Template,2,4,\"ng-container\",32),w.Dc()),2&t){const t=w.Oc().post;w.lc(1),w.Vc(\"ngForOf\",t.children)}}function AddonModForumDiscussionPage_ng_template_44_Template(t,i){if(1&t){const t=w.Fc();w.Ec(0,\"ion-card\"),w.Ec(1,\"addon-mod-forum-post\",33),w.Mc(\"onPostChange\",(function AddonModForumDiscussionPage_ng_template_44_Template_addon_mod_forum_post_onPostChange_1_listener(){w.fd(t);return w.Oc().postListChanged()})),w.Dc(),w.Dc(),w.nd(2,AddonModForumDiscussionPage_ng_template_44_div_2_Template,2,1,\"div\",35)}if(2&t){const t=i.post,s=w.Oc();w.lc(1),w.Vc(\"post\",t)(\"courseId\",s.courseId)(\"discussionId\",s.discussionId)(\"component\",s.component)(\"componentId\",s.cmId)(\"formData\",s.formData)(\"originalData\",s.originalData)(\"parentSubject\",s.postSubjects[t.parentid])(\"forum\",s.forum)(\"accessInfo\",s.accessInfo)(\"trackPosts\",s.trackPosts)(\"ratingInfo\",s.ratingInfo)(\"leavingPage\",s.leavingPage),w.lc(1),w.Vc(\"ngIf\",t.children&&t.children.length&&t.children[0].subject)}}let k=(()=>{class AddonModForumDiscussionPage{constructor(t,i,s){this.splitView=t,this.elementRef=i,this.route=s,this.forum={},this.accessInfo={},this.posts=[],this.discussionLoaded=!1,this.sort=\"nested\",this.formData={replyingTo:0,isEditing:!1,subject:\"\",message:null,files:[],isprivatereply:!1},this.originalData={subject:null,message:null,files:[],isprivatereply:!1},this.refreshIcon=r.a.ICON_LOADING,this.syncIcon=r.a.ICON_LOADING,this.discussionStr=\"\",this.component=F.b.COMPONENT,this.canPin=!1,this.availabilityMessage=null,this.showQAMessage=!1,this.leavingPage=!1,this.hasOfflineRatings=!1}get isMobile(){return I.a.isMobile}ngOnInit(){var t,i,s;return Object(a.a)(this,void 0,void 0,(function*(){try{const s=this.route.snapshot.data;this.courseId=p.a.getRouteNumberParam(\"courseId\"),this.cmId=p.a.getRouteNumberParam(\"cmId\"),this.forumId=p.a.getRouteNumberParam(\"forumId\"),this.discussion=p.a.getRouteParam(\"discussion\"),this.discussionId=this.discussion?this.discussion.discussion:p.a.getRequiredRouteNumberParam(\"discussionId\"),this.trackPosts=p.a.getRouteBooleanParam(\"trackPosts\")||!1,this.postId=p.a.getRouteNumberParam(\"postId\"),this.parent=p.a.getRouteNumberParam(\"parent\"),this.courseId&&this.cmId&&(null===(t=s.swipeEnabled)||void 0===t||t)&&(this.discussions=new discussion_page_AddonModForumDiscussionDiscussionsSwipeManager(d.a.getOrCreateSource(O.a,[this.courseId,this.cmId,null!==(i=s.discussionsPathPrefix)&&void 0!==i?i:\"\"])),yield this.discussions.start())}catch(t){return b.a.showErrorModal(t),this.goBack(),void 0}this.isOnline=g.a.isOnline(),this.externalUrl=null===(s=P.b.getCurrentSite())||void 0===s?void 0:s.createSiteUrl(\"/mod/forum/discuss.php\",{d:this.discussionId.toString()}),this.onlineObserver=g.a.onChange().subscribe((()=>{v.A.run((()=>{this.isOnline=g.a.isOnline()}))})),this.discussionStr=v.J.instant(\"addon.mod_forum.discussion\")}))}ngAfterViewInit(){return Object(a.a)(this,void 0,void 0,(function*(){this.sort=this.parent?\"nested\":yield this.getUserSort(),yield this.fetchPosts(!0,!1,!0);const t=this.postId||this.parent;t&&A.a.scrollToElement(this.elementRef.nativeElement,\"#addon-mod_forum-post-\"+t)}))}ionViewDidEnter(){return Object(a.a)(this,void 0,void 0,(function*(){if(this.syncObserver)return;this.discussion||(yield this.loadDiscussion(this.discussionId,this.forumId,this.cmId));const t=this.discussion;this.syncObserver=M.b.on(C.b.AUTO_SYNCED,(t=>{t.forumId==this.forumId&&this.discussionId==t.discussionId&&t.userId==P.b.getCurrentSiteUserId()&&(this.discussionLoaded=!1,this.refreshPosts())}),P.b.getCurrentSiteId()),this.syncManualObserver=M.b.on(C.b.MANUAL_SYNCED,(t=>{\"discussion\"!=t.source&&t.forumId==this.forumId&&t.userId==P.b.getCurrentSiteUserId()&&(this.discussionLoaded=!1,this.refreshPosts())}),P.b.getCurrentSiteId()),this.forumId&&t&&t.numunread>0&&F.a.invalidateDiscussionsList(this.forumId),this.ratingOfflineObserver=M.b.on(l.b.RATING_SAVED_EVENT,(t=>{\"mod_forum\"==t.component&&\"post\"==t.ratingArea&&\"module\"==t.contextLevel&&t.instanceId==this.cmId&&t.itemSetId==this.discussionId&&(this.hasOfflineRatings=!0)})),this.ratingSyncObserver=M.b.on(h.b.SYNCED_EVENT,(t=>Object(a.a)(this,void 0,void 0,(function*(){\"mod_forum\"==t.component&&\"post\"==t.ratingArea&&\"module\"==t.contextLevel&&t.instanceId==this.cmId&&t.itemSetId==this.discussionId&&(this.hasOfflineRatings=!1)})))),this.changeDiscObserver=M.b.on(F.b.CHANGE_DISCUSSION_EVENT,(i=>{t&&this.forumId&&(this.forumId===i.forumId||i.cmId===this.cmId)&&F.a.invalidateDiscussionsList(this.forumId).finally((()=>{var s;void 0!==i.locked&&(t.locked=i.locked),void 0!==i.pinned&&(t.pinned=i.pinned),void 0!==i.starred&&(t.starred=i.starred),void 0!==i.deleted&&i.deleted&&((null===(s=i.post)||void 0===s?void 0:s.parentid)?(this.discussionLoaded=!1,this.refreshPosts()):this.goBack())}))}))}))}canLeave(){return Object(a.a)(this,void 0,void 0,(function*(){return E.a.hasPostDataChanged(this.formData,this.originalData)&&(yield b.a.showConfirm(v.J.instant(\"core.confirmcanceledit\"))),u.a.clearTmpFiles(this.formData.files),this.leavingPage=!0,!0}))}goBack(){var t;this.leavingPage||((null===(t=this.splitView)||void 0===t?void 0:t.outletActivated)?p.a.navigate(\"../\"):p.a.back())}ionViewWillLeave(){this.syncObserver&&this.syncObserver.off(),this.syncManualObserver&&this.syncManualObserver.off(),this.ratingOfflineObserver&&this.ratingOfflineObserver.off(),this.ratingSyncObserver&&this.ratingSyncObserver.off(),this.changeDiscObserver&&this.changeDiscObserver.off(),delete this.syncObserver}ngOnDestroy(){this.onlineObserver&&this.onlineObserver.unsubscribe(),this.discussions&&this.discussions.destroy()}getUserSort(){return Object(a.a)(this,void 0,void 0,(function*(){try{return yield P.b.getRequiredCurrentSite().getLocalSiteConfig(\"AddonModForumDiscussionSort\")}catch(t){try{const t=yield _.a.getUserPreference(\"forum_displaymode\");switch(Number(t)){case 1:return\"flat-oldest\";case-1:return\"flat-newest\";case 3:return\"nested\"}}catch(t){}}return\"flat-oldest\"}))}fetchForum(){if(this.courseId&&this.cmId)return F.a.getForum(this.courseId,this.cmId);if(this.courseId&&this.forumId)return F.a.getForumById(this.courseId,this.forumId);throw new Error(\"Cannot get the forum\")}fetchPosts(t,i,s){return Object(a.a)(this,void 0,void 0,(function*(){let o=[];const n=[];let e=!1;try{t&&(yield D.a.ignoreErrors(this.syncDiscussion(!!i)));const c=yield F.a.getDiscussionPosts(this.discussionId,{cmId:this.cmId}),d=yield T.a.getDiscussionReplies(this.discussionId);this.ratingInfo=c.ratinginfo,o=c.posts,this.courseId=c.courseid||this.courseId,this.forumId=c.forumid||this.forumId,this.postHasOffline=!!d.length;const u=[],l={};o.forEach((t=>{l[t.id]=t,e=e||!!t.unread})),d.forEach((t=>{this.forumId||(this.forumId=t.forumid),this.courseId||(this.courseId=t.courseid),u.push(E.a.instance.convertOfflineReplyToOnline(t).then((t=>Object(a.a)(this,void 0,void 0,(function*(){n.push(t),t.parentid&&(l[t.parentid].capabilities.reply=!1)})))))})),yield Promise.all(u),o=D.a.objectToArray(l);let h=n.concat(o);if(this.startingPost=F.a.extractStartingPost(h),\"nested\"==this.sort){F.a.sortDiscussionPosts(h,\"ASC\");h=D.a.formatTree(h,\"parentid\",\"id\",this.startingPost?this.startingPost.id:this.discussion?this.discussion.id:0)}else{F.a.sortDiscussionPosts(h,\"flat-newest\"==this.sort?\"DESC\":\"ASC\")}try{const t=yield this.fetchForum();void 0!==t.istracked&&(this.trackPosts=t.istracked),this.forumId=t.id,this.cmId=t.cmid,this.courseId=t.course,this.forum=t,this.availabilityMessage=E.a.getAvailabilityMessage(t);const i=[];i.push(F.a.instance.getAccessInformation(this.forumId,{cmId:this.cmId}).then((i=>Object(a.a)(this,void 0,void 0,(function*(){this.accessInfo=i,E.a.isCutoffDateReached(t)&&!i.cancanoverridecutoff&&h.forEach((t=>{t.capabilities.reply=!1}));const s=P.b.getCurrentSiteUserId();this.showQAMessage=\"qanda\"===t.type&&!i.canviewqandawithoutposting&&!h.some((t=>t.author.id===s))}))))),this.discussion||i.push(this.loadDiscussion(this.discussionId,this.forumId,this.cmId)),yield Promise.all(i)}catch(t){}if(!this.discussion&&!this.startingPost)throw new Error(\"Invalid forum discussion.\");if(this.startingPost&&this.startingPost.author&&\"single\"==this.forum.type&&(delete this.startingPost.author.fullname,delete this.startingPost.author.groups),this.posts=h,this.postSubjects=this.getAllPosts().reduce(((t,i)=>(t[i.id]=i.subject,t)),this.startingPost?{[this.startingPost.id]:this.startingPost.subject}:{}),F.a.isSetPinStateAvailableForSite()&&this.forumId)try{const t=yield F.a.canAddDiscussionToAll(this.forumId,{cmId:this.cmId});this.canPin=!!t.canpindiscussions}catch(t){this.canPin=!1}else this.canPin=!1;this.hasOfflineRatings=yield m.a.hasRatings(\"mod_forum\",\"post\",\"module\",this.cmId,this.discussionId)}catch(t){b.a.showErrorModal(t)}finally{this.discussionLoaded=!0,this.refreshIcon=r.a.ICON_REFRESH,this.syncIcon=r.a.ICON_SYNC,(s||e&&this.trackPosts)&&F.a.logDiscussionView(this.discussionId,this.forumId||-1,this.forum.name).catch((()=>{})).finally((()=>{this.courseId&&this.cmId&&M.b.trigger(F.b.MARK_READ_EVENT,{courseId:this.courseId,moduleId:this.cmId},P.b.getCurrentSiteId())}))}}))}loadDiscussion(t,i,s){return Object(a.a)(this,void 0,void 0,(function*(){!this.discussion&&i&&s&&(this.discussion=yield E.a.getDiscussionById(i,s,t),this.discussionId=this.discussion.discussion)}))}syncDiscussion(t){return Object(a.a)(this,void 0,void 0,(function*(){const i=[];i.push(C.a.instance.syncDiscussionReplies(this.discussionId).then((t=>{t.warnings&&t.warnings.length&&b.a.showErrorModal(t.warnings[0]),t&&t.updated&&this.forumId&&M.b.trigger(C.b.MANUAL_SYNCED,{forumId:this.forumId,userId:P.b.getCurrentSiteUserId(),source:\"discussion\"},P.b.getCurrentSiteId())}))),i.push(C.a.instance.syncRatings(this.cmId,this.discussionId).then((t=>{t.warnings&&t.warnings.length&&b.a.showErrorModal(t.warnings[0])})));try{yield Promise.all(i)}catch(i){throw t&&b.a.showErrorModalDefault(i,\"core.errorsync\",!0),new Error(\"Failed syncing discussion\")}}))}doRefresh(t,i,s=!1){return Object(a.a)(this,void 0,void 0,(function*(){this.discussionLoaded&&(yield this.refreshPosts(!0,s).finally((()=>{null==t?void 0:t.complete(),i&&i()})))}))}refreshPosts(t,i){return Object(a.a)(this,void 0,void 0,(function*(){this.content.scrollToTop(),this.refreshIcon=r.a.ICON_LOADING,this.syncIcon=r.a.ICON_LOADING;const s=[];this.courseId&&s.push(F.a.invalidateForumData(this.courseId)),s.push(F.a.invalidateDiscussionPosts(this.discussionId,this.forumId)),this.forumId&&s.push(F.a.invalidateAccessInformation(this.forumId)),this.forumId&&s.push(F.a.invalidateCanAddDiscussion(this.forumId)),yield D.a.ignoreErrors(D.a.allPromises(s)),yield this.fetchPosts(t,i)}))}changeSort(t){return this.discussionLoaded=!1,this.sort=t,P.b.getRequiredCurrentSite().setLocalSiteConfig(\"AddonModForumDiscussionSort\",this.sort),this.content.scrollToTop(),this.fetchPosts()}setLockState(t){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.discussion||!this.forumId||!this.cmId)return;const i=yield b.a.showModalLoading(\"core.sending\",!0);try{const s=yield F.a.setLockState(this.forumId,this.discussionId,t);this.discussion.locked=s.locked;M.b.trigger(F.b.CHANGE_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId,locked:this.discussion.locked},P.b.getCurrentSiteId()),b.a.showToast(\"addon.mod_forum.lockupdated\",!0)}catch(t){b.a.showErrorModal(t)}finally{i.dismiss()}}))}setPinState(t){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.discussion||!this.forumId||!this.cmId)return;const i=yield b.a.showModalLoading(\"core.sending\",!0);try{yield F.a.setPinState(this.discussionId,t),this.discussion.pinned=t;M.b.trigger(F.b.CHANGE_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId,pinned:this.discussion.pinned},P.b.getCurrentSiteId()),b.a.showToast(\"addon.mod_forum.pinupdated\",!0)}catch(t){b.a.showErrorModal(t)}finally{i.dismiss()}}))}toggleFavouriteState(t){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.discussion||!this.forumId||!this.cmId)return;const i=yield b.a.showModalLoading(\"core.sending\",!0);try{yield F.a.toggleFavouriteState(this.discussionId,t),this.discussion.starred=t;M.b.trigger(F.b.CHANGE_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId,starred:this.discussion.starred},P.b.getCurrentSiteId()),b.a.showToast(\"addon.mod_forum.favouriteupdated\",!0)}catch(t){b.a.showErrorModal(t)}finally{i.dismiss()}}))}postListChanged(){if(!this.forumId||!this.cmId)return;M.b.trigger(F.b.REPLY_DISCUSSION_EVENT,{forumId:this.forumId,discussionId:this.discussionId,cmId:this.cmId},P.b.getCurrentSiteId()),this.discussionLoaded=!1,this.refreshPosts().finally((()=>{this.discussionLoaded=!0}))}getAllPosts(){const t=this.posts.map((t=>this.flattenPostHierarchy(t)));return y.a.flatten(t)}flattenPostHierarchy(t){const i=[t],s=t.children||[];for(const t of s)i.push(...this.flattenPostHierarchy(t));return i}}return AddonModForumDiscussionPage.ɵfac=function AddonModForumDiscussionPage_Factory(t){return new(t||AddonModForumDiscussionPage)(w.yc(x.a,8),w.yc(w.r),w.yc(o.a))},AddonModForumDiscussionPage.ɵcmp=w.sc({type:AddonModForumDiscussionPage,selectors:[[\"page-addon-mod-forum-discussion\"]],viewQuery:function AddonModForumDiscussionPage_Query(t,i){var s;(1&t&&w.ud(f.v,!0),2&t)&&(w.dd(s=w.Nc())&&(i.content=s.first))},decls:46,vars:73,consts:[[\"slot\",\"start\"],[3,\"text\"],[4,\"ngIf\"],[\"slot\",\"end\"],[3,\"priority\",\"content\",\"iconAction\",\"closeOnClick\",\"action\",4,\"ngIf\"],[\"iconAction\",\"fas-arrow-down\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-arrow-up\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-exchange-alt\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-lock\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-unlock\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-map-pin\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-map-pin\",3,\"hidden\",\"priority\",\"content\",\"iconSlash\",\"action\"],[\"iconAction\",\"fas-star\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-star\",3,\"hidden\",\"priority\",\"content\",\"iconSlash\",\"action\"],[\"iconAction\",\"fas-external-link-alt\",3,\"hidden\",\"priority\",\"content\",\"href\",\"showBrowserWarning\"],[1,\"limited-width\",3,\"core-swipe-navigation\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[\"class\",\"core-warning-card\",4,\"ngIf\"],[\"class\",\"core-info-card\",4,\"ngIf\"],[\"class\",\"ion-margin-bottom\",4,\"ngIf\"],[\"nestedPosts\",\"\"],[\"contextLevel\",\"module\",3,\"text\",\"contextInstanceId\",\"courseId\"],[3,\"priority\",\"content\",\"iconAction\",\"closeOnClick\",\"action\"],[1,\"core-warning-card\"],[\"name\",\"fas-exclamation-triangle\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[1,\"core-info-card\"],[\"name\",\"fas-info-circle\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[\"name\",\"fas-lock\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[1,\"ion-margin-bottom\"],[3,\"post\",\"discussion\",\"courseId\",\"highlight\",\"discussionId\",\"component\",\"componentId\",\"formData\",\"originalData\",\"forum\",\"accessInfo\",\"trackPosts\",\"ratingInfo\",\"leavingPage\",\"onPostChange\"],[4,\"ngFor\",\"ngForOf\"],[3,\"post\",\"courseId\",\"discussionId\",\"component\",\"componentId\",\"formData\",\"originalData\",\"parentSubject\",\"forum\",\"accessInfo\",\"trackPosts\",\"ratingInfo\",\"leavingPage\",\"onPostChange\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[\"class\",\"ion-padding-start\",4,\"ngIf\"],[1,\"ion-padding-start\"]],template:function AddonModForumDiscussionPage_Template(t,i){1&t&&(w.Ec(0,\"ion-header\"),w.Ec(1,\"ion-toolbar\"),w.Ec(2,\"ion-buttons\",0),w.zc(3,\"ion-back-button\",1),w.Pc(4,\"translate\"),w.Dc(),w.Ec(5,\"ion-title\"),w.nd(6,AddonModForumDiscussionPage_h1_6_Template,2,3,\"h1\",2),w.Dc(),w.zc(7,\"ion-buttons\",3),w.Dc(),w.Dc(),w.Ec(8,\"core-navbar-buttons\",3),w.Ec(9,\"core-context-menu\"),w.nd(10,AddonModForumDiscussionPage_core_context_menu_item_10_Template,2,6,\"core-context-menu-item\",4),w.nd(11,AddonModForumDiscussionPage_core_context_menu_item_11_Template,2,6,\"core-context-menu-item\",4),w.Ec(12,\"core-context-menu-item\",5),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_12_listener(){return i.changeSort(\"flat-oldest\")})),w.Pc(13,\"translate\"),w.Dc(),w.Ec(14,\"core-context-menu-item\",6),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_14_listener(){return i.changeSort(\"flat-newest\")})),w.Pc(15,\"translate\"),w.Dc(),w.Ec(16,\"core-context-menu-item\",7),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_16_listener(){return i.changeSort(\"nested\")})),w.Pc(17,\"translate\"),w.Dc(),w.Ec(18,\"core-context-menu-item\",8),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_18_listener(){return i.setLockState(!0)})),w.Pc(19,\"translate\"),w.Dc(),w.Ec(20,\"core-context-menu-item\",9),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_20_listener(){return i.setLockState(!1)})),w.Pc(21,\"translate\"),w.Dc(),w.Ec(22,\"core-context-menu-item\",10),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_22_listener(){return i.setPinState(!0)})),w.Pc(23,\"translate\"),w.Dc(),w.Ec(24,\"core-context-menu-item\",11),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_24_listener(){return i.setPinState(!1)})),w.Pc(25,\"translate\"),w.Dc(),w.Ec(26,\"core-context-menu-item\",12),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_26_listener(){return i.toggleFavouriteState(!0)})),w.Pc(27,\"translate\"),w.Dc(),w.Ec(28,\"core-context-menu-item\",13),w.Mc(\"action\",(function AddonModForumDiscussionPage_Template_core_context_menu_item_action_28_listener(){return i.toggleFavouriteState(!1)})),w.Pc(29,\"translate\"),w.Dc(),w.zc(30,\"core-context-menu-item\",14),w.Pc(31,\"translate\"),w.Dc(),w.Dc(),w.Ec(32,\"ion-content\",15),w.Ec(33,\"ion-refresher\",16),w.Mc(\"ionRefresh\",(function AddonModForumDiscussionPage_Template_ion_refresher_ionRefresh_33_listener(t){return i.doRefresh(t.target)})),w.zc(34,\"ion-refresher-content\",17),w.Pc(35,\"translate\"),w.Dc(),w.Ec(36,\"core-loading\",18),w.nd(37,AddonModForumDiscussionPage_ion_card_37_Template,6,6,\"ion-card\",19),w.nd(38,AddonModForumDiscussionPage_ion_card_38_Template,5,1,\"ion-card\",20),w.nd(39,AddonModForumDiscussionPage_ion_card_39_Template,6,3,\"ion-card\",20),w.nd(40,AddonModForumDiscussionPage_ion_card_40_Template,6,3,\"ion-card\",20),w.nd(41,AddonModForumDiscussionPage_div_41_Template,2,14,\"div\",21),w.nd(42,AddonModForumDiscussionPage_ion_card_42_Template,2,1,\"ion-card\",2),w.nd(43,AddonModForumDiscussionPage_ng_container_43_Template,2,1,\"ng-container\",2),w.nd(44,AddonModForumDiscussionPage_ng_template_44_Template,3,14,\"ng-template\",null,22,w.od),w.Dc(),w.Dc()),2&t&&(w.lc(3),w.Vc(\"text\",w.Qc(4,49,\"core.back\")),w.lc(3),w.Vc(\"ngIf\",i.startingPost),w.lc(4),w.Vc(\"ngIf\",i.discussionLoaded&&!i.postHasOffline&&i.isOnline),w.lc(1),w.Vc(\"ngIf\",i.discussionLoaded&&i.isMobile&&i.postHasOffline&&i.isOnline),w.lc(1),w.Vc(\"hidden\",\"flat-oldest\"==i.sort)(\"priority\",500)(\"content\",w.Qc(13,51,\"addon.mod_forum.modeflatoldestfirst\")),w.lc(2),w.Vc(\"hidden\",\"flat-newest\"==i.sort)(\"priority\",450)(\"content\",w.Qc(15,53,\"addon.mod_forum.modeflatnewestfirst\")),w.lc(2),w.Vc(\"hidden\",\"nested\"==i.sort)(\"priority\",400)(\"content\",w.Qc(17,55,\"addon.mod_forum.modenested\")),w.lc(2),w.Vc(\"hidden\",!i.discussion||!i.discussion.canlock||i.discussion.locked)(\"priority\",300)(\"content\",w.Qc(19,57,\"addon.mod_forum.lockdiscussion\")),w.lc(2),w.Vc(\"hidden\",!i.discussion||!i.discussion.canlock||!i.discussion.locked)(\"priority\",300)(\"content\",w.Qc(21,59,\"addon.mod_forum.unlockdiscussion\")),w.lc(2),w.Vc(\"hidden\",!i.discussion||!i.canPin||i.discussion.pinned)(\"priority\",250)(\"content\",w.Qc(23,61,\"addon.mod_forum.pindiscussion\")),w.lc(2),w.Vc(\"hidden\",!i.discussion||!i.canPin||!i.discussion.pinned)(\"priority\",250)(\"content\",w.Qc(25,63,\"addon.mod_forum.unpindiscussion\"))(\"iconSlash\",!0),w.lc(2),w.Vc(\"hidden\",!i.discussion||!i.discussion.canfavourite||i.discussion.starred)(\"priority\",200)(\"content\",w.Qc(27,65,\"addon.mod_forum.addtofavourites\")),w.lc(2),w.Vc(\"hidden\",!i.discussion||!i.discussion.canfavourite||!i.discussion.starred)(\"priority\",200)(\"content\",w.Qc(29,67,\"addon.mod_forum.removefromfavourites\"))(\"iconSlash\",!0),w.lc(2),w.Vc(\"hidden\",!i.externalUrl)(\"priority\",100)(\"content\",w.Qc(31,69,\"core.openinbrowser\"))(\"href\",i.externalUrl)(\"showBrowserWarning\",!1),w.lc(2),w.Vc(\"core-swipe-navigation\",i.discussions),w.lc(1),w.Vc(\"disabled\",!i.discussionLoaded),w.lc(1),w.Wc(\"pullingText\",w.Qc(35,71,\"core.pulltorefresh\")),w.lc(2),w.Vc(\"hideUntil\",i.discussionLoaded),w.lc(1),w.Vc(\"ngIf\",i.postHasOffline||i.hasOfflineRatings),w.lc(1),w.Vc(\"ngIf\",i.availabilityMessage),w.lc(1),w.Vc(\"ngIf\",i.discussion&&i.discussion.locked),w.lc(1),w.Vc(\"ngIf\",i.showQAMessage),w.lc(1),w.Vc(\"ngIf\",i.startingPost),w.lc(1),w.Vc(\"ngIf\",\"nested\"!=i.sort&&i.posts.length),w.lc(1),w.Vc(\"ngIf\",\"nested\"==i.sort&&i.posts.length))},styles:[\"[_nghost-%COMP%]   .addon-forum-reply-button[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0}\"]}),AddonModForumDiscussionPage})();class discussion_page_AddonModForumDiscussionDiscussionsSwipeManager extends S.a{getSelectedItemPathFromRoute(t){return this.getSource().DISCUSSIONS_PATH_PREFIX+t.params.discussionId}}var N=s(\"ofXK\"),V=s(\"M9y5\"),L=s(\"aEIl\"),R=s(\"3zv0\"),j=s(\"Lmwl\"),Q=s(\"4qNr\"),U=s(\"fQ68\"),B=s(\"8/N+\"),H=s(\"0QZc\"),G=s(\"uHIS\"),z=s(\"w+Pn\"),q=s(\"r8G5\"),J=s(\"5450\"),Y=s(\"W5pS\"),W=s(\"WPIK\"),K=s(\"p+Qc\"),X=s(\"qNqN\"),Z=s(\"xpMl\"),$=s(\"FTxb\"),tt=s(\"PgjG\"),it=s(\"/K1O\"),st=s(\"FasJ\"),ot=s(\"9pYf\"),nt=s(\"eAud\"),et=s(\"ACV2\"),ct=s(\"/BoF\"),at=s(\"TKc2\"),rt=s(\"whRm\"),dt=s(\"O4u7\"),ut=s(\"lqoc\"),lt=s(\"3lz8\"),mt=s(\"QQhE\"),ht=s(\"MpCO\"),_t=s(\"JYLr\"),ft=s(\"vWwc\"),gt=s(\"NhJP\"),pt=s(\"rztj\"),It=s(\"FeAf\"),Pt=s(\"rf3J\"),bt=s(\"nEkO\"),Dt=s(\"TF0o\"),vt=s(\"p5uK\"),yt=s(\"6uVz\"),At=s(\"d0nH\"),Mt=s(\"NcPy\"),Ot=s(\"yNDK\"),St=s(\"3CSS\"),Ft=s(\"hMzs\"),Et=s(\"iSJP\"),Tt=s(\"iJls\"),Ct=s(\"ArDJ\"),wt=s(\"nu3w\"),xt=s(\"saTE\"),kt=s(\"8PoL\"),Nt=s(\"4a38\"),Vt=s(\"4JiN\"),Lt=s(\"OZH1\"),Rt=s(\"edOc\"),jt=s(\"3jOR\"),Qt=s(\"nt/U\"),Ut=s(\"ACYt\"),Bt=s(\"6A9T\"),Ht=s(\"3Pt+\"),Gt=s(\"sYmb\"),zt=s(\"GsO6\"),qt=s(\"L5yw\"),Jt=s(\"1iFe\"),Yt=s(\"dne1\"),Wt=s(\"Cg42\"),Kt=s(\"llyR\"),Xt=s(\"uYHD\"),Zt=s(\"SspJ\"),$t=s(\"U2xU\"),ti=s(\"lAaw\"),ii=s(\"1ArG\");const si=[{path:\"\",component:k,canDeactivate:[e.a]}];let oi=(()=>{class AddonForumDiscussionPageModule{}return AddonForumDiscussionPageModule.ɵmod=w.wc({type:AddonForumDiscussionPageModule}),AddonForumDiscussionPageModule.ɵinj=w.vc({factory:function AddonForumDiscussionPageModule_Factory(t){return new(t||AddonForumDiscussionPageModule)},imports:[[o.m.forChild(si),c.a,n.a]]}),AddonForumDiscussionPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&w.kd(oi,{declarations:[k],imports:[o.m,c.a,n.a]})),w.jd(k,[o.n,o.j,o.l,o.k,o.p,N.q,N.r,N.s,N.t,N.A,N.w,N.x,N.y,N.z,N.u,N.v,V.a,L.a,R.a,j.a,Q.a,U.a,B.a,H.a,G.a,z.a,q.a,J.a,Y.a,W.a,K.a,X.a,Z.a,$.a,tt.a,it.a,st.a,ot.a,nt.a,et.a,ct.a,at.a,rt.a,dt.a,ut.a,lt.a,x.a,mt.a,ht.a,_t.a,ft.a,gt.a,pt.a,It.a,Pt.a,bt.a,Dt.a,vt.a,yt.a,At.a,Mt.a,Ot.a,St.a,Ft.a,Et.a,Tt.a,Ct.a,wt.a,xt.a,kt.a,Nt.a,Vt.b,Lt.a,Rt.a,jt.a,Qt.a,Ut.a,Bt.a,Ht.H,Ht.w,Ht.G,Ht.c,Ht.x,Ht.A,Ht.a,Ht.D,Ht.E,Ht.z,Ht.r,Ht.s,Ht.C,Ht.o,Ht.n,Ht.y,Ht.b,Ht.d,Ht.u,Ht.v,Ht.t,f.f,f.g,f.h,f.j,f.k,f.l,f.m,f.n,f.o,f.p,f.q,f.r,f.s,f.t,f.u,f.v,f.w,f.x,f.y,f.z,f.A,f.B,f.C,f.D,f.E,f.F,f.G,f.H,f.I,f.J,f.K,f.L,f.M,f.N,f.O,f.P,f.Q,f.R,f.S,f.T,f.U,f.V,f.W,f.X,f.Y,f.Z,f.ab,f.bb,f.cb,f.db,f.eb,f.fb,f.hb,f.ib,f.jb,f.kb,f.lb,f.mb,f.nb,f.ob,f.pb,f.qb,f.rb,f.sb,f.tb,f.vb,f.wb,f.xb,f.zb,f.Ab,f.yb,f.ub,f.d,f.Jb,f.Mb,f.Ob,f.Pb,f.gb,f.i,f.Hb,f.Nb,f.Rb,f.Sb,f.Tb,f.Bb,Ht.h,Ht.k,Ht.i,Ht.l,Ht.e,Gt.a,zt.a,qt.a,k],[N.b,N.G,N.p,N.k,N.E,N.g,N.C,N.F,N.d,N.f,N.i,N.j,N.l,Jt.a,Yt.a,Wt.a,Kt.a,Xt.a,Zt.a,$t.a,ti.a,ii.a,Gt.d])}}]);","name":"3.3c48e31d8edd9287ddda.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[3],{\n\n/***/ \"eoiU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CoreSwipeNavigationItemsManager; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"mrSG\");\n/* harmony import */ var _services_navigator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"pHTc\");\n/* harmony import */ var _routed_items_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"CtbY\");\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n/**\n * Helper class to manage the state and routing of a swipeable page.\n */\nclass CoreSwipeNavigationItemsManager extends _routed_items_manager__WEBPACK_IMPORTED_MODULE_2__[/* CoreRoutedItemsManager */ \"a\"] {\n    /**\n     * Process page started operations.\n     */\n    start() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            this.updateSelectedItem();\n        });\n    }\n    /**\n     * Navigate to the next item.\n     */\n    navigateToNextItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            yield this.navigateToItemBy(1, 'forward');\n        });\n    }\n    /**\n     * Navigate to the previous item.\n     */\n    navigateToPreviousItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            yield this.navigateToItemBy(-1, 'back');\n        });\n    }\n    /**\n     * Has a next item.\n     */\n    hasNextItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const item = yield this.getItemBy(1);\n            return !!item;\n        });\n    }\n    /**\n     * Has a previous item.\n     */\n    hasPreviousItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const item = yield this.getItemBy(-1);\n            return !!item;\n        });\n    }\n    /**\n     * @inheritdoc\n     */\n    getCurrentPageRoute() {\n        return _services_navigator__WEBPACK_IMPORTED_MODULE_1__[/* CoreNavigator */ \"a\"].getCurrentRoute();\n    }\n    /**\n     * @inheritdoc\n     */\n    getSelectedItemPathFromRoute(route) {\n        const segments = [];\n        while (route) {\n            segments.push(...route.url);\n            if (!route.firstChild) {\n                break;\n            }\n            route = route.firstChild;\n        }\n        return segments.map(segment => segment.path).join('/').replace(/\\/+/, '/').trim() || null;\n    }\n    /**\n     * Navigate to an item by an offset.\n     *\n     * @param delta Index offset.\n     * @param animationDirection Animation direction.\n     */\n    navigateToItemBy(delta, animationDirection) {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const item = yield this.getItemBy(delta);\n            if (!item) {\n                return;\n            }\n            yield this.navigateToItem(item, { animationDirection, replace: true });\n        });\n    }\n    /**\n     * Get item by an offset.\n     *\n     * @param delta Index offset.\n     */\n    getItemBy(delta) {\n        var _a;\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const items = this.getSource().getItems();\n            const selectedIndex = (_a = (this.selectedItem && (items === null || items === void 0 ? void 0 : items.indexOf(this.selectedItem)))) !== null && _a !== void 0 ? _a : -1;\n            if (selectedIndex === -1 || items === null) {\n                return null;\n            }\n            const deltaStep = delta > 0 ? 1 : -1;\n            let nextIndex = selectedIndex;\n            let deltaMoved = 0;\n            while (deltaMoved !== delta) {\n                nextIndex += deltaStep;\n                if (nextIndex < 0 || nextIndex >= items.length) {\n                    break;\n                }\n                if (this.skipItemInSwipe(items[nextIndex])) {\n                    continue;\n                }\n                deltaMoved += deltaStep;\n            }\n            if (deltaMoved === delta) {\n                return items[nextIndex];\n            }\n            if (!this.getSource().isCompleted()) {\n                yield this.getSource().load();\n                return this.getItemBy(delta);\n            }\n            return null;\n        });\n    }\n    /**\n     * Check if an item should be skipped during swipe navigation.\n     *\n     * @param item Item.\n     * @returns Whether to skip this item during swipe navigation.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    skipItemInSwipe(item) {\n        return false;\n    }\n}\n\n\n/***/ }),\n\n/***/ \"v7Sk\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonForumDiscussionPageModule\", function() { return /* binding */ discussion_module_AddonForumDiscussionPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/components/components.module.ts\nvar components_module = __webpack_require__(\"AzLI\");\n\n// EXTERNAL MODULE: ./src/core/guards/can-leave.ts\nvar can_leave = __webpack_require__(\"MLi9\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/constants.ts\nvar constants = __webpack_require__(\"BaYo\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/routed-items-manager-sources-tracker.ts\nvar routed_items_manager_sources_tracker = __webpack_require__(\"baaQ\");\n\n// EXTERNAL MODULE: ./src/core/features/fileuploader/services/fileuploader.ts\nvar fileuploader = __webpack_require__(\"hSQQ\");\n\n// EXTERNAL MODULE: ./src/core/features/rating/services/rating.ts\nvar rating = __webpack_require__(\"FLKP\");\n\n// EXTERNAL MODULE: ./src/core/features/rating/services/rating-offline.ts\nvar rating_offline = __webpack_require__(\"y+FG\");\n\n// EXTERNAL MODULE: ./src/core/features/rating/services/rating-sync.ts\nvar rating_sync = __webpack_require__(\"R+GZ\");\n\n// EXTERNAL MODULE: ./src/core/features/user/services/user.ts\nvar user = __webpack_require__(\"4pns\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/services/network.ts + 2 modules\nvar network = __webpack_require__(\"GGba\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/services/screen.ts\nvar screen = __webpack_require__(\"Y+03\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/core/singletons/array.ts\nvar array = __webpack_require__(\"Wsfw\");\n\n// EXTERNAL MODULE: ./src/core/singletons/dom.ts + 1 modules\nvar singletons_dom = __webpack_require__(\"6s78\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/classes/forum-discussions-source.ts\nvar forum_discussions_source = __webpack_require__(\"LVzu\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/classes/forum-discussions-swipe-manager.ts\nvar forum_discussions_swipe_manager = __webpack_require__(\"nFEd\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/services/forum.ts\nvar services_forum = __webpack_require__(\"ZCW2\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/services/forum-helper.ts\nvar forum_helper = __webpack_require__(\"VF9H\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/services/forum-offline.ts\nvar forum_offline = __webpack_require__(\"h709\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/services/forum-sync.ts\nvar forum_sync = __webpack_require__(\"pET4\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./src/core/components/split-view/split-view.ts\nvar split_view = __webpack_require__(\"46ml\");\n\n// CONCATENATED MODULE: ./src/addons/mod/forum/pages/discussion/discussion.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonModForumDiscussionPage_h1_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"h1\");\n        core[\"zc\" /* ɵɵelement */](1, \"core-format-text\", 23);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r0.startingPost.subject)(\"contextInstanceId\", ctx_r0.cmId)(\"courseId\", ctx_r0.courseId);\n    }\n}\nfunction AddonModForumDiscussionPage_core_context_menu_item_10_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r13 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"core-context-menu-item\", 24);\n        core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_core_context_menu_item_10_Template_core_context_menu_item_action_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r13); const ctx_r12 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r12.doRefresh(null, $event); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r1 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"priority\", 650)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 4, \"addon.mod_forum.refreshposts\"))(\"iconAction\", ctx_r1.refreshIcon)(\"closeOnClick\", false);\n    }\n}\nfunction AddonModForumDiscussionPage_core_context_menu_item_11_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r15 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"core-context-menu-item\", 24);\n        core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_core_context_menu_item_11_Template_core_context_menu_item_action_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r15); const ctx_r14 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r14.doRefresh(null, $event, true); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"priority\", 550)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 4, \"core.settings.synchronizenow\"))(\"iconAction\", ctx_r2.syncIcon)(\"closeOnClick\", false);\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction AddonModForumDiscussionPage_ion_card_37_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 25);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 26);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 1, \"core.hasdatatosync\", core[\"ad\" /* ɵɵpureFunction1 */](4, _c0, ctx_r3.discussionStr)));\n    }\n}\nfunction AddonModForumDiscussionPage_ion_card_38_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 27);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 28);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r4 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](ctx_r4.availabilityMessage);\n    }\n}\nfunction AddonModForumDiscussionPage_ion_card_39_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 27);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 29);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 1, \"addon.mod_forum.discussionlocked\"));\n    }\n}\nfunction AddonModForumDiscussionPage_ion_card_40_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 27);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 28);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 1, \"addon.mod_forum.qandanotify\"));\n    }\n}\nfunction AddonModForumDiscussionPage_div_41_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r17 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 30);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"addon-mod-forum-post\", 31);\n        core[\"Mc\" /* ɵɵlistener */](\"onPostChange\", function AddonModForumDiscussionPage_div_41_Template_addon_mod_forum_post_onPostChange_1_listener() { core[\"fd\" /* ɵɵrestoreView */](_r17); const ctx_r16 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r16.postListChanged(); });\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r7 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"post\", ctx_r7.startingPost)(\"discussion\", ctx_r7.discussion)(\"courseId\", ctx_r7.courseId)(\"highlight\", true)(\"discussionId\", ctx_r7.discussionId)(\"component\", ctx_r7.component)(\"componentId\", ctx_r7.cmId)(\"formData\", ctx_r7.formData)(\"originalData\", ctx_r7.originalData)(\"forum\", ctx_r7.forum)(\"accessInfo\", ctx_r7.accessInfo)(\"trackPosts\", ctx_r7.trackPosts)(\"ratingInfo\", ctx_r7.ratingInfo)(\"leavingPage\", ctx_r7.leavingPage);\n    }\n}\nfunction AddonModForumDiscussionPage_ion_card_42_ng_container_1_core_spacer_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-spacer\");\n    }\n}\nfunction AddonModForumDiscussionPage_ion_card_42_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r23 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonModForumDiscussionPage_ion_card_42_ng_container_1_core_spacer_1_Template, 1, 0, \"core-spacer\", 2);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"addon-mod-forum-post\", 33);\n        core[\"Mc\" /* ɵɵlistener */](\"onPostChange\", function AddonModForumDiscussionPage_ion_card_42_ng_container_1_Template_addon_mod_forum_post_onPostChange_2_listener() { core[\"fd\" /* ɵɵrestoreView */](_r23); const ctx_r22 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r22.postListChanged(); });\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const post_r19 = ctx.$implicit;\n        const first_r20 = ctx.first;\n        const ctx_r18 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !first_r20);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"post\", post_r19)(\"courseId\", ctx_r18.courseId)(\"discussionId\", ctx_r18.discussionId)(\"component\", ctx_r18.component)(\"componentId\", ctx_r18.cmId)(\"formData\", ctx_r18.formData)(\"originalData\", ctx_r18.originalData)(\"parentSubject\", ctx_r18.postSubjects[post_r19.parentid])(\"forum\", ctx_r18.forum)(\"accessInfo\", ctx_r18.accessInfo)(\"trackPosts\", ctx_r18.trackPosts)(\"ratingInfo\", ctx_r18.ratingInfo)(\"leavingPage\", ctx_r18.leavingPage);\n    }\n}\nfunction AddonModForumDiscussionPage_ion_card_42_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\");\n        core[\"nd\" /* ɵɵtemplate */](1, AddonModForumDiscussionPage_ion_card_42_ng_container_1_Template, 3, 14, \"ng-container\", 32);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r8 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r8.posts);\n    }\n}\nfunction AddonModForumDiscussionPage_ng_container_43_ng_container_1_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ac\" /* ɵɵelementContainer */](0);\n    }\n}\nconst _c1 = function (a0) { return { post: a0 }; };\nfunction AddonModForumDiscussionPage_ng_container_43_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonModForumDiscussionPage_ng_container_43_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 34);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const post_r25 = ctx.$implicit;\n        core[\"Oc\" /* ɵɵnextContext */](2);\n        const _r10 = core[\"ed\" /* ɵɵreference */](45);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngTemplateOutlet\", _r10)(\"ngTemplateOutletContext\", core[\"ad\" /* ɵɵpureFunction1 */](2, _c1, post_r25));\n    }\n}\nfunction AddonModForumDiscussionPage_ng_container_43_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonModForumDiscussionPage_ng_container_43_ng_container_1_Template, 2, 4, \"ng-container\", 32);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r9 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r9.posts);\n    }\n}\nfunction AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ac\" /* ɵɵelementContainer */](0);\n    }\n}\nfunction AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_ng_container_1_Template, 1, 0, \"ng-container\", 34);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const child_r30 = ctx.$implicit;\n        core[\"Oc\" /* ɵɵnextContext */](3);\n        const _r10 = core[\"ed\" /* ɵɵreference */](45);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngTemplateOutlet\", _r10)(\"ngTemplateOutletContext\", core[\"ad\" /* ɵɵpureFunction1 */](2, _c1, child_r30));\n    }\n}\nfunction AddonModForumDiscussionPage_ng_template_44_div_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 36);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonModForumDiscussionPage_ng_template_44_div_2_ng_container_1_Template, 2, 4, \"ng-container\", 32);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const post_r27 = core[\"Oc\" /* ɵɵnextContext */]().post;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", post_r27.children);\n    }\n}\nfunction AddonModForumDiscussionPage_ng_template_44_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r34 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"addon-mod-forum-post\", 33);\n        core[\"Mc\" /* ɵɵlistener */](\"onPostChange\", function AddonModForumDiscussionPage_ng_template_44_Template_addon_mod_forum_post_onPostChange_1_listener() { core[\"fd\" /* ɵɵrestoreView */](_r34); const ctx_r33 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r33.postListChanged(); });\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](2, AddonModForumDiscussionPage_ng_template_44_div_2_Template, 2, 1, \"div\", 35);\n    }\n    if (rf & 2) {\n        const post_r27 = ctx.post;\n        const ctx_r11 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"post\", post_r27)(\"courseId\", ctx_r11.courseId)(\"discussionId\", ctx_r11.discussionId)(\"component\", ctx_r11.component)(\"componentId\", ctx_r11.cmId)(\"formData\", ctx_r11.formData)(\"originalData\", ctx_r11.originalData)(\"parentSubject\", ctx_r11.postSubjects[post_r27.parentid])(\"forum\", ctx_r11.forum)(\"accessInfo\", ctx_r11.accessInfo)(\"trackPosts\", ctx_r11.trackPosts)(\"ratingInfo\", ctx_r11.ratingInfo)(\"leavingPage\", ctx_r11.leavingPage);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", post_r27.children && post_r27.children.length && post_r27.children[0].subject);\n    }\n}\n/**\n * Page that displays a forum discussion.\n */\nlet discussion_page_AddonModForumDiscussionPage = /*@__PURE__*/ (() => {\n    class AddonModForumDiscussionPage {\n        constructor(splitView, elementRef, route) {\n            this.splitView = splitView;\n            this.elementRef = elementRef;\n            this.route = route;\n            this.forum = {};\n            this.accessInfo = {};\n            this.posts = [];\n            this.discussionLoaded = false;\n            this.sort = 'nested';\n            this.formData = {\n                replyingTo: 0,\n                isEditing: false,\n                subject: '',\n                message: null,\n                files: [],\n                isprivatereply: false,\n            };\n            this.originalData = {\n                subject: null,\n                message: null,\n                files: [],\n                isprivatereply: false,\n            };\n            this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n            this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n            this.discussionStr = '';\n            this.component = services_forum[\"b\" /* AddonModForumProvider */].COMPONENT;\n            this.canPin = false;\n            this.availabilityMessage = null;\n            this.showQAMessage = false;\n            this.leavingPage = false;\n            this.hasOfflineRatings = false;\n        }\n        get isMobile() {\n            return screen[\"a\" /* CoreScreen */].isMobile;\n        }\n        ngOnInit() {\n            var _a, _b, _c;\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const routeData = this.route.snapshot.data;\n                    this.courseId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('courseId');\n                    this.cmId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('cmId');\n                    this.forumId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('forumId');\n                    this.discussion = services_navigator[\"a\" /* CoreNavigator */].getRouteParam('discussion');\n                    this.discussionId = this.discussion\n                        ? this.discussion.discussion\n                        : services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('discussionId');\n                    this.trackPosts = services_navigator[\"a\" /* CoreNavigator */].getRouteBooleanParam('trackPosts') || false;\n                    this.postId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('postId');\n                    this.parent = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('parent');\n                    if (this.courseId && this.cmId && ((_a = routeData.swipeEnabled) !== null && _a !== void 0 ? _a : true)) {\n                        this.discussions = new discussion_page_AddonModForumDiscussionDiscussionsSwipeManager(routed_items_manager_sources_tracker[\"a\" /* CoreRoutedItemsManagerSourcesTracker */].getOrCreateSource(forum_discussions_source[\"a\" /* AddonModForumDiscussionsSource */], [this.courseId, this.cmId, (_b = routeData.discussionsPathPrefix) !== null && _b !== void 0 ? _b : '']));\n                        yield this.discussions.start();\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                    this.goBack();\n                    return;\n                }\n                this.isOnline = network[\"a\" /* CoreNetwork */].isOnline();\n                this.externalUrl = (_c = sites[\"b\" /* CoreSites */].getCurrentSite()) === null || _c === void 0 ? void 0 : _c.createSiteUrl('/mod/forum/discuss.php', { d: this.discussionId.toString() });\n                this.onlineObserver = network[\"a\" /* CoreNetwork */].onChange().subscribe(() => {\n                    // Execute the callback in the Angular zone, so change detection doesn't stop working.\n                    singletons[\"A\" /* NgZone */].run(() => {\n                        this.isOnline = network[\"a\" /* CoreNetwork */].isOnline();\n                    });\n                });\n                this.discussionStr = singletons[\"J\" /* Translate */].instant('addon.mod_forum.discussion');\n            });\n        }\n        /**\n         * View loaded.\n         */\n        ngAfterViewInit() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.sort = this.parent\n                    ? 'nested' // Force nested order.\n                    : yield this.getUserSort();\n                yield this.fetchPosts(true, false, true);\n                const scrollTo = this.postId || this.parent;\n                if (scrollTo) {\n                    // Scroll to the post.\n                    singletons_dom[\"a\" /* CoreDom */].scrollToElement(this.elementRef.nativeElement, '#addon-mod_forum-post-' + scrollTo);\n                }\n            });\n        }\n        /**\n         * User entered the page that contains the component.\n         */\n        ionViewDidEnter() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (this.syncObserver) {\n                    // Already setup.\n                    return;\n                }\n                // The discussion object was not passed as parameter.\n                if (!this.discussion) {\n                    yield this.loadDiscussion(this.discussionId, this.forumId, this.cmId);\n                }\n                const discussion = this.discussion;\n                // Refresh data if this discussion is synchronized automatically.\n                this.syncObserver = events[\"b\" /* CoreEvents */].on(forum_sync[\"b\" /* AddonModForumSyncProvider */].AUTO_SYNCED, data => {\n                    if (data.forumId == this.forumId && this.discussionId == data.discussionId\n                        && data.userId == sites[\"b\" /* CoreSites */].getCurrentSiteUserId()) {\n                        // Refresh the data.\n                        this.discussionLoaded = false;\n                        this.refreshPosts();\n                    }\n                }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                // Refresh data if this forum discussion is synchronized from discussions list.\n                this.syncManualObserver = events[\"b\" /* CoreEvents */].on(forum_sync[\"b\" /* AddonModForumSyncProvider */].MANUAL_SYNCED, data => {\n                    if (data.source != 'discussion' && data.forumId == this.forumId &&\n                        data.userId == sites[\"b\" /* CoreSites */].getCurrentSiteUserId()) {\n                        // Refresh the data.\n                        this.discussionLoaded = false;\n                        this.refreshPosts();\n                    }\n                }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                // Invalidate discussion list if it was not read.\n                if (this.forumId && discussion && discussion.numunread > 0) {\n                    services_forum[\"a\" /* AddonModForum */].invalidateDiscussionsList(this.forumId);\n                }\n                // Listen for offline ratings saved and synced.\n                this.ratingOfflineObserver = events[\"b\" /* CoreEvents */].on(rating[\"b\" /* CoreRatingProvider */].RATING_SAVED_EVENT, (data) => {\n                    if (data.component == 'mod_forum' && data.ratingArea == 'post' && data.contextLevel == \"module\" /* MODULE */ &&\n                        data.instanceId == this.cmId && data.itemSetId == this.discussionId) {\n                        this.hasOfflineRatings = true;\n                    }\n                });\n                this.ratingSyncObserver = events[\"b\" /* CoreEvents */].on(rating_sync[\"b\" /* CoreRatingSyncProvider */].SYNCED_EVENT, (data) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                    if (data.component == 'mod_forum' && data.ratingArea == 'post' && data.contextLevel == \"module\" /* MODULE */ &&\n                        data.instanceId == this.cmId && data.itemSetId == this.discussionId) {\n                        this.hasOfflineRatings = false;\n                    }\n                }));\n                this.changeDiscObserver = events[\"b\" /* CoreEvents */].on(services_forum[\"b\" /* AddonModForumProvider */].CHANGE_DISCUSSION_EVENT, data => {\n                    if (discussion && this.forumId && (this.forumId === data.forumId || data.cmId === this.cmId)) {\n                        services_forum[\"a\" /* AddonModForum */].invalidateDiscussionsList(this.forumId).finally(() => {\n                            var _a;\n                            if (data.locked !== undefined) {\n                                discussion.locked = data.locked;\n                            }\n                            if (data.pinned !== undefined) {\n                                discussion.pinned = data.pinned;\n                            }\n                            if (data.starred !== undefined) {\n                                discussion.starred = data.starred;\n                            }\n                            if (data.deleted !== undefined && data.deleted) {\n                                if (!((_a = data.post) === null || _a === void 0 ? void 0 : _a.parentid)) {\n                                    this.goBack();\n                                }\n                                else {\n                                    this.discussionLoaded = false;\n                                    this.refreshPosts();\n                                }\n                            }\n                        });\n                    }\n                });\n            });\n        }\n        /**\n         * Check if we can leave the page or not.\n         *\n         * @return Resolved if we can leave it, rejected if not.\n         */\n        canLeave() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (forum_helper[\"a\" /* AddonModForumHelper */].hasPostDataChanged(this.formData, this.originalData)) {\n                    // Show confirmation if some data has been modified.\n                    yield dom[\"a\" /* CoreDomUtils */].showConfirm(singletons[\"J\" /* Translate */].instant('core.confirmcanceledit'));\n                }\n                // Delete the local files from the tmp folder.\n                fileuploader[\"a\" /* CoreFileUploader */].clearTmpFiles(this.formData.files);\n                this.leavingPage = true;\n                return true;\n            });\n        }\n        /**\n         * Helper function to go back.\n         */\n        goBack() {\n            var _a;\n            if (this.leavingPage) {\n                return;\n            }\n            if ((_a = this.splitView) === null || _a === void 0 ? void 0 : _a.outletActivated) {\n                services_navigator[\"a\" /* CoreNavigator */].navigate('../');\n            }\n            else {\n                services_navigator[\"a\" /* CoreNavigator */].back();\n            }\n        }\n        /**\n         * Runs when the page is about to leave and no longer be the active page.\n         */\n        ionViewWillLeave() {\n            this.syncObserver && this.syncObserver.off();\n            this.syncManualObserver && this.syncManualObserver.off();\n            this.ratingOfflineObserver && this.ratingOfflineObserver.off();\n            this.ratingSyncObserver && this.ratingSyncObserver.off();\n            this.changeDiscObserver && this.changeDiscObserver.off();\n            delete this.syncObserver;\n        }\n        /**\n         * Page destroyed.\n         */\n        ngOnDestroy() {\n            this.onlineObserver && this.onlineObserver.unsubscribe();\n            this.discussions && this.discussions.destroy();\n        }\n        /**\n         * Get sort type configured by the current user.\n         *\n         * @return Promise resolved with the sort type.\n         */\n        getUserSort() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const value = yield sites[\"b\" /* CoreSites */].getRequiredCurrentSite().getLocalSiteConfig('AddonModForumDiscussionSort');\n                    return value;\n                }\n                catch (error) {\n                    try {\n                        const value = yield user[\"a\" /* CoreUser */].getUserPreference('forum_displaymode');\n                        switch (Number(value)) {\n                            case 1:\n                                return 'flat-oldest';\n                            case -1:\n                                return 'flat-newest';\n                            case 3:\n                                return 'nested';\n                            case 2: // Threaded not implemented.\n                            default:\n                            // Not set, use default sort.\n                            // @TODO add fallback to $CFG->forum_displaymode.\n                        }\n                    }\n                    catch (_a) {\n                        // Ignore errors.\n                    }\n                }\n                return 'flat-oldest';\n            });\n        }\n        /**\n         * Convenience function to get the forum.\n         *\n         * @return Promise resolved with the forum.\n         */\n        fetchForum() {\n            if (this.courseId && this.cmId) {\n                return services_forum[\"a\" /* AddonModForum */].getForum(this.courseId, this.cmId);\n            }\n            if (this.courseId && this.forumId) {\n                return services_forum[\"a\" /* AddonModForum */].getForumById(this.courseId, this.forumId);\n            }\n            throw new Error('Cannot get the forum');\n        }\n        /**\n         * Convenience function to get the posts.\n         *\n         * @param sync Whether to try to synchronize the discussion.\n         * @param showErrors Whether to show errors in a modal.\n         * @param forceMarkAsRead Whether to mark all posts as read.\n         * @return Promise resolved when done.\n         */\n        fetchPosts(sync, showErrors, forceMarkAsRead) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                let onlinePosts = [];\n                const offlineReplies = [];\n                let hasUnreadPosts = false;\n                try {\n                    if (sync) {\n                        // Try to synchronize the forum.\n                        yield utils[\"a\" /* CoreUtils */].ignoreErrors(this.syncDiscussion(!!showErrors));\n                    }\n                    const response = yield services_forum[\"a\" /* AddonModForum */].getDiscussionPosts(this.discussionId, { cmId: this.cmId });\n                    const replies = yield forum_offline[\"a\" /* AddonModForumOffline */].getDiscussionReplies(this.discussionId);\n                    this.ratingInfo = response.ratinginfo;\n                    onlinePosts = response.posts;\n                    this.courseId = response.courseid || this.courseId;\n                    this.forumId = response.forumid || this.forumId;\n                    // Check if there are responses stored in offline.\n                    this.postHasOffline = !!replies.length;\n                    const convertPromises = [];\n                    // Index posts to allow quick access. Also check unread field.\n                    const onlinePostsMap = {};\n                    onlinePosts.forEach((post) => {\n                        onlinePostsMap[post.id] = post;\n                        hasUnreadPosts = hasUnreadPosts || !!post.unread;\n                    });\n                    replies.forEach((offlineReply) => {\n                        // If we don't have forumId and courseId, get it from the post.\n                        if (!this.forumId) {\n                            this.forumId = offlineReply.forumid;\n                        }\n                        if (!this.courseId) {\n                            this.courseId = offlineReply.courseid;\n                        }\n                        convertPromises.push(forum_helper[\"a\" /* AddonModForumHelper */].instance\n                            .convertOfflineReplyToOnline(offlineReply)\n                            .then((reply) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                            offlineReplies.push(reply);\n                            // Disable reply of the parent. Reply in offline to the same post is not allowed, edit instead.\n                            reply.parentid && (onlinePostsMap[reply.parentid].capabilities.reply = false);\n                            return;\n                        })));\n                    });\n                    yield Promise.all(convertPromises);\n                    // Convert back to array.\n                    onlinePosts = utils[\"a\" /* CoreUtils */].objectToArray(onlinePostsMap);\n                    let posts = offlineReplies.concat(onlinePosts);\n                    this.startingPost = services_forum[\"a\" /* AddonModForum */].extractStartingPost(posts);\n                    // If sort type is nested, normal sorting is disabled and nested posts will be displayed.\n                    if (this.sort == 'nested') {\n                        // Sort first by creation date to make format tree work.\n                        services_forum[\"a\" /* AddonModForum */].sortDiscussionPosts(posts, 'ASC');\n                        const rootId = this.startingPost ? this.startingPost.id : (this.discussion ? this.discussion.id : 0);\n                        posts = utils[\"a\" /* CoreUtils */].formatTree(posts, 'parentid', 'id', rootId);\n                    }\n                    else {\n                        // Set default reply subject.\n                        const direction = this.sort == 'flat-newest' ? 'DESC' : 'ASC';\n                        services_forum[\"a\" /* AddonModForum */].sortDiscussionPosts(posts, direction);\n                    }\n                    try {\n                        // Now try to get the forum.\n                        const forum = yield this.fetchForum();\n                        // \"forum.istracked\" is more reliable than \"trackPosts\".\n                        if (forum.istracked !== undefined) {\n                            this.trackPosts = forum.istracked;\n                        }\n                        this.forumId = forum.id;\n                        this.cmId = forum.cmid;\n                        this.courseId = forum.course;\n                        this.forum = forum;\n                        this.availabilityMessage = forum_helper[\"a\" /* AddonModForumHelper */].getAvailabilityMessage(forum);\n                        const promises = [];\n                        promises.push(services_forum[\"a\" /* AddonModForum */].instance\n                            .getAccessInformation(this.forumId, { cmId: this.cmId })\n                            .then((accessInfo) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                            this.accessInfo = accessInfo;\n                            // Disallow replying if cut-off date is reached and the user has not the capability to override it.\n                            // Just in case the posts were fetched from WS when the cut-off date was not reached but it is now.\n                            if (forum_helper[\"a\" /* AddonModForumHelper */].isCutoffDateReached(forum) && !accessInfo.cancanoverridecutoff) {\n                                posts.forEach((post) => {\n                                    post.capabilities.reply = false;\n                                });\n                            }\n                            // Show Q&A message if user hasn't posted.\n                            const currentUserId = sites[\"b\" /* CoreSites */].getCurrentSiteUserId();\n                            this.showQAMessage = forum.type === 'qanda' && !accessInfo.canviewqandawithoutposting &&\n                                !posts.some(post => post.author.id === currentUserId);\n                            return;\n                        })));\n                        // The discussion object was not passed as parameter and there is no starting post.\n                        if (!this.discussion) {\n                            promises.push(this.loadDiscussion(this.discussionId, this.forumId, this.cmId));\n                        }\n                        yield Promise.all(promises);\n                    }\n                    catch (_a) {\n                        // Ignore errors.\n                    }\n                    if (!this.discussion && !this.startingPost) {\n                        // The discussion object was not passed as parameter and there is no starting post. Should not happen.\n                        throw new Error('Invalid forum discussion.');\n                    }\n                    if (this.startingPost && this.startingPost.author && this.forum.type == 'single') {\n                        // Hide author and groups for first post and type single.\n                        delete this.startingPost.author.fullname;\n                        delete this.startingPost.author.groups;\n                    }\n                    this.posts = posts;\n                    this.postSubjects = this.getAllPosts().reduce((postSubjects, post) => {\n                        postSubjects[post.id] = post.subject;\n                        return postSubjects;\n                    }, this.startingPost\n                        ? { [this.startingPost.id]: this.startingPost.subject }\n                        : {});\n                    if (services_forum[\"a\" /* AddonModForum */].isSetPinStateAvailableForSite() && this.forumId) {\n                        // Use the canAddDiscussion WS to check if the user can pin discussions.\n                        try {\n                            const response = yield services_forum[\"a\" /* AddonModForum */].canAddDiscussionToAll(this.forumId, { cmId: this.cmId });\n                            this.canPin = !!response.canpindiscussions;\n                        }\n                        catch (error) {\n                            this.canPin = false;\n                        }\n                    }\n                    else {\n                        this.canPin = false;\n                    }\n                    this.hasOfflineRatings =\n                        yield rating_offline[\"a\" /* CoreRatingOffline */].hasRatings('mod_forum', 'post', \"module\" /* MODULE */, this.cmId, this.discussionId);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                }\n                finally {\n                    this.discussionLoaded = true;\n                    this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_REFRESH;\n                    this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_SYNC;\n                    if (forceMarkAsRead || (hasUnreadPosts && this.trackPosts)) {\n                        // Add log in Moodle and mark unread posts as readed.\n                        services_forum[\"a\" /* AddonModForum */].logDiscussionView(this.discussionId, this.forumId || -1, this.forum.name).catch(() => {\n                            // Ignore errors.\n                        }).finally(() => {\n                            if (!this.courseId || !this.cmId) {\n                                return;\n                            }\n                            // Trigger mark read posts.\n                            events[\"b\" /* CoreEvents */].trigger(services_forum[\"b\" /* AddonModForumProvider */].MARK_READ_EVENT, {\n                                courseId: this.courseId,\n                                moduleId: this.cmId,\n                            }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                        });\n                    }\n                }\n            });\n        }\n        /**\n         * Convenience function to load discussion.\n         *\n         * @param discussionId Discussion ID.\n         * @param forumId Forum ID.\n         * @param cmId Forum cmid.\n         * @return Promise resolved when done.\n         */\n        loadDiscussion(discussionId, forumId, cmId) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                // Fetch the discussion if not passed as parameter.\n                if (this.discussion || !forumId || !cmId) {\n                    return;\n                }\n                this.discussion = yield forum_helper[\"a\" /* AddonModForumHelper */].getDiscussionById(forumId, cmId, discussionId);\n                this.discussionId = this.discussion.discussion;\n            });\n        }\n        /**\n         * Tries to synchronize the posts discussion.\n         *\n         * @param showErrors Whether to show errors in a modal.\n         * @return Promise resolved when done.\n         */\n        syncDiscussion(showErrors) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const promises = [];\n                promises.push(forum_sync[\"a\" /* AddonModForumSync */].instance\n                    .syncDiscussionReplies(this.discussionId)\n                    .then((result) => {\n                    if (result.warnings && result.warnings.length) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModal(result.warnings[0]);\n                    }\n                    if (result && result.updated && this.forumId) {\n                        // Sync successful, send event.\n                        events[\"b\" /* CoreEvents */].trigger(forum_sync[\"b\" /* AddonModForumSyncProvider */].MANUAL_SYNCED, {\n                            forumId: this.forumId,\n                            userId: sites[\"b\" /* CoreSites */].getCurrentSiteUserId(),\n                            source: 'discussion',\n                        }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    }\n                    return;\n                }));\n                promises.push(forum_sync[\"a\" /* AddonModForumSync */].instance\n                    .syncRatings(this.cmId, this.discussionId)\n                    .then((result) => {\n                    if (result.warnings && result.warnings.length) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModal(result.warnings[0]);\n                    }\n                    return;\n                }));\n                try {\n                    yield Promise.all(promises);\n                }\n                catch (error) {\n                    if (showErrors) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.errorsync', true);\n                    }\n                    throw new Error('Failed syncing discussion');\n                }\n            });\n        }\n        /**\n         * Refresh the data.\n         *\n         * @param refresher Refresher.\n         * @param done Function to call when done.\n         * @param showErrors If show errors to the user of hide them.\n         * @return Promise resolved when done.\n         */\n        doRefresh(refresher, done, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (this.discussionLoaded) {\n                    yield this.refreshPosts(true, showErrors).finally(() => {\n                        refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n                        done && done();\n                    });\n                }\n            });\n        }\n        /**\n         * Refresh posts.\n         *\n         * @param sync Whether to try to synchronize the discussion.\n         * @param showErrors Whether to show errors in a modal.\n         * @return Promise resolved when done.\n         */\n        refreshPosts(sync, showErrors) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.content.scrollToTop();\n                this.refreshIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                const promises = [];\n                this.courseId && promises.push(services_forum[\"a\" /* AddonModForum */].invalidateForumData(this.courseId));\n                promises.push(services_forum[\"a\" /* AddonModForum */].invalidateDiscussionPosts(this.discussionId, this.forumId));\n                this.forumId && promises.push(services_forum[\"a\" /* AddonModForum */].invalidateAccessInformation(this.forumId));\n                this.forumId && promises.push(services_forum[\"a\" /* AddonModForum */].invalidateCanAddDiscussion(this.forumId));\n                yield utils[\"a\" /* CoreUtils */].ignoreErrors(utils[\"a\" /* CoreUtils */].allPromises(promises));\n                yield this.fetchPosts(sync, showErrors);\n            });\n        }\n        /**\n         * Function to change posts sorting\n         *\n         * @param type Sort type.\n         * @return Promised resolved when done.\n         */\n        changeSort(type) {\n            this.discussionLoaded = false;\n            this.sort = type;\n            sites[\"b\" /* CoreSites */].getRequiredCurrentSite().setLocalSiteConfig('AddonModForumDiscussionSort', this.sort);\n            this.content.scrollToTop();\n            return this.fetchPosts();\n        }\n        /**\n         * Lock or unlock the discussion.\n         *\n         * @param locked True to lock the discussion, false to unlock.\n         */\n        setLockState(locked) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.discussion || !this.forumId || !this.cmId) {\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    const response = yield services_forum[\"a\" /* AddonModForum */].setLockState(this.forumId, this.discussionId, locked);\n                    this.discussion.locked = response.locked;\n                    const data = {\n                        forumId: this.forumId,\n                        discussionId: this.discussionId,\n                        cmId: this.cmId,\n                        locked: this.discussion.locked,\n                    };\n                    events[\"b\" /* CoreEvents */].trigger(services_forum[\"b\" /* AddonModForumProvider */].CHANGE_DISCUSSION_EVENT, data, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    dom[\"a\" /* CoreDomUtils */].showToast('addon.mod_forum.lockupdated', true);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                }\n                finally {\n                    modal.dismiss();\n                }\n            });\n        }\n        /**\n         * Pin or unpin the discussion.\n         *\n         * @param pinned True to pin the discussion, false to unpin it.\n         */\n        setPinState(pinned) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.discussion || !this.forumId || !this.cmId) {\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    yield services_forum[\"a\" /* AddonModForum */].setPinState(this.discussionId, pinned);\n                    this.discussion.pinned = pinned;\n                    const data = {\n                        forumId: this.forumId,\n                        discussionId: this.discussionId,\n                        cmId: this.cmId,\n                        pinned: this.discussion.pinned,\n                    };\n                    events[\"b\" /* CoreEvents */].trigger(services_forum[\"b\" /* AddonModForumProvider */].CHANGE_DISCUSSION_EVENT, data, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    dom[\"a\" /* CoreDomUtils */].showToast('addon.mod_forum.pinupdated', true);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                }\n                finally {\n                    modal.dismiss();\n                }\n            });\n        }\n        /**\n         * Star or unstar the discussion.\n         *\n         * @param starred True to star the discussion, false to unstar it.\n         */\n        toggleFavouriteState(starred) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.discussion || !this.forumId || !this.cmId) {\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    yield services_forum[\"a\" /* AddonModForum */].toggleFavouriteState(this.discussionId, starred);\n                    this.discussion.starred = starred;\n                    const data = {\n                        forumId: this.forumId,\n                        discussionId: this.discussionId,\n                        cmId: this.cmId,\n                        starred: this.discussion.starred,\n                    };\n                    events[\"b\" /* CoreEvents */].trigger(services_forum[\"b\" /* AddonModForumProvider */].CHANGE_DISCUSSION_EVENT, data, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    dom[\"a\" /* CoreDomUtils */].showToast('addon.mod_forum.favouriteupdated', true);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                }\n                finally {\n                    modal.dismiss();\n                }\n            });\n        }\n        /**\n         * New post added.\n         */\n        postListChanged() {\n            if (!this.forumId || !this.cmId) {\n                return;\n            }\n            // Trigger an event to notify a new reply.\n            const data = {\n                forumId: this.forumId,\n                discussionId: this.discussionId,\n                cmId: this.cmId,\n            };\n            events[\"b\" /* CoreEvents */].trigger(services_forum[\"b\" /* AddonModForumProvider */].REPLY_DISCUSSION_EVENT, data, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n            this.discussionLoaded = false;\n            this.refreshPosts().finally(() => {\n                this.discussionLoaded = true;\n            });\n        }\n        /**\n         * Get all the posts contained in the discussion.\n         *\n         * @return Array containing all the posts of the discussion.\n         */\n        getAllPosts() {\n            const allPosts = this.posts.map(post => this.flattenPostHierarchy(post));\n            return array[\"a\" /* CoreArray */].flatten(allPosts);\n        }\n        /**\n         * Flatten a post's hierarchy into an array.\n         *\n         * @param parent Parent post.\n         * @return Array containing all the posts within the hierarchy (including the parent).\n         */\n        flattenPostHierarchy(parent) {\n            const posts = [parent];\n            const children = parent.children || [];\n            for (const child of children) {\n                posts.push(...this.flattenPostHierarchy(child));\n            }\n            return posts;\n        }\n    }\n    AddonModForumDiscussionPage.ɵfac = function AddonModForumDiscussionPage_Factory(t) { return new (t || AddonModForumDiscussionPage)(core[\"yc\" /* ɵɵdirectiveInject */](split_view[\"a\" /* CoreSplitViewComponent */], 8), core[\"yc\" /* ɵɵdirectiveInject */](core[\"r\" /* ElementRef */]), core[\"yc\" /* ɵɵdirectiveInject */](router[\"a\" /* ActivatedRoute */])); };\n    AddonModForumDiscussionPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonModForumDiscussionPage, selectors: [[\"page-addon-mod-forum-discussion\"]], viewQuery: function AddonModForumDiscussionPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](ionic_angular[\"v\" /* IonContent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.content = _t.first);\n            }\n        }, decls: 46, vars: 73, consts: [[\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [\"slot\", \"end\"], [3, \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\", 4, \"ngIf\"], [\"iconAction\", \"fas-arrow-down\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-arrow-up\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-exchange-alt\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-lock\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-unlock\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-map-pin\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-map-pin\", 3, \"hidden\", \"priority\", \"content\", \"iconSlash\", \"action\"], [\"iconAction\", \"fas-star\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-star\", 3, \"hidden\", \"priority\", \"content\", \"iconSlash\", \"action\"], [\"iconAction\", \"fas-external-link-alt\", 3, \"hidden\", \"priority\", \"content\", \"href\", \"showBrowserWarning\"], [1, \"limited-width\", 3, \"core-swipe-navigation\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [\"class\", \"core-info-card\", 4, \"ngIf\"], [\"class\", \"ion-margin-bottom\", 4, \"ngIf\"], [\"nestedPosts\", \"\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [3, \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [1, \"core-warning-card\"], [\"name\", \"fas-exclamation-triangle\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [1, \"core-info-card\"], [\"name\", \"fas-info-circle\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"name\", \"fas-lock\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [1, \"ion-margin-bottom\"], [3, \"post\", \"discussion\", \"courseId\", \"highlight\", \"discussionId\", \"component\", \"componentId\", \"formData\", \"originalData\", \"forum\", \"accessInfo\", \"trackPosts\", \"ratingInfo\", \"leavingPage\", \"onPostChange\"], [4, \"ngFor\", \"ngForOf\"], [3, \"post\", \"courseId\", \"discussionId\", \"component\", \"componentId\", \"formData\", \"originalData\", \"parentSubject\", \"forum\", \"accessInfo\", \"trackPosts\", \"ratingInfo\", \"leavingPage\", \"onPostChange\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [\"class\", \"ion-padding-start\", 4, \"ngIf\"], [1, \"ion-padding-start\"]], template: function AddonModForumDiscussionPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"nd\" /* ɵɵtemplate */](6, AddonModForumDiscussionPage_h1_6_Template, 2, 3, \"h1\", 2);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"zc\" /* ɵɵelement */](7, \"ion-buttons\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](8, \"core-navbar-buttons\", 3);\n                core[\"Ec\" /* ɵɵelementStart */](9, \"core-context-menu\");\n                core[\"nd\" /* ɵɵtemplate */](10, AddonModForumDiscussionPage_core_context_menu_item_10_Template, 2, 6, \"core-context-menu-item\", 4);\n                core[\"nd\" /* ɵɵtemplate */](11, AddonModForumDiscussionPage_core_context_menu_item_11_Template, 2, 6, \"core-context-menu-item\", 4);\n                core[\"Ec\" /* ɵɵelementStart */](12, \"core-context-menu-item\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_12_listener() { return ctx.changeSort(\"flat-oldest\"); });\n                core[\"Pc\" /* ɵɵpipe */](13, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](14, \"core-context-menu-item\", 6);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_14_listener() { return ctx.changeSort(\"flat-newest\"); });\n                core[\"Pc\" /* ɵɵpipe */](15, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](16, \"core-context-menu-item\", 7);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_16_listener() { return ctx.changeSort(\"nested\"); });\n                core[\"Pc\" /* ɵɵpipe */](17, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](18, \"core-context-menu-item\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_18_listener() { return ctx.setLockState(true); });\n                core[\"Pc\" /* ɵɵpipe */](19, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](20, \"core-context-menu-item\", 9);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_20_listener() { return ctx.setLockState(false); });\n                core[\"Pc\" /* ɵɵpipe */](21, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](22, \"core-context-menu-item\", 10);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_22_listener() { return ctx.setPinState(true); });\n                core[\"Pc\" /* ɵɵpipe */](23, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](24, \"core-context-menu-item\", 11);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_24_listener() { return ctx.setPinState(false); });\n                core[\"Pc\" /* ɵɵpipe */](25, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](26, \"core-context-menu-item\", 12);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_26_listener() { return ctx.toggleFavouriteState(true); });\n                core[\"Pc\" /* ɵɵpipe */](27, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](28, \"core-context-menu-item\", 13);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModForumDiscussionPage_Template_core_context_menu_item_action_28_listener() { return ctx.toggleFavouriteState(false); });\n                core[\"Pc\" /* ɵɵpipe */](29, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"zc\" /* ɵɵelement */](30, \"core-context-menu-item\", 14);\n                core[\"Pc\" /* ɵɵpipe */](31, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](32, \"ion-content\", 15);\n                core[\"Ec\" /* ɵɵelementStart */](33, \"ion-refresher\", 16);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonModForumDiscussionPage_Template_ion_refresher_ionRefresh_33_listener($event) { return ctx.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](34, \"ion-refresher-content\", 17);\n                core[\"Pc\" /* ɵɵpipe */](35, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](36, \"core-loading\", 18);\n                core[\"nd\" /* ɵɵtemplate */](37, AddonModForumDiscussionPage_ion_card_37_Template, 6, 6, \"ion-card\", 19);\n                core[\"nd\" /* ɵɵtemplate */](38, AddonModForumDiscussionPage_ion_card_38_Template, 5, 1, \"ion-card\", 20);\n                core[\"nd\" /* ɵɵtemplate */](39, AddonModForumDiscussionPage_ion_card_39_Template, 6, 3, \"ion-card\", 20);\n                core[\"nd\" /* ɵɵtemplate */](40, AddonModForumDiscussionPage_ion_card_40_Template, 6, 3, \"ion-card\", 20);\n                core[\"nd\" /* ɵɵtemplate */](41, AddonModForumDiscussionPage_div_41_Template, 2, 14, \"div\", 21);\n                core[\"nd\" /* ɵɵtemplate */](42, AddonModForumDiscussionPage_ion_card_42_Template, 2, 1, \"ion-card\", 2);\n                core[\"nd\" /* ɵɵtemplate */](43, AddonModForumDiscussionPage_ng_container_43_Template, 2, 1, \"ng-container\", 2);\n                core[\"nd\" /* ɵɵtemplate */](44, AddonModForumDiscussionPage_ng_template_44_Template, 3, 14, \"ng-template\", null, 22, core[\"od\" /* ɵɵtemplateRefExtractor */]);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 49, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.startingPost);\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.discussionLoaded && !ctx.postHasOffline && ctx.isOnline);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.discussionLoaded && ctx.isMobile && ctx.postHasOffline && ctx.isOnline);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", ctx.sort == \"flat-oldest\")(\"priority\", 500)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](13, 51, \"addon.mod_forum.modeflatoldestfirst\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", ctx.sort == \"flat-newest\")(\"priority\", 450)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](15, 53, \"addon.mod_forum.modeflatnewestfirst\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", ctx.sort == \"nested\")(\"priority\", 400)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](17, 55, \"addon.mod_forum.modenested\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.discussion || !ctx.discussion.canlock || ctx.discussion.locked)(\"priority\", 300)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](19, 57, \"addon.mod_forum.lockdiscussion\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.discussion || !ctx.discussion.canlock || !ctx.discussion.locked)(\"priority\", 300)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](21, 59, \"addon.mod_forum.unlockdiscussion\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.discussion || !ctx.canPin || ctx.discussion.pinned)(\"priority\", 250)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](23, 61, \"addon.mod_forum.pindiscussion\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.discussion || !ctx.canPin || !ctx.discussion.pinned)(\"priority\", 250)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](25, 63, \"addon.mod_forum.unpindiscussion\"))(\"iconSlash\", true);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.discussion || !ctx.discussion.canfavourite || ctx.discussion.starred)(\"priority\", 200)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](27, 65, \"addon.mod_forum.addtofavourites\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.discussion || !ctx.discussion.canfavourite || !ctx.discussion.starred)(\"priority\", 200)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](29, 67, \"addon.mod_forum.removefromfavourites\"))(\"iconSlash\", true);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.externalUrl)(\"priority\", 100)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](31, 69, \"core.openinbrowser\"))(\"href\", ctx.externalUrl)(\"showBrowserWarning\", false);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"core-swipe-navigation\", ctx.discussions);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.discussionLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](35, 71, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.discussionLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.postHasOffline || ctx.hasOfflineRatings);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.availabilityMessage);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.discussion && ctx.discussion.locked);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.showQAMessage);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.startingPost);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.sort != \"nested\" && ctx.posts.length);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.sort == \"nested\" && ctx.posts.length);\n            }\n        }, styles: [\"[_nghost-%COMP%]   .addon-forum-reply-button[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{margin:0}\"] });\n    return AddonModForumDiscussionPage;\n})();\n/**\n * Helper to manage swiping within a collection of discussions.\n */\nclass discussion_page_AddonModForumDiscussionDiscussionsSwipeManager extends forum_discussions_swipe_manager[\"a\" /* AddonModForumDiscussionsSwipeManager */] {\n    /**\n     * @inheritdoc\n     */\n    getSelectedItemPathFromRoute(route) {\n        return this.getSource().DISCUSSIONS_PATH_PREFIX + route.params.discussionId;\n    }\n}\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/attachments/attachments.ts\nvar attachments = __webpack_require__(\"M9y5\");\n\n// EXTERNAL MODULE: ./src/core/components/bs-tooltip/bs-tooltip.ts\nvar bs_tooltip = __webpack_require__(\"aEIl\");\n\n// EXTERNAL MODULE: ./src/core/components/button-with-spinner/button-with-spinner.ts\nvar button_with_spinner = __webpack_require__(\"3zv0\");\n\n// EXTERNAL MODULE: ./src/core/components/chart/chart.ts\nvar chart = __webpack_require__(\"Lmwl\");\n\n// EXTERNAL MODULE: ./src/core/components/chrono/chrono.ts\nvar chrono = __webpack_require__(\"4qNr\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu.ts + 4 modules\nvar context_menu = __webpack_require__(\"fQ68\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu-item.ts\nvar context_menu_item = __webpack_require__(\"8/N+\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu-popover.ts\nvar context_menu_popover = __webpack_require__(\"0QZc\");\n\n// EXTERNAL MODULE: ./src/core/components/download-refresh/download-refresh.ts\nvar download_refresh = __webpack_require__(\"uHIS\");\n\n// EXTERNAL MODULE: ./src/core/components/dynamic-component/dynamic-component.ts\nvar dynamic_component = __webpack_require__(\"w+Pn\");\n\n// EXTERNAL MODULE: ./src/core/components/empty-box/empty-box.ts\nvar empty_box = __webpack_require__(\"r8G5\");\n\n// EXTERNAL MODULE: ./src/core/components/file/file.ts\nvar file = __webpack_require__(\"5450\");\n\n// EXTERNAL MODULE: ./src/core/components/files/files.ts\nvar files = __webpack_require__(\"W5pS\");\n\n// EXTERNAL MODULE: ./src/core/components/group-selector/group-selector.ts\nvar group_selector = __webpack_require__(\"WPIK\");\n\n// EXTERNAL MODULE: ./src/core/components/icon/icon.ts\nvar icon = __webpack_require__(\"p+Qc\");\n\n// EXTERNAL MODULE: ./src/core/components/iframe/iframe.ts\nvar iframe = __webpack_require__(\"qNqN\");\n\n// EXTERNAL MODULE: ./src/core/components/infinite-loading/infinite-loading.ts\nvar infinite_loading = __webpack_require__(\"xpMl\");\n\n// EXTERNAL MODULE: ./src/core/components/input-errors/input-errors.ts\nvar input_errors = __webpack_require__(\"FTxb\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/components/local-file/local-file.ts\nvar local_file = __webpack_require__(\"/K1O\");\n\n// EXTERNAL MODULE: ./src/core/components/mark-required/mark-required.ts\nvar mark_required = __webpack_require__(\"FasJ\");\n\n// EXTERNAL MODULE: ./src/core/components/message/message.ts\nvar message = __webpack_require__(\"9pYf\");\n\n// EXTERNAL MODULE: ./src/core/components/mod-icon/mod-icon.ts\nvar mod_icon = __webpack_require__(\"eAud\");\n\n// EXTERNAL MODULE: ./src/core/components/navbar-buttons/navbar-buttons.ts\nvar navbar_buttons = __webpack_require__(\"ACV2\");\n\n// EXTERNAL MODULE: ./src/core/components/navigation-bar/navigation-bar.ts\nvar navigation_bar = __webpack_require__(\"/BoF\");\n\n// EXTERNAL MODULE: ./src/core/components/progress-bar/progress-bar.ts\nvar progress_bar = __webpack_require__(\"TKc2\");\n\n// EXTERNAL MODULE: ./src/core/components/recaptcha/recaptcha.ts\nvar recaptcha = __webpack_require__(\"whRm\");\n\n// EXTERNAL MODULE: ./src/core/components/send-message-form/send-message-form.ts\nvar send_message_form = __webpack_require__(\"O4u7\");\n\n// EXTERNAL MODULE: ./src/core/components/show-password/show-password.ts\nvar show_password = __webpack_require__(\"lqoc\");\n\n// EXTERNAL MODULE: ./src/core/components/site-picker/site-picker.ts\nvar site_picker = __webpack_require__(\"3lz8\");\n\n// EXTERNAL MODULE: ./src/core/components/style/style.ts\nvar style = __webpack_require__(\"QQhE\");\n\n// EXTERNAL MODULE: ./src/core/components/swipe-slides/swipe-slides.ts\nvar swipe_slides = __webpack_require__(\"MpCO\");\n\n// EXTERNAL MODULE: ./src/core/components/tabs/tab.ts\nvar tab = __webpack_require__(\"JYLr\");\n\n// EXTERNAL MODULE: ./src/core/components/tabs/tabs.ts\nvar tabs = __webpack_require__(\"vWwc\");\n\n// EXTERNAL MODULE: ./src/core/components/tabs-outlet/tabs-outlet.ts\nvar tabs_outlet = __webpack_require__(\"NhJP\");\n\n// EXTERNAL MODULE: ./src/core/components/timer/timer.ts\nvar timer = __webpack_require__(\"rztj\");\n\n// EXTERNAL MODULE: ./src/core/components/user-avatar/user-avatar.ts\nvar user_avatar = __webpack_require__(\"FeAf\");\n\n// EXTERNAL MODULE: ./src/core/components/combobox/combobox.ts\nvar combobox = __webpack_require__(\"rf3J\");\n\n// EXTERNAL MODULE: ./src/core/components/spacer/spacer.ts\nvar spacer = __webpack_require__(\"nEkO\");\n\n// EXTERNAL MODULE: ./src/core/components/horizontal-scroll-controls/horizontal-scroll-controls.ts\nvar horizontal_scroll_controls = __webpack_require__(\"TF0o\");\n\n// EXTERNAL MODULE: ./src/core/components/swipe-navigation-tour/swipe-navigation-tour.ts\nvar swipe_navigation_tour = __webpack_require__(\"p5uK\");\n\n// EXTERNAL MODULE: ./src/core/directives/auto-focus.ts\nvar auto_focus = __webpack_require__(\"6uVz\");\n\n// EXTERNAL MODULE: ./src/core/directives/auto-rows.ts\nvar auto_rows = __webpack_require__(\"d0nH\");\n\n// EXTERNAL MODULE: ./src/core/directives/external-content.ts\nvar external_content = __webpack_require__(\"NcPy\");\n\n// EXTERNAL MODULE: ./src/core/directives/fab.ts\nvar fab = __webpack_require__(\"yNDK\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/link.ts\nvar directives_link = __webpack_require__(\"iSJP\");\n\n// EXTERNAL MODULE: ./src/core/directives/long-press.ts\nvar long_press = __webpack_require__(\"iJls\");\n\n// EXTERNAL MODULE: ./src/core/directives/supress-events.ts\nvar supress_events = __webpack_require__(\"ArDJ\");\n\n// EXTERNAL MODULE: ./src/core/directives/user-link.ts\nvar user_link = __webpack_require__(\"nu3w\");\n\n// EXTERNAL MODULE: ./src/core/directives/aria-button.ts\nvar aria_button = __webpack_require__(\"saTE\");\n\n// EXTERNAL MODULE: ./src/core/directives/on-resize.ts\nvar on_resize = __webpack_require__(\"8PoL\");\n\n// EXTERNAL MODULE: ./src/core/directives/download-file.ts\nvar download_file = __webpack_require__(\"4a38\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-header.ts\nvar collapsible_header = __webpack_require__(\"4JiN\");\n\n// EXTERNAL MODULE: ./src/core/directives/swipe-navigation.ts\nvar swipe_navigation = __webpack_require__(\"OZH1\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-item.ts\nvar collapsible_item = __webpack_require__(\"edOc\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-footer.ts\nvar collapsible_footer = __webpack_require__(\"3jOR\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./src/core/directives/user-tour.ts\nvar user_tour = __webpack_require__(\"6A9T\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/forms/__ivy_ngcc__/fesm2015/forms.js\nvar fesm2015_forms = __webpack_require__(\"3Pt+\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/components/index/index.ts\nvar index = __webpack_require__(\"GsO6\");\n\n// EXTERNAL MODULE: ./src/addons/mod/forum/components/post/post.ts\nvar post = __webpack_require__(\"L5yw\");\n\n// EXTERNAL MODULE: ./src/core/pipes/bytes-to-size.ts\nvar bytes_to_size = __webpack_require__(\"1iFe\");\n\n// EXTERNAL MODULE: ./src/core/pipes/create-links.ts\nvar create_links = __webpack_require__(\"dne1\");\n\n// EXTERNAL MODULE: ./src/core/pipes/date-day-or-time.ts\nvar date_day_or_time = __webpack_require__(\"Cg42\");\n\n// EXTERNAL MODULE: ./src/core/pipes/duration.ts\nvar duration = __webpack_require__(\"llyR\");\n\n// EXTERNAL MODULE: ./src/core/pipes/format-date.ts\nvar format_date = __webpack_require__(\"uYHD\");\n\n// EXTERNAL MODULE: ./src/core/pipes/no-tags.ts\nvar no_tags = __webpack_require__(\"SspJ\");\n\n// EXTERNAL MODULE: ./src/core/pipes/seconds-to-hms.ts\nvar seconds_to_hms = __webpack_require__(\"U2xU\");\n\n// EXTERNAL MODULE: ./src/core/pipes/time-ago.ts\nvar time_ago = __webpack_require__(\"lAaw\");\n\n// EXTERNAL MODULE: ./src/core/pipes/to-locale-string.ts\nvar to_locale_string = __webpack_require__(\"1ArG\");\n\n// CONCATENATED MODULE: ./src/addons/mod/forum/pages/discussion/discussion.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nconst routes = [{\n        path: '',\n        component: discussion_page_AddonModForumDiscussionPage,\n        canDeactivate: [can_leave[\"a\" /* CanLeaveGuard */]],\n    }];\nlet discussion_module_AddonForumDiscussionPageModule = /*@__PURE__*/ (() => {\n    class AddonForumDiscussionPageModule {\n    }\n    AddonForumDiscussionPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonForumDiscussionPageModule });\n    AddonForumDiscussionPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonForumDiscussionPageModule_Factory(t) { return new (t || AddonForumDiscussionPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* AddonModForumComponentsModule */],\n            ]] });\n    return AddonForumDiscussionPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](discussion_module_AddonForumDiscussionPageModule, { declarations: [discussion_page_AddonModForumDiscussionPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* AddonModForumComponentsModule */]] });\n})();\ncore[\"jd\" /* ɵɵsetComponentScope */](discussion_page_AddonModForumDiscussionPage, [router[\"n\" /* RouterOutlet */], router[\"j\" /* RouterLink */], router[\"l\" /* RouterLinkWithHref */], router[\"k\" /* RouterLinkActive */], router[\"p\" /* ɵangular_packages_router_router_l */], common[\"q\" /* NgClass */], common[\"r\" /* NgComponentOutlet */], common[\"s\" /* NgForOf */], common[\"t\" /* NgIf */], common[\"A\" /* NgTemplateOutlet */], common[\"w\" /* NgStyle */], common[\"x\" /* NgSwitch */], common[\"y\" /* NgSwitchCase */], common[\"z\" /* NgSwitchDefault */], common[\"u\" /* NgPlural */], common[\"v\" /* NgPluralCase */], attachments[\"a\" /* CoreAttachmentsComponent */], bs_tooltip[\"a\" /* CoreBSTooltipComponent */], button_with_spinner[\"a\" /* CoreButtonWithSpinnerComponent */], chart[\"a\" /* CoreChartComponent */], chrono[\"a\" /* CoreChronoComponent */], context_menu[\"a\" /* CoreContextMenuComponent */], context_menu_item[\"a\" /* CoreContextMenuItemComponent */], context_menu_popover[\"a\" /* CoreContextMenuPopoverComponent */], download_refresh[\"a\" /* CoreDownloadRefreshComponent */], dynamic_component[\"a\" /* CoreDynamicComponent */], empty_box[\"a\" /* CoreEmptyBoxComponent */], file[\"a\" /* CoreFileComponent */], files[\"a\" /* CoreFilesComponent */], group_selector[\"a\" /* CoreGroupSelectorComponent */], icon[\"a\" /* CoreIconComponent */], iframe[\"a\" /* CoreIframeComponent */], infinite_loading[\"a\" /* CoreInfiniteLoadingComponent */], input_errors[\"a\" /* CoreInputErrorsComponent */], loading[\"a\" /* CoreLoadingComponent */], local_file[\"a\" /* CoreLocalFileComponent */], mark_required[\"a\" /* CoreMarkRequiredComponent */], message[\"a\" /* CoreMessageComponent */], mod_icon[\"a\" /* CoreModIconComponent */], navbar_buttons[\"a\" /* CoreNavBarButtonsComponent */], navigation_bar[\"a\" /* CoreNavigationBarComponent */], progress_bar[\"a\" /* CoreProgressBarComponent */], recaptcha[\"a\" /* CoreRecaptchaComponent */], send_message_form[\"a\" /* CoreSendMessageFormComponent */], show_password[\"a\" /* CoreShowPasswordComponent */], site_picker[\"a\" /* CoreSitePickerComponent */], split_view[\"a\" /* CoreSplitViewComponent */], style[\"a\" /* CoreStyleComponent */], swipe_slides[\"a\" /* CoreSwipeSlidesComponent */], tab[\"a\" /* CoreTabComponent */], tabs[\"a\" /* CoreTabsComponent */], tabs_outlet[\"a\" /* CoreTabsOutletComponent */], timer[\"a\" /* CoreTimerComponent */], user_avatar[\"a\" /* CoreUserAvatarComponent */], combobox[\"a\" /* CoreComboboxComponent */], spacer[\"a\" /* CoreSpacerComponent */], horizontal_scroll_controls[\"a\" /* CoreHorizontalScrollControlsComponent */], swipe_navigation_tour[\"a\" /* CoreSwipeNavigationTourComponent */], auto_focus[\"a\" /* CoreAutoFocusDirective */], auto_rows[\"a\" /* CoreAutoRowsDirective */], external_content[\"a\" /* CoreExternalContentDirective */], fab[\"a\" /* CoreFabDirective */], fa_icon[\"a\" /* CoreFaIconDirective */], format_text[\"a\" /* CoreFormatTextDirective */], directives_link[\"a\" /* CoreLinkDirective */], long_press[\"a\" /* CoreLongPressDirective */], supress_events[\"a\" /* CoreSupressEventsDirective */], user_link[\"a\" /* CoreUserLinkDirective */], aria_button[\"a\" /* CoreAriaButtonClickDirective */], on_resize[\"a\" /* CoreOnResizeDirective */], download_file[\"a\" /* CoreDownloadFileDirective */], collapsible_header[\"b\" /* CoreCollapsibleHeaderDirective */], swipe_navigation[\"a\" /* CoreSwipeNavigationDirective */], collapsible_item[\"a\" /* CoreCollapsibleItemDirective */], collapsible_footer[\"a\" /* CoreCollapsibleFooterDirective */], content[\"a\" /* CoreContentDirective */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], user_tour[\"a\" /* CoreUserTourDirective */], fesm2015_forms[\"H\" /* ɵangular_packages_forms_forms_y */], fesm2015_forms[\"w\" /* NgSelectOption */], fesm2015_forms[\"G\" /* ɵangular_packages_forms_forms_x */], fesm2015_forms[\"c\" /* DefaultValueAccessor */], fesm2015_forms[\"x\" /* NumberValueAccessor */], fesm2015_forms[\"A\" /* RangeValueAccessor */], fesm2015_forms[\"a\" /* CheckboxControlValueAccessor */], fesm2015_forms[\"D\" /* SelectControlValueAccessor */], fesm2015_forms[\"E\" /* SelectMultipleControlValueAccessor */], fesm2015_forms[\"z\" /* RadioControlValueAccessor */], fesm2015_forms[\"r\" /* NgControlStatus */], fesm2015_forms[\"s\" /* NgControlStatusGroup */], fesm2015_forms[\"C\" /* RequiredValidator */], fesm2015_forms[\"o\" /* MinLengthValidator */], fesm2015_forms[\"n\" /* MaxLengthValidator */], fesm2015_forms[\"y\" /* PatternValidator */], fesm2015_forms[\"b\" /* CheckboxRequiredValidator */], fesm2015_forms[\"d\" /* EmailValidator */], fesm2015_forms[\"u\" /* NgModel */], fesm2015_forms[\"v\" /* NgModelGroup */], fesm2015_forms[\"t\" /* NgForm */], ionic_angular[\"f\" /* IonApp */], ionic_angular[\"g\" /* IonAvatar */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"j\" /* IonBackdrop */], ionic_angular[\"k\" /* IonBadge */], ionic_angular[\"l\" /* IonButton */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"n\" /* IonCard */], ionic_angular[\"o\" /* IonCardContent */], ionic_angular[\"p\" /* IonCardHeader */], ionic_angular[\"q\" /* IonCardSubtitle */], ionic_angular[\"r\" /* IonCardTitle */], ionic_angular[\"s\" /* IonCheckbox */], ionic_angular[\"t\" /* IonChip */], ionic_angular[\"u\" /* IonCol */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"w\" /* IonDatetime */], ionic_angular[\"x\" /* IonFab */], ionic_angular[\"y\" /* IonFabButton */], ionic_angular[\"z\" /* IonFabList */], ionic_angular[\"A\" /* IonFooter */], ionic_angular[\"B\" /* IonGrid */], ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"D\" /* IonIcon */], ionic_angular[\"E\" /* IonImg */], ionic_angular[\"F\" /* IonInfiniteScroll */], ionic_angular[\"G\" /* IonInfiniteScrollContent */], ionic_angular[\"H\" /* IonInput */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"J\" /* IonItemDivider */], ionic_angular[\"K\" /* IonItemGroup */], ionic_angular[\"L\" /* IonItemOption */], ionic_angular[\"M\" /* IonItemOptions */], ionic_angular[\"N\" /* IonItemSliding */], ionic_angular[\"O\" /* IonLabel */], ionic_angular[\"P\" /* IonList */], ionic_angular[\"Q\" /* IonListHeader */], ionic_angular[\"R\" /* IonMenu */], ionic_angular[\"S\" /* IonMenuButton */], ionic_angular[\"T\" /* IonMenuToggle */], ionic_angular[\"U\" /* IonNav */], ionic_angular[\"V\" /* IonNavLink */], ionic_angular[\"W\" /* IonNote */], ionic_angular[\"X\" /* IonProgressBar */], ionic_angular[\"Y\" /* IonRadio */], ionic_angular[\"Z\" /* IonRadioGroup */], ionic_angular[\"ab\" /* IonRange */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], ionic_angular[\"db\" /* IonReorder */], ionic_angular[\"eb\" /* IonReorderGroup */], ionic_angular[\"fb\" /* IonRippleEffect */], ionic_angular[\"hb\" /* IonRow */], ionic_angular[\"ib\" /* IonSearchbar */], ionic_angular[\"jb\" /* IonSegment */], ionic_angular[\"kb\" /* IonSegmentButton */], ionic_angular[\"lb\" /* IonSelect */], ionic_angular[\"mb\" /* IonSelectOption */], ionic_angular[\"nb\" /* IonSkeletonText */], ionic_angular[\"ob\" /* IonSlide */], ionic_angular[\"pb\" /* IonSlides */], ionic_angular[\"qb\" /* IonSpinner */], ionic_angular[\"rb\" /* IonSplitPane */], ionic_angular[\"sb\" /* IonTabBar */], ionic_angular[\"tb\" /* IonTabButton */], ionic_angular[\"vb\" /* IonText */], ionic_angular[\"wb\" /* IonTextarea */], ionic_angular[\"xb\" /* IonThumbnail */], ionic_angular[\"zb\" /* IonToggle */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"yb\" /* IonTitle */], ionic_angular[\"ub\" /* IonTabs */], ionic_angular[\"d\" /* BooleanValueAccessor */], ionic_angular[\"Jb\" /* NumericValueAccessor */], ionic_angular[\"Mb\" /* RadioValueAccessor */], ionic_angular[\"Ob\" /* SelectValueAccessor */], ionic_angular[\"Pb\" /* TextValueAccessor */], ionic_angular[\"gb\" /* IonRouterOutlet */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"Hb\" /* NavDelegate */], ionic_angular[\"Nb\" /* RouterLinkDelegate */], ionic_angular[\"Rb\" /* VirtualFooter */], ionic_angular[\"Sb\" /* VirtualHeader */], ionic_angular[\"Tb\" /* VirtualItem */], ionic_angular[\"Bb\" /* IonVirtualScroll */], fesm2015_forms[\"h\" /* FormControlDirective */], fesm2015_forms[\"k\" /* FormGroupDirective */], fesm2015_forms[\"i\" /* FormControlName */], fesm2015_forms[\"l\" /* FormGroupName */], fesm2015_forms[\"e\" /* FormArrayName */], ngx_translate_core[\"a\" /* TranslateDirective */], index[\"a\" /* AddonModForumIndexComponent */], post[\"a\" /* AddonModForumPostComponent */], discussion_page_AddonModForumDiscussionPage], [common[\"b\" /* AsyncPipe */], common[\"G\" /* UpperCasePipe */], common[\"p\" /* LowerCasePipe */], common[\"k\" /* JsonPipe */], common[\"E\" /* SlicePipe */], common[\"g\" /* DecimalPipe */], common[\"C\" /* PercentPipe */], common[\"F\" /* TitleCasePipe */], common[\"d\" /* CurrencyPipe */], common[\"f\" /* DatePipe */], common[\"i\" /* I18nPluralPipe */], common[\"j\" /* I18nSelectPipe */], common[\"l\" /* KeyValuePipe */], bytes_to_size[\"a\" /* CoreBytesToSizePipe */], create_links[\"a\" /* CoreCreateLinksPipe */], date_day_or_time[\"a\" /* CoreDateDayOrTimePipe */], duration[\"a\" /* CoreDurationPipe */], format_date[\"a\" /* CoreFormatDatePipe */], no_tags[\"a\" /* CoreNoTagsPipe */], seconds_to_hms[\"a\" /* CoreSecondsToHMSPipe */], time_ago[\"a\" /* CoreTimeAgoPipe */], to_locale_string[\"a\" /* CoreToLocaleStringPipe */], ngx_translate_core[\"d\" /* TranslatePipe */]]);\n\n\n/***/ })\n\n}]);","inputSourceMap":null}