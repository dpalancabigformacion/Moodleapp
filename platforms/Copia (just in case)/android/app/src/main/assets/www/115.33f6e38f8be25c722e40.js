(window.webpackJsonp=window.webpackJsonp||[]).push([[115],{"86GQ":function(e,t,n){"use strict";n.r(t),n.d(t,"CoreSettingsGeneralPageModule",(function(){return L}));var i=n("tyNb"),a=n("L3Fv"),o=n("mrSG"),c=n("BaYo"),l=n("BBqZ"),s=n("fjkH"),r=n("Ao69"),g=n("3LXp"),d=n("Afn4"),_=n("1gmh"),h=n("nvXB"),m=n("41gC"),p=n("j3ag"),u=n("9+EE"),C=n("bFG1"),S=n("pHTc"),E=n("fXoL"),f=n("TEn/"),b=n("nt/U"),y=n("3Pt+"),D=n("ofXK"),P=n("ACYt"),T=n("sYmb");function CoreSettingsGeneralPage_ion_select_option_18_Template(e,t){if(1&e&&(E.Ec(0,"ion-select-option",14),E.pd(1),E.Dc()),2&e){const e=t.$implicit;E.Vc("value",e.code),E.lc(1),E.qd(e.name)}}const _c0=function(e){return{"font-size.px":e}};function CoreSettingsGeneralPage_ion_segment_button_25_Template(e,t){if(1&e&&(E.Ec(0,"ion-segment-button",15),E.Ec(1,"ion-label"),E.pd(2),E.Pc(3,"translate"),E.zc(4,"span",16),E.Dc(),E.Dc()),2&e){const e=t.$implicit,n=E.Oc();E.Vc("value",e.value)("ngStyle",E.ad(6,_c0,e.style)),E.lc(2),E.rd(" ",E.Qc(3,4,"core.settings.fontsizecharacter")," "),E.lc(2),E.Vc("ngStyle",E.ad(8,_c0,n.zoomLevels[n.zoomLevels.length-1].style))}}function CoreSettingsGeneralPage_ion_item_26_p_5_Template(e,t){1&e&&(E.Ec(0,"p",20),E.pd(1),E.Pc(2,"translate"),E.Dc()),2&e&&(E.lc(1),E.qd(E.Qc(2,1,"core.settings.forcedsetting")))}function CoreSettingsGeneralPage_ion_item_26_ion_select_option_8_Template(e,t){if(1&e&&(E.Ec(0,"ion-select-option",14),E.pd(1),E.Pc(2,"translate"),E.Dc()),2&e){const e=t.$implicit;E.Vc("value",e),E.lc(1),E.rd(" ",E.Qc(2,2,"core.settings.colorscheme-"+e),"")}}const _c1=function(e){return{header:e}};function CoreSettingsGeneralPage_ion_item_26_Template(e,t){if(1&e){const e=E.Fc();E.Ec(0,"ion-item",17),E.Ec(1,"ion-label"),E.Ec(2,"h2"),E.pd(3),E.Pc(4,"translate"),E.Dc(),E.nd(5,CoreSettingsGeneralPage_ion_item_26_p_5_Template,3,3,"p",18),E.Dc(),E.Ec(6,"ion-select",19),E.Mc("ngModelChange",(function CoreSettingsGeneralPage_ion_item_26_Template_ion_select_ngModelChange_6_listener(t){E.fd(e);return E.Oc().selectedScheme=t}))("ionChange",(function CoreSettingsGeneralPage_ion_item_26_Template_ion_select_ionChange_6_listener(){E.fd(e);return E.Oc().colorSchemeChanged()})),E.Pc(7,"translate"),E.nd(8,CoreSettingsGeneralPage_ion_item_26_ion_select_option_8_Template,3,4,"ion-select-option",5),E.Dc(),E.Dc()}if(2&e){const e=E.Oc();E.lc(3),E.qd(E.Qc(4,6,"core.settings.colorscheme")),E.lc(2),E.Vc("ngIf",e.colorSchemeDisabled),E.lc(1),E.Vc("ngModel",e.selectedScheme)("disabled",e.colorSchemeDisabled)("interfaceOptions",E.ad(10,_c1,E.Qc(7,8,"core.settings.colorscheme"))),E.lc(2),E.Vc("ngForOf",e.colorSchemes)}}function CoreSettingsGeneralPage_ion_item_27_Template(e,t){1&e&&(E.Ec(0,"ion-item",21),E.Ec(1,"ion-label"),E.Ec(2,"p"),E.pd(3),E.Pc(4,"translate"),E.Dc(),E.Dc(),E.Dc()),2&e&&(E.lc(3),E.qd(E.Qc(4,1,"core.settings.colorscheme-system-notice")))}function CoreSettingsGeneralPage_ion_item_37_Template(e,t){if(1&e){const e=E.Fc();E.Ec(0,"ion-item",11),E.Ec(1,"ion-label"),E.Ec(2,"h2"),E.pd(3),E.Pc(4,"translate"),E.Dc(),E.Ec(5,"p"),E.pd(6),E.Pc(7,"translate"),E.Dc(),E.Ec(8,"ion-button",22),E.Mc("click",(function CoreSettingsGeneralPage_ion_item_37_Template_ion_button_click_8_listener(){E.fd(e);return E.Oc().openNativeSettings()})),E.pd(9),E.Pc(10,"translate"),E.Dc(),E.Dc(),E.Dc()}2&e&&(E.lc(3),E.qd(E.Qc(4,3,"core.settings.ioscookies")),E.lc(3),E.qd(E.Qc(7,5,"core.settings.ioscookiesdescription")),E.lc(3),E.rd(" ",E.Qc(10,7,"core.opensettings")," "))}function CoreSettingsGeneralPage_ion_item_47_Template(e,t){if(1&e){const e=E.Fc();E.Ec(0,"ion-item",11),E.Ec(1,"ion-label"),E.Ec(2,"h2"),E.pd(3),E.Pc(4,"translate"),E.Dc(),E.Ec(5,"p"),E.pd(6),E.Pc(7,"translate"),E.Dc(),E.Dc(),E.Ec(8,"ion-toggle",12),E.Mc("ngModelChange",(function CoreSettingsGeneralPage_ion_item_47_Template_ion_toggle_ngModelChange_8_listener(t){E.fd(e);return E.Oc().analyticsEnabled=t}))("ionChange",(function CoreSettingsGeneralPage_ion_item_47_Template_ion_toggle_ionChange_8_listener(){E.fd(e);return E.Oc().analyticsEnabledChanged()})),E.Dc(),E.Dc()}if(2&e){const e=E.Oc();E.lc(3),E.qd(E.Qc(4,3,"core.settings.enablefirebaseanalytics")),E.lc(3),E.qd(E.Qc(7,5,"core.settings.enablefirebaseanalyticsdescription")),E.lc(2),E.Vc("ngModel",e.analyticsEnabled)}}let G=(()=>{class CoreSettingsGeneralPage{constructor(){this.languages=[],this.selectedLanguage="",this.zoomLevels=[],this.selectedZoomLevel="none",this.richTextEditor=!0,this.debugDisplay=!1,this.analyticsSupported=!1,this.analyticsEnabled=!1,this.colorSchemes=[],this.selectedScheme="light",this.colorSchemeDisabled=!1,this.isAndroid=!1,this.displayIframeHelp=!1,this.asyncInit()}asyncInit(){return Object(o.a)(this,void 0,void 0,(function*(){const e=c.a.CONFIG.languages;for(const t in e)this.languages.push({code:t,name:e[t]});this.languages.sort(((e,t)=>e.name.localeCompare(t.name))),this.selectedLanguage=yield r.a.getCurrentLanguage(),c.a.CONFIG.forceColorScheme||(this.colorSchemeDisabled=_.a.isColorSchemeDisabledInSite(),this.colorSchemeDisabled?(this.colorSchemes.push("light"),this.selectedScheme=this.colorSchemes[0]):(this.isAndroid=h.a.isAndroid(),this.colorSchemes=_.a.getAllowedColorSchemes(),this.selectedScheme=yield l.a.get(c.a.SETTINGS_COLOR_SCHEME,"light"))),this.selectedZoomLevel=yield _.a.getZoomLevel(),this.zoomLevels=Object.keys(c.a.CONFIG.zoomlevels).map((e=>({value:e,style:Math.round(16*c.a.CONFIG.zoomlevels[e]/100),selected:e===this.selectedZoomLevel}))),this.richTextEditor=yield l.a.get(c.a.SETTINGS_RICH_TEXT_EDITOR,!0),this.debugDisplay=yield l.a.get(c.a.SETTINGS_DEBUG_DISPLAY,!1),this.analyticsSupported=c.a.CONFIG.enableanalytics,this.analyticsSupported&&(this.analyticsEnabled=yield l.a.get(c.a.SETTINGS_ANALYTICS_ENABLED,!0)),this.displayIframeHelp=m.a.shouldDisplayHelp()}))}languageChanged(){var e;return Object(o.a)(this,void 0,void 0,(function*(){const t=yield r.a.getCurrentLanguage();if(this.selectedLanguage===t)return;const n=p.J.instant("core.cancel");try{yield r.a.changeCurrentLanguage(this.selectedLanguage)}finally{const i=null===(e=this.languages.find((e=>e.code==this.selectedLanguage)))||void 0===e?void 0:e.name,a=[{text:n,role:"cancel",handler:()=>{clearTimeout(l),this.selectedLanguage=t,r.a.changeCurrentLanguage(this.selectedLanguage)}},{text:p.J.instant("core.settings.changelanguage",{$a:i}),cssClass:"timed-button",handler:()=>{clearTimeout(l),this.applyLanguageAndRestart()}}],c=yield g.a.showAlertWithOptions({message:p.J.instant("core.settings.changelanguagealert"),buttons:a}),l=window.setTimeout((()=>Object(o.a)(this,void 0,void 0,(function*(){yield c.dismiss(),this.applyLanguageAndRestart()}))),1e4)}}))}applyLanguageAndRestart(){return Object(o.a)(this,void 0,void 0,(function*(){const e=yield u.b.getSitesInstances();yield C.a.ignoreErrors(Promise.all(e.map((e=>e.invalidateWsCache())))),s.b.trigger(s.b.LANGUAGE_CHANGED,this.selectedLanguage),S.a.navigate("/reload",{reset:!0})}))}zoomLevelChanged(){this.zoomLevels=this.zoomLevels.map((e=>(e.selected=e.value===this.selectedZoomLevel,e))),_.a.applyZoomLevel(this.selectedZoomLevel),l.a.set(c.a.SETTINGS_ZOOM_LEVEL,this.selectedZoomLevel)}colorSchemeChanged(){_.a.setColorScheme(this.selectedScheme),l.a.set(c.a.SETTINGS_COLOR_SCHEME,this.selectedScheme)}richTextEditorChanged(){l.a.set(c.a.SETTINGS_RICH_TEXT_EDITOR,this.richTextEditor?1:0)}debugDisplayChanged(){l.a.set(c.a.SETTINGS_DEBUG_DISPLAY,this.debugDisplay?1:0),g.a.setDebugDisplay(this.debugDisplay)}analyticsEnabledChanged(){return Object(o.a)(this,void 0,void 0,(function*(){yield d.a.enableAnalytics(this.analyticsEnabled),l.a.set(c.a.SETTINGS_ANALYTICS_ENABLED,this.analyticsEnabled?1:0)}))}openNativeSettings(){p.j.switchToSettings()}}return CoreSettingsGeneralPage.ɵfac=function CoreSettingsGeneralPage_Factory(e){return new(e||CoreSettingsGeneralPage)},CoreSettingsGeneralPage.ɵcmp=E.sc({type:CoreSettingsGeneralPage,selectors:[["page-core-app-settings-general"]],decls:48,vars:39,consts:[["slot","start"],[3,"text"],[1,"list-item-limited-width"],["lines","none",1,"ion-text-wrap"],["interface","action-sheet",3,"ngModel","interfaceOptions","ngModelChange","ionChange"],[3,"value",4,"ngFor","ngForOf"],["lines","none",1,"ion-text-wrap","core-settings-general-font-size","item-interactive"],["color","primary",3,"ngModel","ngModelChange","ionChange"],[3,"value","ngStyle",4,"ngFor","ngForOf"],["class","ion-text-wrap core-settings-general-color-scheme","lines","none",4,"ngIf"],["text-wrap","","lines","none",4,"ngIf"],[1,"ion-text-wrap"],[3,"ngModel","ngModelChange","ionChange"],["class","ion-text-wrap",4,"ngIf"],[3,"value"],[3,"value","ngStyle"],[3,"ngStyle"],["lines","none",1,"ion-text-wrap","core-settings-general-color-scheme"],["class","text-danger",4,"ngIf"],["interface","action-sheet",3,"ngModel","disabled","interfaceOptions","ngModelChange","ionChange"],[1,"text-danger"],["text-wrap","","lines","none"],["expand","block",3,"click"]],template:function CoreSettingsGeneralPage_Template(e,t){1&e&&(E.Ec(0,"ion-header"),E.Ec(1,"ion-toolbar"),E.Ec(2,"ion-buttons",0),E.zc(3,"ion-back-button",1),E.Pc(4,"translate"),E.Dc(),E.Ec(5,"ion-title"),E.Ec(6,"h1"),E.pd(7),E.Pc(8,"translate"),E.Dc(),E.Dc(),E.Dc(),E.Dc(),E.Ec(9,"ion-content"),E.Ec(10,"ion-list",2),E.Ec(11,"ion-item",3),E.Ec(12,"ion-label"),E.Ec(13,"h2"),E.pd(14),E.Pc(15,"translate"),E.Dc(),E.Dc(),E.Ec(16,"ion-select",4),E.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_select_ngModelChange_16_listener(e){return t.selectedLanguage=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_select_ionChange_16_listener(){return t.languageChanged()})),E.Pc(17,"translate"),E.nd(18,CoreSettingsGeneralPage_ion_select_option_18_Template,2,2,"ion-select-option",5),E.Dc(),E.Dc(),E.Ec(19,"ion-item",6),E.Ec(20,"ion-label"),E.Ec(21,"h2"),E.pd(22),E.Pc(23,"translate"),E.Dc(),E.Dc(),E.Ec(24,"ion-segment",7),E.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_segment_ngModelChange_24_listener(e){return t.selectedZoomLevel=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_segment_ionChange_24_listener(){return t.zoomLevelChanged()})),E.nd(25,CoreSettingsGeneralPage_ion_segment_button_25_Template,5,10,"ion-segment-button",8),E.Dc(),E.Dc(),E.nd(26,CoreSettingsGeneralPage_ion_item_26_Template,9,12,"ion-item",9),E.nd(27,CoreSettingsGeneralPage_ion_item_27_Template,5,3,"ion-item",10),E.Ec(28,"ion-item",11),E.Ec(29,"ion-label"),E.Ec(30,"h2"),E.pd(31),E.Pc(32,"translate"),E.Dc(),E.Ec(33,"p"),E.pd(34),E.Pc(35,"translate"),E.Dc(),E.Dc(),E.Ec(36,"ion-toggle",12),E.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ngModelChange_36_listener(e){return t.richTextEditor=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ionChange_36_listener(){return t.richTextEditorChanged()})),E.Dc(),E.Dc(),E.nd(37,CoreSettingsGeneralPage_ion_item_37_Template,11,9,"ion-item",13),E.Ec(38,"ion-item",11),E.Ec(39,"ion-label"),E.Ec(40,"h2"),E.pd(41),E.Pc(42,"translate"),E.Dc(),E.Ec(43,"p"),E.pd(44),E.Pc(45,"translate"),E.Dc(),E.Dc(),E.Ec(46,"ion-toggle",12),E.Mc("ngModelChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ngModelChange_46_listener(e){return t.debugDisplay=e}))("ionChange",(function CoreSettingsGeneralPage_Template_ion_toggle_ionChange_46_listener(){return t.debugDisplayChanged()})),E.Dc(),E.Dc(),E.nd(47,CoreSettingsGeneralPage_ion_item_47_Template,9,7,"ion-item",13),E.Dc(),E.Dc()),2&e&&(E.lc(3),E.Vc("text",E.Qc(4,19,"core.back")),E.lc(4),E.qd(E.Qc(8,21,"core.settings.general")),E.lc(7),E.qd(E.Qc(15,23,"core.settings.language")),E.lc(2),E.Vc("ngModel",t.selectedLanguage)("interfaceOptions",E.ad(37,_c1,E.Qc(17,25,"core.settings.language"))),E.lc(2),E.Vc("ngForOf",t.languages),E.lc(4),E.qd(E.Qc(23,27,"core.settings.fontsize")),E.lc(2),E.Vc("ngModel",t.selectedZoomLevel),E.lc(1),E.Vc("ngForOf",t.zoomLevels),E.lc(1),E.Vc("ngIf",t.colorSchemes.length>0),E.lc(1),E.Vc("ngIf",t.colorSchemes.length>0&&"system"==t.selectedScheme&&t.isAndroid),E.lc(4),E.qd(E.Qc(32,29,"core.settings.enablerichtexteditor")),E.lc(3),E.qd(E.Qc(35,31,"core.settings.enablerichtexteditordescription")),E.lc(2),E.Vc("ngModel",t.richTextEditor),E.lc(1),E.Vc("ngIf",t.displayIframeHelp),E.lc(4),E.qd(E.Qc(42,33,"core.settings.debugdisplay")),E.lc(3),E.qd(E.Qc(45,35,"core.settings.debugdisplaydescription")),E.lc(2),E.Vc("ngModel",t.debugDisplay),E.lc(1),E.Vc("ngIf",t.analyticsSupported))},directives:[f.C,f.Ab,f.m,f.h,f.i,f.yb,b.a,f.v,f.P,f.I,f.O,f.lb,f.Ob,y.r,y.u,D.s,f.jb,D.t,f.zb,f.d,f.mb,f.kb,D.w,P.a,f.l],pipes:[T.d],styles:["[_nghost-%COMP%]   .core-settings-general-font-size[_ngcontent-%COMP%]   ion-segment[_ngcontent-%COMP%]{max-width:250px}"]}),CoreSettingsGeneralPage})();const v=[{path:"",component:G}];let L=(()=>{class CoreSettingsGeneralPageModule{}return CoreSettingsGeneralPageModule.ɵmod=E.wc({type:CoreSettingsGeneralPageModule}),CoreSettingsGeneralPageModule.ɵinj=E.vc({factory:function CoreSettingsGeneralPageModule_Factory(e){return new(e||CoreSettingsGeneralPageModule)},imports:[[i.m.forChild(v),a.a],i.m]}),CoreSettingsGeneralPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&E.kd(L,{declarations:[G],imports:[i.m,a.a],exports:[i.m]}))}}]);