(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{"/g6Q":function(e,t,n){"use strict";n.r(t),n.d(t,"AddonModGlossaryEntryPageModule",(function(){return C}));var o=n("L3Fv"),r=n("mrSG"),a=n("baaQ"),c=n("1Rj0"),s=n("5pQw"),i=n("kWmn"),d=n("pHTc"),l=n("3LXp"),g=n("bFG1"),y=n("fcHg"),_=n("1VuZ"),m=n("gjmY"),u=n("fXoL"),I=n("tyNb"),h=n("TEn/"),f=n("ofXK"),p=n("nt/U"),E=n("OZH1"),v=n("PgjG"),M=n("hMzs"),P=n("FeAf"),A=n("5450"),G=n("vSVd"),b=n("fY5/"),w=n("OoUD"),T=n("sYmb"),D=n("Cg42");function AddonModGlossaryEntryPage_h1_6_Template(e,t){if(1&e&&(u.Ec(0,"h1"),u.zc(1,"core-format-text",8),u.Dc()),2&e){const e=u.Oc();u.lc(1),u.Vc("text",e.entry.concept)("contextInstanceId",e.componentId)("courseId",e.courseId)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_1_ion_note_7_Template(e,t){if(1&e&&(u.Ec(0,"ion-note",17),u.pd(1),u.Pc(2,"coreDateDayOrTime"),u.Dc()),2&e){const e=u.Oc(3);u.lc(1),u.qd(u.Qc(2,1,e.entry.timemodified))}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_1_Template(e,t){if(1&e&&(u.Ec(0,"ion-item",10),u.zc(1,"core-user-avatar",15),u.Ec(2,"ion-label"),u.Ec(3,"h2"),u.zc(4,"core-format-text",8),u.Dc(),u.Ec(5,"p"),u.pd(6),u.Dc(),u.Dc(),u.nd(7,AddonModGlossaryEntryPage_ng_container_12_ion_item_1_ion_note_7_Template,3,3,"ion-note",16),u.Dc()),2&e){const e=u.Oc(2);u.lc(1),u.Vc("user",e.entry),u.lc(3),u.Vc("text",e.entry.concept)("contextInstanceId",e.componentId)("courseId",e.courseId),u.lc(2),u.qd(e.entry.userfullname),u.lc(1),u.Vc("ngIf",e.showDate)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_2_ion_note_4_Template(e,t){if(1&e&&(u.Ec(0,"ion-note",17),u.pd(1),u.Pc(2,"coreDateDayOrTime"),u.Dc()),2&e){const e=u.Oc(3);u.lc(1),u.qd(u.Qc(2,1,e.entry.timemodified))}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_2_Template(e,t){if(1&e&&(u.Ec(0,"ion-item",10),u.Ec(1,"ion-label"),u.Ec(2,"p",18),u.zc(3,"core-format-text",19),u.Dc(),u.Dc(),u.nd(4,AddonModGlossaryEntryPage_ng_container_12_ion_item_2_ion_note_4_Template,3,3,"ion-note",16),u.Dc()),2&e){const e=u.Oc(2);u.lc(3),u.Vc("text",e.entry.concept)("contextInstanceId",e.componentId),u.lc(1),u.Vc("ngIf",e.showDate)}}function AddonModGlossaryEntryPage_ng_container_12_div_6_core_file_1_Template(e,t){if(1&e&&u.zc(0,"core-file",21),2&e){const e=t.$implicit,n=u.Oc(3);u.Vc("file",e)("component",n.component)("componentId",n.componentId)}}function AddonModGlossaryEntryPage_ng_container_12_div_6_Template(e,t){if(1&e&&(u.Ec(0,"div"),u.nd(1,AddonModGlossaryEntryPage_ng_container_12_div_6_core_file_1_Template,1,3,"core-file",20),u.Dc()),2&e){const e=u.Oc(2);u.lc(1),u.Vc("ngForOf",e.entry.attachments)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_7_Template(e,t){if(1&e&&(u.Ec(0,"ion-item",10),u.Ec(1,"ion-label"),u.Ec(2,"div",0),u.pd(3),u.Pc(4,"translate"),u.Dc(),u.zc(5,"core-tag-list",22),u.Dc(),u.Dc()),2&e){const e=u.Oc(2);u.lc(3),u.rd("",u.Qc(4,2,"core.tag.tags"),":"),u.lc(2),u.Vc("tags",e.entry.tags)}}function AddonModGlossaryEntryPage_ng_container_12_ion_item_8_Template(e,t){1&e&&(u.Ec(0,"ion-item",10),u.Ec(1,"ion-label"),u.Ec(2,"p"),u.Ec(3,"em"),u.pd(4),u.Pc(5,"translate"),u.Dc(),u.Dc(),u.Dc(),u.Dc()),2&e&&(u.lc(4),u.qd(u.Qc(5,1,"addon.mod_glossary.entrypendingapproval")))}function AddonModGlossaryEntryPage_ng_container_12_core_comments_9_Template(e,t){if(1&e&&u.zc(0,"core-comments",23),2&e){const e=u.Oc(2);u.Vc("instanceId",e.glossary.coursemodule)("itemId",e.entry.id)("courseId",e.glossary.course)("showItem",!0)}}function AddonModGlossaryEntryPage_ng_container_12_core_rating_rate_10_Template(e,t){if(1&e){const e=u.Fc();u.Ec(0,"core-rating-rate",24),u.Mc("onUpdate",(function AddonModGlossaryEntryPage_ng_container_12_core_rating_rate_10_Template_core_rating_rate_onUpdate_0_listener(){u.fd(e);return u.Oc(2).ratingUpdated()})),u.Dc()}if(2&e){const e=u.Oc(2);u.Vc("ratingInfo",e.ratingInfo)("instanceId",e.glossary.coursemodule)("itemId",e.entry.id)("itemSetId",0)("courseId",e.glossary.course)("aggregateMethod",e.glossary.assessed)("scaleId",e.glossary.scale)("userId",e.entry.userid)}}function AddonModGlossaryEntryPage_ng_container_12_core_rating_aggregate_11_Template(e,t){if(1&e&&u.zc(0,"core-rating-aggregate",25),2&e){const e=u.Oc(2);u.Vc("ratingInfo",e.ratingInfo)("instanceId",e.glossary.coursemodule)("itemId",e.entry.id)("courseId",e.glossary.course)("aggregateMethod",e.glossary.assessed)("scaleId",e.glossary.scale)}}function AddonModGlossaryEntryPage_ng_container_12_Template(e,t){if(1&e&&(u.Cc(0),u.nd(1,AddonModGlossaryEntryPage_ng_container_12_ion_item_1_Template,8,6,"ion-item",9),u.nd(2,AddonModGlossaryEntryPage_ng_container_12_ion_item_2_Template,5,3,"ion-item",9),u.Ec(3,"ion-item",10),u.Ec(4,"ion-label"),u.zc(5,"core-format-text",11),u.Dc(),u.Dc(),u.nd(6,AddonModGlossaryEntryPage_ng_container_12_div_6_Template,2,1,"div",2),u.nd(7,AddonModGlossaryEntryPage_ng_container_12_ion_item_7_Template,6,4,"ion-item",9),u.nd(8,AddonModGlossaryEntryPage_ng_container_12_ion_item_8_Template,6,3,"ion-item",9),u.nd(9,AddonModGlossaryEntryPage_ng_container_12_core_comments_9_Template,1,4,"core-comments",12),u.nd(10,AddonModGlossaryEntryPage_ng_container_12_core_rating_rate_10_Template,1,8,"core-rating-rate",13),u.nd(11,AddonModGlossaryEntryPage_ng_container_12_core_rating_aggregate_11_Template,1,6,"core-rating-aggregate",14),u.Bc()),2&e){const e=u.Oc();u.lc(1),u.Vc("ngIf",e.showAuthor),u.lc(1),u.Vc("ngIf",!e.showAuthor),u.lc(3),u.Vc("component",e.component)("componentId",e.componentId)("text",e.entry.definition)("contextInstanceId",e.componentId)("courseId",e.courseId),u.lc(1),u.Vc("ngIf",e.entry.attachment),u.lc(1),u.Vc("ngIf",e.tagsEnabled&&e.entry&&e.entry.tags&&e.entry.tags.length>0),u.lc(1),u.Vc("ngIf",!e.entry.approved),u.lc(1),u.Vc("ngIf",e.glossary&&e.glossary.allowcomments&&e.entry&&e.entry.id>0&&e.commentsEnabled),u.lc(1),u.Vc("ngIf",e.glossary&&e.ratingInfo),u.lc(1),u.Vc("ngIf",e.glossary&&e.ratingInfo)}}function AddonModGlossaryEntryPage_ion_card_13_Template(e,t){1&e&&(u.Ec(0,"ion-card",26),u.Ec(1,"ion-item"),u.Ec(2,"ion-label"),u.pd(3),u.Pc(4,"translate"),u.Dc(),u.Dc(),u.Dc()),2&e&&(u.lc(3),u.qd(u.Qc(4,1,"addon.mod_glossary.errorloadingentry")))}let x=(()=>{class AddonModGlossaryEntryPage{constructor(e){this.route=e,this.component=m.b.COMPONENT,this.loaded=!1,this.showAuthor=!1,this.showDate=!1,this.tagsEnabled=!1,this.commentsEnabled=!1}ngOnInit(){var e,t;return Object(r.a)(this,void 0,void 0,(function*(){try{const n=this.route.snapshot.data;if(this.courseId=d.a.getRequiredRouteNumberParam("courseId"),this.entryId=d.a.getRequiredRouteNumberParam("entryId"),this.tagsEnabled=i.a.areTagsAvailableInSite(),this.commentsEnabled=!s.a.areCommentsDisabledInSite(),null===(e=n.swipeEnabled)||void 0===e||e){this.cmId=d.a.getRequiredRouteNumberParam("cmId");const e=a.a.getOrCreateSource(y.a,[this.courseId,this.cmId,null!==(t=n.glossaryPathPrefix)&&void 0!==t?t:""]);this.entries=new entry_AddonModGlossaryEntryEntriesSwipeManager(e),yield this.entries.start()}else this.cmId=d.a.getRouteNumberParam("cmId")}catch(e){return l.a.showErrorModal(e),d.a.back(),void 0}try{if(yield this.fetchEntry(),!this.glossary||!this.componentId)return;yield g.a.ignoreErrors(m.a.logEntryView(this.entryId,this.componentId,this.glossary.name))}finally{this.loaded=!0}}))}ngOnDestroy(){var e;null===(e=this.entries)||void 0===e?void 0:e.destroy()}doRefresh(e){var t;return Object(r.a)(this,void 0,void 0,(function*(){(null===(t=this.glossary)||void 0===t?void 0:t.allowcomments)&&this.entry&&this.entry.id>0&&this.commentsEnabled&&this.comments&&g.a.ignoreErrors(this.comments.doRefresh());try{yield g.a.ignoreErrors(m.a.invalidateEntry(this.entryId)),yield this.fetchEntry()}finally{null==e?void 0:e.complete()}}))}fetchEntry(){return Object(r.a)(this,void 0,void 0,(function*(){try{const e=yield m.a.getEntry(this.entryId);if(this.entry=e.entry,this.ratingInfo=e.ratinginfo,this.glossary)return;switch(this.glossary=yield m.a.getGlossaryById(this.courseId,this.entry.glossaryid),this.componentId=this.glossary.coursemodule,this.glossary.displayformat){case"fullwithauthor":case"encyclopedia":this.showAuthor=!0,this.showDate=!0;break;case"fullwithoutauthor":this.showAuthor=!1,this.showDate=!0;break;default:this.showAuthor=!1,this.showDate=!1}}catch(e){l.a.showErrorModalDefault(e,"addon.mod_glossary.errorloadingentry",!0)}}))}ratingUpdated(){m.a.invalidateEntry(this.entryId)}}return AddonModGlossaryEntryPage.ɵfac=function AddonModGlossaryEntryPage_Factory(e){return new(e||AddonModGlossaryEntryPage)(u.yc(I.a))},AddonModGlossaryEntryPage.ɵcmp=u.sc({type:AddonModGlossaryEntryPage,selectors:[["page-addon-mod-glossary-entry"]],viewQuery:function AddonModGlossaryEntryPage_Query(e,t){var n;(1&e&&u.ud(c.a,!0),2&e)&&(u.dd(n=u.Nc())&&(t.comments=n.first))},decls:14,vars:12,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[1,"limited-width",3,"core-swipe-navigation"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["class","core-warning-card",4,"ngIf"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"],["contextLevel","module","component","mod_glossary","area","glossary_entry",3,"instanceId","itemId","courseId","showItem",4,"ngIf"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","itemSetId","courseId","aggregateMethod","scaleId","userId","onUpdate",4,"ngIf"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","courseId","aggregateMethod","scaleId",4,"ngIf"],["slot","start",3,"user"],["slot","end",4,"ngIf"],["slot","end"],[1,"item-heading"],["contextLevel","module",3,"text","contextInstanceId"],[3,"file","component","componentId",4,"ngFor","ngForOf"],[3,"file","component","componentId"],[3,"tags"],["contextLevel","module","component","mod_glossary","area","glossary_entry",3,"instanceId","itemId","courseId","showItem"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","itemSetId","courseId","aggregateMethod","scaleId","userId","onUpdate"],["contextLevel","module",3,"ratingInfo","instanceId","itemId","courseId","aggregateMethod","scaleId"],[1,"core-warning-card"]],template:function AddonModGlossaryEntryPage_Template(e,t){1&e&&(u.Ec(0,"ion-header"),u.Ec(1,"ion-toolbar"),u.Ec(2,"ion-buttons",0),u.zc(3,"ion-back-button",1),u.Pc(4,"translate"),u.Dc(),u.Ec(5,"ion-title"),u.nd(6,AddonModGlossaryEntryPage_h1_6_Template,2,3,"h1",2),u.Dc(),u.Dc(),u.Dc(),u.Ec(7,"ion-content",3),u.Ec(8,"ion-refresher",4),u.Mc("ionRefresh",(function AddonModGlossaryEntryPage_Template_ion_refresher_ionRefresh_8_listener(e){return t.doRefresh(e.target)})),u.zc(9,"ion-refresher-content",5),u.Pc(10,"translate"),u.Dc(),u.Ec(11,"core-loading",6),u.nd(12,AddonModGlossaryEntryPage_ng_container_12_Template,12,13,"ng-container",2),u.nd(13,AddonModGlossaryEntryPage_ion_card_13_Template,5,3,"ion-card",7),u.Dc(),u.Dc()),2&e&&(u.lc(3),u.Vc("text",u.Qc(4,8,"core.back")),u.lc(3),u.Vc("ngIf",t.entry),u.lc(1),u.Vc("core-swipe-navigation",t.entries),u.lc(1),u.Vc("disabled",!t.loaded),u.lc(1),u.Wc("pullingText",u.Qc(10,10,"core.pulltorefresh")),u.lc(2),u.Vc("hideUntil",t.loaded),u.lc(1),u.Vc("ngIf",t.entry&&t.loaded),u.lc(1),u.Vc("ngIf",!t.entry))},directives:[h.C,h.Ab,h.m,h.h,h.i,h.yb,f.t,p.a,h.v,E.a,h.bb,h.cb,v.a,M.a,h.I,h.O,P.a,h.W,f.s,A.a,G.a,c.a,b.a,w.a,h.n],pipes:[T.d,D.a],encapsulation:2}),AddonModGlossaryEntryPage})();class entry_AddonModGlossaryEntryEntriesSwipeManager extends _.a{getSelectedItemPathFromRoute(e){return`${this.getSource().GLOSSARY_PATH_PREFIX}entry/${e.params.entryId}`}}var O=n("rGK3"),V=n("JCPi"),S=n("yQkb");const R=[{path:"",component:x}];let C=(()=>{class AddonModGlossaryEntryPageModule{}return AddonModGlossaryEntryPageModule.ɵmod=u.wc({type:AddonModGlossaryEntryPageModule}),AddonModGlossaryEntryPageModule.ɵinj=u.vc({factory:function AddonModGlossaryEntryPageModule_Factory(e){return new(e||AddonModGlossaryEntryPageModule)},imports:[[I.m.forChild(R),o.a,O.a,V.a,S.a]]}),AddonModGlossaryEntryPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&u.kd(C,{declarations:[x],imports:[I.m,o.a,O.a,V.a,S.a]}))},eoiU:function(e,t,n){"use strict";n.d(t,"a",(function(){return CoreSwipeNavigationItemsManager}));var o=n("mrSG"),r=n("pHTc"),a=n("CtbY");class CoreSwipeNavigationItemsManager extends a.a{start(){return Object(o.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,"forward")}))}navigateToPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,"back")}))}hasNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return r.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const t=[];for(;e&&(t.push(...e.url),e.firstChild);)e=e.firstChild;return t.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,t){return Object(o.a)(this,void 0,void 0,(function*(){const n=yield this.getItemBy(e);n&&(yield this.navigateToItem(n,{animationDirection:t,replace:!0}))}))}getItemBy(e){var t;return Object(o.a)(this,void 0,void 0,(function*(){const n=this.getSource().getItems(),o=null!==(t=this.selectedItem&&(null==n?void 0:n.indexOf(this.selectedItem)))&&void 0!==t?t:-1;if(-1===o||null===n)return null;const r=e>0?1:-1;let a=o,c=0;for(;c!==e&&(a+=r,!(a<0||a>=n.length));)this.skipItemInSwipe(n[a])||(c+=r);return c===e?n[a]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}}}]);