(window.webpackJsonp=window.webpackJsonp||[]).push([[111],{ALyF:function(e,n,i){"use strict";i.r(n),i.d(n,"CoreMainMenuMorePageModule",(function(){return k}));var t=i("fXoL"),o=i("tyNb"),a=i("L3Fv"),c=i("mrSG"),r=i("9+EE"),l=i("bFG1"),s=i("35jd"),d=i("vPQ6"),u=i("fjkH"),m=i("pHTc"),_=i("y9BN"),M=i("vnm2"),g=i("vuGA"),p=i("j3ag"),b=i("YyYz"),f=i("6s78"),h=i("TEn/"),C=i("C1x5"),P=i("nt/U"),v=i("ofXK"),E=i("3CSS"),D=i("iSJP"),I=i("sYmb");function CoreMainMenuMorePage_ion_item_13_Template(e,n){1&e&&(t.Ec(0,"ion-item",10),t.Ec(1,"ion-label"),t.zc(2,"ion-spinner"),t.Pc(3,"translate"),t.Dc(),t.Dc()),2&e&&(t.lc(2),t.mc("aria-label",t.Qc(3,1,"core.loading")))}function CoreMainMenuMorePage_ion_item_14_ion_badge_7_Template(e,n){if(1&e&&(t.Ec(0,"ion-badge",16),t.pd(1),t.Dc()),2&e){const e=t.Oc().$implicit;t.Vc("hidden",e.loading||!e.badge),t.lc(1),t.rd(" ",e.badge," ")}}const _c0=function(e){return{$a:e}};function CoreMainMenuMorePage_ion_item_14_span_8_Template(e,n){if(1&e&&(t.Ec(0,"span",17),t.pd(1),t.Pc(2,"translate"),t.Dc()),2&e){const e=t.Oc().$implicit;t.lc(1),t.rd(" ",t.Rc(2,1,e.badgeA11yText,t.ad(4,_c0,e.badge))," ")}}function CoreMainMenuMorePage_ion_item_14_ion_spinner_9_Template(e,n){1&e&&(t.zc(0,"ion-spinner",2),t.Pc(1,"translate")),2&e&&t.mc("aria-label",t.Qc(1,1,"core.loading"))}const _c1=function(e){return["core-moremenu-handler",e]};function CoreMainMenuMorePage_ion_item_14_Template(e,n){if(1&e){const e=t.Fc();t.Ec(0,"ion-item",11),t.Mc("click",(function CoreMainMenuMorePage_ion_item_14_Template_ion_item_click_0_listener(){t.fd(e);const i=n.$implicit;return t.Oc().openHandler(i)})),t.Pc(1,"translate"),t.zc(2,"ion-icon",12),t.Ec(3,"ion-label"),t.Ec(4,"p",9),t.pd(5),t.Pc(6,"translate"),t.Dc(),t.Dc(),t.nd(7,CoreMainMenuMorePage_ion_item_14_ion_badge_7_Template,2,2,"ion-badge",13),t.nd(8,CoreMainMenuMorePage_ion_item_14_span_8_Template,3,6,"span",14),t.nd(9,CoreMainMenuMorePage_ion_item_14_ion_spinner_9_Template,2,3,"ion-spinner",15),t.Dc()}if(2&e){const e=n.$implicit;t.Vc("ngClass",t.ad(11,_c1,e.class||"")),t.mc("aria-label",t.Qc(1,7,e.title)),t.lc(2),t.Vc("name",e.icon),t.lc(3),t.qd(t.Qc(6,9,e.title)),t.lc(2),t.Vc("ngIf",e.showBadge),t.lc(1),t.Vc("ngIf",e.showBadge&&e.badge&&e.badgeA11yText),t.lc(1),t.Vc("ngIf",e.showBadge&&e.loading)}}function CoreMainMenuMorePage_ng_container_15_ion_item_1_Template(e,n){if(1&e&&(t.Ec(0,"ion-item",20),t.zc(1,"ion-icon",12),t.Ec(2,"ion-label"),t.Ec(3,"p",9),t.pd(4),t.Dc(),t.Dc(),t.Dc()),2&e){const e=t.Oc().$implicit;t.Vc("href",e.url)("capture","app"==e.type)("inApp","inappbrowser"==e.type)("detailIcon","browser"==e.type?"open-outline":"chevron-forward"),t.mc("aria-label",e.label),t.lc(1),t.Vc("name",e.icon),t.lc(3),t.qd(e.label)}}function CoreMainMenuMorePage_ng_container_15_ion_item_2_Template(e,n){if(1&e){const e=t.Fc();t.Ec(0,"ion-item",21),t.Mc("click",(function CoreMainMenuMorePage_ng_container_15_ion_item_2_Template_ion_item_click_0_listener(){t.fd(e);const n=t.Oc().$implicit;return t.Oc().openItem(n)})),t.zc(1,"ion-icon",12),t.Ec(2,"ion-label"),t.Ec(3,"p",9),t.pd(4),t.Dc(),t.Dc(),t.Dc()}if(2&e){const e=t.Oc().$implicit;t.mc("aria-label",e.label),t.lc(1),t.Vc("name",e.icon),t.lc(3),t.qd(e.label)}}function CoreMainMenuMorePage_ng_container_15_Template(e,n){if(1&e&&(t.Cc(0),t.nd(1,CoreMainMenuMorePage_ng_container_15_ion_item_1_Template,5,7,"ion-item",18),t.nd(2,CoreMainMenuMorePage_ng_container_15_ion_item_2_Template,5,3,"ion-item",19),t.Bc()),2&e){const e=n.$implicit;t.lc(1),t.Vc("ngIf","embedded"!=e.type),t.lc(1),t.Vc("ngIf","embedded"==e.type)}}function CoreMainMenuMorePage_ion_item_16_Template(e,n){if(1&e){const e=t.Fc();t.Ec(0,"ion-item",7),t.Mc("click",(function CoreMainMenuMorePage_ion_item_16_Template_ion_item_click_0_listener(){t.fd(e);return t.Oc().scanQR()})),t.zc(1,"ion-icon",22),t.Ec(2,"ion-label"),t.Ec(3,"p",9),t.pd(4),t.Pc(5,"translate"),t.Dc(),t.Dc(),t.Dc()}2&e&&(t.lc(4),t.qd(t.Qc(5,1,"core.scanqr")))}let T=(()=>{class CoreMainMenuMorePage{constructor(){var e;this.handlersLoaded=!1,this.langObserver=u.b.on(u.b.LANGUAGE_CHANGED,this.loadCustomMenuItems.bind(this)),this.updateSiteObserver=u.b.on(u.b.SITE_UPDATED,(()=>Object(c.a)(this,void 0,void 0,(function*(){this.customItems=yield d.a.getCustomMenuItems()}))),r.b.getCurrentSiteId()),this.loadCustomMenuItems(),this.showScanQR=l.a.canScanQR()&&!(null===(e=r.b.getCurrentSite())||void 0===e?void 0:e.isFeatureDisabled("CoreMainMenuDelegate_QrReader"))}ngOnInit(){this.subscription=s.a.getHandlersObservable().subscribe((e=>{this.allHandlers=e,this.initHandlers()})),this.resizeListener=f.a.onWindowResize((()=>{this.initHandlers()}));(new b.a).treatLink()}ngOnDestroy(){var e,n,i,t;null===(e=this.langObserver)||void 0===e?void 0:e.off(),null===(n=this.updateSiteObserver)||void 0===n||n.off(),null===(i=this.subscription)||void 0===i||i.unsubscribe(),null===(t=this.resizeListener)||void 0===t||t.off()}initHandlers(){if(!this.allHandlers)return;const e=this.allHandlers.filter((e=>!e.onlyInMore)).slice(0,d.a.getNumItems());this.handlers=this.allHandlers.filter((n=>-1==e.indexOf(n))),this.handlersLoaded=s.a.areHandlersLoaded()}loadCustomMenuItems(){return Object(c.a)(this,void 0,void 0,(function*(){this.customItems=yield d.a.getCustomMenuItems()}))}openHandler(e){m.a.navigateToSitePath(e.page,{params:e.pageParams})}openItem(e){m.a.navigateToSitePath("viewer/iframe",{params:{title:e.label,url:e.url}})}openSettings(){m.a.navigateToSitePath("settings")}scanQR(){var e;return Object(c.a)(this,void 0,void 0,(function*(){const n=yield l.a.scanQR();if(n)if(_.a.isCustomURL(n))_.a.handleCustomURL(n).catch((e=>{_.a.treatHandleCustomURLError(e)}));else if(/^[^:]{2,}:\/\/[^ ]+$/i.test(n)){(yield M.a.handleLink(n,void 0,!0,!0))||(null===(e=r.b.getCurrentSite())||void 0===e?void 0:e.openInBrowserWithAutoLogin(n))}else g.a.viewText(p.J.instant("core.qrscanner"),n,{displayCopyButton:!0})}))}}return CoreMainMenuMorePage.ɵfac=function CoreMainMenuMorePage_Factory(e){return new(e||CoreMainMenuMorePage)},CoreMainMenuMorePage.ɵcmp=t.sc({type:CoreMainMenuMorePage,selectors:[["page-core-mainmenu-more"]],decls:25,vars:16,consts:[["slot","start"],[3,"text"],["slot","end"],["class","ion-text-center",4,"ngIf"],["button","","detail","true",3,"ngClass","click",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["button","","detail","true",3,"click",4,"ngIf"],["button","","detail","true",3,"click"],["name","fas-cogs","slot","start","aria-hidden","true"],[1,"item-heading"],[1,"ion-text-center"],["button","","detail","true",3,"ngClass","click"],["slot","start","aria-hidden","true",3,"name"],["slot","end","aria-hidden","true",3,"hidden",4,"ngIf"],["class","sr-only",4,"ngIf"],["slot","end",4,"ngIf"],["slot","end","aria-hidden","true",3,"hidden"],[1,"sr-only"],["button","","core-link","","class","core-moremenu-customitem","detail","true",3,"href","capture","inApp","detailIcon",4,"ngIf"],["button","","class","core-moremenu-customitem","detail","true",3,"click",4,"ngIf"],["button","","core-link","","detail","true",1,"core-moremenu-customitem",3,"href","capture","inApp","detailIcon"],["button","","detail","true",1,"core-moremenu-customitem",3,"click"],["name","fas-qrcode","slot","start","aria-hidden","true"]],template:function CoreMainMenuMorePage_Template(e,n){1&e&&(t.Ec(0,"ion-header"),t.Ec(1,"ion-toolbar"),t.Ec(2,"ion-buttons",0),t.zc(3,"ion-back-button",1),t.Pc(4,"translate"),t.Dc(),t.Ec(5,"ion-title"),t.Ec(6,"h1"),t.pd(7),t.Pc(8,"translate"),t.Dc(),t.Dc(),t.Ec(9,"ion-buttons",2),t.zc(10,"core-user-menu-button"),t.Dc(),t.Dc(),t.Dc(),t.Ec(11,"ion-content"),t.Ec(12,"ion-list"),t.nd(13,CoreMainMenuMorePage_ion_item_13_Template,4,3,"ion-item",3),t.nd(14,CoreMainMenuMorePage_ion_item_14_Template,10,13,"ion-item",4),t.nd(15,CoreMainMenuMorePage_ng_container_15_Template,3,2,"ng-container",5),t.nd(16,CoreMainMenuMorePage_ion_item_16_Template,6,3,"ion-item",6),t.Dc(),t.Dc(),t.Ec(17,"ion-footer"),t.Ec(18,"ion-item",7),t.Mc("click",(function CoreMainMenuMorePage_Template_ion_item_click_18_listener(){return n.openSettings()})),t.Pc(19,"translate"),t.zc(20,"ion-icon",8),t.Ec(21,"ion-label"),t.Ec(22,"p",9),t.pd(23),t.Pc(24,"translate"),t.Dc(),t.Dc(),t.Dc(),t.Dc()),2&e&&(t.lc(3),t.Vc("text",t.Qc(4,8,"core.back")),t.lc(4),t.qd(t.Qc(8,10,"core.more")),t.lc(6),t.Vc("ngIf",!(n.handlers&&n.handlers.length||n.handlersLoaded)),t.lc(1),t.Vc("ngForOf",n.handlers),t.lc(1),t.Vc("ngForOf",n.customItems),t.lc(1),t.Vc("ngIf",n.showScanQR),t.lc(2),t.mc("aria-label",t.Qc(19,12,"core.settings.appsettings")),t.lc(5),t.qd(t.Qc(24,14,"core.settings.appsettings")))},directives:[h.C,h.Ab,h.m,h.h,h.i,h.yb,C.a,P.a,h.v,h.P,v.t,v.s,h.A,h.I,h.D,E.a,h.O,h.qb,v.q,h.k,D.a],pipes:[I.d],styles:["ion-item[_ngcontent-%COMP%]{--border-color:var(--core-more-item-border,var(--ion-border-color))}ion-item[_ngcontent-%COMP%] > ion-icon[slot][_ngcontent-%COMP%]{color:var(--core-more-icon)!important}"]}),CoreMainMenuMorePage})();var y=i("wG2S"),O=i("dQ3M");let k=(()=>{class CoreMainMenuMorePageModule{}return CoreMainMenuMorePageModule.ɵmod=t.wc({type:CoreMainMenuMorePageModule}),CoreMainMenuMorePageModule.ɵinj=t.vc({factory:function CoreMainMenuMorePageModule_Factory(e){return new(e||CoreMainMenuMorePageModule)},providers:[{provide:o.g,multi:!0,deps:[t.x],useFactory:e=>Object(y.b)(e,{component:T,data:{mainMenuTabRoot:d.b.MORE_PAGE_NAME}})}],imports:[[a.a,O.a],o.m]}),CoreMainMenuMorePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&t.kd(k,{declarations:[T],imports:[a.a,O.a],exports:[o.m]}))}}]);