(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{UKik:function(e,n,t){"use strict";t.r(n),t.d(n,"AddonCompetencyLearningPlansLazyModule",(function(){return j}));var c=t("tyNb"),a=t("vY5A"),o=t("Y+03"),i=t("L3Fv"),l=t("mrSG"),d=t("3LXp"),r=t("pHTc"),s=t("eoiU"),p=t("baaQ"),m=t("CvRw"),_=t("RJwM"),u=t("FBtE"),g=t("qjHM");class competency_plans_source_AddonCompetencyPlansSource extends m.a{constructor(e){super(),this.USER_ID=e}static getSourceId(e){return e?String(e):"current-user"}getItemPath(e){return`${e.id}/${_.a}`}getItemQueryParams(){return this.USER_ID?{userId:this.USER_ID}:{}}invalidateCache(){return Object(l.a)(this,void 0,void 0,(function*(){yield u.a.invalidateLearningPlans(this.USER_ID)}))}loadPageItems(){return Object(l.a)(this,void 0,void 0,(function*(){const e=yield u.a.getLearningPlans(this.USER_ID);return e.forEach((e=>{switch(e.statusname=g.a.getPlanStatusName(e.status),e.status){case u.b.STATUS_ACTIVE:e.statuscolor="success";break;case u.b.STATUS_COMPLETE:e.statuscolor="danger";break;default:e.statuscolor="warning"}})),{items:e}}))}}var P=t("EoRH"),y=t("l4/z"),f=t("fXoL"),h=t("TEn/"),b=t("ofXK"),C=t("nt/U"),D=t("OZH1"),E=t("PgjG"),A=t("FeAf"),L=t("TKc2"),I=t("hMzs"),T=t("sYmb"),v=t("uYHD");function AddonCompetencyPlanPage_h1_6_Template(e,n){if(1&e&&(f.Ec(0,"h1"),f.pd(1),f.Dc()),2&e){const e=f.Oc();f.lc(1),f.qd(e.plan.plan.name)}}function AddonCompetencyPlanPage_ion_card_12_Template(e,n){if(1&e&&(f.Ec(0,"ion-card"),f.Ec(1,"ion-item",7),f.Ec(2,"ion-label"),f.zc(3,"core-user-avatar",8),f.Ec(4,"h2"),f.pd(5),f.Dc(),f.Dc(),f.Dc(),f.Dc()),2&e){const e=f.Oc();f.lc(3),f.Vc("user",e.user),f.lc(2),f.qd(e.user.fullname)}}function AddonCompetencyPlanPage_ion_card_13_ion_item_2_Template(e,n){if(1&e&&(f.Ec(0,"ion-item",7),f.Ec(1,"ion-label"),f.Ec(2,"p"),f.zc(3,"core-format-text",13),f.Dc(),f.Dc(),f.Dc()),2&e){const e=f.Oc(2);f.lc(3),f.Vc("text",e.plan.plan.description)("contextInstanceId",e.plan.plan.userid)}}function AddonCompetencyPlanPage_ion_card_13_ion_item_10_Template(e,n){if(1&e&&(f.Ec(0,"ion-item",7),f.Ec(1,"ion-label"),f.Ec(2,"p",10),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"p"),f.pd(6),f.Pc(7,"coreFormatDate"),f.Dc(),f.Dc(),f.Dc()),2&e){const e=f.Oc(2);f.lc(3),f.qd(f.Qc(4,2,"addon.competency.duedate")),f.lc(3),f.qd(f.Qc(7,4,1e3*e.plan.plan.duedate))}}function AddonCompetencyPlanPage_ion_card_13_ion_item_11_Template(e,n){if(1&e&&(f.Ec(0,"ion-item",7),f.Ec(1,"ion-label"),f.Ec(2,"p",10),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"p"),f.pd(6),f.Dc(),f.Dc(),f.Dc()),2&e){const e=f.Oc(2);f.lc(3),f.qd(f.Qc(4,2,"addon.competency.template")),f.lc(3),f.qd(e.plan.plan.template.shortname)}}const _c0=function(e,n){return{x:e,y:n}},_c1=function(e){return{$a:e}};function AddonCompetencyPlanPage_ion_card_13_Template(e,n){if(1&e&&(f.Ec(0,"ion-card"),f.Ec(1,"ion-list"),f.nd(2,AddonCompetencyPlanPage_ion_card_13_ion_item_2_Template,4,2,"ion-item",9),f.Ec(3,"ion-item",7),f.Ec(4,"ion-label"),f.Ec(5,"p",10),f.pd(6),f.Pc(7,"translate"),f.Dc(),f.Ec(8,"p"),f.pd(9),f.Dc(),f.Dc(),f.Dc(),f.nd(10,AddonCompetencyPlanPage_ion_card_13_ion_item_10_Template,8,6,"ion-item",9),f.nd(11,AddonCompetencyPlanPage_ion_card_13_ion_item_11_Template,7,4,"ion-item",9),f.Ec(12,"ion-item",7),f.Ec(13,"ion-label",11),f.Ec(14,"p",10),f.pd(15),f.Pc(16,"translate"),f.Dc(),f.Ec(17,"p"),f.pd(18),f.Pc(19,"translate"),f.Dc(),f.zc(20,"core-progress-bar",12),f.Dc(),f.Dc(),f.Dc(),f.Dc()),2&e){const e=f.Oc();f.lc(2),f.Vc("ngIf",e.plan.plan.description),f.lc(4),f.qd(f.Qc(7,11,"addon.competency.status")),f.lc(3),f.qd(e.plan.plan.statusname),f.lc(1),f.Vc("ngIf",e.plan.plan.duedate>0),f.lc(1),f.Vc("ngIf",e.plan.plan.template),f.lc(2),f.Xc("id","addon-competency-plan-",e.plan.plan.id,"-progress"),f.lc(2),f.qd(f.Qc(16,13,"addon.competency.progress")),f.lc(3),f.rd(" ",f.Rc(19,15,"addon.competency.xcompetenciesproficientoutofy",f.ad(21,_c1,f.bd(18,_c0,e.plan.proficientcompetencycount,e.plan.competencycount)))," "),f.lc(2),f.Xc("ariaDescribedBy","addon-competency-plan-",e.plan.plan.id,"-progress"),f.Vc("progress",e.plan.proficientcompetencypercentage)("text",e.plan.proficientcompetencypercentageformatted)}}function AddonCompetencyPlanPage_ion_card_14_ion_item_6_Template(e,n){1&e&&(f.Ec(0,"ion-item",7),f.Ec(1,"ion-label"),f.Ec(2,"p"),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Dc(),f.Dc()),2&e&&(f.lc(3),f.qd(f.Qc(4,1,"addon.competency.nocompetencies")))}function AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_6_Template(e,n){if(1&e&&(f.Ec(0,"ion-badge",17),f.pd(1),f.Dc()),2&e){const e=f.Oc().$implicit;f.Vc("color",e.usercompetencyplan.proficiency?"success":"danger"),f.lc(1),f.rd(" ",e.usercompetencyplan.gradename," ")}}function AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_7_Template(e,n){if(1&e&&(f.Ec(0,"ion-badge",17),f.pd(1),f.Dc()),2&e){const e=f.Oc().$implicit;f.Vc("color",e.usercompetency.proficiency?"success":"danger"),f.lc(1),f.rd(" ",e.usercompetency.gradename," ")}}function AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template(e,n){if(1&e){const e=f.Fc();f.Ec(0,"ion-item",15),f.Mc("click",(function AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template_ion_item_click_0_listener(){f.fd(e);const t=n.$implicit;return f.Oc(2).competencies.select(t)})),f.Ec(1,"ion-label"),f.Ec(2,"p",10),f.pd(3),f.Ec(4,"em"),f.pd(5),f.Dc(),f.Dc(),f.Dc(),f.nd(6,AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_6_Template,2,2,"ion-badge",16),f.nd(7,AddonCompetencyPlanPage_ion_card_14_ion_item_7_ion_badge_7_Template,2,2,"ion-badge",16),f.Dc()}if(2&e){const e=n.$implicit;f.mc("aria-label",e.competency.shortname),f.lc(3),f.rd("",e.competency.shortname," "),f.lc(2),f.qd(e.competency.idnumber),f.lc(1),f.Vc("ngIf",e.usercompetencyplan),f.lc(1),f.Vc("ngIf",!e.usercompetencyplan)}}function AddonCompetencyPlanPage_ion_card_14_Template(e,n){if(1&e&&(f.Ec(0,"ion-card"),f.Ec(1,"ion-card-header",7),f.Ec(2,"ion-card-title"),f.pd(3),f.Pc(4,"translate"),f.Dc(),f.Dc(),f.Ec(5,"ion-list"),f.nd(6,AddonCompetencyPlanPage_ion_card_14_ion_item_6_Template,5,3,"ion-item",9),f.nd(7,AddonCompetencyPlanPage_ion_card_14_ion_item_7_Template,8,5,"ion-item",14),f.Dc(),f.Dc()),2&e){const e=f.Oc();f.lc(3),f.qd(f.Qc(4,3,"addon.competency.learningplancompetencies")),f.lc(3),f.Vc("ngIf",0==e.plan.competencycount),f.lc(1),f.Vc("ngForOf",e.competencies.items)}}let O=(()=>{class AddonCompetencyPlanPage{constructor(){try{const e=r.a.getRequiredRouteNumberParam("planId"),n=r.a.getRouteNumberParam("userId"),t=p.a.getOrCreateSource(competency_plans_source_AddonCompetencyPlansSource,[n]),c=p.a.getOrCreateSource(y.a,[e]);this.competencies=new P.a(c,AddonCompetencyPlanPage),this.plans=new s.a(t)}catch(e){return d.a.showErrorModal(e),r.a.back(),void 0}}get plan(){return this.competencies.getSource().plan}get user(){return this.competencies.getSource().user}ngOnInit(){return Object(l.a)(this,void 0,void 0,(function*(){yield this.fetchLearningPlan(),yield this.plans.start(),yield this.competencies.start()}))}ngOnDestroy(){this.plans.destroy(),this.competencies.destroy()}fetchLearningPlan(){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.competencies.getSource().reload()}catch(e){d.a.showErrorModalDefault(e,"Error getting learning plan data.")}}))}refreshLearningPlan(e){return Object(l.a)(this,void 0,void 0,(function*(){yield this.competencies.getSource().invalidateCache(),this.fetchLearningPlan().finally((()=>{null==e?void 0:e.complete()}))}))}}return AddonCompetencyPlanPage.ɵfac=function AddonCompetencyPlanPage_Factory(e){return new(e||AddonCompetencyPlanPage)},AddonCompetencyPlanPage.ɵcmp=f.sc({type:AddonCompetencyPlanPage,selectors:[["page-addon-competency-plan"]],decls:15,vars:13,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[1,"limited-width",3,"core-swipe-navigation"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-text-wrap"],["slot","start",3,"user"],["class","ion-text-wrap",4,"ngIf"],[1,"item-heading"],[3,"id"],[3,"progress","text","ariaDescribedBy"],["contextLevel","user",3,"text","contextInstanceId"],["class","ion-text-wrap","detail","true","button","",3,"click",4,"ngFor","ngForOf"],["detail","true","button","",1,"ion-text-wrap",3,"click"],["slot","end",3,"color",4,"ngIf"],["slot","end",3,"color"]],template:function AddonCompetencyPlanPage_Template(e,n){1&e&&(f.Ec(0,"ion-header"),f.Ec(1,"ion-toolbar"),f.Ec(2,"ion-buttons",0),f.zc(3,"ion-back-button",1),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"ion-title"),f.nd(6,AddonCompetencyPlanPage_h1_6_Template,2,1,"h1",2),f.Dc(),f.Dc(),f.Dc(),f.Ec(7,"ion-content",3),f.Ec(8,"ion-refresher",4),f.Mc("ionRefresh",(function AddonCompetencyPlanPage_Template_ion_refresher_ionRefresh_8_listener(e){return n.refreshLearningPlan(e.target)})),f.zc(9,"ion-refresher-content",5),f.Pc(10,"translate"),f.Dc(),f.Ec(11,"core-loading",6),f.nd(12,AddonCompetencyPlanPage_ion_card_12_Template,6,2,"ion-card",2),f.nd(13,AddonCompetencyPlanPage_ion_card_13_Template,21,23,"ion-card",2),f.nd(14,AddonCompetencyPlanPage_ion_card_14_Template,8,5,"ion-card",2),f.Dc(),f.Dc()),2&e&&(f.lc(3),f.Vc("text",f.Qc(4,9,"core.back")),f.lc(3),f.Vc("ngIf",n.plan),f.lc(1),f.Vc("core-swipe-navigation",n.plans),f.lc(1),f.Vc("disabled",!n.competencies.loaded),f.lc(1),f.Wc("pullingText",f.Qc(10,11,"core.pulltorefresh")),f.lc(2),f.Vc("hideUntil",n.competencies.loaded),f.lc(1),f.Vc("ngIf",n.user),f.lc(1),f.Vc("ngIf",n.plan),f.lc(1),f.Vc("ngIf",n.plan))},directives:[h.C,h.Ab,h.m,h.h,h.i,h.yb,b.t,C.a,h.v,D.a,h.bb,h.cb,E.a,h.n,h.I,h.O,A.a,h.P,L.a,I.a,h.p,h.r,b.s,h.k],pipes:[T.d,v.a],encapsulation:2}),AddonCompetencyPlanPage})();var w=t("46ml"),V=t("r8G5");function AddonCompetencyPlanListPage_core_empty_box_15_Template(e,n){1&e&&(f.zc(0,"core-empty-box",7),f.Pc(1,"translate")),2&e&&f.Vc("message",f.Qc(1,1,"addon.competency.noplanswerecreated"))}function AddonCompetencyPlanListPage_ion_list_16_ion_item_1_p_4_Template(e,n){if(1&e&&(f.Ec(0,"p"),f.pd(1),f.Pc(2,"translate"),f.Pc(3,"coreFormatDate"),f.Dc()),2&e){const e=f.Oc().$implicit;f.lc(1),f.sd(" ",f.Qc(2,2,"addon.competency.duedate"),":  ",f.Rc(3,4,1e3*e.duedate,"strftimedatetimeshort")," ")}}function AddonCompetencyPlanListPage_ion_list_16_ion_item_1_Template(e,n){if(1&e){const e=f.Fc();f.Ec(0,"ion-item",10),f.Mc("click",(function AddonCompetencyPlanListPage_ion_list_16_ion_item_1_Template_ion_item_click_0_listener(){f.fd(e);const t=n.$implicit;return f.Oc(2).plans.select(t)})),f.Ec(1,"ion-label"),f.Ec(2,"p",11),f.pd(3),f.Dc(),f.nd(4,AddonCompetencyPlanListPage_ion_list_16_ion_item_1_p_4_Template,4,7,"p",12),f.Dc(),f.Ec(5,"ion-badge",13),f.pd(6),f.Dc(),f.Dc()}if(2&e){const e=n.$implicit,t=f.Oc(2);f.mc("aria-label",e.name)("aria-current",t.plans.getItemAriaCurrent(e)),f.lc(3),f.qd(e.name),f.lc(1),f.Vc("ngIf",e.duedate>0),f.lc(1),f.Vc("color",e.statuscolor),f.lc(1),f.qd(e.statusname)}}function AddonCompetencyPlanListPage_ion_list_16_Template(e,n){if(1&e&&(f.Ec(0,"ion-list",8),f.nd(1,AddonCompetencyPlanListPage_ion_list_16_ion_item_1_Template,7,6,"ion-item",9),f.Dc()),2&e){const e=f.Oc();f.lc(1),f.Vc("ngForOf",e.plans.items)}}let x=(()=>{class AddonCompetencyPlanListPage{constructor(){const e=r.a.getRouteNumberParam("userId"),n=p.a.getOrCreateSource(competency_plans_source_AddonCompetencyPlansSource,[e]);this.plans=new P.a(n,AddonCompetencyPlanListPage)}ngAfterViewInit(){return Object(l.a)(this,void 0,void 0,(function*(){yield this.fetchLearningPlans(),this.plans.start(this.splitView)}))}fetchLearningPlans(){return Object(l.a)(this,void 0,void 0,(function*(){try{yield this.plans.load()}catch(e){d.a.showErrorModalDefault(e,"Error getting learning plans data.")}}))}refreshLearningPlans(e){return Object(l.a)(this,void 0,void 0,(function*(){yield this.plans.getSource().invalidateCache(),this.plans.getSource().setDirty(!0),this.fetchLearningPlans().finally((()=>{null==e?void 0:e.complete()}))}))}ngOnDestroy(){this.plans.destroy()}}return AddonCompetencyPlanListPage.ɵfac=function AddonCompetencyPlanListPage_Factory(e){return new(e||AddonCompetencyPlanListPage)},AddonCompetencyPlanListPage.ɵcmp=f.sc({type:AddonCompetencyPlanListPage,selectors:[["page-addon-competency-planlist"]],viewQuery:function AddonCompetencyPlanListPage_Query(e,n){var t;(1&e&&f.ud(w.a,!0),2&e)&&(f.dd(t=f.Nc())&&(n.splitView=t.first))},decls:17,vars:13,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-route",3,"message",4,"ngIf"],["class","ion-no-margin",4,"ngIf"],["icon","fas-route",3,"message"],[1,"ion-no-margin"],["class","ion-text-wrap","button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",1,"ion-text-wrap",3,"click"],[1,"item-heading"],[4,"ngIf"],["slot","end",1,"ion-text-wrap",3,"color"]],template:function AddonCompetencyPlanListPage_Template(e,n){1&e&&(f.Ec(0,"ion-header"),f.Ec(1,"ion-toolbar"),f.Ec(2,"ion-buttons",0),f.zc(3,"ion-back-button",1),f.Pc(4,"translate"),f.Dc(),f.Ec(5,"ion-title"),f.Ec(6,"h1"),f.pd(7),f.Pc(8,"translate"),f.Dc(),f.Dc(),f.Dc(),f.Dc(),f.Ec(9,"ion-content"),f.Ec(10,"core-split-view"),f.Ec(11,"ion-refresher",2),f.Mc("ionRefresh",(function AddonCompetencyPlanListPage_Template_ion_refresher_ionRefresh_11_listener(e){return n.refreshLearningPlans(e.target)})),f.zc(12,"ion-refresher-content",3),f.Pc(13,"translate"),f.Dc(),f.Ec(14,"core-loading",4),f.nd(15,AddonCompetencyPlanListPage_core_empty_box_15_Template,2,3,"core-empty-box",5),f.nd(16,AddonCompetencyPlanListPage_ion_list_16_Template,2,1,"ion-list",6),f.Dc(),f.Dc(),f.Dc()),2&e&&(f.lc(3),f.Vc("text",f.Qc(4,7,"core.back")),f.lc(4),f.qd(f.Qc(8,9,"addon.competency.userplans")),f.lc(4),f.Vc("disabled",!n.plans.loaded),f.lc(1),f.Wc("pullingText",f.Qc(13,11,"core.pulltorefresh")),f.lc(2),f.Vc("hideUntil",n.plans.loaded),f.lc(1),f.Vc("ngIf",n.plans.empty),f.lc(1),f.Vc("ngIf",!n.plans.empty))},directives:[h.C,h.Ab,h.m,h.h,h.i,h.yb,C.a,h.v,w.a,h.bb,h.cb,E.a,b.t,V.a,h.P,b.s,h.I,h.O,h.k],pipes:[T.d,v.a],encapsulation:2}),AddonCompetencyPlanListPage})();var S=t("ZnQC"),M=t("vgj2"),k=t("XQtJ"),Q=t("7Dkd"),R=t("47DI"),z=t("H4nd");const q=[{path:"",pathMatch:"full",component:x},{path:`:planId/${_.a}`,component:O},{path:`:planId/${_.a}/:competencyId`,component:S.a}],F=[{path:"",component:x,children:[{path:`:planId/${_.a}`,component:O}]},{path:`:planId/${_.a}`,component:R.a,children:[{path:":competencyId",component:S.a}]}],$=[...Object(a.c)(q,(()=>o.a.isMobile)),...Object(a.c)(F,(()=>o.a.isTablet)),{path:`:planId/${_.a}/:competencyId/${_.d}`,component:M.a}];let j=(()=>{class AddonCompetencyLearningPlansLazyModule{}return AddonCompetencyLearningPlansLazyModule.ɵmod=f.wc({type:AddonCompetencyLearningPlansLazyModule}),AddonCompetencyLearningPlansLazyModule.ɵinj=f.vc({factory:function AddonCompetencyLearningPlansLazyModule_Factory(e){return new(e||AddonCompetencyLearningPlansLazyModule)},imports:[[c.m.forChild($),i.a,z.a,k.a,Q.a]]}),AddonCompetencyLearningPlansLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&f.kd(j,{declarations:[O,x],imports:[c.m,i.a,z.a,k.a,Q.a]}))}}]);