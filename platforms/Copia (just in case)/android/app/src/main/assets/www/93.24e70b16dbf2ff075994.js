(window.webpackJsonp=window.webpackJsonp||[]).push([[93],{Ievp:function(e,o,t){"use strict";t.r(o),t.d(o,"CoreCourseListModTypePageModule",(function(){return b}));var r=t("tyNb"),s=t("L3Fv"),i=t("mrSG"),c=t("3LXp"),n=t("ULAo"),a=t("yQ+R"),d=t("GBcW"),l=t("pHTc"),u=t("BaYo"),p=t("bFG1"),m=t("fXoL"),_=t("TEn/"),g=t("nt/U"),C=t("PgjG"),f=t("ofXK"),y=t("r8G5"),h=t("1Y1L"),T=t("sYmb");function CoreCourseListModTypePage_core_empty_box_13_Template(e,o){1&e&&(m.zc(0,"core-empty-box",8),m.Pc(1,"translate")),2&e&&m.Vc("message",m.Qc(1,1,"core.course.nocontentavailable"))}function CoreCourseListModTypePage_ng_container_15_ng_container_1_core_course_module_1_Template(e,o){if(1&e&&m.zc(0,"core-course-module",10),2&e){const e=m.Oc().$implicit,o=m.Oc().$implicit;m.Vc("module",e)("section",o)}}function CoreCourseListModTypePage_ng_container_15_ng_container_1_Template(e,o){if(1&e&&(m.Cc(0),m.nd(1,CoreCourseListModTypePage_ng_container_15_ng_container_1_core_course_module_1_Template,1,2,"core-course-module",9),m.Bc()),2&e){const e=o.$implicit;m.lc(1),m.Vc("ngIf",0!==e.visibleoncoursepage)}}function CoreCourseListModTypePage_ng_container_15_Template(e,o){if(1&e&&(m.Cc(0),m.nd(1,CoreCourseListModTypePage_ng_container_15_ng_container_1_Template,2,1,"ng-container",7),m.Bc()),2&e){const e=o.$implicit;m.lc(1),m.Vc("ngForOf",e.modules)}}let M=(()=>{class CoreCourseListModTypePage{constructor(){this.sections=[],this.title="",this.loaded=!1,this.archetypes={}}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){this.title=l.a.getRouteParam("title")||"",this.courseId=l.a.getRouteNumberParam("courseId"),this.modName=l.a.getRouteParam("modName");try{yield this.fetchData()}finally{this.loaded=!0}}))}fetchData(){return Object(i.a)(this,void 0,void 0,(function*(){if(this.courseId)try{let e=yield n.a.getSections(this.courseId,!1,!0);e=e.filter((e=>!!e.modules&&(e.modules=e.modules.filter((o=>{if(!d.a.canUserViewModule(o,e)||!n.a.moduleHasView(o))return!1;if("resources"===this.modName){if(void 0===this.archetypes[o.modname]&&(this.archetypes[o.modname]=a.a.supportsFeature(o.modname,u.a.FEATURE_MOD_ARCHETYPE,u.a.MOD_ARCHETYPE_OTHER)),this.archetypes[o.modname]==u.a.MOD_ARCHETYPE_RESOURCE)return!0}else if(o.modname==this.modName)return!0})),e.modules.length>0)));const o=yield d.a.addHandlerDataForModules(e,this.courseId);this.sections=o.sections}catch(e){c.a.showErrorModalDefault(e,"Error getting data")}}))}refreshData(e){return Object(i.a)(this,void 0,void 0,(function*(){yield p.a.ignoreErrors(n.a.invalidateSections(this.courseId||0));try{yield this.fetchData()}finally{e.complete()}}))}}return CoreCourseListModTypePage.ɵfac=function CoreCourseListModTypePage_Factory(e){return new(e||CoreCourseListModTypePage)},CoreCourseListModTypePage.ɵcmp=m.sc({type:CoreCourseListModTypePage,selectors:[["page-core-course-list-mod-type"]],decls:16,vars:11,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["icon","fas-box-open",3,"message",4,"ngIf"],[1,"core-course-module-list-wrapper"],[4,"ngFor","ngForOf"],["icon","fas-box-open",3,"message"],[3,"module","section",4,"ngIf"],[3,"module","section"]],template:function CoreCourseListModTypePage_Template(e,o){1&e&&(m.Ec(0,"ion-header"),m.Ec(1,"ion-toolbar"),m.Ec(2,"ion-buttons",0),m.zc(3,"ion-back-button",1),m.Pc(4,"translate"),m.Dc(),m.Ec(5,"ion-title"),m.Ec(6,"h1"),m.pd(7),m.Dc(),m.Dc(),m.Dc(),m.Dc(),m.Ec(8,"ion-content"),m.Ec(9,"ion-refresher",2),m.Mc("ionRefresh",(function CoreCourseListModTypePage_Template_ion_refresher_ionRefresh_9_listener(e){return o.refreshData(e.target)})),m.zc(10,"ion-refresher-content",3),m.Pc(11,"translate"),m.Dc(),m.Ec(12,"core-loading",4),m.nd(13,CoreCourseListModTypePage_core_empty_box_13_Template,2,3,"core-empty-box",5),m.Ec(14,"ion-list",6),m.nd(15,CoreCourseListModTypePage_ng_container_15_Template,2,1,"ng-container",7),m.Dc(),m.Dc(),m.Dc()),2&e&&(m.lc(3),m.Vc("text",m.Qc(4,7,"core.back")),m.lc(4),m.qd(o.title),m.lc(2),m.Vc("disabled",!o.loaded),m.lc(1),m.Wc("pullingText",m.Qc(11,9,"core.pulltorefresh")),m.lc(2),m.Vc("hideUntil",o.loaded),m.lc(1),m.Vc("ngIf",!o.sections||!o.sections.length),m.lc(2),m.Vc("ngForOf",o.sections))},directives:[_.C,_.Ab,_.m,_.h,_.i,_.yb,g.a,_.v,_.bb,_.cb,C.a,f.t,_.P,f.s,y.a,h.a],pipes:[T.d],encapsulation:2}),CoreCourseListModTypePage})();var P=t("Fjfc");const L=[{path:"",component:M}];let b=(()=>{class CoreCourseListModTypePageModule{}return CoreCourseListModTypePageModule.ɵmod=m.wc({type:CoreCourseListModTypePageModule}),CoreCourseListModTypePageModule.ɵinj=m.vc({factory:function CoreCourseListModTypePageModule_Factory(e){return new(e||CoreCourseListModTypePageModule)},imports:[[r.m.forChild(L),s.a,P.a],r.m]}),CoreCourseListModTypePageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&m.kd(b,{declarations:[M],imports:[r.m,s.a,P.a],exports:[r.m]}))}}]);