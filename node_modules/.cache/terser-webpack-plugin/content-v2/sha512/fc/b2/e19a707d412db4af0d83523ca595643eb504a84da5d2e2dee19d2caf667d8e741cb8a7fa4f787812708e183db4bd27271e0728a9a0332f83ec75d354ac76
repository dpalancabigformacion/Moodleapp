{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{Vuuv:function(e,n,t){\"use strict\";t.r(n),t.d(n,\"AddonCalendarIndexPageModule\",(function(){return R}));var a=t(\"tyNb\"),o=t(\"L3Fv\"),i=t(\"9Xwr\"),c=t(\"mrSG\"),d=t(\"GGba\"),r=t(\"fjkH\"),s=t(\"9+EE\"),l=t(\"3LXp\"),h=t(\"ZSwf\"),u=t(\"SmTL\"),f=t(\"Lc7R\"),_=t(\"+lfu\"),m=t(\"n6RP\"),g=t(\"j3ag\"),p=t(\"Yxfl\"),v=t(\"cD/T\"),E=t(\"kLT3\"),C=t(\"pHTc\"),b=t(\"ANhT\"),I=t(\"BaYo\"),y=t(\"YyYz\"),x=t(\"fXoL\"),D=t(\"TEn/\"),P=t(\"ACYt\"),A=t(\"3CSS\"),O=t(\"fQ68\"),T=t(\"ofXK\"),w=t(\"8/N+\"),N=t(\"C1x5\"),S=t(\"nt/U\"),M=t(\"yNDK\"),k=t(\"sYmb\");function AddonCalendarIndexPage_core_context_menu_item_14_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,\"core-context-menu-item\",15),x.Mc(\"action\",(function AddonCalendarIndexPage_core_context_menu_item_14_Template_core_context_menu_item_action_0_listener(){x.fd(e);return x.Oc().toggleDisplay()})),x.Pc(1,\"translate\"),x.Dc()}2&e&&x.Vc(\"priority\",800)(\"content\",x.Qc(1,2,\"addon.calendar.upcomingevents\"))}function AddonCalendarIndexPage_core_context_menu_item_15_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,\"core-context-menu-item\",16),x.Mc(\"action\",(function AddonCalendarIndexPage_core_context_menu_item_15_Template_core_context_menu_item_action_0_listener(){x.fd(e);return x.Oc().toggleDisplay()})),x.Pc(1,\"translate\"),x.Dc()}2&e&&x.Vc(\"priority\",800)(\"content\",x.Qc(1,2,\"addon.calendar.monthlyview\"))}const _c0=function(e){return{$a:e}};function AddonCalendarIndexPage_ion_card_25_Template(e,n){1&e&&(x.Ec(0,\"ion-card\",17),x.Ec(1,\"ion-item\"),x.zc(2,\"ion-icon\",18),x.Ec(3,\"ion-label\"),x.pd(4),x.Pc(5,\"translate\"),x.Pc(6,\"translate\"),x.Dc(),x.Dc(),x.Dc()),2&e&&(x.lc(4),x.qd(x.Rc(5,1,\"core.hasdatatosync\",x.ad(6,_c0,x.Qc(6,4,\"addon.calendar.calendar\")))))}function AddonCalendarIndexPage_addon_calendar_upcoming_events_27_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,\"addon-calendar-upcoming-events\",19),x.Mc(\"onEventClicked\",(function AddonCalendarIndexPage_addon_calendar_upcoming_events_27_Template_addon_calendar_upcoming_events_onEventClicked_0_listener(n){x.fd(e);return x.Oc().gotoEvent(n)})),x.Dc()}if(2&e){const e=x.Oc();x.Vc(\"hidden\",e.showCalendar)(\"filter\",e.filter)}}function AddonCalendarIndexPage_ion_fab_28_Template(e,n){if(1&e){const e=x.Fc();x.Ec(0,\"ion-fab\",20),x.Ec(1,\"ion-fab-button\",21),x.Mc(\"click\",(function AddonCalendarIndexPage_ion_fab_28_Template_ion_fab_button_click_1_listener(){x.fd(e);return x.Oc().openEdit()})),x.Pc(2,\"translate\"),x.zc(3,\"ion-icon\",22),x.Ec(4,\"span\",23),x.pd(5),x.Pc(6,\"translate\"),x.Dc(),x.Dc(),x.Dc()}2&e&&(x.lc(1),x.mc(\"aria-label\",x.Qc(2,2,\"addon.calendar.newevent\")),x.lc(4),x.qd(x.Qc(6,4,\"addon.calendar.newevent\")))}let V=(()=>{class AddonCalendarIndexPage{constructor(e){this.route=e,this.canCreate=!1,this.courses=[],this.notificationsEnabled=!1,this.loaded=!1,this.hasOffline=!1,this.isOnline=!1,this.syncIcon=I.a.ICON_LOADING,this.showCalendar=!0,this.loadUpcoming=!1,this.filter={filtered:!1,courseId:void 0,categoryId:void 0,course:!0,group:!0,site:!0,user:!0,category:!0},this.currentSiteId=s.b.getCurrentSiteId(),this.newEventObserver=r.b.on(u.c.NEW_EVENT_EVENT,(e=>{e&&e.eventId&&(this.loaded=!1,this.refreshData(!0,!1,!0))}),this.currentSiteId),this.discardedObserver=r.b.on(u.c.NEW_EVENT_DISCARDED_EVENT,(()=>{this.loaded=!1,this.refreshData(!0,!1,!0)}),this.currentSiteId),this.editEventObserver=r.b.on(u.c.EDIT_EVENT_EVENT,(e=>{e&&e.eventId&&(this.loaded=!1,this.refreshData(!0,!1,!0))}),this.currentSiteId),this.syncObserver=r.b.on(_.b.AUTO_SYNCED,(()=>{this.loaded=!1,this.refreshData(!1,!1,!0)}),this.currentSiteId),this.manualSyncObserver=r.b.on(_.b.MANUAL_SYNCED,(e=>{e&&\"index\"!=e.source&&(this.loaded=!1,this.refreshData(!1,!1,!0))}),this.currentSiteId),this.deleteEventObserver=r.b.on(u.c.DELETED_EVENT_EVENT,(()=>{this.loaded=!1,this.refreshData(!1,!1,!0)}),this.currentSiteId),this.undeleteEventObserver=r.b.on(u.c.UNDELETED_EVENT_EVENT,(()=>Object(c.a)(this,void 0,void 0,(function*(){this.hasOffline=yield f.a.hasOfflineData()}))),this.currentSiteId),this.filterChangedObserver=r.b.on(u.c.FILTER_CHANGED_EVENT,(e=>Object(c.a)(this,void 0,void 0,(function*(){this.filter=e,this.canCreate=yield m.b.canEditEvents(this.filter.courseId)})))),this.onlineObserver=d.a.onChange().subscribe((()=>{g.A.run((()=>{this.isOnline=d.a.isOnline()}))}))}ngOnInit(){this.notificationsEnabled=b.a.isAvailable(),this.loadUpcoming=!!C.a.getRouteBooleanParam(\"upcoming\"),this.showCalendar=!this.loadUpcoming,this.route.queryParams.subscribe((()=>Object(c.a)(this,void 0,void 0,(function*(){this.filter.courseId=C.a.getRouteNumberParam(\"courseId\"),this.year=C.a.getRouteNumberParam(\"year\"),this.month=C.a.getRouteNumberParam(\"month\"),this.filter.filtered=!!this.filter.courseId,this.fetchData(!0,!1)}))));(new y.a).treatLink()}fetchData(e,n){return Object(c.a)(this,void 0,void 0,(function*(){if(this.syncIcon=I.a.ICON_LOADING,this.isOnline=d.a.isOnline(),e)try{const e=yield _.a.syncEvents();e.warnings&&e.warnings.length&&l.a.showErrorModal(e.warnings[0]),e.updated&&(e.source=\"index\",r.b.trigger(_.b.MANUAL_SYNCED,e,this.currentSiteId))}catch(e){n&&l.a.showErrorModalDefault(e,\"core.errorsync\",!0)}try{const e=[];this.hasOffline=!1,e.push(h.a.getCoursesForPopover(this.filter.courseId).then((e=>{this.courses=e.courses}))),e.push(m.b.canEditEvents(this.filter.courseId).then((e=>{this.canCreate=e}))),e.push(f.a.hasOfflineData().then((e=>{this.hasOffline=e}))),yield Promise.all(e)}catch(e){l.a.showErrorModalDefault(e,\"addon.calendar.errorloadevents\",!0)}this.loaded=!0,this.syncIcon=I.a.ICON_SYNC}))}doRefresh(e,n,t){return Object(c.a)(this,void 0,void 0,(function*(){this.loaded&&(yield this.refreshData(!0,t).finally((()=>{null==e?void 0:e.complete(),n&&n()})))}))}refreshData(e=!1,n=!1,t=!1){return Object(c.a)(this,void 0,void 0,(function*(){this.syncIcon=I.a.ICON_LOADING;const a=[];a.push(u.a.invalidateAllowedEventTypes()),this.showCalendar&&this.calendarComponent?a.push(this.calendarComponent.refreshData(t)):!this.showCalendar&&this.upcomingEventsComponent&&a.push(this.upcomingEventsComponent.refreshData()),yield Promise.all(a).finally((()=>this.fetchData(e,n)))}))}gotoEvent(e){C.a.navigateToSitePath(`/calendar/event/${e}`)}gotoDay(e){const n={day:e.day,month:e.month,year:e.year};Object.keys(this.filter).forEach((e=>{n[e]=this.filter[e]})),C.a.navigateToSitePath(\"/calendar/day\",{params:n})}openFilter(){return Object(c.a)(this,void 0,void 0,(function*(){yield l.a.openSideModal({component:E.a,componentProps:{courses:this.courses,filter:this.filter}})}))}openEdit(e){const n={};e=e||0,this.filter.courseId&&(n.courseId=this.filter.courseId),C.a.navigateToSitePath(`/calendar/edit/${e}`,{params:n})}openSettings(){C.a.navigateToSitePath(\"/calendar/calendar-settings\")}toggleDisplay(){this.showCalendar=!this.showCalendar,this.showCalendar||(this.loadUpcoming=!0)}ngOnDestroy(){var e,n,t,a,o,i,c,d,r;null===(e=this.newEventObserver)||void 0===e?void 0:e.off(),null===(n=this.discardedObserver)||void 0===n||n.off(),null===(t=this.editEventObserver)||void 0===t||t.off(),null===(a=this.deleteEventObserver)||void 0===a||a.off(),null===(o=this.undeleteEventObserver)||void 0===o||o.off(),null===(i=this.syncObserver)||void 0===i||i.off(),null===(c=this.manualSyncObserver)||void 0===c||c.off(),null===(d=this.filterChangedObserver)||void 0===d||d.off(),null===(r=this.onlineObserver)||void 0===r||r.unsubscribe()}}return AddonCalendarIndexPage.ɵfac=function AddonCalendarIndexPage_Factory(e){return new(e||AddonCalendarIndexPage)(x.yc(a.a))},AddonCalendarIndexPage.ɵcmp=x.sc({type:AddonCalendarIndexPage,selectors:[[\"page-addon-calendar-index\"]],viewQuery:function AddonCalendarIndexPage_Query(e,n){var t;(1&e&&(x.ud(p.a,!0),x.ud(v.a,!0)),2&e)&&(x.dd(t=x.Nc())&&(n.calendarComponent=t.first),x.dd(t=x.Nc())&&(n.upcomingEventsComponent=t.first))},decls:29,vars:35,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"slot\",\"end\"],[\"fill\",\"clear\",3,\"click\"],[\"slot\",\"icon-only\",\"name\",\"fas-filter\",\"aria-hidden\",\"true\"],[\"iconAction\",\"fas-th-list\",3,\"priority\",\"content\",\"action\",4,\"ngIf\"],[\"iconAction\",\"fas-calendar-alt\",3,\"priority\",\"content\",\"action\",4,\"ngIf\"],[\"iconAction\",\"fas-cogs\",3,\"hidden\",\"priority\",\"content\",\"action\"],[3,\"hidden\",\"priority\",\"content\",\"iconAction\",\"closeOnClick\",\"action\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[\"class\",\"core-warning-card\",4,\"ngIf\"],[3,\"hidden\",\"initialYear\",\"initialMonth\",\"filter\",\"displayNavButtons\",\"onEventClicked\",\"onDayClicked\"],[3,\"hidden\",\"filter\",\"onEventClicked\",4,\"ngIf\"],[\"slot\",\"fixed\",\"core-fab\",\"\",\"vertical\",\"bottom\",\"horizontal\",\"end\",4,\"ngIf\"],[\"iconAction\",\"fas-th-list\",3,\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-calendar-alt\",3,\"priority\",\"content\",\"action\"],[1,\"core-warning-card\"],[\"name\",\"fas-exclamation-triangle\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[3,\"hidden\",\"filter\",\"onEventClicked\"],[\"slot\",\"fixed\",\"core-fab\",\"\",\"vertical\",\"bottom\",\"horizontal\",\"end\"],[3,\"click\"],[\"name\",\"fas-plus\",\"aria-hidden\",\"true\"],[1,\"sr-only\"]],template:function AddonCalendarIndexPage_Template(e,n){1&e&&(x.Ec(0,\"ion-header\"),x.Ec(1,\"ion-toolbar\"),x.Ec(2,\"ion-buttons\",0),x.zc(3,\"ion-back-button\",1),x.Pc(4,\"translate\"),x.Dc(),x.Ec(5,\"ion-title\"),x.Ec(6,\"h1\"),x.pd(7),x.Pc(8,\"translate\"),x.Dc(),x.Dc(),x.Ec(9,\"ion-buttons\",2),x.Ec(10,\"ion-button\",3),x.Mc(\"click\",(function AddonCalendarIndexPage_Template_ion_button_click_10_listener(){return n.openFilter()})),x.Pc(11,\"translate\"),x.zc(12,\"ion-icon\",4),x.Dc(),x.Ec(13,\"core-context-menu\"),x.nd(14,AddonCalendarIndexPage_core_context_menu_item_14_Template,2,4,\"core-context-menu-item\",5),x.nd(15,AddonCalendarIndexPage_core_context_menu_item_15_Template,2,4,\"core-context-menu-item\",6),x.Ec(16,\"core-context-menu-item\",7),x.Mc(\"action\",(function AddonCalendarIndexPage_Template_core_context_menu_item_action_16_listener(){return n.openSettings()})),x.Pc(17,\"translate\"),x.Dc(),x.Ec(18,\"core-context-menu-item\",8),x.Mc(\"action\",(function AddonCalendarIndexPage_Template_core_context_menu_item_action_18_listener(e){return n.doRefresh(void 0,e,!0)})),x.Pc(19,\"translate\"),x.Dc(),x.Dc(),x.zc(20,\"core-user-menu-button\"),x.Dc(),x.Dc(),x.Dc(),x.Ec(21,\"ion-content\"),x.Ec(22,\"ion-refresher\",9),x.Mc(\"ionRefresh\",(function AddonCalendarIndexPage_Template_ion_refresher_ionRefresh_22_listener(e){return n.doRefresh(e.target)})),x.zc(23,\"ion-refresher-content\",10),x.Pc(24,\"translate\"),x.Dc(),x.nd(25,AddonCalendarIndexPage_ion_card_25_Template,7,8,\"ion-card\",11),x.Ec(26,\"addon-calendar-calendar\",12),x.Mc(\"onEventClicked\",(function AddonCalendarIndexPage_Template_addon_calendar_calendar_onEventClicked_26_listener(e){return n.gotoEvent(e)}))(\"onDayClicked\",(function AddonCalendarIndexPage_Template_addon_calendar_calendar_onDayClicked_26_listener(e){return n.gotoDay(e)})),x.Dc(),x.nd(27,AddonCalendarIndexPage_addon_calendar_upcoming_events_27_Template,1,2,\"addon-calendar-upcoming-events\",13),x.nd(28,AddonCalendarIndexPage_ion_fab_28_Template,7,6,\"ion-fab\",14),x.Dc()),2&e&&(x.lc(3),x.Vc(\"text\",x.Qc(4,23,\"core.back\")),x.lc(4),x.qd(x.Qc(8,25,n.showCalendar?\"addon.calendar.calendarevents\":\"addon.calendar.upcomingevents\")),x.lc(3),x.mc(\"aria-label\",x.Qc(11,27,\"core.filter\")),x.lc(4),x.Vc(\"ngIf\",n.showCalendar),x.lc(1),x.Vc(\"ngIf\",!n.showCalendar),x.lc(1),x.Vc(\"hidden\",!n.notificationsEnabled)(\"priority\",600)(\"content\",x.Qc(17,29,\"core.settings.settings\")),x.lc(2),x.Vc(\"hidden\",!n.loaded||!n.hasOffline||!n.isOnline)(\"priority\",400)(\"content\",x.Qc(19,31,\"core.settings.synchronizenow\"))(\"iconAction\",n.syncIcon)(\"closeOnClick\",!1),x.lc(4),x.Vc(\"disabled\",!n.loaded),x.lc(1),x.Wc(\"pullingText\",x.Qc(24,33,\"core.pulltorefresh\")),x.lc(2),x.Vc(\"ngIf\",n.hasOffline),x.lc(1),x.Vc(\"hidden\",!n.showCalendar)(\"initialYear\",n.year)(\"initialMonth\",n.month)(\"filter\",n.filter)(\"displayNavButtons\",n.showCalendar),x.lc(1),x.Vc(\"ngIf\",n.loadUpcoming),x.lc(1),x.Vc(\"ngIf\",n.canCreate))},directives:[D.C,D.Ab,D.m,D.h,D.i,D.yb,P.a,D.l,D.D,A.a,O.a,T.t,w.a,N.a,S.a,D.v,D.bb,D.cb,p.a,D.n,D.I,D.O,v.a,D.x,M.a,D.y],pipes:[k.d],encapsulation:2}),AddonCalendarIndexPage})();var L=t(\"dQ3M\");const Q=[{path:\"\",component:V}];let R=(()=>{class AddonCalendarIndexPageModule{}return AddonCalendarIndexPageModule.ɵmod=x.wc({type:AddonCalendarIndexPageModule}),AddonCalendarIndexPageModule.ɵinj=x.vc({factory:function AddonCalendarIndexPageModule_Factory(e){return new(e||AddonCalendarIndexPageModule)},imports:[[a.m.forChild(Q),o.a,i.a,L.a],a.m]}),AddonCalendarIndexPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&x.kd(R,{declarations:[V],imports:[a.m,o.a,i.a,L.a],exports:[a.m]}))}}]);","name":"39.e4cdd3da298e0e6aa941.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[39],{\n\n/***/ \"Vuuv\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonCalendarIndexPageModule\", function() { return /* binding */ index_module_AddonCalendarIndexPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/components.module.ts\nvar components_module = __webpack_require__(\"9Xwr\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/services/network.ts + 2 modules\nvar network = __webpack_require__(\"GGba\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/features/courses/services/courses-helper.ts\nvar courses_helper = __webpack_require__(\"ZSwf\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar.ts\nvar calendar = __webpack_require__(\"SmTL\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-offline.ts\nvar calendar_offline = __webpack_require__(\"Lc7R\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-sync.ts\nvar calendar_sync = __webpack_require__(\"+lfu\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-helper.ts\nvar calendar_helper = __webpack_require__(\"n6RP\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/calendar/calendar.ts\nvar calendar_calendar = __webpack_require__(\"Yxfl\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/upcoming-events/upcoming-events.ts\nvar upcoming_events = __webpack_require__(\"cD/T\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/filter/filter.ts\nvar filter = __webpack_require__(\"kLT3\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/services/local-notifications.ts + 1 modules\nvar local_notifications = __webpack_require__(\"ANhT\");\n\n// EXTERNAL MODULE: ./src/core/constants.ts\nvar constants = __webpack_require__(\"BaYo\");\n\n// EXTERNAL MODULE: ./src/core/features/mainmenu/classes/deep-link-manager.ts\nvar deep_link_manager = __webpack_require__(\"YyYz\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu.ts + 4 modules\nvar context_menu = __webpack_require__(\"fQ68\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu-item.ts\nvar context_menu_item = __webpack_require__(\"8/N+\");\n\n// EXTERNAL MODULE: ./src/core/features/mainmenu/components/user-menu-button/user-menu-button.ts\nvar user_menu_button = __webpack_require__(\"C1x5\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/directives/fab.ts\nvar fab = __webpack_require__(\"yNDK\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/addons/calendar/pages/index/index.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonCalendarIndexPage_core_context_menu_item_14_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r6 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"core-context-menu-item\", 15);\n        core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarIndexPage_core_context_menu_item_14_Template_core_context_menu_item_action_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r6); const ctx_r5 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r5.toggleDisplay(); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"priority\", 800)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 2, \"addon.calendar.upcomingevents\"));\n    }\n}\nfunction AddonCalendarIndexPage_core_context_menu_item_15_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r8 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"core-context-menu-item\", 16);\n        core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarIndexPage_core_context_menu_item_15_Template_core_context_menu_item_action_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r8); const ctx_r7 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r7.toggleDisplay(); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"priority\", 800)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 2, \"addon.calendar.monthlyview\"));\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction AddonCalendarIndexPage_ion_card_25_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 17);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 18);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Pc\" /* ɵɵpipe */](6, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 1, \"core.hasdatatosync\", core[\"ad\" /* ɵɵpureFunction1 */](6, _c0, core[\"Qc\" /* ɵɵpipeBind1 */](6, 4, \"addon.calendar.calendar\"))));\n    }\n}\nfunction AddonCalendarIndexPage_addon_calendar_upcoming_events_27_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r10 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"addon-calendar-upcoming-events\", 19);\n        core[\"Mc\" /* ɵɵlistener */](\"onEventClicked\", function AddonCalendarIndexPage_addon_calendar_upcoming_events_27_Template_addon_calendar_upcoming_events_onEventClicked_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r10); const ctx_r9 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r9.gotoEvent($event); });\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"hidden\", ctx_r3.showCalendar)(\"filter\", ctx_r3.filter);\n    }\n}\nfunction AddonCalendarIndexPage_ion_fab_28_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r12 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-fab\", 20);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-fab-button\", 21);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonCalendarIndexPage_ion_fab_28_Template_ion_fab_button_click_1_listener() { core[\"fd\" /* ɵɵrestoreView */](_r12); const ctx_r11 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r11.openEdit(); });\n        core[\"Pc\" /* ɵɵpipe */](2, \"translate\");\n        core[\"zc\" /* ɵɵelement */](3, \"ion-icon\", 22);\n        core[\"Ec\" /* ɵɵelementStart */](4, \"span\", 23);\n        core[\"pd\" /* ɵɵtext */](5);\n        core[\"Pc\" /* ɵɵpipe */](6, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](2, 2, \"addon.calendar.newevent\"));\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](6, 4, \"addon.calendar.newevent\"));\n    }\n}\n/**\n * Page that displays the calendar events.\n */\nlet index_page_AddonCalendarIndexPage = /*@__PURE__*/ (() => {\n    class AddonCalendarIndexPage {\n        constructor(route) {\n            this.route = route;\n            this.canCreate = false;\n            this.courses = [];\n            this.notificationsEnabled = false;\n            this.loaded = false;\n            this.hasOffline = false;\n            this.isOnline = false;\n            this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n            this.showCalendar = true;\n            this.loadUpcoming = false;\n            this.filter = {\n                filtered: false,\n                courseId: undefined,\n                categoryId: undefined,\n                course: true,\n                group: true,\n                site: true,\n                user: true,\n                category: true,\n            };\n            this.currentSiteId = sites[\"b\" /* CoreSites */].getCurrentSiteId();\n            // Listen for events added. When an event is added, reload the data.\n            this.newEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].NEW_EVENT_EVENT, (data) => {\n                if (data && data.eventId) {\n                    this.loaded = false;\n                    this.refreshData(true, false, true);\n                }\n            }, this.currentSiteId);\n            // Listen for new event discarded event. When it does, reload the data.\n            this.discardedObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].NEW_EVENT_DISCARDED_EVENT, () => {\n                this.loaded = false;\n                this.refreshData(true, false, true);\n            }, this.currentSiteId);\n            // Listen for events edited. When an event is edited, reload the data.\n            this.editEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].EDIT_EVENT_EVENT, (data) => {\n                if (data && data.eventId) {\n                    this.loaded = false;\n                    this.refreshData(true, false, true);\n                }\n            }, this.currentSiteId);\n            // Refresh data if calendar events are synchronized automatically.\n            this.syncObserver = events[\"b\" /* CoreEvents */].on(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].AUTO_SYNCED, () => {\n                this.loaded = false;\n                this.refreshData(false, false, true);\n            }, this.currentSiteId);\n            // Refresh data if calendar events are synchronized manually but not by this page.\n            this.manualSyncObserver = events[\"b\" /* CoreEvents */].on(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].MANUAL_SYNCED, (data) => {\n                if (data && data.source != 'index') {\n                    this.loaded = false;\n                    this.refreshData(false, false, true);\n                }\n            }, this.currentSiteId);\n            // Update the events when an event is deleted.\n            this.deleteEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].DELETED_EVENT_EVENT, () => {\n                this.loaded = false;\n                this.refreshData(false, false, true);\n            }, this.currentSiteId);\n            // Update the \"hasOffline\" property if an event deleted in offline is restored.\n            this.undeleteEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].UNDELETED_EVENT_EVENT, () => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.hasOffline = yield calendar_offline[\"a\" /* AddonCalendarOffline */].hasOfflineData();\n            }), this.currentSiteId);\n            this.filterChangedObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].FILTER_CHANGED_EVENT, (filterData) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.filter = filterData;\n                // Course viewed has changed, check if the user can create events for this course calendar.\n                this.canCreate = yield calendar_helper[\"b\" /* AddonCalendarHelper */].canEditEvents(this.filter.courseId);\n            }));\n            // Refresh online status when changes.\n            this.onlineObserver = network[\"a\" /* CoreNetwork */].onChange().subscribe(() => {\n                // Execute the callback in the Angular zone, so change detection doesn't stop working.\n                singletons[\"A\" /* NgZone */].run(() => {\n                    this.isOnline = network[\"a\" /* CoreNetwork */].isOnline();\n                });\n            });\n        }\n        /**\n         * View loaded.\n         */\n        ngOnInit() {\n            this.notificationsEnabled = local_notifications[\"a\" /* CoreLocalNotifications */].isAvailable();\n            this.loadUpcoming = !!services_navigator[\"a\" /* CoreNavigator */].getRouteBooleanParam('upcoming');\n            this.showCalendar = !this.loadUpcoming;\n            this.route.queryParams.subscribe(() => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.filter.courseId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('courseId');\n                this.year = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('year');\n                this.month = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('month');\n                this.filter.filtered = !!this.filter.courseId;\n                this.fetchData(true, false);\n            }));\n            const deepLinkManager = new deep_link_manager[\"a\" /* CoreMainMenuDeepLinkManager */]();\n            deepLinkManager.treatLink();\n        }\n        /**\n         * Fetch all the data required for the view.\n         *\n         * @param sync Whether it should try to synchronize offline events.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        fetchData(sync, showErrors) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                this.isOnline = network[\"a\" /* CoreNetwork */].isOnline();\n                if (sync) {\n                    // Try to synchronize offline events.\n                    try {\n                        const result = yield calendar_sync[\"a\" /* AddonCalendarSync */].syncEvents();\n                        if (result.warnings && result.warnings.length) {\n                            dom[\"a\" /* CoreDomUtils */].showErrorModal(result.warnings[0]);\n                        }\n                        if (result.updated) {\n                            // Trigger a manual sync event.\n                            result.source = 'index';\n                            events[\"b\" /* CoreEvents */].trigger(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].MANUAL_SYNCED, result, this.currentSiteId);\n                        }\n                    }\n                    catch (error) {\n                        if (showErrors) {\n                            dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.errorsync', true);\n                        }\n                    }\n                }\n                try {\n                    const promises = [];\n                    this.hasOffline = false;\n                    // Load courses for the popover.\n                    promises.push(courses_helper[\"a\" /* CoreCoursesHelper */].getCoursesForPopover(this.filter.courseId).then((data) => {\n                        this.courses = data.courses;\n                        return;\n                    }));\n                    // Check if user can create events.\n                    promises.push(calendar_helper[\"b\" /* AddonCalendarHelper */].canEditEvents(this.filter.courseId).then((canEdit) => {\n                        this.canCreate = canEdit;\n                        return;\n                    }));\n                    // Check if there is offline data.\n                    promises.push(calendar_offline[\"a\" /* AddonCalendarOffline */].hasOfflineData().then((hasOffline) => {\n                        this.hasOffline = hasOffline;\n                        return;\n                    }));\n                    yield Promise.all(promises);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'addon.calendar.errorloadevents', true);\n                }\n                this.loaded = true;\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_SYNC;\n            });\n        }\n        /**\n         * Refresh the data.\n         *\n         * @param refresher Refresher.\n         * @param done Function to call when done.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        doRefresh(refresher, done, showErrors) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.loaded) {\n                    return;\n                }\n                yield this.refreshData(true, showErrors).finally(() => {\n                    refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n                    done && done();\n                });\n            });\n        }\n        /**\n         * Refresh the data.\n         *\n         * @param sync Whether it should try to synchronize offline events.\n         * @param showErrors Whether to show sync errors to the user.\n         * @param afterChange Whether the refresh is done after an event has changed or has been synced.\n         * @return Promise resolved when done.\n         */\n        refreshData(sync = false, showErrors = false, afterChange = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                const promises = [];\n                promises.push(calendar[\"a\" /* AddonCalendar */].invalidateAllowedEventTypes());\n                // Refresh the sub-component.\n                if (this.showCalendar && this.calendarComponent) {\n                    promises.push(this.calendarComponent.refreshData(afterChange));\n                }\n                else if (!this.showCalendar && this.upcomingEventsComponent) {\n                    promises.push(this.upcomingEventsComponent.refreshData());\n                }\n                yield Promise.all(promises).finally(() => this.fetchData(sync, showErrors));\n            });\n        }\n        /**\n         * Navigate to a particular event.\n         *\n         * @param eventId Event to load.\n         */\n        gotoEvent(eventId) {\n            services_navigator[\"a\" /* CoreNavigator */].navigateToSitePath(`/calendar/event/${eventId}`);\n        }\n        /**\n         * View a certain day.\n         *\n         * @param data Data with the year, month and day.\n         */\n        gotoDay(data) {\n            const params = {\n                day: data.day,\n                month: data.month,\n                year: data.year,\n            };\n            Object.keys(this.filter).forEach((key) => {\n                params[key] = this.filter[key];\n            });\n            services_navigator[\"a\" /* CoreNavigator */].navigateToSitePath('/calendar/day', { params });\n        }\n        /**\n         * Show the filter menu.\n         */\n        openFilter() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                yield dom[\"a\" /* CoreDomUtils */].openSideModal({\n                    component: filter[\"a\" /* AddonCalendarFilterComponent */],\n                    componentProps: {\n                        courses: this.courses,\n                        filter: this.filter,\n                    },\n                });\n            });\n        }\n        /**\n         * Open page to create/edit an event.\n         *\n         * @param eventId Event ID to edit.\n         */\n        openEdit(eventId) {\n            const params = {};\n            eventId = eventId || 0;\n            if (this.filter.courseId) {\n                params.courseId = this.filter.courseId;\n            }\n            services_navigator[\"a\" /* CoreNavigator */].navigateToSitePath(`/calendar/edit/${eventId}`, { params });\n        }\n        /**\n         * Open calendar events settings.\n         */\n        openSettings() {\n            services_navigator[\"a\" /* CoreNavigator */].navigateToSitePath('/calendar/calendar-settings');\n        }\n        /**\n         * Toogle display: monthly view or upcoming events.\n         */\n        toggleDisplay() {\n            this.showCalendar = !this.showCalendar;\n            if (!this.showCalendar) {\n                this.loadUpcoming = true;\n            }\n        }\n        /**\n         * Page destroyed.\n         */\n        ngOnDestroy() {\n            var _a, _b, _c, _d, _e, _f, _g, _h, _j;\n            (_a = this.newEventObserver) === null || _a === void 0 ? void 0 : _a.off();\n            (_b = this.discardedObserver) === null || _b === void 0 ? void 0 : _b.off();\n            (_c = this.editEventObserver) === null || _c === void 0 ? void 0 : _c.off();\n            (_d = this.deleteEventObserver) === null || _d === void 0 ? void 0 : _d.off();\n            (_e = this.undeleteEventObserver) === null || _e === void 0 ? void 0 : _e.off();\n            (_f = this.syncObserver) === null || _f === void 0 ? void 0 : _f.off();\n            (_g = this.manualSyncObserver) === null || _g === void 0 ? void 0 : _g.off();\n            (_h = this.filterChangedObserver) === null || _h === void 0 ? void 0 : _h.off();\n            (_j = this.onlineObserver) === null || _j === void 0 ? void 0 : _j.unsubscribe();\n        }\n    }\n    AddonCalendarIndexPage.ɵfac = function AddonCalendarIndexPage_Factory(t) { return new (t || AddonCalendarIndexPage)(core[\"yc\" /* ɵɵdirectiveInject */](router[\"a\" /* ActivatedRoute */])); };\n    AddonCalendarIndexPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonCalendarIndexPage, selectors: [[\"page-addon-calendar-index\"]], viewQuery: function AddonCalendarIndexPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](calendar_calendar[\"a\" /* AddonCalendarCalendarComponent */], true);\n                core[\"ud\" /* ɵɵviewQuery */](upcoming_events[\"a\" /* AddonCalendarUpcomingEventsComponent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.calendarComponent = _t.first);\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.upcomingEventsComponent = _t.first);\n            }\n        }, decls: 29, vars: 35, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"fas-filter\", \"aria-hidden\", \"true\"], [\"iconAction\", \"fas-th-list\", 3, \"priority\", \"content\", \"action\", 4, \"ngIf\"], [\"iconAction\", \"fas-calendar-alt\", 3, \"priority\", \"content\", \"action\", 4, \"ngIf\"], [\"iconAction\", \"fas-cogs\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [3, \"hidden\", \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [3, \"hidden\", \"initialYear\", \"initialMonth\", \"filter\", \"displayNavButtons\", \"onEventClicked\", \"onDayClicked\"], [3, \"hidden\", \"filter\", \"onEventClicked\", 4, \"ngIf\"], [\"slot\", \"fixed\", \"core-fab\", \"\", \"vertical\", \"bottom\", \"horizontal\", \"end\", 4, \"ngIf\"], [\"iconAction\", \"fas-th-list\", 3, \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-calendar-alt\", 3, \"priority\", \"content\", \"action\"], [1, \"core-warning-card\"], [\"name\", \"fas-exclamation-triangle\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [3, \"hidden\", \"filter\", \"onEventClicked\"], [\"slot\", \"fixed\", \"core-fab\", \"\", \"vertical\", \"bottom\", \"horizontal\", \"end\"], [3, \"click\"], [\"name\", \"fas-plus\", \"aria-hidden\", \"true\"], [1, \"sr-only\"]], template: function AddonCalendarIndexPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"pd\" /* ɵɵtext */](7);\n                core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-buttons\", 2);\n                core[\"Ec\" /* ɵɵelementStart */](10, \"ion-button\", 3);\n                core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonCalendarIndexPage_Template_ion_button_click_10_listener() { return ctx.openFilter(); });\n                core[\"Pc\" /* ɵɵpipe */](11, \"translate\");\n                core[\"zc\" /* ɵɵelement */](12, \"ion-icon\", 4);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"core-context-menu\");\n                core[\"nd\" /* ɵɵtemplate */](14, AddonCalendarIndexPage_core_context_menu_item_14_Template, 2, 4, \"core-context-menu-item\", 5);\n                core[\"nd\" /* ɵɵtemplate */](15, AddonCalendarIndexPage_core_context_menu_item_15_Template, 2, 4, \"core-context-menu-item\", 6);\n                core[\"Ec\" /* ɵɵelementStart */](16, \"core-context-menu-item\", 7);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarIndexPage_Template_core_context_menu_item_action_16_listener() { return ctx.openSettings(); });\n                core[\"Pc\" /* ɵɵpipe */](17, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](18, \"core-context-menu-item\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarIndexPage_Template_core_context_menu_item_action_18_listener($event) { return ctx.doRefresh(undefined, $event, true); });\n                core[\"Pc\" /* ɵɵpipe */](19, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"zc\" /* ɵɵelement */](20, \"core-user-menu-button\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](21, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](22, \"ion-refresher\", 9);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonCalendarIndexPage_Template_ion_refresher_ionRefresh_22_listener($event) { return ctx.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](23, \"ion-refresher-content\", 10);\n                core[\"Pc\" /* ɵɵpipe */](24, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"nd\" /* ɵɵtemplate */](25, AddonCalendarIndexPage_ion_card_25_Template, 7, 8, \"ion-card\", 11);\n                core[\"Ec\" /* ɵɵelementStart */](26, \"addon-calendar-calendar\", 12);\n                core[\"Mc\" /* ɵɵlistener */](\"onEventClicked\", function AddonCalendarIndexPage_Template_addon_calendar_calendar_onEventClicked_26_listener($event) { return ctx.gotoEvent($event); })(\"onDayClicked\", function AddonCalendarIndexPage_Template_addon_calendar_calendar_onDayClicked_26_listener($event) { return ctx.gotoDay($event); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"nd\" /* ɵɵtemplate */](27, AddonCalendarIndexPage_addon_calendar_upcoming_events_27_Template, 1, 2, \"addon-calendar-upcoming-events\", 13);\n                core[\"nd\" /* ɵɵtemplate */](28, AddonCalendarIndexPage_ion_fab_28_Template, 7, 6, \"ion-fab\", 14);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 23, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](8, 25, ctx.showCalendar ? \"addon.calendar.calendarevents\" : \"addon.calendar.upcomingevents\"));\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](11, 27, \"core.filter\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.showCalendar);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !ctx.showCalendar);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.notificationsEnabled)(\"priority\", 600)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](17, 29, \"core.settings.settings\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.loaded || !ctx.hasOffline || !ctx.isOnline)(\"priority\", 400)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](19, 31, \"core.settings.synchronizenow\"))(\"iconAction\", ctx.syncIcon)(\"closeOnClick\", false);\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](24, 33, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.hasOffline);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.showCalendar)(\"initialYear\", ctx.year)(\"initialMonth\", ctx.month)(\"filter\", ctx.filter)(\"displayNavButtons\", ctx.showCalendar);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.loadUpcoming);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.canCreate);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], context_menu[\"a\" /* CoreContextMenuComponent */], common[\"t\" /* NgIf */], context_menu_item[\"a\" /* CoreContextMenuItemComponent */], user_menu_button[\"a\" /* CoreMainMenuUserButtonComponent */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], calendar_calendar[\"a\" /* AddonCalendarCalendarComponent */], ionic_angular[\"n\" /* IonCard */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"O\" /* IonLabel */], upcoming_events[\"a\" /* AddonCalendarUpcomingEventsComponent */], ionic_angular[\"x\" /* IonFab */], fab[\"a\" /* CoreFabDirective */], ionic_angular[\"y\" /* IonFabButton */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], encapsulation: 2 });\n    return AddonCalendarIndexPage;\n})();\n\n// EXTERNAL MODULE: ./src/core/features/mainmenu/components/components.module.ts\nvar components_components_module = __webpack_require__(\"dQ3M\");\n\n// CONCATENATED MODULE: ./src/addons/calendar/pages/index/index.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: index_page_AddonCalendarIndexPage,\n    },\n];\nlet index_module_AddonCalendarIndexPageModule = /*@__PURE__*/ (() => {\n    class AddonCalendarIndexPageModule {\n    }\n    AddonCalendarIndexPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonCalendarIndexPageModule });\n    AddonCalendarIndexPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonCalendarIndexPageModule_Factory(t) { return new (t || AddonCalendarIndexPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* AddonCalendarComponentsModule */],\n                components_components_module[\"a\" /* CoreMainMenuComponentsModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return AddonCalendarIndexPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](index_module_AddonCalendarIndexPageModule, { declarations: [index_page_AddonCalendarIndexPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* AddonCalendarComponentsModule */],\n            components_components_module[\"a\" /* CoreMainMenuComponentsModule */]], exports: [router[\"m\" /* RouterModule */]] });\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}