{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[31],{\"LfF/\":function(e,t,n){\"use strict\";n.r(t),n.d(t,\"AddonCalendarEventPageModule\",(function(){return B}));var i=n(\"tyNb\"),a=n(\"L3Fv\"),o=n(\"9Xwr\"),c=n(\"mrSG\"),d=n(\"SmTL\"),r=n(\"n6RP\"),l=n(\"Lc7R\"),s=n(\"+lfu\"),v=n(\"GGba\"),_=n(\"fjkH\"),h=n(\"3LXp\"),m=n(\"vuGA\"),u=n(\"9+EE\"),g=n(\"ANhT\"),f=n(\"ULAo\"),p=n(\"Q98t\"),E=n(\"mWdr\"),I=n(\"j3ag\"),b=n(\"pHTc\"),C=n(\"bFG1\"),y=n(\"BaYo\"),P=n(\"2CAT\"),O=n(\"baaQ\"),D=n(\"51vF\"),T=n(\"eoiU\"),A=n(\"fXoL\"),x=n(\"TEn/\"),M=n(\"4JiN\"),w=n(\"ofXK\"),N=n(\"fQ68\"),V=n(\"8/N+\"),S=n(\"nt/U\"),L=n(\"OZH1\"),k=n(\"PgjG\"),R=n(\"hMzs\"),j=n(\"3CSS\"),Q=n(\"eAud\"),U=n(\"iSJP\"),z=n(\"ACYt\"),q=n(\"sYmb\");function AddonCalendarEventPage_h1_6_Template(e,t){if(1&e&&(A.Ec(0,\"h1\"),A.zc(1,\"core-format-text\",14),A.Dc()),2&e){const e=A.Oc();A.lc(1),A.Vc(\"text\",e.event.name)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId)}}const _c0=function(e){return{$a:e}};function AddonCalendarEventPage_ion_card_22_Template(e,t){1&e&&(A.Ec(0,\"ion-card\",15),A.Ec(1,\"ion-item\"),A.zc(2,\"ion-icon\",16),A.Ec(3,\"ion-label\"),A.pd(4),A.Pc(5,\"translate\"),A.Pc(6,\"translate\"),A.Dc(),A.Dc(),A.Dc()),2&e&&(A.lc(4),A.qd(A.Rc(5,1,\"core.hasdatatosync\",A.ad(6,_c0,A.Qc(6,4,\"addon.calendar.calendarevent\")))))}function AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template(e,t){if(1&e&&A.zc(0,\"core-mod-icon\",26),2&e){const e=A.Oc(2);A.Vc(\"modicon\",e.event.moduleIcon)(\"showAlt\",!1)(\"modname\",e.event.modulename)(\"componentId\",e.event.instance)(\"purpose\",e.event.purpose)}}function AddonCalendarEventPage_ion_list_23_ion_icon_3_Template(e,t){if(1&e&&A.zc(0,\"ion-icon\",27),2&e){const e=A.Oc(2);A.Vc(\"name\",e.event.eventIcon)}}function AddonCalendarEventPage_ion_list_23_span_8_Template(e,t){if(1&e&&(A.Ec(0,\"span\",20),A.pd(1),A.Dc()),2&e){const e=A.Oc(2);A.lc(1),A.qd(e.event.iconTitle)}}function AddonCalendarEventPage_ion_list_23_ion_note_17_Template(e,t){1&e&&(A.Ec(0,\"ion-note\",4),A.zc(1,\"ion-icon\",28),A.pd(2),A.Pc(3,\"translate\"),A.Dc()),2&e&&(A.lc(2),A.rd(\" \",A.Qc(3,1,\"core.deletedoffline\"),\" \"))}function AddonCalendarEventPage_ion_list_23_ion_item_26_Template(e,t){if(1&e&&(A.Ec(0,\"ion-item\",29),A.Ec(1,\"ion-label\"),A.Ec(2,\"h2\"),A.pd(3),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"p\"),A.zc(6,\"core-format-text\",30),A.Dc(),A.Dc(),A.Dc()),2&e){const e=A.Oc(2);A.Vc(\"href\",e.courseUrl),A.lc(3),A.qd(A.Qc(4,4,\"core.course\")),A.lc(3),A.Vc(\"text\",e.courseName)(\"contextInstanceId\",e.courseId)}}function AddonCalendarEventPage_ion_list_23_ion_item_27_Template(e,t){if(1&e&&(A.Ec(0,\"ion-item\",31),A.Ec(1,\"ion-label\"),A.Ec(2,\"h2\"),A.pd(3),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"p\"),A.pd(6),A.Dc(),A.Dc(),A.Dc()),2&e){const e=A.Oc(2);A.lc(3),A.qd(A.Qc(4,2,\"core.group\")),A.lc(3),A.qd(e.groupName)}}function AddonCalendarEventPage_ion_list_23_ion_item_28_Template(e,t){if(1&e&&(A.Ec(0,\"ion-item\",32),A.Ec(1,\"ion-label\"),A.Ec(2,\"h2\"),A.pd(3),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"p\"),A.zc(6,\"core-format-text\",33),A.Dc(),A.Dc(),A.Dc()),2&e){const e=A.Oc(2);A.lc(3),A.qd(A.Qc(4,3,\"core.category\")),A.lc(3),A.Vc(\"text\",e.categoryPath)(\"contextInstanceId\",e.event.categoryid)}}function AddonCalendarEventPage_ion_list_23_ion_item_29_Template(e,t){if(1&e&&(A.Ec(0,\"ion-item\",32),A.Ec(1,\"ion-label\"),A.Ec(2,\"h2\"),A.pd(3),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"p\"),A.zc(6,\"core-format-text\",14),A.Dc(),A.Dc(),A.Dc()),2&e){const e=A.Oc(2);A.lc(3),A.qd(A.Qc(4,4,\"core.description\")),A.lc(3),A.Vc(\"text\",e.event.description)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId)}}function AddonCalendarEventPage_ion_list_23_ion_item_30_Template(e,t){if(1&e&&(A.Ec(0,\"ion-item\",32),A.Ec(1,\"ion-label\"),A.Ec(2,\"h2\"),A.pd(3),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"p\"),A.Ec(6,\"a\",34),A.zc(7,\"core-format-text\",14),A.Dc(),A.Dc(),A.Dc(),A.Dc()),2&e){const e=A.Oc(2);A.lc(3),A.qd(A.Qc(4,5,\"core.location\")),A.lc(3),A.Vc(\"href\",e.event.encodedLocation,A.id),A.lc(1),A.Vc(\"text\",e.event.location)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId)}}function AddonCalendarEventPage_ion_list_23_ion_item_31_Template(e,t){if(1&e&&(A.Ec(0,\"ion-item\"),A.Ec(1,\"ion-label\"),A.Ec(2,\"ion-button\",35),A.pd(3),A.Pc(4,\"translate\"),A.Dc(),A.Dc(),A.Dc()),2&e){const e=A.Oc(2);A.lc(2),A.Vc(\"href\",e.moduleUrl),A.lc(1),A.rd(\" \",A.Qc(4,2,\"addon.calendar.gotoactivity\"),\" \")}}const _c1=function(e){return[e]};function AddonCalendarEventPage_ion_list_23_Template(e,t){if(1&e&&(A.Ec(0,\"ion-list\"),A.Ec(1,\"ion-item\",17),A.nd(2,AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template,1,5,\"core-mod-icon\",18),A.nd(3,AddonCalendarEventPage_ion_list_23_ion_icon_3_Template,1,1,\"ion-icon\",19),A.Ec(4,\"ion-label\"),A.Ec(5,\"span\",20),A.pd(6),A.Pc(7,\"translate\"),A.nd(8,AddonCalendarEventPage_ion_list_23_span_8_Template,2,1,\"span\",21),A.Dc(),A.Ec(9,\"h1\"),A.zc(10,\"core-format-text\",14),A.Dc(),A.Dc(),A.Dc(),A.Ec(11,\"ion-item\"),A.Ec(12,\"ion-label\"),A.Ec(13,\"h2\"),A.pd(14),A.Pc(15,\"translate\"),A.Dc(),A.zc(16,\"core-format-text\",14),A.Dc(),A.nd(17,AddonCalendarEventPage_ion_list_23_ion_note_17_Template,4,3,\"ion-note\",22),A.Dc(),A.Ec(18,\"ion-item\"),A.Ec(19,\"ion-label\"),A.Ec(20,\"h2\"),A.pd(21),A.Pc(22,\"translate\"),A.Dc(),A.Ec(23,\"p\"),A.pd(24),A.Pc(25,\"translate\"),A.Dc(),A.Dc(),A.Dc(),A.nd(26,AddonCalendarEventPage_ion_list_23_ion_item_26_Template,7,6,\"ion-item\",23),A.nd(27,AddonCalendarEventPage_ion_list_23_ion_item_27_Template,7,4,\"ion-item\",24),A.nd(28,AddonCalendarEventPage_ion_list_23_ion_item_28_Template,7,5,\"ion-item\",25),A.nd(29,AddonCalendarEventPage_ion_list_23_ion_item_29_Template,7,6,\"ion-item\",25),A.nd(30,AddonCalendarEventPage_ion_list_23_ion_item_30_Template,8,7,\"ion-item\",25),A.nd(31,AddonCalendarEventPage_ion_list_23_ion_item_31_Template,5,4,\"ion-item\",3),A.Dc()),2&e){const e=A.Oc();A.lc(1),A.Vc(\"ngClass\",A.ad(29,_c1,\"addon-calendar-eventtype-\"+e.event.eventtype)),A.lc(1),A.Vc(\"ngIf\",e.event.moduleIcon),A.lc(1),A.Vc(\"ngIf\",e.event.eventIcon&&!e.event.moduleIcon),A.lc(3),A.rd(\" \",A.Qc(7,21,\"addon.calendar.type\"+e.event.formattedType),\" \"),A.lc(2),A.Vc(\"ngIf\",e.event.moduleIcon&&e.event.iconTitle),A.lc(2),A.Vc(\"text\",e.event.name)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId),A.lc(4),A.qd(A.Qc(15,23,\"addon.calendar.when\")),A.lc(2),A.Vc(\"text\",e.event.formattedtime)(\"contextLevel\",e.event.contextLevel)(\"contextInstanceId\",e.event.contextInstanceId),A.lc(1),A.Vc(\"ngIf\",e.event.deleted),A.lc(4),A.qd(A.Qc(22,25,\"addon.calendar.eventtype\")),A.lc(3),A.qd(A.Qc(25,27,\"addon.calendar.type\"+e.event.formattedType)),A.lc(2),A.Vc(\"ngIf\",e.courseName),A.lc(1),A.Vc(\"ngIf\",e.groupName),A.lc(1),A.Vc(\"ngIf\",e.categoryPath),A.lc(1),A.Vc(\"ngIf\",e.event.description),A.lc(1),A.Vc(\"ngIf\",e.event.location),A.lc(1),A.Vc(\"ngIf\",e.moduleUrl)}}function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template(e,t){if(1&e&&(A.Ec(0,\"p\"),A.pd(1),A.Dc()),2&e){const e=A.Oc(2).$implicit;A.lc(1),A.qd(e.sublabel)}}function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template(e,t){if(1&e){const e=A.Fc();A.Ec(0,\"ion-item\",32),A.Ec(1,\"ion-label\"),A.Ec(2,\"p\",38),A.pd(3),A.Dc(),A.nd(4,AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template,2,1,\"p\",3),A.Dc(),A.Ec(5,\"ion-button\",39),A.Mc(\"click\",(function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template_ion_button_click_5_listener(t){A.fd(e);const n=A.Oc().$implicit;return A.Oc(2).cancelNotification(n.id,t)})),A.Pc(6,\"translate\"),A.zc(7,\"ion-icon\",40),A.Dc(),A.Dc()}if(2&e){const e=A.Oc().$implicit,t=A.Oc(2);A.qc(\"item-dimmed\",e.timestamp<=t.currentTime),A.lc(3),A.qd(e.label),A.lc(1),A.Vc(\"ngIf\",e.sublabel),A.lc(1),A.mc(\"aria-label\",A.Qc(6,5,\"core.delete\"))}}function AddonCalendarEventPage_ion_card_24_ng_container_6_Template(e,t){if(1&e&&(A.Cc(0),A.nd(1,AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template,8,7,\"ion-item\",37),A.Bc()),2&e){const e=t.$implicit;A.lc(1),A.Vc(\"ngIf\",e.timestamp>0)}}function AddonCalendarEventPage_ion_card_24_ng_container_7_Template(e,t){if(1&e){const e=A.Fc();A.Cc(0),A.Ec(1,\"ion-item\"),A.Ec(2,\"ion-label\"),A.Ec(3,\"ion-button\",41),A.Mc(\"click\",(function AddonCalendarEventPage_ion_card_24_ng_container_7_Template_ion_button_click_3_listener(){A.fd(e);return A.Oc(2).addReminder()})),A.pd(4),A.Pc(5,\"translate\"),A.Dc(),A.Dc(),A.Dc(),A.Bc()}2&e&&(A.lc(4),A.rd(\" \",A.Qc(5,1,\"addon.calendar.setnewreminder\"),\" \"))}function AddonCalendarEventPage_ion_card_24_Template(e,t){if(1&e&&(A.Ec(0,\"ion-card\"),A.Ec(1,\"ion-item\"),A.Ec(2,\"ion-label\"),A.Ec(3,\"h2\"),A.pd(4),A.Pc(5,\"translate\"),A.Dc(),A.Dc(),A.Dc(),A.nd(6,AddonCalendarEventPage_ion_card_24_ng_container_6_Template,2,1,\"ng-container\",36),A.nd(7,AddonCalendarEventPage_ion_card_24_ng_container_7_Template,6,3,\"ng-container\",3),A.Dc()),2&e){const e=A.Oc();A.lc(4),A.qd(A.Qc(5,3,\"addon.calendar.reminders\")),A.lc(2),A.Vc(\"ngForOf\",e.reminders),A.lc(1),A.Vc(\"ngIf\",e.event.timestart>e.currentTime)}}let F=(()=>{class AddonCalendarEventPage{constructor(e){this.route=e,this.eventLoaded=!1,this.courseName=\"\",this.courseUrl=\"\",this.notificationsEnabled=!1,this.moduleUrl=\"\",this.categoryPath=\"\",this.currentTime=-1,this.reminders=[],this.canEdit=!1,this.hasOffline=!1,this.isOnline=!1,this.syncIcon=y.a.ICON_LOADING,this.notificationsEnabled=g.a.isAvailable(),this.siteHomeId=u.b.getCurrentSiteHomeId(),this.currentSiteId=u.b.getCurrentSiteId(),this.canEdit=d.a.canEditEventsInSite(),this.editEventObserver=_.b.on(d.c.EDIT_EVENT_EVENT,(e=>{e&&e.eventId===this.eventId&&(this.eventLoaded=!1,this.refreshEvent(!0,!1))}),this.currentSiteId),this.newEventObserver=_.b.on(d.c.NEW_EVENT_EVENT,(e=>{this.eventId<0&&e&&(e.eventId===this.eventId||e.oldEventId===this.eventId)&&(this.eventId=e.eventId,this.eventLoaded=!1,this.refreshEvent(!0,!1))}),this.currentSiteId),this.syncObserver=_.b.on(s.b.AUTO_SYNCED,this.checkSyncResult.bind(this,!1),this.currentSiteId),this.manualSyncObserver=_.b.on(s.b.MANUAL_SYNCED,this.checkSyncResult.bind(this,!0),this.currentSiteId),this.onlineObserver=v.a.onChange().subscribe((()=>{I.A.run((()=>{this.isOnline=v.a.isOnline()}))})),this.defaultTimeChangedObserver=_.b.on(d.c.DEFAULT_NOTIFICATION_TIME_CHANGED,(()=>{this.loadReminders()}),this.currentSiteId),this.currentTime=p.a.timestamp(),this.updateCurrentTime=window.setInterval((()=>{this.currentTime=p.a.timestamp()}),5e3)}loadReminders(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.notificationsEnabled||!this.event)return;const e=yield d.a.getEventReminders(this.eventId,this.currentSiteId);this.reminders=yield r.b.formatReminders(e,this.event.timestart,this.currentSiteId)}))}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){try{this.eventId=b.a.getRequiredRouteNumberParam(\"id\")}catch(e){return h.a.showErrorModal(e),b.a.back(),void 0}this.syncIcon=y.a.ICON_LOADING,yield this.initializeSwipeManager(),yield this.fetchEvent()}))}fetchEvent(e=!1,t=!1){return Object(c.a)(this,void 0,void 0,(function*(){if(this.isOnline=v.a.isOnline(),e){if(yield this.syncEvents(t))return}try{if(this.eventId>=0){const e=yield d.a.getEventById(this.eventId);this.event=r.b.formatEventData(e)}try{const e=r.b.formatOfflineEventData(yield l.a.getEvent(this.eventId));this.hasOffline=!0,this.event=Object.assign(this.event||{},e)}catch(e){if(this.hasOffline=!1,this.eventId<0)return h.a.showErrorModal(\"Event not found.\"),b.a.back(),void 0}if(!this.event)return;if(this.loadReminders(),this.categoryPath=\"\",this.courseName=\"\",this.courseUrl=\"\",this.moduleUrl=\"\",this.event.moduleIcon){const e=f.a.translateModuleName(this.event.modulename||\"\");-1===e.indexOf(\"core.mod_\")&&(this.event.modulename=e),this.moduleUrl=this.event.url||\"\"}const e=[],t=this.event,n=this.event.courseid;n!=this.siteHomeId&&this.event.course&&(this.courseId=this.event.course.id,this.courseName=this.event.course.fullname,this.courseUrl=this.event.course.viewurl),n&&this.event.groupid&&e.push(this.loadGroupName(this.event,n)),this.event.iscategoryevent&&this.event.category&&(this.categoryPath=this.event.category.nestedname),this.event.location&&(this.event.location=m.a.decodeHTML(this.event.location),this.event.encodedLocation=m.a.buildAddressURL(this.event.location)),e.push(l.a.isEventDeleted(this.eventId).then((e=>{t.deleted=e}))),e.push(d.a.getCalendarTimeFormat().then((e=>Object(c.a)(this,void 0,void 0,(function*(){t.formattedtime=yield d.a.formatEventTime(t,e)}))))),yield Promise.all(e)}catch(e){h.a.showErrorModalDefault(e,\"addon.calendar.errorloadevent\",!0)}this.eventLoaded=!0,this.syncIcon=y.a.ICON_SYNC}))}initializeSwipeManager(){return Object(c.a)(this,void 0,void 0,(function*(){const e=b.a.getRouteParam(\"date\"),t=e&&O.a.getSource(D.a,[e]);t&&(this.events=new event_page_AddonCalendarEventsSwipeItemsManager(t),yield this.events.start())}))}syncEvents(e=!1){return Object(c.a)(this,void 0,void 0,(function*(){let t=!1;try{const e=yield s.a.syncEvents();e.warnings&&e.warnings.length&&h.a.showErrorModal(e.warnings[0]),e.deleted&&-1!=e.deleted.indexOf(this.eventId)?t=!0:this.eventId<0&&e.offlineIdMap[this.eventId]&&(this.eventId=e.offlineIdMap[this.eventId]),e.updated&&(e.source=\"event\",_.b.trigger(s.b.MANUAL_SYNCED,e,this.currentSiteId))}catch(t){e&&h.a.showErrorModalDefault(t,\"core.errorsync\",!0)}return t}))}loadGroupName(e,t){return Object(c.a)(this,void 0,void 0,(function*(){try{const n=(yield E.a.getUserGroupsInCourse(t)).find((t=>t.id==e.groupid));this.groupName=n?n.name:\"\"}catch(e){this.groupName=\"\"}}))}addReminder(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.event||!this.event.id)return;const e=yield h.a.openModal({component:P.a});void 0!==e&&(yield d.a.addEventReminder(this.event,e,this.currentSiteId),yield this.loadReminders())}))}cancelNotification(e,t){return Object(c.a)(this,void 0,void 0,(function*(){t.preventDefault(),t.stopPropagation();try{yield h.a.showDeleteConfirm();const t=yield h.a.showModalLoading(\"core.deleting\",!0);try{yield d.a.deleteEventReminder(e),yield this.loadReminders()}catch(e){h.a.showErrorModalDefault(e,\"Error deleting reminder\")}finally{t.dismiss()}}catch(e){}}))}doRefresh(e,t,n=!1){return Object(c.a)(this,void 0,void 0,(function*(){this.eventLoaded&&(yield this.refreshEvent(!0,n).finally((()=>{null==e?void 0:e.complete(),t&&t()})))}))}refreshEvent(e=!1,t=!1){return Object(c.a)(this,void 0,void 0,(function*(){this.syncIcon=y.a.ICON_LOADING;const n=[];this.eventId>0&&n.push(d.a.invalidateEvent(this.eventId)),n.push(d.a.invalidateTimeFormat()),yield C.a.allPromisesIgnoringErrors(n),yield this.fetchEvent(e,t)}))}openEdit(){b.a.navigateToSitePath(`/calendar/edit/${this.eventId}`)}deleteEvent(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.event)return;const e=I.J.instant(\"addon.calendar.deleteevent\"),t={};let n;this.event.eventcount>1?(n=I.J.instant(\"addon.calendar.confirmeventseriesdelete\",{$a:{name:this.event.name,count:this.event.eventcount}}),t.inputs=[{type:\"radio\",name:\"deleteall\",checked:!0,value:!1,label:I.J.instant(\"addon.calendar.deleteoneevent\")},{type:\"radio\",name:\"deleteall\",checked:!1,value:!0,label:I.J.instant(\"addon.calendar.deleteallevents\")}]):n=I.J.instant(\"addon.calendar.confirmeventdelete\",{$a:this.event.name});let i=!1;try{i=yield h.a.showConfirm(n,e,void 0,void 0,t)}catch(e){return}const a=yield h.a.showModalLoading(\"core.sending\",!0);try{let e=!1;if(this.event.id<0?yield l.a.deleteEvent(this.event.id):e=yield d.a.deleteEvent(this.event.id,this.event.name,i),e)try{yield r.b.refreshAfterChangeEvent(this.event,i?this.event.eventcount:1)}catch(e){}this.event.id<0?_.b.trigger(d.c.NEW_EVENT_DISCARDED_EVENT,{},u.b.getCurrentSiteId()):_.b.trigger(d.c.DELETED_EVENT_EVENT,{eventId:this.eventId,sent:e},u.b.getCurrentSiteId()),e||this.event.id<0?(h.a.showToast(\"addon.calendar.eventcalendareventdeleted\",!0,h.c.LONG),b.a.back()):this.event.deleted=!0}catch(e){h.a.showErrorModalDefault(e,\"Error deleting event.\")}a.dismiss()}))}undoDelete(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.event)return;const e=yield h.a.showModalLoading(\"core.sending\",!0);try{yield l.a.unmarkDeleted(this.event.id),_.b.trigger(d.c.UNDELETED_EVENT_EVENT,{eventId:this.eventId},u.b.getCurrentSiteId()),this.event.deleted=!1}catch(e){h.a.showErrorModalDefault(e,\"Error undeleting event.\")}e.dismiss()}))}checkSyncResult(e,t){if(t)if(t.deleted&&-1!=t.deleted.indexOf(this.eventId))h.a.showToast(\"addon.calendar.eventcalendareventdeleted\",!0,h.c.LONG),b.a.back();else if(t.events&&(!e||\"event\"!=t.source))if(this.eventId<0)t.offlineIdMap[this.eventId]&&(this.eventId=t.offlineIdMap[this.eventId],this.eventLoaded=!1,this.refreshEvent());else{t.events.find((e=>e.id==this.eventId))&&(this.eventLoaded=!1,this.refreshEvent())}}ngOnDestroy(){var e;this.editEventObserver.off(),this.syncObserver.off(),this.manualSyncObserver.off(),this.onlineObserver.unsubscribe(),this.newEventObserver.off(),null===(e=this.events)||void 0===e||e.destroy(),clearInterval(this.updateCurrentTime)}}return AddonCalendarEventPage.ɵfac=function AddonCalendarEventPage_Factory(e){return new(e||AddonCalendarEventPage)(A.yc(i.a))},AddonCalendarEventPage.ɵcmp=A.sc({type:AddonCalendarEventPage,selectors:[[\"page-addon-calendar-event\"]],decls:25,vars:35,consts:[[\"collapsible\",\"\"],[\"slot\",\"start\"],[3,\"text\"],[4,\"ngIf\"],[\"slot\",\"end\"],[3,\"hidden\",\"priority\",\"content\",\"iconAction\",\"closeOnClick\",\"action\"],[\"iconAction\",\"fas-edit\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-trash\",3,\"hidden\",\"priority\",\"content\",\"action\"],[\"iconAction\",\"fas-undo-alt\",3,\"hidden\",\"priority\",\"content\",\"action\"],[3,\"core-swipe-navigation\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[\"class\",\"core-warning-card\",4,\"ngIf\"],[3,\"text\",\"contextLevel\",\"contextInstanceId\"],[1,\"core-warning-card\"],[\"name\",\"fas-exclamation-triangle\",\"slot\",\"start\",\"aria-hidden\",\"true\"],[\"collapsible\",\"\",1,\"ion-text-wrap\",\"addon-calendar-event\",3,\"ngClass\"],[\"slot\",\"start\",3,\"modicon\",\"showAlt\",\"modname\",\"componentId\",\"purpose\",4,\"ngIf\"],[\"aria-hidden\",\"true\",\"slot\",\"start\",3,\"name\",4,\"ngIf\"],[1,\"sr-only\"],[\"class\",\"sr-only\",4,\"ngIf\"],[\"slot\",\"end\",4,\"ngIf\"],[\"class\",\"ion-text-wrap\",\"core-link\",\"\",\"capture\",\"true\",3,\"href\",4,\"ngIf\"],[\"class\",\"ion-text-wrap core-groupname\",4,\"ngIf\"],[\"class\",\"ion-text-wrap\",4,\"ngIf\"],[\"slot\",\"start\",3,\"modicon\",\"showAlt\",\"modname\",\"componentId\",\"purpose\"],[\"aria-hidden\",\"true\",\"slot\",\"start\",3,\"name\"],[\"name\",\"fas-trash\",\"aria-hidden\",\"true\"],[\"core-link\",\"\",\"capture\",\"true\",1,\"ion-text-wrap\",3,\"href\"],[\"contextLevel\",\"course\",3,\"text\",\"contextInstanceId\"],[1,\"ion-text-wrap\",\"core-groupname\"],[1,\"ion-text-wrap\"],[\"contextLevel\",\"coursecat\",3,\"text\",\"contextInstanceId\"],[\"core-link\",\"\",\"auto-login\",\"no\",3,\"href\"],[\"expand\",\"block\",\"core-link\",\"\",\"capture\",\"true\",3,\"href\"],[4,\"ngFor\",\"ngForOf\"],[\"class\",\"ion-text-wrap\",3,\"item-dimmed\",4,\"ngIf\"],[1,\"item-heading\"],[\"fill\",\"clear\",\"slot\",\"end\",3,\"click\"],[\"name\",\"fas-trash\",\"color\",\"danger\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"],[\"expand\",\"block\",3,\"click\"]],template:function AddonCalendarEventPage_Template(e,t){1&e&&(A.Ec(0,\"ion-header\",0),A.Ec(1,\"ion-toolbar\"),A.Ec(2,\"ion-buttons\",1),A.zc(3,\"ion-back-button\",2),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"ion-title\"),A.nd(6,AddonCalendarEventPage_h1_6_Template,2,3,\"h1\",3),A.Dc(),A.Ec(7,\"ion-buttons\",4),A.Ec(8,\"core-context-menu\"),A.Ec(9,\"core-context-menu-item\",5),A.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener(e){return t.doRefresh(void 0,e,!0)})),A.Pc(10,\"translate\"),A.Dc(),A.Ec(11,\"core-context-menu-item\",6),A.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener(){return t.openEdit()})),A.Pc(12,\"translate\"),A.Dc(),A.Ec(13,\"core-context-menu-item\",7),A.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener(){return t.deleteEvent()})),A.Pc(14,\"translate\"),A.Dc(),A.Ec(15,\"core-context-menu-item\",8),A.Mc(\"action\",(function AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener(){return t.undoDelete()})),A.Pc(16,\"translate\"),A.Dc(),A.Dc(),A.Dc(),A.Dc(),A.Dc(),A.Ec(17,\"ion-content\",9),A.Ec(18,\"ion-refresher\",10),A.Mc(\"ionRefresh\",(function AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener(e){return t.doRefresh(e.target)})),A.zc(19,\"ion-refresher-content\",11),A.Pc(20,\"translate\"),A.Dc(),A.Ec(21,\"core-loading\",12),A.nd(22,AddonCalendarEventPage_ion_card_22_Template,7,8,\"ion-card\",13),A.nd(23,AddonCalendarEventPage_ion_list_23_Template,32,31,\"ion-list\",3),A.nd(24,AddonCalendarEventPage_ion_card_24_Template,8,5,\"ion-card\",3),A.Dc(),A.Dc()),2&e&&(A.lc(3),A.Vc(\"text\",A.Qc(4,23,\"core.back\")),A.lc(3),A.Vc(\"ngIf\",t.event),A.lc(3),A.Vc(\"hidden\",!t.eventLoaded||!t.hasOffline&&t.event&&!t.event.deleted||!t.isOnline)(\"priority\",400)(\"content\",A.Qc(10,25,\"core.settings.synchronizenow\"))(\"iconAction\",t.syncIcon)(\"closeOnClick\",!1),A.lc(2),A.Vc(\"hidden\",!t.event||!t.event.canedit||t.event.deleted||!t.canEdit&&t.event.id>0)(\"priority\",300)(\"content\",A.Qc(12,27,\"core.edit\")),A.lc(2),A.Vc(\"hidden\",!t.event||!t.event.candelete||t.event.deleted)(\"priority\",200)(\"content\",A.Qc(14,29,\"core.delete\")),A.lc(2),A.Vc(\"hidden\",!t.event||!t.event.deleted)(\"priority\",200)(\"content\",A.Qc(16,31,\"core.restore\")),A.lc(2),A.Vc(\"core-swipe-navigation\",t.events),A.lc(1),A.Vc(\"disabled\",!t.eventLoaded),A.lc(1),A.Wc(\"pullingText\",A.Qc(20,33,\"core.pulltorefresh\")),A.lc(2),A.Vc(\"hideUntil\",t.eventLoaded),A.lc(1),A.Vc(\"ngIf\",t.hasOffline||t.event&&t.event.deleted),A.lc(1),A.Vc(\"ngIf\",t.event),A.lc(1),A.Vc(\"ngIf\",t.notificationsEnabled&&t.event))},directives:[x.C,M.b,x.Ab,x.m,x.h,x.i,x.yb,w.t,N.a,V.a,S.a,x.v,L.a,x.bb,x.cb,k.a,R.a,x.n,x.I,x.D,j.a,x.O,x.P,w.q,Q.a,x.W,U.a,z.a,x.l,w.s],pipes:[q.d],styles:[\"[_nghost-%COMP%]{--addon-calendar-blank-day-background-color:var(--light)}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:.7rem;--margin-vertical:12px;--margin-end:12px;margin-top:var(--margin-vertical);margin-bottom:var(--margin-vertical);margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#8e24aa}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#ca3120}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#f0ad4e}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#0f6cbf}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#357a32}\",\"[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1.6rem}\"]}),AddonCalendarEventPage})();class event_page_AddonCalendarEventsSwipeItemsManager extends T.a{getSelectedItemPathFromRoute(e){return e.params.id}}const G=[{path:\"\",component:F}];let B=(()=>{class AddonCalendarEventPageModule{}return AddonCalendarEventPageModule.ɵmod=A.wc({type:AddonCalendarEventPageModule}),AddonCalendarEventPageModule.ɵinj=A.vc({factory:function AddonCalendarEventPageModule_Factory(e){return new(e||AddonCalendarEventPageModule)},imports:[[i.m.forChild(G),a.a,o.a],i.m]}),AddonCalendarEventPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&A.kd(B,{declarations:[F],imports:[i.m,a.a,o.a],exports:[i.m]}))},eoiU:function(e,t,n){\"use strict\";n.d(t,\"a\",(function(){return CoreSwipeNavigationItemsManager}));var i=n(\"mrSG\"),a=n(\"pHTc\"),o=n(\"CtbY\");class CoreSwipeNavigationItemsManager extends o.a{start(){return Object(i.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,\"forward\")}))}navigateToPreviousItem(){return Object(i.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,\"back\")}))}hasNextItem(){return Object(i.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(i.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return a.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const t=[];for(;e&&(t.push(...e.url),e.firstChild);)e=e.firstChild;return t.map((e=>e.path)).join(\"/\").replace(/\\/+/,\"/\").trim()||null}navigateToItemBy(e,t){return Object(i.a)(this,void 0,void 0,(function*(){const n=yield this.getItemBy(e);n&&(yield this.navigateToItem(n,{animationDirection:t,replace:!0}))}))}getItemBy(e){var t;return Object(i.a)(this,void 0,void 0,(function*(){const n=this.getSource().getItems(),i=null!==(t=this.selectedItem&&(null==n?void 0:n.indexOf(this.selectedItem)))&&void 0!==t?t:-1;if(-1===i||null===n)return null;const a=e>0?1:-1;let o=i,c=0;for(;c!==e&&(o+=a,!(o<0||o>=n.length));)this.skipItemInSwipe(n[o])||(c+=a);return c===e?n[o]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}}}]);","name":"31.844d1567949f3d24916f.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[31],{\n\n/***/ \"LfF/\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonCalendarEventPageModule\", function() { return /* binding */ event_module_AddonCalendarEventPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/components.module.ts\nvar components_module = __webpack_require__(\"9Xwr\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar.ts\nvar calendar = __webpack_require__(\"SmTL\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-helper.ts\nvar calendar_helper = __webpack_require__(\"n6RP\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-offline.ts\nvar calendar_offline = __webpack_require__(\"Lc7R\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/services/calendar-sync.ts\nvar calendar_sync = __webpack_require__(\"+lfu\");\n\n// EXTERNAL MODULE: ./src/core/services/network.ts + 2 modules\nvar network = __webpack_require__(\"GGba\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/text.ts + 1 modules\nvar utils_text = __webpack_require__(\"vuGA\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/services/local-notifications.ts + 1 modules\nvar local_notifications = __webpack_require__(\"ANhT\");\n\n// EXTERNAL MODULE: ./src/core/features/course/services/course.ts\nvar course = __webpack_require__(\"ULAo\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/time.ts\nvar time = __webpack_require__(\"Q98t\");\n\n// EXTERNAL MODULE: ./src/core/services/groups.ts\nvar services_groups = __webpack_require__(\"mWdr\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/core/constants.ts\nvar constants = __webpack_require__(\"BaYo\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/components/reminder-time-modal/reminder-time-modal.ts\nvar reminder_time_modal = __webpack_require__(\"2CAT\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/routed-items-manager-sources-tracker.ts\nvar routed_items_manager_sources_tracker = __webpack_require__(\"baaQ\");\n\n// EXTERNAL MODULE: ./src/addons/calendar/classes/events-source.ts\nvar events_source = __webpack_require__(\"51vF\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/swipe-navigation-items-manager.ts\nvar swipe_navigation_items_manager = __webpack_require__(\"eoiU\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-header.ts\nvar collapsible_header = __webpack_require__(\"4JiN\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu.ts + 4 modules\nvar context_menu = __webpack_require__(\"fQ68\");\n\n// EXTERNAL MODULE: ./src/core/components/context-menu/context-menu-item.ts\nvar context_menu_item = __webpack_require__(\"8/N+\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/directives/swipe-navigation.ts\nvar swipe_navigation = __webpack_require__(\"OZH1\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/components/mod-icon/mod-icon.ts\nvar mod_icon = __webpack_require__(\"eAud\");\n\n// EXTERNAL MODULE: ./src/core/directives/link.ts\nvar directives_link = __webpack_require__(\"iSJP\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/addons/calendar/pages/event/event.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonCalendarEventPage_h1_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"h1\");\n        core[\"zc\" /* ɵɵelement */](1, \"core-format-text\", 14);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r0.event.name)(\"contextLevel\", ctx_r0.event.contextLevel)(\"contextInstanceId\", ctx_r0.event.contextInstanceId);\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction AddonCalendarEventPage_ion_card_22_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\", 15);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 16);\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-label\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Pc\" /* ɵɵpipe */](6, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 1, \"core.hasdatatosync\", core[\"ad\" /* ɵɵpureFunction1 */](6, _c0, core[\"Qc\" /* ɵɵpipeBind1 */](6, 4, \"addon.calendar.calendarevent\"))));\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-mod-icon\", 26);\n    }\n    if (rf & 2) {\n        const ctx_r4 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"modicon\", ctx_r4.event.moduleIcon)(\"showAlt\", false)(\"modname\", ctx_r4.event.modulename)(\"componentId\", ctx_r4.event.instance)(\"purpose\", ctx_r4.event.purpose);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_icon_3_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"ion-icon\", 27);\n    }\n    if (rf & 2) {\n        const ctx_r5 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"name\", ctx_r5.event.eventIcon);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_span_8_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"span\", 20);\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r6 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qd\" /* ɵɵtextInterpolate */](ctx_r6.event.iconTitle);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_note_17_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-note\", 4);\n        core[\"zc\" /* ɵɵelement */](1, \"ion-icon\", 28);\n        core[\"pd\" /* ɵɵtext */](2);\n        core[\"Pc\" /* ɵɵpipe */](3, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](3, 1, \"core.deletedoffline\"), \" \");\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_26_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 29);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 30);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r8 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", ctx_r8.courseUrl);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 4, \"core.course\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r8.courseName)(\"contextInstanceId\", ctx_r8.courseId);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_27_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 31);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"pd\" /* ɵɵtext */](6);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r9 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 2, \"core.group\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](ctx_r9.groupName);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_28_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 32);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 33);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r10 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 3, \"core.category\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r10.categoryPath)(\"contextInstanceId\", ctx_r10.event.categoryid);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_29_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 32);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 14);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r11 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 4, \"core.description\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r11.event.description)(\"contextLevel\", ctx_r11.event.contextLevel)(\"contextInstanceId\", ctx_r11.event.contextInstanceId);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_30_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 32);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\");\n        core[\"Ec\" /* ɵɵelementStart */](6, \"a\", 34);\n        core[\"zc\" /* ɵɵelement */](7, \"core-format-text\", 14);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r12 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 5, \"core.location\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", ctx_r12.event.encodedLocation, core[\"id\" /* ɵɵsanitizeUrl */]);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r12.event.location)(\"contextLevel\", ctx_r12.event.contextLevel)(\"contextInstanceId\", ctx_r12.event.contextInstanceId);\n    }\n}\nfunction AddonCalendarEventPage_ion_list_23_ion_item_31_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-button\", 35);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r13 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", ctx_r13.moduleUrl);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](4, 2, \"addon.calendar.gotoactivity\"), \" \");\n    }\n}\nconst _c1 = function (a0) { return [a0]; };\nfunction AddonCalendarEventPage_ion_list_23_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-list\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\", 17);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonCalendarEventPage_ion_list_23_core_mod_icon_2_Template, 1, 5, \"core-mod-icon\", 18);\n        core[\"nd\" /* ɵɵtemplate */](3, AddonCalendarEventPage_ion_list_23_ion_icon_3_Template, 1, 1, \"ion-icon\", 19);\n        core[\"Ec\" /* ɵɵelementStart */](4, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](5, \"span\", 20);\n        core[\"pd\" /* ɵɵtext */](6);\n        core[\"Pc\" /* ɵɵpipe */](7, \"translate\");\n        core[\"nd\" /* ɵɵtemplate */](8, AddonCalendarEventPage_ion_list_23_span_8_Template, 2, 1, \"span\", 21);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](9, \"h1\");\n        core[\"zc\" /* ɵɵelement */](10, \"core-format-text\", 14);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](11, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](12, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](13, \"h2\");\n        core[\"pd\" /* ɵɵtext */](14);\n        core[\"Pc\" /* ɵɵpipe */](15, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"zc\" /* ɵɵelement */](16, \"core-format-text\", 14);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](17, AddonCalendarEventPage_ion_list_23_ion_note_17_Template, 4, 3, \"ion-note\", 22);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](18, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](19, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](20, \"h2\");\n        core[\"pd\" /* ɵɵtext */](21);\n        core[\"Pc\" /* ɵɵpipe */](22, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](23, \"p\");\n        core[\"pd\" /* ɵɵtext */](24);\n        core[\"Pc\" /* ɵɵpipe */](25, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](26, AddonCalendarEventPage_ion_list_23_ion_item_26_Template, 7, 6, \"ion-item\", 23);\n        core[\"nd\" /* ɵɵtemplate */](27, AddonCalendarEventPage_ion_list_23_ion_item_27_Template, 7, 4, \"ion-item\", 24);\n        core[\"nd\" /* ɵɵtemplate */](28, AddonCalendarEventPage_ion_list_23_ion_item_28_Template, 7, 5, \"ion-item\", 25);\n        core[\"nd\" /* ɵɵtemplate */](29, AddonCalendarEventPage_ion_list_23_ion_item_29_Template, 7, 6, \"ion-item\", 25);\n        core[\"nd\" /* ɵɵtemplate */](30, AddonCalendarEventPage_ion_list_23_ion_item_30_Template, 8, 7, \"ion-item\", 25);\n        core[\"nd\" /* ɵɵtemplate */](31, AddonCalendarEventPage_ion_list_23_ion_item_31_Template, 5, 4, \"ion-item\", 3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngClass\", core[\"ad\" /* ɵɵpureFunction1 */](29, _c1, \"addon-calendar-eventtype-\" + ctx_r2.event.eventtype));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.moduleIcon);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.eventIcon && !ctx_r2.event.moduleIcon);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](7, 21, \"addon.calendar.type\" + ctx_r2.event.formattedType), \" \");\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.moduleIcon && ctx_r2.event.iconTitle);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r2.event.name)(\"contextLevel\", ctx_r2.event.contextLevel)(\"contextInstanceId\", ctx_r2.event.contextInstanceId);\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](15, 23, \"addon.calendar.when\"));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", ctx_r2.event.formattedtime)(\"contextLevel\", ctx_r2.event.contextLevel)(\"contextInstanceId\", ctx_r2.event.contextInstanceId);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.deleted);\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](22, 25, \"addon.calendar.eventtype\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](25, 27, \"addon.calendar.type\" + ctx_r2.event.formattedType));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.courseName);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.groupName);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.categoryPath);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.description);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.event.location);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.moduleUrl);\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"p\");\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const reminder_r16 = core[\"Oc\" /* ɵɵnextContext */](2).$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qd\" /* ɵɵtextInterpolate */](reminder_r16.sublabel);\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r22 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 32);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"p\", 38);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](4, AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_p_4_Template, 2, 1, \"p\", 3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](5, \"ion-button\", 39);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template_ion_button_click_5_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r22); const reminder_r16 = core[\"Oc\" /* ɵɵnextContext */]().$implicit; const ctx_r20 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r20.cancelNotification(reminder_r16.id, $event); });\n        core[\"Pc\" /* ɵɵpipe */](6, \"translate\");\n        core[\"zc\" /* ɵɵelement */](7, \"ion-icon\", 40);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const reminder_r16 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        const ctx_r17 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"qc\" /* ɵɵclassProp */](\"item-dimmed\", reminder_r16.timestamp <= ctx_r17.currentTime);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](reminder_r16.label);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", reminder_r16.sublabel);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](6, 5, \"core.delete\"));\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonCalendarEventPage_ion_card_24_ng_container_6_ion_item_1_Template, 8, 7, \"ion-item\", 37);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const reminder_r16 = ctx.$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", reminder_r16.timestamp > 0);\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_ng_container_7_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r25 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"ion-button\", 41);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonCalendarEventPage_ion_card_24_ng_container_7_Template_ion_button_click_3_listener() { core[\"fd\" /* ɵɵrestoreView */](_r25); const ctx_r24 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r24.addReminder(); });\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](5, 1, \"addon.calendar.setnewreminder\"), \" \");\n    }\n}\nfunction AddonCalendarEventPage_ion_card_24_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\");\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"h2\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, AddonCalendarEventPage_ion_card_24_ng_container_6_Template, 2, 1, \"ng-container\", 36);\n        core[\"nd\" /* ɵɵtemplate */](7, AddonCalendarEventPage_ion_card_24_ng_container_7_Template, 6, 3, \"ng-container\", 3);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 3, \"addon.calendar.reminders\"));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r3.reminders);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r3.event.timestart > ctx_r3.currentTime);\n    }\n}\n/**\n * Page that displays a single calendar event.\n */\nlet event_page_AddonCalendarEventPage = /*@__PURE__*/ (() => {\n    class AddonCalendarEventPage {\n        constructor(route) {\n            this.route = route;\n            this.eventLoaded = false;\n            this.courseName = '';\n            this.courseUrl = '';\n            this.notificationsEnabled = false;\n            this.moduleUrl = '';\n            this.categoryPath = '';\n            this.currentTime = -1;\n            this.reminders = [];\n            this.canEdit = false;\n            this.hasOffline = false;\n            this.isOnline = false;\n            this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING; // Sync icon.\n            this.notificationsEnabled = local_notifications[\"a\" /* CoreLocalNotifications */].isAvailable();\n            this.siteHomeId = sites[\"b\" /* CoreSites */].getCurrentSiteHomeId();\n            this.currentSiteId = sites[\"b\" /* CoreSites */].getCurrentSiteId();\n            // Check if site supports editing. No need to check allowed types, event.canedit already does it.\n            this.canEdit = calendar[\"a\" /* AddonCalendar */].canEditEventsInSite();\n            // Listen for event edited. If current event is edited, reload the data.\n            this.editEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].EDIT_EVENT_EVENT, (data) => {\n                if (data && data.eventId === this.eventId) {\n                    this.eventLoaded = false;\n                    this.refreshEvent(true, false);\n                }\n            }, this.currentSiteId);\n            // Listen for event created. If user edits the data of a new offline event or it's sent to server, this event is triggered.\n            this.newEventObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].NEW_EVENT_EVENT, (data) => {\n                if (this.eventId < 0 && data && (data.eventId === this.eventId || data.oldEventId === this.eventId)) {\n                    this.eventId = data.eventId;\n                    this.eventLoaded = false;\n                    this.refreshEvent(true, false);\n                }\n            }, this.currentSiteId);\n            // Refresh data if this calendar event is synchronized automatically.\n            this.syncObserver = events[\"b\" /* CoreEvents */].on(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].AUTO_SYNCED, this.checkSyncResult.bind(this, false), this.currentSiteId);\n            // Refresh data if calendar events are synchronized manually but not by this page.\n            this.manualSyncObserver = events[\"b\" /* CoreEvents */].on(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].MANUAL_SYNCED, this.checkSyncResult.bind(this, true), this.currentSiteId);\n            // Refresh online status when changes.\n            this.onlineObserver = network[\"a\" /* CoreNetwork */].onChange().subscribe(() => {\n                // Execute the callback in the Angular zone, so change detection doesn't stop working.\n                singletons[\"A\" /* NgZone */].run(() => {\n                    this.isOnline = network[\"a\" /* CoreNetwork */].isOnline();\n                });\n            });\n            // Reload reminders if default notification time changes.\n            this.defaultTimeChangedObserver = events[\"b\" /* CoreEvents */].on(calendar[\"c\" /* AddonCalendarProvider */].DEFAULT_NOTIFICATION_TIME_CHANGED, () => {\n                this.loadReminders();\n            }, this.currentSiteId);\n            // Set and update current time. Use a 5 seconds error margin.\n            this.currentTime = time[\"a\" /* CoreTimeUtils */].timestamp();\n            this.updateCurrentTime = window.setInterval(() => {\n                this.currentTime = time[\"a\" /* CoreTimeUtils */].timestamp();\n            }, 5000);\n        }\n        /**\n         * Load reminders.\n         *\n         * @return Promise resolved when done.\n         */\n        loadReminders() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.notificationsEnabled || !this.event) {\n                    return;\n                }\n                const reminders = yield calendar[\"a\" /* AddonCalendar */].getEventReminders(this.eventId, this.currentSiteId);\n                this.reminders = yield calendar_helper[\"b\" /* AddonCalendarHelper */].formatReminders(reminders, this.event.timestart, this.currentSiteId);\n            });\n        }\n        /**\n         * View loaded.\n         */\n        ngOnInit() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    this.eventId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('id');\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                    services_navigator[\"a\" /* CoreNavigator */].back();\n                    return;\n                }\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                yield this.initializeSwipeManager();\n                yield this.fetchEvent();\n            });\n        }\n        /**\n         * Fetches the event and updates the view.\n         *\n         * @param sync Whether it should try to synchronize offline events.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        fetchEvent(sync = false, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.isOnline = network[\"a\" /* CoreNetwork */].isOnline();\n                if (sync) {\n                    const deleted = yield this.syncEvents(showErrors);\n                    if (deleted) {\n                        return;\n                    }\n                }\n                try {\n                    // Get the event data.\n                    if (this.eventId >= 0) {\n                        const event = yield calendar[\"a\" /* AddonCalendar */].getEventById(this.eventId);\n                        this.event = calendar_helper[\"b\" /* AddonCalendarHelper */].formatEventData(event);\n                    }\n                    try {\n                        const offlineEvent = calendar_helper[\"b\" /* AddonCalendarHelper */].formatOfflineEventData(yield calendar_offline[\"a\" /* AddonCalendarOffline */].getEvent(this.eventId));\n                        // There is offline data, apply it.\n                        this.hasOffline = true;\n                        this.event = Object.assign(this.event || {}, offlineEvent);\n                    }\n                    catch (_a) {\n                        // No offline data.\n                        this.hasOffline = false;\n                        if (this.eventId < 0) {\n                            // It's an offline event, but it wasn't found. Shouldn't happen.\n                            dom[\"a\" /* CoreDomUtils */].showErrorModal('Event not found.');\n                            services_navigator[\"a\" /* CoreNavigator */].back();\n                            return;\n                        }\n                    }\n                    if (!this.event) {\n                        return; // At this point we should always have the event, adding this check to avoid TS errors.\n                    }\n                    // Load reminders.\n                    this.loadReminders();\n                    // Reset some of the calculated data.\n                    this.categoryPath = '';\n                    this.courseName = '';\n                    this.courseUrl = '';\n                    this.moduleUrl = '';\n                    if (this.event.moduleIcon) {\n                        // It's a module event, translate the module name to the current language.\n                        const name = course[\"a\" /* CoreCourse */].translateModuleName(this.event.modulename || '');\n                        if (name.indexOf('core.mod_') === -1) {\n                            this.event.modulename = name;\n                        }\n                        // Get the module URL.\n                        this.moduleUrl = this.event.url || '';\n                    }\n                    const promises = [];\n                    const event = this.event;\n                    const courseId = this.event.courseid;\n                    if (courseId != this.siteHomeId) {\n                        // If the event belongs to a course, get the course name and the URL to view it.\n                        if (this.event.course) {\n                            this.courseId = this.event.course.id;\n                            this.courseName = this.event.course.fullname;\n                            this.courseUrl = this.event.course.viewurl;\n                        }\n                    }\n                    // If it's a group event, get the name of the group.\n                    if (courseId && this.event.groupid) {\n                        promises.push(this.loadGroupName(this.event, courseId));\n                    }\n                    if (this.event.iscategoryevent && this.event.category) {\n                        this.categoryPath = this.event.category.nestedname;\n                    }\n                    if (this.event.location) {\n                        // Build a link to open the address in maps.\n                        this.event.location = utils_text[\"a\" /* CoreTextUtils */].decodeHTML(this.event.location);\n                        this.event.encodedLocation = utils_text[\"a\" /* CoreTextUtils */].buildAddressURL(this.event.location);\n                    }\n                    // Check if event was deleted in offine.\n                    promises.push(calendar_offline[\"a\" /* AddonCalendarOffline */].isEventDeleted(this.eventId).then((deleted) => {\n                        event.deleted = deleted;\n                        return;\n                    }));\n                    // Re-calculate the formatted time so it uses the device date.\n                    promises.push(calendar[\"a\" /* AddonCalendar */].getCalendarTimeFormat().then((timeFormat) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                        event.formattedtime = yield calendar[\"a\" /* AddonCalendar */].formatEventTime(event, timeFormat);\n                        return;\n                    })));\n                    yield Promise.all(promises);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'addon.calendar.errorloadevent', true);\n                }\n                this.eventLoaded = true;\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_SYNC;\n            });\n        }\n        /**\n         * Initialize swipe manager if enabled.\n         */\n        initializeSwipeManager() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const date = services_navigator[\"a\" /* CoreNavigator */].getRouteParam('date');\n                const source = date && routed_items_manager_sources_tracker[\"a\" /* CoreRoutedItemsManagerSourcesTracker */].getSource(events_source[\"a\" /* AddonCalendarEventsSource */], [date]);\n                if (!source) {\n                    return;\n                }\n                this.events = new event_page_AddonCalendarEventsSwipeItemsManager(source);\n                yield this.events.start();\n            });\n        }\n        /**\n         * Sync offline events.\n         *\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved with boolean: whether event was deleted on sync.\n         */\n        syncEvents(showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                let deleted = false;\n                // Try to synchronize offline events.\n                try {\n                    const result = yield calendar_sync[\"a\" /* AddonCalendarSync */].syncEvents();\n                    if (result.warnings && result.warnings.length) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModal(result.warnings[0]);\n                    }\n                    if (result.deleted && result.deleted.indexOf(this.eventId) != -1) {\n                        // This event was deleted during the sync.\n                        deleted = true;\n                    }\n                    else if (this.eventId < 0 && result.offlineIdMap[this.eventId]) {\n                        // Event was created, use the online ID.\n                        this.eventId = result.offlineIdMap[this.eventId];\n                    }\n                    if (result.updated) {\n                        // Trigger a manual sync event.\n                        result.source = 'event';\n                        events[\"b\" /* CoreEvents */].trigger(calendar_sync[\"b\" /* AddonCalendarSyncProvider */].MANUAL_SYNCED, result, this.currentSiteId);\n                    }\n                }\n                catch (error) {\n                    if (showErrors) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.errorsync', true);\n                    }\n                }\n                return deleted;\n            });\n        }\n        /**\n         * Load group name.\n         *\n         * @param event Event.\n         * @param courseId Course ID.\n         * @return Promise resolved when done.\n         */\n        loadGroupName(event, courseId) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const groups = yield services_groups[\"a\" /* CoreGroups */].getUserGroupsInCourse(courseId);\n                    const group = groups.find((group) => group.id == event.groupid);\n                    this.groupName = group ? group.name : '';\n                }\n                catch (_a) {\n                    // Error getting groups, just don't show the group name.\n                    this.groupName = '';\n                }\n            });\n        }\n        /**\n         * Add a reminder for this event.\n         */\n        addReminder() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.event || !this.event.id) {\n                    return;\n                }\n                const reminderTime = yield dom[\"a\" /* CoreDomUtils */].openModal({\n                    component: reminder_time_modal[\"a\" /* AddonCalendarReminderTimeModalComponent */],\n                });\n                if (reminderTime === undefined) {\n                    // User canceled.\n                    return;\n                }\n                yield calendar[\"a\" /* AddonCalendar */].addEventReminder(this.event, reminderTime, this.currentSiteId);\n                yield this.loadReminders();\n            });\n        }\n        /**\n         * Cancel the selected notification.\n         *\n         * @param id Reminder ID.\n         * @param e Click event.\n         */\n        cancelNotification(id, e) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                e.preventDefault();\n                e.stopPropagation();\n                try {\n                    yield dom[\"a\" /* CoreDomUtils */].showDeleteConfirm();\n                    const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.deleting', true);\n                    try {\n                        yield calendar[\"a\" /* AddonCalendar */].deleteEventReminder(id);\n                        yield this.loadReminders();\n                    }\n                    catch (error) {\n                        dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error deleting reminder');\n                    }\n                    finally {\n                        modal.dismiss();\n                    }\n                }\n                catch (_a) {\n                    // Ignore errors.\n                }\n            });\n        }\n        /**\n         * Refresh the data.\n         *\n         * @param refresher Refresher.\n         * @param done Function to call when done.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        doRefresh(refresher, done, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.eventLoaded) {\n                    return;\n                }\n                yield this.refreshEvent(true, showErrors).finally(() => {\n                    refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n                    done && done();\n                });\n            });\n        }\n        /**\n         * Refresh the event.\n         *\n         * @param sync Whether it should try to synchronize offline events.\n         * @param showErrors Whether to show sync errors to the user.\n         * @return Promise resolved when done.\n         */\n        refreshEvent(sync = false, showErrors = false) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.syncIcon = constants[\"a\" /* CoreConstants */].ICON_LOADING;\n                const promises = [];\n                if (this.eventId > 0) {\n                    promises.push(calendar[\"a\" /* AddonCalendar */].invalidateEvent(this.eventId));\n                }\n                promises.push(calendar[\"a\" /* AddonCalendar */].invalidateTimeFormat());\n                yield utils[\"a\" /* CoreUtils */].allPromisesIgnoringErrors(promises);\n                yield this.fetchEvent(sync, showErrors);\n            });\n        }\n        /**\n         * Open the page to edit the event.\n         */\n        openEdit() {\n            services_navigator[\"a\" /* CoreNavigator */].navigateToSitePath(`/calendar/edit/${this.eventId}`);\n        }\n        /**\n         * Delete the event.\n         */\n        deleteEvent() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.event) {\n                    return;\n                }\n                const title = singletons[\"J\" /* Translate */].instant('addon.calendar.deleteevent');\n                const options = {};\n                let message;\n                if (this.event.eventcount > 1) {\n                    // It's a repeated event.\n                    message = singletons[\"J\" /* Translate */].instant('addon.calendar.confirmeventseriesdelete', { $a: { name: this.event.name, count: this.event.eventcount } });\n                    options.inputs = [\n                        {\n                            type: 'radio',\n                            name: 'deleteall',\n                            checked: true,\n                            value: false,\n                            label: singletons[\"J\" /* Translate */].instant('addon.calendar.deleteoneevent'),\n                        },\n                        {\n                            type: 'radio',\n                            name: 'deleteall',\n                            checked: false,\n                            value: true,\n                            label: singletons[\"J\" /* Translate */].instant('addon.calendar.deleteallevents'),\n                        },\n                    ];\n                }\n                else {\n                    // Not repeated, display a simple confirm.\n                    message = singletons[\"J\" /* Translate */].instant('addon.calendar.confirmeventdelete', { $a: this.event.name });\n                }\n                let deleteAll = false;\n                try {\n                    deleteAll = yield dom[\"a\" /* CoreDomUtils */].showConfirm(message, title, undefined, undefined, options);\n                }\n                catch (_a) {\n                    // User canceled.\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    let onlineEventDeleted = false;\n                    if (this.event.id < 0) {\n                        yield calendar_offline[\"a\" /* AddonCalendarOffline */].deleteEvent(this.event.id);\n                    }\n                    else {\n                        onlineEventDeleted = yield calendar[\"a\" /* AddonCalendar */].deleteEvent(this.event.id, this.event.name, deleteAll);\n                    }\n                    if (onlineEventDeleted) {\n                        // Event deleted, invalidate right days & months.\n                        try {\n                            yield calendar_helper[\"b\" /* AddonCalendarHelper */].refreshAfterChangeEvent(this.event, deleteAll ? this.event.eventcount : 1);\n                        }\n                        catch (_b) {\n                            // Ignore errors.\n                        }\n                    }\n                    // Trigger an event.\n                    if (this.event.id < 0) {\n                        events[\"b\" /* CoreEvents */].trigger(calendar[\"c\" /* AddonCalendarProvider */].NEW_EVENT_DISCARDED_EVENT, {}, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    }\n                    else {\n                        events[\"b\" /* CoreEvents */].trigger(calendar[\"c\" /* AddonCalendarProvider */].DELETED_EVENT_EVENT, {\n                            eventId: this.eventId,\n                            sent: onlineEventDeleted,\n                        }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    }\n                    if (onlineEventDeleted || this.event.id < 0) {\n                        dom[\"a\" /* CoreDomUtils */].showToast('addon.calendar.eventcalendareventdeleted', true, dom[\"c\" /* ToastDuration */].LONG);\n                        // Event deleted, close the view.\n                        services_navigator[\"a\" /* CoreNavigator */].back();\n                    }\n                    else {\n                        // Event deleted in offline, just mark it as deleted.\n                        this.event.deleted = true;\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error deleting event.');\n                }\n                modal.dismiss();\n            });\n        }\n        /**\n         * Undo delete the event.\n         */\n        undoDelete() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.event) {\n                    return;\n                }\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading('core.sending', true);\n                try {\n                    yield calendar_offline[\"a\" /* AddonCalendarOffline */].unmarkDeleted(this.event.id);\n                    // Trigger an event.\n                    events[\"b\" /* CoreEvents */].trigger(calendar[\"c\" /* AddonCalendarProvider */].UNDELETED_EVENT_EVENT, {\n                        eventId: this.eventId,\n                    }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                    this.event.deleted = false;\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error undeleting event.');\n                }\n                modal.dismiss();\n            });\n        }\n        /**\n         * Check the result of an automatic sync or a manual sync not done by this page.\n         *\n         * @param isManual Whether it's a manual sync.\n         * @param data Sync result.\n         */\n        checkSyncResult(isManual, data) {\n            if (!data) {\n                return;\n            }\n            if (data.deleted && data.deleted.indexOf(this.eventId) != -1) {\n                dom[\"a\" /* CoreDomUtils */].showToast('addon.calendar.eventcalendareventdeleted', true, dom[\"c\" /* ToastDuration */].LONG);\n                // Event was deleted, close the view.\n                services_navigator[\"a\" /* CoreNavigator */].back();\n            }\n            else if (data.events && (!isManual || data.source != 'event')) {\n                if (this.eventId < 0) {\n                    if (data.offlineIdMap[this.eventId]) {\n                        // Event was created, use the online ID.\n                        this.eventId = data.offlineIdMap[this.eventId];\n                        this.eventLoaded = false;\n                        this.refreshEvent();\n                    }\n                }\n                else {\n                    const event = data.events.find((ev) => ev.id == this.eventId);\n                    if (event) {\n                        this.eventLoaded = false;\n                        this.refreshEvent();\n                    }\n                }\n            }\n        }\n        /**\n         * Page destroyed.\n         */\n        ngOnDestroy() {\n            var _a;\n            this.editEventObserver.off();\n            this.syncObserver.off();\n            this.manualSyncObserver.off();\n            this.onlineObserver.unsubscribe();\n            this.newEventObserver.off();\n            (_a = this.events) === null || _a === void 0 ? void 0 : _a.destroy();\n            clearInterval(this.updateCurrentTime);\n        }\n    }\n    AddonCalendarEventPage.ɵfac = function AddonCalendarEventPage_Factory(t) { return new (t || AddonCalendarEventPage)(core[\"yc\" /* ɵɵdirectiveInject */](router[\"a\" /* ActivatedRoute */])); };\n    AddonCalendarEventPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonCalendarEventPage, selectors: [[\"page-addon-calendar-event\"]], decls: 25, vars: 35, consts: [[\"collapsible\", \"\"], [\"slot\", \"start\"], [3, \"text\"], [4, \"ngIf\"], [\"slot\", \"end\"], [3, \"hidden\", \"priority\", \"content\", \"iconAction\", \"closeOnClick\", \"action\"], [\"iconAction\", \"fas-edit\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-trash\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [\"iconAction\", \"fas-undo-alt\", 3, \"hidden\", \"priority\", \"content\", \"action\"], [3, \"core-swipe-navigation\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"class\", \"core-warning-card\", 4, \"ngIf\"], [3, \"text\", \"contextLevel\", \"contextInstanceId\"], [1, \"core-warning-card\"], [\"name\", \"fas-exclamation-triangle\", \"slot\", \"start\", \"aria-hidden\", \"true\"], [\"collapsible\", \"\", 1, \"ion-text-wrap\", \"addon-calendar-event\", 3, \"ngClass\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", \"modname\", \"componentId\", \"purpose\", 4, \"ngIf\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"name\", 4, \"ngIf\"], [1, \"sr-only\"], [\"class\", \"sr-only\", 4, \"ngIf\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap core-groupname\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", 4, \"ngIf\"], [\"slot\", \"start\", 3, \"modicon\", \"showAlt\", \"modname\", \"componentId\", \"purpose\"], [\"aria-hidden\", \"true\", \"slot\", \"start\", 3, \"name\"], [\"name\", \"fas-trash\", \"aria-hidden\", \"true\"], [\"core-link\", \"\", \"capture\", \"true\", 1, \"ion-text-wrap\", 3, \"href\"], [\"contextLevel\", \"course\", 3, \"text\", \"contextInstanceId\"], [1, \"ion-text-wrap\", \"core-groupname\"], [1, \"ion-text-wrap\"], [\"contextLevel\", \"coursecat\", 3, \"text\", \"contextInstanceId\"], [\"core-link\", \"\", \"auto-login\", \"no\", 3, \"href\"], [\"expand\", \"block\", \"core-link\", \"\", \"capture\", \"true\", 3, \"href\"], [4, \"ngFor\", \"ngForOf\"], [\"class\", \"ion-text-wrap\", 3, \"item-dimmed\", 4, \"ngIf\"], [1, \"item-heading\"], [\"fill\", \"clear\", \"slot\", \"end\", 3, \"click\"], [\"name\", \"fas-trash\", \"color\", \"danger\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"], [\"expand\", \"block\", 3, \"click\"]], template: function AddonCalendarEventPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\", 0);\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 1);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 2);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"nd\" /* ɵɵtemplate */](6, AddonCalendarEventPage_h1_6_Template, 2, 3, \"h1\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](7, \"ion-buttons\", 4);\n                core[\"Ec\" /* ɵɵelementStart */](8, \"core-context-menu\");\n                core[\"Ec\" /* ɵɵelementStart */](9, \"core-context-menu-item\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_9_listener($event) { return ctx.doRefresh(undefined, $event, true); });\n                core[\"Pc\" /* ɵɵpipe */](10, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](11, \"core-context-menu-item\", 6);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_11_listener() { return ctx.openEdit(); });\n                core[\"Pc\" /* ɵɵpipe */](12, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"core-context-menu-item\", 7);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_13_listener() { return ctx.deleteEvent(); });\n                core[\"Pc\" /* ɵɵpipe */](14, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](15, \"core-context-menu-item\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonCalendarEventPage_Template_core_context_menu_item_action_15_listener() { return ctx.undoDelete(); });\n                core[\"Pc\" /* ɵɵpipe */](16, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](17, \"ion-content\", 9);\n                core[\"Ec\" /* ɵɵelementStart */](18, \"ion-refresher\", 10);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonCalendarEventPage_Template_ion_refresher_ionRefresh_18_listener($event) { return ctx.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](19, \"ion-refresher-content\", 11);\n                core[\"Pc\" /* ɵɵpipe */](20, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](21, \"core-loading\", 12);\n                core[\"nd\" /* ɵɵtemplate */](22, AddonCalendarEventPage_ion_card_22_Template, 7, 8, \"ion-card\", 13);\n                core[\"nd\" /* ɵɵtemplate */](23, AddonCalendarEventPage_ion_list_23_Template, 32, 31, \"ion-list\", 3);\n                core[\"nd\" /* ɵɵtemplate */](24, AddonCalendarEventPage_ion_card_24_Template, 8, 5, \"ion-card\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 23, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.event);\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.eventLoaded || !ctx.hasOffline && ctx.event && !ctx.event.deleted || !ctx.isOnline)(\"priority\", 400)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](10, 25, \"core.settings.synchronizenow\"))(\"iconAction\", ctx.syncIcon)(\"closeOnClick\", false);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.event || !ctx.event.canedit || ctx.event.deleted || !ctx.canEdit && ctx.event.id > 0)(\"priority\", 300)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](12, 27, \"core.edit\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.event || !ctx.event.candelete || ctx.event.deleted)(\"priority\", 200)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](14, 29, \"core.delete\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hidden\", !ctx.event || !ctx.event.deleted)(\"priority\", 200)(\"content\", core[\"Qc\" /* ɵɵpipeBind1 */](16, 31, \"core.restore\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"core-swipe-navigation\", ctx.events);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.eventLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](20, 33, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.eventLoaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.hasOffline || ctx.event && ctx.event.deleted);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.event);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.notificationsEnabled && ctx.event);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], collapsible_header[\"b\" /* CoreCollapsibleHeaderDirective */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], common[\"t\" /* NgIf */], context_menu[\"a\" /* CoreContextMenuComponent */], context_menu_item[\"a\" /* CoreContextMenuItemComponent */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], swipe_navigation[\"a\" /* CoreSwipeNavigationDirective */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], format_text[\"a\" /* CoreFormatTextDirective */], ionic_angular[\"n\" /* IonCard */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], ionic_angular[\"O\" /* IonLabel */], ionic_angular[\"P\" /* IonList */], common[\"q\" /* NgClass */], mod_icon[\"a\" /* CoreModIconComponent */], ionic_angular[\"W\" /* IonNote */], directives_link[\"a\" /* CoreLinkDirective */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], common[\"s\" /* NgForOf */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], styles: [\"[_nghost-%COMP%]{--addon-calendar-blank-day-background-color:var(--light)}[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{color:#fff;border-radius:50%;padding:.7rem;--margin-vertical:12px;--margin-end:12px;margin-top:var(--margin-vertical);margin-bottom:var(--margin-vertical);margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .item.addon-calendar-event[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-category[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#8e24aa}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-course[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#ca3120}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-group[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#f0ad4e}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-user[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#0f6cbf}[_nghost-%COMP%]   .item.addon-calendar-event.addon-calendar-eventtype-site[_ngcontent-%COMP%] > ion-icon[_ngcontent-%COMP%]{background-color:#357a32}\", \"[_nghost-%COMP%]   ion-card[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{font-size:1.6rem}\"] });\n    return AddonCalendarEventPage;\n})();\n/**\n * Helper to manage swiping within a collection of events.\n */\nclass event_page_AddonCalendarEventsSwipeItemsManager extends swipe_navigation_items_manager[\"a\" /* CoreSwipeNavigationItemsManager */] {\n    /**\n     * @inheritdoc\n     */\n    getSelectedItemPathFromRoute(route) {\n        return route.params.id;\n    }\n}\n\n// CONCATENATED MODULE: ./src/addons/calendar/pages/event/event.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: event_page_AddonCalendarEventPage,\n    },\n];\nlet event_module_AddonCalendarEventPageModule = /*@__PURE__*/ (() => {\n    class AddonCalendarEventPageModule {\n    }\n    AddonCalendarEventPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonCalendarEventPageModule });\n    AddonCalendarEventPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonCalendarEventPageModule_Factory(t) { return new (t || AddonCalendarEventPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* AddonCalendarComponentsModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return AddonCalendarEventPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](event_module_AddonCalendarEventPageModule, { declarations: [event_page_AddonCalendarEventPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* AddonCalendarComponentsModule */]], exports: [router[\"m\" /* RouterModule */]] });\n})();\n\n\n/***/ }),\n\n/***/ \"eoiU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return CoreSwipeNavigationItemsManager; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"mrSG\");\n/* harmony import */ var _services_navigator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"pHTc\");\n/* harmony import */ var _routed_items_manager__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"CtbY\");\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n/**\n * Helper class to manage the state and routing of a swipeable page.\n */\nclass CoreSwipeNavigationItemsManager extends _routed_items_manager__WEBPACK_IMPORTED_MODULE_2__[/* CoreRoutedItemsManager */ \"a\"] {\n    /**\n     * Process page started operations.\n     */\n    start() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            this.updateSelectedItem();\n        });\n    }\n    /**\n     * Navigate to the next item.\n     */\n    navigateToNextItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            yield this.navigateToItemBy(1, 'forward');\n        });\n    }\n    /**\n     * Navigate to the previous item.\n     */\n    navigateToPreviousItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            yield this.navigateToItemBy(-1, 'back');\n        });\n    }\n    /**\n     * Has a next item.\n     */\n    hasNextItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const item = yield this.getItemBy(1);\n            return !!item;\n        });\n    }\n    /**\n     * Has a previous item.\n     */\n    hasPreviousItem() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const item = yield this.getItemBy(-1);\n            return !!item;\n        });\n    }\n    /**\n     * @inheritdoc\n     */\n    getCurrentPageRoute() {\n        return _services_navigator__WEBPACK_IMPORTED_MODULE_1__[/* CoreNavigator */ \"a\"].getCurrentRoute();\n    }\n    /**\n     * @inheritdoc\n     */\n    getSelectedItemPathFromRoute(route) {\n        const segments = [];\n        while (route) {\n            segments.push(...route.url);\n            if (!route.firstChild) {\n                break;\n            }\n            route = route.firstChild;\n        }\n        return segments.map(segment => segment.path).join('/').replace(/\\/+/, '/').trim() || null;\n    }\n    /**\n     * Navigate to an item by an offset.\n     *\n     * @param delta Index offset.\n     * @param animationDirection Animation direction.\n     */\n    navigateToItemBy(delta, animationDirection) {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const item = yield this.getItemBy(delta);\n            if (!item) {\n                return;\n            }\n            yield this.navigateToItem(item, { animationDirection, replace: true });\n        });\n    }\n    /**\n     * Get item by an offset.\n     *\n     * @param delta Index offset.\n     */\n    getItemBy(delta) {\n        var _a;\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            const items = this.getSource().getItems();\n            const selectedIndex = (_a = (this.selectedItem && (items === null || items === void 0 ? void 0 : items.indexOf(this.selectedItem)))) !== null && _a !== void 0 ? _a : -1;\n            if (selectedIndex === -1 || items === null) {\n                return null;\n            }\n            const deltaStep = delta > 0 ? 1 : -1;\n            let nextIndex = selectedIndex;\n            let deltaMoved = 0;\n            while (deltaMoved !== delta) {\n                nextIndex += deltaStep;\n                if (nextIndex < 0 || nextIndex >= items.length) {\n                    break;\n                }\n                if (this.skipItemInSwipe(items[nextIndex])) {\n                    continue;\n                }\n                deltaMoved += deltaStep;\n            }\n            if (deltaMoved === delta) {\n                return items[nextIndex];\n            }\n            if (!this.getSource().isCompleted()) {\n                yield this.getSource().load();\n                return this.getItemBy(delta);\n            }\n            return null;\n        });\n    }\n    /**\n     * Check if an item should be skipped during swipe navigation.\n     *\n     * @param item Item.\n     * @returns Whether to skip this item during swipe navigation.\n     */\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    skipItemInSwipe(item) {\n        return false;\n    }\n}\n\n\n/***/ })\n\n}]);","inputSourceMap":null}