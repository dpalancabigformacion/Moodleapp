{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{eJtl:function(e,t,o){\"use strict\";o.r(t),o.d(t,\"AddonModFeedbackLazyModule\",(function(){return z}));var n=o(\"tyNb\"),d=o(\"L3Fv\"),a=o(\"1IpS\"),c=o(\"ghUQ\"),i=o(\"pHTc\"),s=o(\"hYz8\"),r=o(\"fXoL\"),l=o(\"TEn/\"),u=o(\"4JiN\"),m=o(\"hMzs\"),p=o(\"nt/U\"),b=o(\"sYmb\");let h=(()=>{class AddonModFeedbackIndexPage extends c.a{ngOnInit(){super.ngOnInit(),this.selectedTab=i.a.getRouteParam(\"tab\"),this.selectedGroup=i.a.getRouteNumberParam(\"group\")}}return AddonModFeedbackIndexPage.ɵfac=function AddonModFeedbackIndexPage_Factory(e){return g(e||AddonModFeedbackIndexPage)},AddonModFeedbackIndexPage.ɵcmp=r.sc({type:AddonModFeedbackIndexPage,selectors:[[\"page-addon-mod-feedback-index\"]],viewQuery:function AddonModFeedbackIndexPage_Query(e,t){var o;(1&e&&r.ud(s.a,!0),2&e)&&(r.dd(o=r.Nc())&&(t.activityComponent=o.first))},features:[r.ic],decls:14,vars:14,consts:[[\"collapsible\",\"\"],[\"slot\",\"start\"],[3,\"text\"],[\"contextLevel\",\"module\",3,\"text\",\"contextInstanceId\",\"courseId\"],[\"slot\",\"end\"],[1,\"limited-width\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"module\",\"courseId\",\"group\",\"tab\",\"dataRetrieved\"]],template:function AddonModFeedbackIndexPage_Template(e,t){1&e&&(r.Ec(0,\"ion-header\",0),r.Ec(1,\"ion-toolbar\"),r.Ec(2,\"ion-buttons\",1),r.zc(3,\"ion-back-button\",2),r.Pc(4,\"translate\"),r.Dc(),r.Ec(5,\"ion-title\"),r.Ec(6,\"h1\"),r.zc(7,\"core-format-text\",3),r.Dc(),r.Dc(),r.zc(8,\"ion-buttons\",4),r.Dc(),r.Dc(),r.Ec(9,\"ion-content\",5),r.Ec(10,\"ion-refresher\",6),r.Mc(\"ionRefresh\",(function AddonModFeedbackIndexPage_Template_ion_refresher_ionRefresh_10_listener(e){return null==t.activityComponent?null:t.activityComponent.doRefresh(e.target)})),r.zc(11,\"ion-refresher-content\",7),r.Pc(12,\"translate\"),r.Dc(),r.Ec(13,\"addon-mod-feedback-index\",8),r.Mc(\"dataRetrieved\",(function AddonModFeedbackIndexPage_Template_addon_mod_feedback_index_dataRetrieved_13_listener(e){return t.updateData(e)})),r.Dc(),r.Dc()),2&e&&(r.lc(3),r.Vc(\"text\",r.Qc(4,10,\"core.back\")),r.lc(4),r.Vc(\"text\",t.title)(\"contextInstanceId\",null==t.module?null:t.module.id)(\"courseId\",t.courseId),r.lc(3),r.Vc(\"disabled\",null==t.activityComponent?null:t.activityComponent.showLoading),r.lc(1),r.Wc(\"pullingText\",r.Qc(12,12,\"core.pulltorefresh\")),r.lc(2),r.Vc(\"module\",t.module)(\"courseId\",t.courseId)(\"group\",t.selectedGroup)(\"tab\",t.selectedTab))},directives:[l.C,u.b,l.Ab,l.m,l.h,l.i,l.yb,m.a,p.a,l.v,l.bb,l.cb,s.a],pipes:[b.d],encapsulation:2}),AddonModFeedbackIndexPage})();const g=r.Gc(h);var _=o(\"mrSG\"),f=o(\"baaQ\"),A=o(\"EoRH\"),M=o(\"FYaz\"),k=o(\"46ml\"),v=o(\"3LXp\"),F=o(\"bFG1\"),P=o(\"jVvP\"),y=o(\"PgjG\"),I=o(\"WPIK\"),D=o(\"ofXK\"),E=o(\"xpMl\"),T=o(\"FeAf\"),x=o(\"uYHD\");function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_p_5_Template(e,t){if(1&e&&(r.Ec(0,\"p\"),r.pd(1),r.Pc(2,\"coreFormatDate\"),r.Dc()),2&e){const e=r.Oc().$implicit;r.lc(1),r.qd(r.Qc(2,1,1e3*e.timemodified))}}function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template(e,t){if(1&e){const e=r.Fc();r.Ec(0,\"ion-item\",10),r.Mc(\"click\",(function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template_ion_item_click_0_listener(){r.fd(e);const o=t.$implicit,n=r.Oc(2);return null==n.attempts?null:n.attempts.select(o)})),r.zc(1,\"core-user-avatar\",11),r.Ec(2,\"ion-label\"),r.Ec(3,\"p\",12),r.pd(4),r.Dc(),r.nd(5,AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_p_5_Template,3,3,\"p\",7),r.Dc(),r.Dc()}if(2&e){const e=t.$implicit,o=r.Oc(2);r.mc(\"aria-current\",null==o.attempts?null:o.attempts.getItemAriaCurrent(e)),r.lc(1),r.Vc(\"user\",e)(\"linkProfile\",!1),r.lc(3),r.qd(e.fullname),r.lc(1),r.Vc(\"ngIf\",e.timemodified)}}const _c0=function(e){return{$a:e}};function AddonModFeedbackAttemptsPage_ng_container_17_Template(e,t){if(1&e&&(r.Cc(0),r.Ec(1,\"ion-item-divider\"),r.Ec(2,\"ion-label\"),r.Ec(3,\"h2\"),r.pd(4),r.Pc(5,\"translate\"),r.Dc(),r.Dc(),r.Dc(),r.nd(6,AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template,6,5,\"ion-item\",9),r.Bc()),2&e){const e=r.Oc();r.lc(4),r.qd(r.Rc(5,2,\"addon.mod_feedback.non_anonymous_entries\",r.ad(5,_c0,e.identifiableAttemptsTotal))),r.lc(2),r.Vc(\"ngForOf\",e.identifiableAttempts)}}function AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template(e,t){if(1&e){const e=r.Fc();r.Ec(0,\"ion-item\",10),r.Mc(\"click\",(function AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template_ion_item_click_0_listener(){r.fd(e);const o=t.$implicit,n=r.Oc(2);return null==n.attempts?null:n.attempts.select(o)})),r.zc(1,\"core-user-avatar\",13),r.Ec(2,\"ion-label\"),r.Ec(3,\"p\",12),r.pd(4),r.Pc(5,\"translate\"),r.Dc(),r.Ec(6,\"p\"),r.pd(7),r.Pc(8,\"translate\"),r.Dc(),r.Dc(),r.Dc()}if(2&e){const e=t.$implicit,o=r.Oc(2);r.mc(\"aria-current\",null==o.attempts?null:o.attempts.getItemAriaCurrent(e)),r.lc(1),r.Vc(\"linkProfile\",!1),r.lc(3),r.qd(r.Qc(5,5,\"addon.mod_feedback.anonymous_user\")),r.lc(3),r.sd(\"\",r.Qc(8,7,\"addon.mod_feedback.response_nr\"),\": \",e.number,\"\")}}function AddonModFeedbackAttemptsPage_ng_container_18_Template(e,t){if(1&e&&(r.Cc(0),r.Ec(1,\"ion-item-divider\"),r.Ec(2,\"ion-label\"),r.Ec(3,\"h2\"),r.pd(4),r.Pc(5,\"translate\"),r.Dc(),r.Dc(),r.Dc(),r.nd(6,AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template,9,9,\"ion-item\",9),r.Bc()),2&e){const e=r.Oc();r.lc(4),r.qd(r.Rc(5,2,\"addon.mod_feedback.anonymous_entries\",r.ad(5,_c0,e.anonymousAttemptsTotal))),r.lc(2),r.Vc(\"ngForOf\",e.anonymousAttempts)}}let C=(()=>{class AddonModFeedbackAttemptsPage{constructor(e){this.route=e,this.fetchFailed=!1,this.promisedAttempts=new M.a}get attempts(){return this.promisedAttempts.value}get groupInfo(){var e;return null===(e=this.attempts)||void 0===e?void 0:e.getSource().groupInfo}get selectedGroup(){var e;return null===(e=this.attempts)||void 0===e?void 0:e.getSource().selectedGroup}set selectedGroup(e){this.attempts&&(this.attempts.getSource().selectedGroup=e,this.attempts.getSource().setDirty(!0))}get identifiableAttempts(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().identifiable)&&void 0!==t?t:[]}get identifiableAttemptsTotal(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().identifiableTotal)&&void 0!==t?t:0}get anonymousAttempts(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().anonymous)&&void 0!==t?t:[]}get anonymousAttemptsTotal(){var e,t;return null!==(t=null===(e=this.attempts)||void 0===e?void 0:e.getSource().anonymousTotal)&&void 0!==t?t:0}ngAfterViewInit(){return Object(_.a)(this,void 0,void 0,(function*(){try{const e=i.a.getRequiredRouteNumberParam(\"cmId\"),t=i.a.getRequiredRouteNumberParam(\"courseId\"),o=f.a.getOrCreateSource(P.a,[t,e]);o.selectedGroup=i.a.getRouteNumberParam(\"group\")||0,this.promisedAttempts.resolve(new attempts_AddonModFeedbackAttemptsManager(o,this.route.component))}catch(e){return v.a.showErrorModal(e),i.a.back(),void 0}const e=yield this.promisedAttempts;try{this.fetchFailed=!1,yield e.getSource().loadFeedback(),yield e.load()}catch(e){this.fetchFailed=!0,v.a.showErrorModalDefault(e,\"core.course.errorgetmodule\",!0)}yield e.start(this.splitView)}))}ngOnDestroy(){var e;null===(e=this.attempts)||void 0===e?void 0:e.destroy()}fetchMoreAttempts(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=yield this.promisedAttempts;try{this.fetchFailed=!1,yield t.load()}catch(e){this.fetchFailed=!0,v.a.showErrorModalDefault(e,\"core.course.errorgetmodule\",!0)}finally{e&&e()}}))}refreshFeedback(e){return Object(_.a)(this,void 0,void 0,(function*(){const t=yield this.promisedAttempts;try{this.fetchFailed=!1,yield F.a.ignoreErrors(t.getSource().invalidateCache()),yield t.getSource().loadFeedback(),yield t.reload()}catch(e){this.fetchFailed=!0,v.a.showErrorModalDefault(e,\"core.course.errorgetmodule\",!0)}finally{e.complete()}}))}reloadAttempts(){return Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.promisedAttempts;yield e.reload()}))}}return AddonModFeedbackAttemptsPage.ɵfac=function AddonModFeedbackAttemptsPage_Factory(e){return new(e||AddonModFeedbackAttemptsPage)(r.yc(n.a))},AddonModFeedbackAttemptsPage.ɵcmp=r.sc({type:AddonModFeedbackAttemptsPage,selectors:[[\"page-addon-mod-feedback-attempts\"]],viewQuery:function AddonModFeedbackAttemptsPage_Query(e,t){var o;(1&e&&r.ud(k.a,!0),2&e)&&(r.dd(o=r.Nc())&&(t.splitView=o.first))},decls:20,vars:17,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[1,\"ion-no-margin\"],[3,\"groupInfo\",\"selected\",\"selectedChange\"],[4,\"ngIf\"],[3,\"enabled\",\"error\",\"action\"],[\"class\",\"ion-text-wrap\",\"button\",\"\",\"detail\",\"true\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"button\",\"\",\"detail\",\"true\",1,\"ion-text-wrap\",3,\"click\"],[\"slot\",\"start\",3,\"user\",\"linkProfile\"],[1,\"item-heading\"],[\"slot\",\"start\",3,\"linkProfile\"]],template:function AddonModFeedbackAttemptsPage_Template(e,t){1&e&&(r.Ec(0,\"ion-header\"),r.Ec(1,\"ion-toolbar\"),r.Ec(2,\"ion-buttons\",0),r.zc(3,\"ion-back-button\",1),r.Pc(4,\"translate\"),r.Dc(),r.Ec(5,\"ion-title\"),r.Ec(6,\"h1\"),r.pd(7),r.Pc(8,\"translate\"),r.Dc(),r.Dc(),r.Dc(),r.Dc(),r.Ec(9,\"ion-content\"),r.Ec(10,\"core-split-view\"),r.Ec(11,\"ion-refresher\",2),r.Mc(\"ionRefresh\",(function AddonModFeedbackAttemptsPage_Template_ion_refresher_ionRefresh_11_listener(e){return t.refreshFeedback(e.target)})),r.zc(12,\"ion-refresher-content\",3),r.Pc(13,\"translate\"),r.Dc(),r.Ec(14,\"core-loading\",4),r.Ec(15,\"ion-list\",5),r.Ec(16,\"core-group-selector\",6),r.Mc(\"selectedChange\",(function AddonModFeedbackAttemptsPage_Template_core_group_selector_selectedChange_16_listener(e){return t.selectedGroup=e}))(\"selectedChange\",(function AddonModFeedbackAttemptsPage_Template_core_group_selector_selectedChange_16_listener(){return t.reloadAttempts()})),r.Dc(),r.nd(17,AddonModFeedbackAttemptsPage_ng_container_17_Template,7,7,\"ng-container\",7),r.nd(18,AddonModFeedbackAttemptsPage_ng_container_18_Template,7,7,\"ng-container\",7),r.Ec(19,\"core-infinite-loading\",8),r.Mc(\"action\",(function AddonModFeedbackAttemptsPage_Template_core_infinite_loading_action_19_listener(e){return t.fetchMoreAttempts(e)})),r.Dc(),r.Dc(),r.Dc(),r.Dc(),r.Dc()),2&e&&(r.lc(3),r.Vc(\"text\",r.Qc(4,11,\"core.back\")),r.lc(4),r.qd(r.Qc(8,13,\"addon.mod_feedback.responses\")),r.lc(4),r.Vc(\"disabled\",!t.attempts||!t.attempts.loaded),r.lc(1),r.Wc(\"pullingText\",r.Qc(13,15,\"core.pulltorefresh\")),r.lc(2),r.Vc(\"hideUntil\",t.attempts&&t.attempts.loaded),r.lc(2),r.Vc(\"groupInfo\",t.groupInfo)(\"selected\",t.selectedGroup),r.lc(1),r.Vc(\"ngIf\",t.identifiableAttemptsTotal>0),r.lc(1),r.Vc(\"ngIf\",t.identifiableAttemptsTotal===t.identifiableAttempts.length&&t.anonymousAttemptsTotal>0),r.lc(1),r.Vc(\"enabled\",t.attempts&&t.attempts.loaded&&!t.attempts.completed)(\"error\",t.fetchFailed))},directives:[l.C,l.Ab,l.m,l.h,l.i,l.yb,p.a,l.v,k.a,l.bb,l.cb,y.a,l.P,I.a,D.t,E.a,l.J,l.O,D.s,l.I,T.a],pipes:[b.d,x.a],encapsulation:2}),AddonModFeedbackAttemptsPage})();class attempts_AddonModFeedbackAttemptsManager extends A.a{}var w=o(\"vY5A\"),R=o(\"Y+03\");const O=[{path:\":courseId/:cmId\",component:h},{path:\":courseId/:cmId/form\",loadChildren:()=>Promise.all([o.e(0),o.e(57)]).then(o.bind(null,\"HFvr\")).then((e=>e.AddonModFeedbackFormPageModule))},{path:\":courseId/:cmId/nonrespondents\",loadChildren:()=>o.e(58).then(o.bind(null,\"B1At\")).then((e=>e.AddonModFeedbackNonRespondentsPageModule))}],G=[...O,{path:\":courseId/:cmId/attempts\",component:C},{path:\":courseId/:cmId/attempts/:attemptId\",loadChildren:()=>o.e(13).then(o.bind(null,\"LXV0\")).then((e=>e.AddonModFeedbackAttemptPageModule))}],V=[...O,{path:\":courseId/:cmId/attempts\",component:C,children:[{path:\":attemptId\",loadChildren:()=>o.e(13).then(o.bind(null,\"LXV0\")).then((e=>e.AddonModFeedbackAttemptPageModule))}]}],S=[...Object(w.c)(G,(()=>R.a.isMobile)),...Object(w.c)(V,(()=>R.a.isTablet))];let z=(()=>{class AddonModFeedbackLazyModule{}return AddonModFeedbackLazyModule.ɵmod=r.wc({type:AddonModFeedbackLazyModule}),AddonModFeedbackLazyModule.ɵinj=r.vc({factory:function AddonModFeedbackLazyModule_Factory(e){return new(e||AddonModFeedbackLazyModule)},imports:[[n.m.forChild(S),d.a,a.a]]}),AddonModFeedbackLazyModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&r.kd(z,{declarations:[h,C],imports:[n.m,d.a,a.a]}))},jVvP:function(e,t,o){\"use strict\";o.d(t,\"a\",(function(){return AddonModFeedbackAttemptsSource}));var n=o(\"mrSG\"),d=o(\"CvRw\"),a=o(\"mWdr\"),c=o(\"MNPK\"),i=o(\"96hm\");class AddonModFeedbackAttemptsSource extends d.a{constructor(e,t){super(),this.COURSE_ID=e,this.CM_ID=t}getItemPath(e){return e.id.toString()}getPagesLoaded(){if(!this.identifiable||!this.anonymous)return 0;const e=this.getPageLength();return Math.ceil(Math.max(this.anonymous.length,this.identifiable.length)/e)}isIdentifiableAttempt(e){return\"fullname\"in e}isAnonymousAttempt(e){return\"number\"in e}invalidateCache(){return Object(n.a)(this,void 0,void 0,(function*(){yield Promise.all([a.a.invalidateActivityGroupInfo(this.CM_ID),this.feedback&&c.a.invalidateResponsesAnalysisData(this.feedback.id)])}))}loadFeedback(){return Object(n.a)(this,void 0,void 0,(function*(){this.feedback=yield c.a.getFeedback(this.COURSE_ID,this.CM_ID),this.groupInfo=yield a.a.getActivityGroupInfo(this.CM_ID),this.selectedGroup=a.a.validateGroupId(this.selectedGroup,this.groupInfo)}))}getPageLength(){return c.b.PER_PAGE}loadPageItems(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!this.feedback)throw new Error(\"Can't load attempts without feeback\");const t=yield i.a.getResponsesAnalysis(this.feedback.id,{page:e,groupId:this.selectedGroup,cmId:this.CM_ID});0===e&&(this.identifiableTotal=t.totalattempts,this.anonymousTotal=t.totalanonattempts);const o=this.getPageLength()*(e+1);return{items:[...0===e||t.totalattempts>c.b.PER_PAGE?t.attempts:[],...0===e||t.totalanonattempts>c.b.PER_PAGE?t.anonattempts:[]],hasMoreItems:t.totalattempts>o||t.totalanonattempts>o}}))}setItems(e,t){this.identifiable=e.filter(this.isIdentifiableAttempt),this.anonymous=e.filter(this.isAnonymousAttempt),super.setItems(this.identifiable.concat(this.anonymous),t)}}}}]);","name":"34.ab4b5dde4ade591c4fe8.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[34],{\n\n/***/ \"eJtl\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonModFeedbackLazyModule\", function() { return /* binding */ feedback_lazy_module_AddonModFeedbackLazyModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./src/addons/mod/feedback/components/components.module.ts\nvar components_module = __webpack_require__(\"1IpS\");\n\n// EXTERNAL MODULE: ./src/core/features/course/classes/main-activity-page.ts\nvar main_activity_page = __webpack_require__(\"ghUQ\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/addons/mod/feedback/components/index/index.ts\nvar index = __webpack_require__(\"hYz8\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-header.ts\nvar collapsible_header = __webpack_require__(\"4JiN\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/addons/mod/feedback/pages/index/index.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Page that displays a feedback.\n */\nlet index_AddonModFeedbackIndexPage = /*@__PURE__*/ (() => {\n    class AddonModFeedbackIndexPage extends main_activity_page[\"a\" /* CoreCourseModuleMainActivityPage */] {\n        /**\n         * Component being initialized.\n         */\n        ngOnInit() {\n            super.ngOnInit();\n            this.selectedTab = services_navigator[\"a\" /* CoreNavigator */].getRouteParam('tab');\n            this.selectedGroup = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('group');\n        }\n    }\n    AddonModFeedbackIndexPage.ɵfac = function AddonModFeedbackIndexPage_Factory(t) { return ɵAddonModFeedbackIndexPage_BaseFactory(t || AddonModFeedbackIndexPage); };\n    AddonModFeedbackIndexPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonModFeedbackIndexPage, selectors: [[\"page-addon-mod-feedback-index\"]], viewQuery: function AddonModFeedbackIndexPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](index[\"a\" /* AddonModFeedbackIndexComponent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.activityComponent = _t.first);\n            }\n        }, features: [core[\"ic\" /* ɵɵInheritDefinitionFeature */]], decls: 14, vars: 14, consts: [[\"collapsible\", \"\"], [\"slot\", \"start\"], [3, \"text\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [\"slot\", \"end\"], [1, \"limited-width\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"module\", \"courseId\", \"group\", \"tab\", \"dataRetrieved\"]], template: function AddonModFeedbackIndexPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\", 0);\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 1);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 2);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"zc\" /* ɵɵelement */](7, \"core-format-text\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"zc\" /* ɵɵelement */](8, \"ion-buttons\", 4);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-content\", 5);\n                core[\"Ec\" /* ɵɵelementStart */](10, \"ion-refresher\", 6);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonModFeedbackIndexPage_Template_ion_refresher_ionRefresh_10_listener($event) { return ctx.activityComponent == null ? null : ctx.activityComponent.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](11, \"ion-refresher-content\", 7);\n                core[\"Pc\" /* ɵɵpipe */](12, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"addon-mod-feedback-index\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"dataRetrieved\", function AddonModFeedbackIndexPage_Template_addon_mod_feedback_index_dataRetrieved_13_listener($event) { return ctx.updateData($event); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 10, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", ctx.title)(\"contextInstanceId\", ctx.module == null ? null : ctx.module.id)(\"courseId\", ctx.courseId);\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", ctx.activityComponent == null ? null : ctx.activityComponent.showLoading);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](12, 12, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"module\", ctx.module)(\"courseId\", ctx.courseId)(\"group\", ctx.selectedGroup)(\"tab\", ctx.selectedTab);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], collapsible_header[\"b\" /* CoreCollapsibleHeaderDirective */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], format_text[\"a\" /* CoreFormatTextDirective */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], index[\"a\" /* AddonModFeedbackIndexComponent */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], encapsulation: 2 });\n    return AddonModFeedbackIndexPage;\n})();\nconst ɵAddonModFeedbackIndexPage_BaseFactory = /*@__PURE__*/ core[\"Gc\" /* ɵɵgetInheritedFactory */](index_AddonModFeedbackIndexPage);\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/routed-items-manager-sources-tracker.ts\nvar routed_items_manager_sources_tracker = __webpack_require__(\"baaQ\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/list-items-manager.ts\nvar list_items_manager = __webpack_require__(\"EoRH\");\n\n// EXTERNAL MODULE: ./src/core/classes/promised-value.ts\nvar promised_value = __webpack_require__(\"FYaz\");\n\n// EXTERNAL MODULE: ./src/core/components/split-view/split-view.ts\nvar split_view = __webpack_require__(\"46ml\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/addons/mod/feedback/classes/feedback-attempts-source.ts\nvar feedback_attempts_source = __webpack_require__(\"jVvP\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/components/group-selector/group-selector.ts\nvar group_selector = __webpack_require__(\"WPIK\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/infinite-loading/infinite-loading.ts\nvar infinite_loading = __webpack_require__(\"xpMl\");\n\n// EXTERNAL MODULE: ./src/core/components/user-avatar/user-avatar.ts\nvar user_avatar = __webpack_require__(\"FeAf\");\n\n// EXTERNAL MODULE: ./src/core/pipes/format-date.ts\nvar format_date = __webpack_require__(\"uYHD\");\n\n// CONCATENATED MODULE: ./src/addons/mod/feedback/pages/attempts/attempts.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_p_5_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"p\");\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Pc\" /* ɵɵpipe */](2, \"coreFormatDate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const attempt_r3 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](2, 1, attempt_r3.timemodified * 1000));\n    }\n}\nfunction AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r7 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 10);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template_ion_item_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r7); const attempt_r3 = ctx.$implicit; const ctx_r6 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r6.attempts == null ? null : ctx_r6.attempts.select(attempt_r3); });\n        core[\"zc\" /* ɵɵelement */](1, \"core-user-avatar\", 11);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"p\", 12);\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](5, AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_p_5_Template, 3, 3, \"p\", 7);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const attempt_r3 = ctx.$implicit;\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"mc\" /* ɵɵattribute */](\"aria-current\", ctx_r2.attempts == null ? null : ctx_r2.attempts.getItemAriaCurrent(attempt_r3));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"user\", attempt_r3)(\"linkProfile\", false);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](attempt_r3.fullname);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", attempt_r3.timemodified);\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction AddonModFeedbackAttemptsPage_ng_container_17_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item-divider\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"h2\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, AddonModFeedbackAttemptsPage_ng_container_17_ion_item_6_Template, 6, 5, \"ion-item\", 9);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 2, \"addon.mod_feedback.non_anonymous_entries\", core[\"ad\" /* ɵɵpureFunction1 */](5, _c0, ctx_r0.identifiableAttemptsTotal)));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r0.identifiableAttempts);\n    }\n}\nfunction AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r11 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 10);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template_ion_item_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r11); const attempt_r9 = ctx.$implicit; const ctx_r10 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r10.attempts == null ? null : ctx_r10.attempts.select(attempt_r9); });\n        core[\"zc\" /* ɵɵelement */](1, \"core-user-avatar\", 13);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"p\", 12);\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](6, \"p\");\n        core[\"pd\" /* ɵɵtext */](7);\n        core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const attempt_r9 = ctx.$implicit;\n        const ctx_r8 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"mc\" /* ɵɵattribute */](\"aria-current\", ctx_r8.attempts == null ? null : ctx_r8.attempts.getItemAriaCurrent(attempt_r9));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"linkProfile\", false);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 5, \"addon.mod_feedback.anonymous_user\"));\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"sd\" /* ɵɵtextInterpolate2 */](\"\", core[\"Qc\" /* ɵɵpipeBind1 */](8, 7, \"addon.mod_feedback.response_nr\"), \": \", attempt_r9.number, \"\");\n    }\n}\nfunction AddonModFeedbackAttemptsPage_ng_container_18_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item-divider\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"h2\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, AddonModFeedbackAttemptsPage_ng_container_18_ion_item_6_Template, 9, 9, \"ion-item\", 9);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r1 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 2, \"addon.mod_feedback.anonymous_entries\", core[\"ad\" /* ɵɵpureFunction1 */](5, _c0, ctx_r1.anonymousAttemptsTotal)));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r1.anonymousAttempts);\n    }\n}\n/**\n * Page that displays feedback attempts.\n */\nlet attempts_AddonModFeedbackAttemptsPage = /*@__PURE__*/ (() => {\n    class AddonModFeedbackAttemptsPage {\n        constructor(route) {\n            this.route = route;\n            this.fetchFailed = false;\n            this.promisedAttempts = new promised_value[\"a\" /* CorePromisedValue */]();\n        }\n        get attempts() {\n            return this.promisedAttempts.value;\n        }\n        get groupInfo() {\n            var _a;\n            return (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.getSource().groupInfo;\n        }\n        get selectedGroup() {\n            var _a;\n            return (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.getSource().selectedGroup;\n        }\n        set selectedGroup(group) {\n            if (!this.attempts) {\n                return;\n            }\n            this.attempts.getSource().selectedGroup = group;\n            this.attempts.getSource().setDirty(true);\n        }\n        get identifiableAttempts() {\n            var _a, _b;\n            return (_b = (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.getSource().identifiable) !== null && _b !== void 0 ? _b : [];\n        }\n        get identifiableAttemptsTotal() {\n            var _a, _b;\n            return (_b = (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.getSource().identifiableTotal) !== null && _b !== void 0 ? _b : 0;\n        }\n        get anonymousAttempts() {\n            var _a, _b;\n            return (_b = (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.getSource().anonymous) !== null && _b !== void 0 ? _b : [];\n        }\n        get anonymousAttemptsTotal() {\n            var _a, _b;\n            return (_b = (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.getSource().anonymousTotal) !== null && _b !== void 0 ? _b : 0;\n        }\n        /**\n         * @inheritdoc\n         */\n        ngAfterViewInit() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const cmId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('cmId');\n                    const courseId = services_navigator[\"a\" /* CoreNavigator */].getRequiredRouteNumberParam('courseId');\n                    const source = routed_items_manager_sources_tracker[\"a\" /* CoreRoutedItemsManagerSourcesTracker */].getOrCreateSource(feedback_attempts_source[\"a\" /* AddonModFeedbackAttemptsSource */], [courseId, cmId]);\n                    source.selectedGroup = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('group') || 0;\n                    this.promisedAttempts.resolve(new attempts_AddonModFeedbackAttemptsManager(source, this.route.component));\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                    services_navigator[\"a\" /* CoreNavigator */].back();\n                    return;\n                }\n                const attempts = yield this.promisedAttempts;\n                try {\n                    this.fetchFailed = false;\n                    yield attempts.getSource().loadFeedback();\n                    yield attempts.load();\n                }\n                catch (error) {\n                    this.fetchFailed = true;\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.course.errorgetmodule', true);\n                }\n                yield attempts.start(this.splitView);\n            });\n        }\n        /**\n         * @inheritdoc\n         */\n        ngOnDestroy() {\n            var _a;\n            (_a = this.attempts) === null || _a === void 0 ? void 0 : _a.destroy();\n        }\n        /**\n         * Fetch more attempts, if any.\n         *\n         * @param infiniteComplete Complete callback for infinite loader.\n         */\n        fetchMoreAttempts(infiniteComplete) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const attempts = yield this.promisedAttempts;\n                try {\n                    this.fetchFailed = false;\n                    yield attempts.load();\n                }\n                catch (error) {\n                    this.fetchFailed = true;\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.course.errorgetmodule', true);\n                }\n                finally {\n                    infiniteComplete && infiniteComplete();\n                }\n            });\n        }\n        /**\n         * Refresh the attempts.\n         *\n         * @param refresher Refresher.\n         */\n        refreshFeedback(refresher) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const attempts = yield this.promisedAttempts;\n                try {\n                    this.fetchFailed = false;\n                    yield utils[\"a\" /* CoreUtils */].ignoreErrors(attempts.getSource().invalidateCache());\n                    yield attempts.getSource().loadFeedback();\n                    yield attempts.reload();\n                }\n                catch (error) {\n                    this.fetchFailed = true;\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.course.errorgetmodule', true);\n                }\n                finally {\n                    refresher.complete();\n                }\n            });\n        }\n        /**\n         * Reload attempts list.\n         */\n        reloadAttempts() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                const attempts = yield this.promisedAttempts;\n                yield attempts.reload();\n            });\n        }\n    }\n    AddonModFeedbackAttemptsPage.ɵfac = function AddonModFeedbackAttemptsPage_Factory(t) { return new (t || AddonModFeedbackAttemptsPage)(core[\"yc\" /* ɵɵdirectiveInject */](router[\"a\" /* ActivatedRoute */])); };\n    AddonModFeedbackAttemptsPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonModFeedbackAttemptsPage, selectors: [[\"page-addon-mod-feedback-attempts\"]], viewQuery: function AddonModFeedbackAttemptsPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](split_view[\"a\" /* CoreSplitViewComponent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.splitView = _t.first);\n            }\n        }, decls: 20, vars: 17, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [1, \"ion-no-margin\"], [3, \"groupInfo\", \"selected\", \"selectedChange\"], [4, \"ngIf\"], [3, \"enabled\", \"error\", \"action\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", \"detail\", \"true\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"button\", \"\", \"detail\", \"true\", 1, \"ion-text-wrap\", 3, \"click\"], [\"slot\", \"start\", 3, \"user\", \"linkProfile\"], [1, \"item-heading\"], [\"slot\", \"start\", 3, \"linkProfile\"]], template: function AddonModFeedbackAttemptsPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"pd\" /* ɵɵtext */](7);\n                core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](10, \"core-split-view\");\n                core[\"Ec\" /* ɵɵelementStart */](11, \"ion-refresher\", 2);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonModFeedbackAttemptsPage_Template_ion_refresher_ionRefresh_11_listener($event) { return ctx.refreshFeedback($event.target); });\n                core[\"zc\" /* ɵɵelement */](12, \"ion-refresher-content\", 3);\n                core[\"Pc\" /* ɵɵpipe */](13, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](14, \"core-loading\", 4);\n                core[\"Ec\" /* ɵɵelementStart */](15, \"ion-list\", 5);\n                core[\"Ec\" /* ɵɵelementStart */](16, \"core-group-selector\", 6);\n                core[\"Mc\" /* ɵɵlistener */](\"selectedChange\", function AddonModFeedbackAttemptsPage_Template_core_group_selector_selectedChange_16_listener($event) { return ctx.selectedGroup = $event; })(\"selectedChange\", function AddonModFeedbackAttemptsPage_Template_core_group_selector_selectedChange_16_listener() { return ctx.reloadAttempts(); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"nd\" /* ɵɵtemplate */](17, AddonModFeedbackAttemptsPage_ng_container_17_Template, 7, 7, \"ng-container\", 7);\n                core[\"nd\" /* ɵɵtemplate */](18, AddonModFeedbackAttemptsPage_ng_container_18_Template, 7, 7, \"ng-container\", 7);\n                core[\"Ec\" /* ɵɵelementStart */](19, \"core-infinite-loading\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonModFeedbackAttemptsPage_Template_core_infinite_loading_action_19_listener($event) { return ctx.fetchMoreAttempts($event); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 11, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](8, 13, \"addon.mod_feedback.responses\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.attempts || !ctx.attempts.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](13, 15, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.attempts && ctx.attempts.loaded);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"groupInfo\", ctx.groupInfo)(\"selected\", ctx.selectedGroup);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.identifiableAttemptsTotal > 0);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.identifiableAttemptsTotal === ctx.identifiableAttempts.length && ctx.anonymousAttemptsTotal > 0);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"enabled\", ctx.attempts && ctx.attempts.loaded && !ctx.attempts.completed)(\"error\", ctx.fetchFailed);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], split_view[\"a\" /* CoreSplitViewComponent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], ionic_angular[\"P\" /* IonList */], group_selector[\"a\" /* CoreGroupSelectorComponent */], common[\"t\" /* NgIf */], infinite_loading[\"a\" /* CoreInfiniteLoadingComponent */], ionic_angular[\"J\" /* IonItemDivider */], ionic_angular[\"O\" /* IonLabel */], common[\"s\" /* NgForOf */], ionic_angular[\"I\" /* IonItem */], user_avatar[\"a\" /* CoreUserAvatarComponent */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */], format_date[\"a\" /* CoreFormatDatePipe */]], encapsulation: 2 });\n    return AddonModFeedbackAttemptsPage;\n})();\n/**\n * Attempts manager.\n */\nclass attempts_AddonModFeedbackAttemptsManager extends list_items_manager[\"a\" /* CoreListItemsManager */] {\n}\n\n// EXTERNAL MODULE: ./src/app/app-routing.module.ts\nvar app_routing_module = __webpack_require__(\"vY5A\");\n\n// EXTERNAL MODULE: ./src/core/services/screen.ts\nvar screen = __webpack_require__(\"Y+03\");\n\n// CONCATENATED MODULE: ./src/addons/mod/feedback/feedback-lazy.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\nconst commonRoutes = [\n    {\n        path: ':courseId/:cmId',\n        component: index_AddonModFeedbackIndexPage,\n    },\n    {\n        path: ':courseId/:cmId/form',\n        loadChildren: () => Promise.all(/* import() */[__webpack_require__.e(0), __webpack_require__.e(57)]).then(__webpack_require__.bind(null, \"HFvr\")).then(m => m.AddonModFeedbackFormPageModule),\n    },\n    {\n        path: ':courseId/:cmId/nonrespondents',\n        loadChildren: () => __webpack_require__.e(/* import() */ 58).then(__webpack_require__.bind(null, \"B1At\"))\n            .then(m => m.AddonModFeedbackNonRespondentsPageModule),\n    },\n];\nconst mobileRoutes = [\n    ...commonRoutes,\n    {\n        path: ':courseId/:cmId/attempts',\n        component: attempts_AddonModFeedbackAttemptsPage,\n    },\n    {\n        path: ':courseId/:cmId/attempts/:attemptId',\n        loadChildren: () => __webpack_require__.e(/* import() */ 13).then(__webpack_require__.bind(null, \"LXV0\")).then(m => m.AddonModFeedbackAttemptPageModule),\n    },\n];\nconst tabletRoutes = [\n    ...commonRoutes,\n    {\n        path: ':courseId/:cmId/attempts',\n        component: attempts_AddonModFeedbackAttemptsPage,\n        children: [\n            {\n                path: ':attemptId',\n                loadChildren: () => __webpack_require__.e(/* import() */ 13).then(__webpack_require__.bind(null, \"LXV0\")).then(m => m.AddonModFeedbackAttemptPageModule),\n            },\n        ],\n    },\n];\nconst routes = [\n    ...Object(app_routing_module[\"c\" /* conditionalRoutes */])(mobileRoutes, () => screen[\"a\" /* CoreScreen */].isMobile),\n    ...Object(app_routing_module[\"c\" /* conditionalRoutes */])(tabletRoutes, () => screen[\"a\" /* CoreScreen */].isTablet),\n];\nlet feedback_lazy_module_AddonModFeedbackLazyModule = /*@__PURE__*/ (() => {\n    class AddonModFeedbackLazyModule {\n    }\n    AddonModFeedbackLazyModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonModFeedbackLazyModule });\n    AddonModFeedbackLazyModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonModFeedbackLazyModule_Factory(t) { return new (t || AddonModFeedbackLazyModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* AddonModFeedbackComponentsModule */],\n            ]] });\n    return AddonModFeedbackLazyModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](feedback_lazy_module_AddonModFeedbackLazyModule, { declarations: [index_AddonModFeedbackIndexPage,\n            attempts_AddonModFeedbackAttemptsPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* AddonModFeedbackComponentsModule */]] });\n})();\n\n\n/***/ }),\n\n/***/ \"jVvP\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"a\", function() { return AddonModFeedbackAttemptsSource; });\n/* harmony import */ var tslib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"mrSG\");\n/* harmony import */ var _classes_items_management_routed_items_manager_source__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"CvRw\");\n/* harmony import */ var _services_groups__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"mWdr\");\n/* harmony import */ var _services_feedback__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"MNPK\");\n/* harmony import */ var _services_feedback_helper__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"96hm\");\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n/**\n * Feedback attempts.\n */\nclass AddonModFeedbackAttemptsSource extends _classes_items_management_routed_items_manager_source__WEBPACK_IMPORTED_MODULE_1__[/* CoreRoutedItemsManagerSource */ \"a\"] {\n    constructor(courseId, cmId) {\n        super();\n        this.COURSE_ID = courseId;\n        this.CM_ID = cmId;\n    }\n    /**\n     * @inheritdoc\n     */\n    getItemPath(attempt) {\n        return attempt.id.toString();\n    }\n    /**\n     * @inheritdoc\n     */\n    getPagesLoaded() {\n        if (!this.identifiable || !this.anonymous) {\n            return 0;\n        }\n        const pageLength = this.getPageLength();\n        return Math.ceil(Math.max(this.anonymous.length, this.identifiable.length) / pageLength);\n    }\n    /**\n     * Type guard to infer AddonModFeedbackWSAttempt objects.\n     *\n     * @param discussion Item to check.\n     * @return Whether the item is an identifieable attempt.\n     */\n    isIdentifiableAttempt(attempt) {\n        return 'fullname' in attempt;\n    }\n    /**\n     * Type guard to infer AddonModFeedbackWSAnonAttempt objects.\n     *\n     * @param discussion Item to check.\n     * @return Whether the item is an anonymous attempt.\n     */\n    isAnonymousAttempt(attempt) {\n        return 'number' in attempt;\n    }\n    /**\n     * Invalidate feedback cache.\n     */\n    invalidateCache() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            yield Promise.all([\n                _services_groups__WEBPACK_IMPORTED_MODULE_2__[/* CoreGroups */ \"a\"].invalidateActivityGroupInfo(this.CM_ID),\n                this.feedback && _services_feedback__WEBPACK_IMPORTED_MODULE_3__[/* AddonModFeedback */ \"a\"].invalidateResponsesAnalysisData(this.feedback.id),\n            ]);\n        });\n    }\n    /**\n     * Load feedback.\n     */\n    loadFeedback() {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            this.feedback = yield _services_feedback__WEBPACK_IMPORTED_MODULE_3__[/* AddonModFeedback */ \"a\"].getFeedback(this.COURSE_ID, this.CM_ID);\n            this.groupInfo = yield _services_groups__WEBPACK_IMPORTED_MODULE_2__[/* CoreGroups */ \"a\"].getActivityGroupInfo(this.CM_ID);\n            this.selectedGroup = _services_groups__WEBPACK_IMPORTED_MODULE_2__[/* CoreGroups */ \"a\"].validateGroupId(this.selectedGroup, this.groupInfo);\n        });\n    }\n    /**\n     * @inheritdoc\n     */\n    getPageLength() {\n        return _services_feedback__WEBPACK_IMPORTED_MODULE_3__[/* AddonModFeedbackProvider */ \"b\"].PER_PAGE;\n    }\n    /**\n     * @inheritdoc\n     */\n    loadPageItems(page) {\n        return Object(tslib__WEBPACK_IMPORTED_MODULE_0__[/* __awaiter */ \"a\"])(this, void 0, void 0, function* () {\n            if (!this.feedback) {\n                throw new Error('Can\\'t load attempts without feeback');\n            }\n            const result = yield _services_feedback_helper__WEBPACK_IMPORTED_MODULE_4__[/* AddonModFeedbackHelper */ \"a\"].getResponsesAnalysis(this.feedback.id, {\n                page,\n                groupId: this.selectedGroup,\n                cmId: this.CM_ID,\n            });\n            if (page === 0) {\n                this.identifiableTotal = result.totalattempts;\n                this.anonymousTotal = result.totalanonattempts;\n            }\n            const totalItemsLoaded = this.getPageLength() * (page + 1);\n            const pageAttempts = [\n                // The page argument is ignored in the webservice when there is only one page,\n                // so we should ignore the responses of pages beyond the first if that's the case.\n                ...(page === 0 || result.totalattempts > _services_feedback__WEBPACK_IMPORTED_MODULE_3__[/* AddonModFeedbackProvider */ \"b\"].PER_PAGE)\n                    ? result.attempts\n                    : [],\n                ...(page === 0 || result.totalanonattempts > _services_feedback__WEBPACK_IMPORTED_MODULE_3__[/* AddonModFeedbackProvider */ \"b\"].PER_PAGE)\n                    ? result.anonattempts\n                    : [],\n            ];\n            return {\n                items: pageAttempts,\n                hasMoreItems: result.totalattempts > totalItemsLoaded || result.totalanonattempts > totalItemsLoaded,\n            };\n        });\n    }\n    /**\n     * @inheritdoc\n     */\n    setItems(attempts, hasMoreItems) {\n        this.identifiable = attempts.filter(this.isIdentifiableAttempt);\n        this.anonymous = attempts.filter(this.isAnonymousAttempt);\n        super.setItems(this.identifiable.concat(this.anonymous), hasMoreItems);\n    }\n}\n\n\n/***/ })\n\n}]);","inputSourceMap":null}