{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{Pgjy:function(e,t,i){\"use strict\";i.r(t),i.d(t,\"CoreLoginSitesPageModule\",(function(){return y}));var o=i(\"tyNb\"),n=i(\"L3Fv\"),c=i(\"mrSG\"),a=i(\"3LXp\"),r=i(\"9+EE\"),l=i(\"mv9v\"),s=i(\"pHTc\"),d=i(\"tS8V\"),_=i(\"MUy3\"),g=i(\"fXoL\"),u=i(\"TEn/\"),m=i(\"ofXK\"),f=i(\"ACYt\"),p=i(\"3CSS\"),b=i(\"nt/U\"),h=i(\"PgjG\"),P=i(\"yNDK\"),S=i(\"hMzs\"),L=i(\"iSJP\"),D=i(\"NcPy\"),C=i(\"sYmb\");function CoreLoginSitesPage_ion_button_10_Template(e,t){if(1&e){const e=g.Fc();g.Ec(0,\"ion-button\",13),g.Mc(\"click\",(function CoreLoginSitesPage_ion_button_10_Template_ion_button_click_0_listener(){g.fd(e);return g.Oc().toggleDelete()})),g.Pc(1,\"translate\"),g.zc(2,\"ion-icon\",14),g.Dc()}2&e&&g.mc(\"aria-label\",g.Qc(1,1,\"core.login.toggleremove\"))}function CoreLoginSitesPage_ion_card_17_ion_item_divider_1_Template(e,t){if(1&e&&(g.Ec(0,\"ion-item-divider\",17),g.Ec(1,\"ion-label\"),g.Ec(2,\"h2\"),g.zc(3,\"core-format-text\",18),g.Dc(),g.Ec(4,\"p\"),g.Ec(5,\"a\",19),g.pd(6),g.Dc(),g.Dc(),g.Dc(),g.Dc()),2&e){const e=g.Oc().$implicit;g.lc(3),g.Vc(\"text\",e[0].siteName)(\"siteId\",e[0].id),g.lc(2),g.Vc(\"href\",e[0].siteUrl,g.id),g.lc(1),g.qd(e[0].siteUrlWithoutProtocol)}}const _c0=function(e){return{count:e}};function CoreLoginSitesPage_ion_card_17_ion_item_2_ion_badge_7_Template(e,t){if(1&e&&(g.Ec(0,\"ion-badge\",2),g.Ec(1,\"span\",25),g.pd(2),g.Dc(),g.Ec(3,\"span\",12),g.pd(4),g.Pc(5,\"translate\"),g.Dc(),g.Dc()),2&e){const e=g.Oc().$implicit;g.Vc(\"@coreShowHideAnimation\",void 0),g.lc(2),g.qd(e.badge),g.lc(2),g.qd(g.Rc(5,3,\"core.login.sitebadgedescription\",g.ad(6,_c0,e.badge)))}}function CoreLoginSitesPage_ion_card_17_ion_item_2_ion_button_8_Template(e,t){if(1&e){const e=g.Fc();g.Ec(0,\"ion-button\",26),g.Mc(\"click\",(function CoreLoginSitesPage_ion_card_17_ion_item_2_ion_button_8_Template_ion_button_click_0_listener(t){g.fd(e);const i=g.Oc().$implicit;return g.Oc(2).deleteSite(t,i)})),g.Pc(1,\"translate\"),g.zc(2,\"ion-icon\",27),g.Dc()}2&e&&(g.Vc(\"@coreSlideInOut\",\"fromRight\"),g.mc(\"aria-label\",g.Qc(1,2,\"core.login.removeaccount\")))}const _c1=function(e){return{$a:e}};function CoreLoginSitesPage_ion_card_17_ion_item_2_Template(e,t){if(1&e){const e=g.Fc();g.Ec(0,\"ion-item\",20),g.Mc(\"click\",(function CoreLoginSitesPage_ion_card_17_ion_item_2_Template_ion_item_click_0_listener(i){g.fd(e);const o=t.$implicit;return g.Oc(2).login(i,o.id)})),g.Ec(1,\"ion-avatar\",0),g.zc(2,\"img\",21),g.Pc(3,\"translate\"),g.Dc(),g.Ec(4,\"ion-label\"),g.Ec(5,\"p\",22),g.pd(6),g.Dc(),g.Dc(),g.nd(7,CoreLoginSitesPage_ion_card_17_ion_item_2_ion_badge_7_Template,6,8,\"ion-badge\",23),g.nd(8,CoreLoginSitesPage_ion_card_17_ion_item_2_ion_button_8_Template,3,4,\"ion-button\",24),g.Dc()}if(2&e){const e=t.$implicit,i=g.Oc(2);g.lc(2),g.Wc(\"alt\",g.Rc(3,6,\"core.pictureof\",g.ad(9,_c1,e.fullName))),g.Vc(\"src\",e.avatar,g.id)(\"siteId\",e.id),g.lc(4),g.qd(e.fullName),g.lc(1),g.Vc(\"ngIf\",!i.showDelete&&e.badge),g.lc(1),g.Vc(\"ngIf\",i.showDelete)}}function CoreLoginSitesPage_ion_card_17_Template(e,t){if(1&e&&(g.Ec(0,\"ion-card\"),g.nd(1,CoreLoginSitesPage_ion_card_17_ion_item_divider_1_Template,7,4,\"ion-item-divider\",15),g.nd(2,CoreLoginSitesPage_ion_card_17_ion_item_2_Template,9,11,\"ion-item\",16),g.Dc()),2&e){const e=t.$implicit;g.lc(1),g.Vc(\"ngIf\",e[0]),g.lc(1),g.Vc(\"ngForOf\",e)}}let E=(()=>{class CoreLoginSitesPage{constructor(){this.accountsList={sameSite:[],otherSites:[],count:0},this.showDelete=!1,this.loaded=!1}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){s.a.getRouteBooleanParam(\"openAddSite\")&&this.add(),this.accountsList=yield l.a.getAccountsList(),this.loaded=!0,0==this.accountsList.count&&this.add()}))}add(){l.a.goToAddSite(!1,!0)}deleteSite(e,t){return Object(c.a)(this,void 0,void 0,(function*(){e.stopPropagation();let i=t.siteName||\"\";i=yield d.a.formatText(i,{clean:!0,singleLine:!0,filter:!1},[],t.id);try{yield a.a.showDeleteConfirm(\"core.login.confirmdeletesite\",{sitename:i})}catch(e){return}try{yield l.a.deleteAccountFromList(this.accountsList,t),this.showDelete=!1,0==this.accountsList.count&&l.a.goToAddSite(!0,!0)}catch(e){a.a.showErrorModalDefault(e,\"core.login.errordeletesite\",!0)}}))}login(e,t){return Object(c.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation();const i=yield a.a.showModalLoading();try{if(yield r.b.loadSite(t))return yield s.a.navigateToSiteHome(),void 0}catch(e){a.a.showErrorModalDefault(e,\"Error loading site.\")}finally{i.dismiss()}}))}toggleDelete(){this.showDelete=!this.showDelete}openSettings(){s.a.navigate(\"/settings\")}}return CoreLoginSitesPage.ɵfac=function CoreLoginSitesPage_Factory(e){return new(e||CoreLoginSitesPage)},CoreLoginSitesPage.ɵcmp=g.sc({type:CoreLoginSitesPage,selectors:[[\"page-core-login-sites\"]],decls:25,vars:18,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"slot\",\"end\"],[\"fill\",\"clear\",3,\"click\",4,\"ngIf\"],[3,\"click\"],[\"slot\",\"icon-only\",\"name\",\"fas-cog\",\"aria-hidden\",\"true\"],[1,\"limited-width\"],[3,\"hideUntil\"],[1,\"core-sitelist\"],[4,\"ngFor\",\"ngForOf\"],[\"slot\",\"fixed\",\"core-fab\",\"\",\"vertical\",\"bottom\",\"horizontal\",\"end\"],[\"name\",\"fas-plus\",\"aria-hidden\",\"true\"],[1,\"sr-only\"],[\"fill\",\"clear\",3,\"click\"],[\"slot\",\"icon-only\",\"name\",\"fas-pen\",\"aria-hidden\",\"true\"],[\"sticky\",\"true\",\"class\",\"core-sitelist-sitename\",4,\"ngIf\"],[\"button\",\"\",\"detail\",\"true\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"sticky\",\"true\",1,\"core-sitelist-sitename\"],[\"clean\",\"true\",3,\"text\",\"siteId\"],[\"core-link\",\"\",\"autoLogin\",\"no\",3,\"href\"],[\"button\",\"\",\"detail\",\"true\",3,\"click\"],[\"core-external-content\",\"\",\"onError\",\"this.src='assets/img/user-avatar.png'\",3,\"src\",\"siteId\",\"alt\"],[1,\"item-heading\"],[\"slot\",\"end\",4,\"ngIf\"],[\"slot\",\"end\",\"fill\",\"clear\",\"color\",\"danger\",3,\"click\",4,\"ngIf\"],[\"aria-hidden\",\"true\"],[\"slot\",\"end\",\"fill\",\"clear\",\"color\",\"danger\",3,\"click\"],[\"name\",\"fas-trash\",\"slot\",\"icon-only\",\"aria-hidden\",\"true\"]],template:function CoreLoginSitesPage_Template(e,t){1&e&&(g.Ec(0,\"ion-header\"),g.Ec(1,\"ion-toolbar\"),g.Ec(2,\"ion-buttons\",0),g.zc(3,\"ion-back-button\",1),g.Pc(4,\"translate\"),g.Dc(),g.Ec(5,\"ion-title\"),g.Ec(6,\"h1\"),g.pd(7),g.Pc(8,\"translate\"),g.Dc(),g.Dc(),g.Ec(9,\"ion-buttons\",2),g.nd(10,CoreLoginSitesPage_ion_button_10_Template,3,3,\"ion-button\",3),g.Ec(11,\"ion-button\",4),g.Mc(\"click\",(function CoreLoginSitesPage_Template_ion_button_click_11_listener(){return t.openSettings()})),g.Pc(12,\"translate\"),g.zc(13,\"ion-icon\",5),g.Dc(),g.Dc(),g.Dc(),g.Dc(),g.Ec(14,\"ion-content\",6),g.Ec(15,\"core-loading\",7),g.Ec(16,\"ion-list\",8),g.nd(17,CoreLoginSitesPage_ion_card_17_Template,3,2,\"ion-card\",9),g.Dc(),g.Dc(),g.Ec(18,\"ion-fab\",10),g.Ec(19,\"ion-fab-button\",4),g.Mc(\"click\",(function CoreLoginSitesPage_Template_ion_fab_button_click_19_listener(){return t.add()})),g.Pc(20,\"translate\"),g.zc(21,\"ion-icon\",11),g.Ec(22,\"span\",12),g.pd(23),g.Pc(24,\"translate\"),g.Dc(),g.Dc(),g.Dc(),g.Dc()),2&e&&(g.lc(3),g.Vc(\"text\",g.Qc(4,8,\"core.back\")),g.lc(4),g.qd(g.Qc(8,10,\"core.login.accounts\")),g.lc(3),g.Vc(\"ngIf\",t.accountsList.count>0),g.lc(1),g.mc(\"aria-label\",g.Qc(12,12,\"core.settings.appsettings\")),g.lc(4),g.Vc(\"hideUntil\",t.loaded),g.lc(2),g.Vc(\"ngForOf\",t.accountsList.otherSites),g.lc(2),g.mc(\"aria-label\",g.Qc(20,14,\"core.login.add\")),g.lc(4),g.qd(g.Qc(24,16,\"core.login.add\")))},directives:[u.C,u.Ab,u.m,u.h,u.i,u.yb,m.t,f.a,u.l,u.D,p.a,b.a,u.v,h.a,u.P,m.s,u.x,P.a,u.y,u.n,u.J,u.O,S.a,L.a,u.I,u.g,D.a,u.k],pipes:[C.d],styles:[\"ion-list.core-sitelist[_ngcontent-%COMP%]   .core-sitelist-sitename[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke)}ion-list.core-sitelist[_ngcontent-%COMP%]   .core-sitelist-sitename[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}\"],data:{animation:[_.a.SLIDE_IN_OUT,_.a.SHOW_HIDE]}}),CoreLoginSitesPage})();const v=[{path:\"\",component:E}];let y=(()=>{class CoreLoginSitesPageModule{}return CoreLoginSitesPageModule.ɵmod=g.wc({type:CoreLoginSitesPageModule}),CoreLoginSitesPageModule.ɵinj=g.vc({factory:function CoreLoginSitesPageModule_Factory(e){return new(e||CoreLoginSitesPageModule)},imports:[[o.m.forChild(v),n.a],o.m]}),CoreLoginSitesPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&g.kd(y,{declarations:[E],imports:[o.m,n.a],exports:[o.m]}))}}]);","name":"108.29c2ba7177cd8ac4a849.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[108],{\n\n/***/ \"Pgjy\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"CoreLoginSitesPageModule\", function() { return /* binding */ sites_module_CoreLoginSitesPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/features/login/services/login-helper.ts\nvar login_helper = __webpack_require__(\"mv9v\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/features/filter/services/filter.ts\nvar filter = __webpack_require__(\"tS8V\");\n\n// EXTERNAL MODULE: ./src/core/components/animations.ts\nvar animations = __webpack_require__(\"MUy3\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./src/core/directives/fab.ts\nvar fab = __webpack_require__(\"yNDK\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/link.ts\nvar directives_link = __webpack_require__(\"iSJP\");\n\n// EXTERNAL MODULE: ./src/core/directives/external-content.ts\nvar external_content = __webpack_require__(\"NcPy\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/core/features/login/pages/sites/sites.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction CoreLoginSitesPage_ion_button_10_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r3 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 13);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreLoginSitesPage_ion_button_10_Template_ion_button_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r3); const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r2.toggleDelete(); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 14);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"core.login.toggleremove\"));\n    }\n}\nfunction CoreLoginSitesPage_ion_card_17_ion_item_divider_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item-divider\", 17);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"h2\");\n        core[\"zc\" /* ɵɵelement */](3, \"core-format-text\", 18);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](4, \"p\");\n        core[\"Ec\" /* ɵɵelementStart */](5, \"a\", 19);\n        core[\"pd\" /* ɵɵtext */](6);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const sites_r4 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", sites_r4[0].siteName)(\"siteId\", sites_r4[0].id);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"href\", sites_r4[0].siteUrl, core[\"id\" /* ɵɵsanitizeUrl */]);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"qd\" /* ɵɵtextInterpolate */](sites_r4[0].siteUrlWithoutProtocol);\n    }\n}\nconst _c0 = function (a0) { return { count: a0 }; };\nfunction CoreLoginSitesPage_ion_card_17_ion_item_2_ion_badge_7_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-badge\", 2);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"span\", 25);\n        core[\"pd\" /* ɵɵtext */](2);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](3, \"span\", 12);\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const site_r8 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"Vc\" /* ɵɵproperty */](\"@coreShowHideAnimation\", undefined);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"qd\" /* ɵɵtextInterpolate */](site_r8.badge);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 3, \"core.login.sitebadgedescription\", core[\"ad\" /* ɵɵpureFunction1 */](6, _c0, site_r8.badge)));\n    }\n}\nfunction CoreLoginSitesPage_ion_card_17_ion_item_2_ion_button_8_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r13 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-button\", 26);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreLoginSitesPage_ion_card_17_ion_item_2_ion_button_8_Template_ion_button_click_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r13); const site_r8 = core[\"Oc\" /* ɵɵnextContext */]().$implicit; const ctx_r12 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r12.deleteSite($event, site_r8); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"zc\" /* ɵɵelement */](2, \"ion-icon\", 27);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"@coreSlideInOut\", \"fromRight\");\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 2, \"core.login.removeaccount\"));\n    }\n}\nconst _c1 = function (a0) { return { $a: a0 }; };\nfunction CoreLoginSitesPage_ion_card_17_ion_item_2_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r16 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 20);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreLoginSitesPage_ion_card_17_ion_item_2_Template_ion_item_click_0_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r16); const site_r8 = ctx.$implicit; const ctx_r15 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r15.login($event, site_r8.id); });\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-avatar\", 0);\n        core[\"zc\" /* ɵɵelement */](2, \"img\", 21);\n        core[\"Pc\" /* ɵɵpipe */](3, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](4, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\", 22);\n        core[\"pd\" /* ɵɵtext */](6);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](7, CoreLoginSitesPage_ion_card_17_ion_item_2_ion_badge_7_Template, 6, 8, \"ion-badge\", 23);\n        core[\"nd\" /* ɵɵtemplate */](8, CoreLoginSitesPage_ion_card_17_ion_item_2_ion_button_8_Template, 3, 4, \"ion-button\", 24);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const site_r8 = ctx.$implicit;\n        const ctx_r6 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Wc\" /* ɵɵpropertyInterpolate */](\"alt\", core[\"Rc\" /* ɵɵpipeBind2 */](3, 6, \"core.pictureof\", core[\"ad\" /* ɵɵpureFunction1 */](9, _c1, site_r8.fullName)));\n        core[\"Vc\" /* ɵɵproperty */](\"src\", site_r8.avatar, core[\"id\" /* ɵɵsanitizeUrl */])(\"siteId\", site_r8.id);\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](site_r8.fullName);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !ctx_r6.showDelete && site_r8.badge);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r6.showDelete);\n    }\n}\nfunction CoreLoginSitesPage_ion_card_17_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-card\");\n        core[\"nd\" /* ɵɵtemplate */](1, CoreLoginSitesPage_ion_card_17_ion_item_divider_1_Template, 7, 4, \"ion-item-divider\", 15);\n        core[\"nd\" /* ɵɵtemplate */](2, CoreLoginSitesPage_ion_card_17_ion_item_2_Template, 9, 11, \"ion-item\", 16);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const sites_r4 = ctx.$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", sites_r4[0]);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", sites_r4);\n    }\n}\n/**\n * Page that displays a \"splash screen\" while the app is being initialized.\n */\nlet sites_CoreLoginSitesPage = /*@__PURE__*/ (() => {\n    class CoreLoginSitesPage {\n        constructor() {\n            this.accountsList = {\n                sameSite: [],\n                otherSites: [],\n                count: 0,\n            };\n            this.showDelete = false;\n            this.loaded = false;\n        }\n        /**\n         * @inheritdoc\n         */\n        ngOnInit() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (services_navigator[\"a\" /* CoreNavigator */].getRouteBooleanParam('openAddSite')) {\n                    this.add();\n                }\n                this.accountsList = yield login_helper[\"a\" /* CoreLoginHelper */].getAccountsList();\n                this.loaded = true;\n                if (this.accountsList.count == 0) {\n                    this.add();\n                }\n            });\n        }\n        /**\n         * Go to the page to add a site.\n         */\n        add() {\n            login_helper[\"a\" /* CoreLoginHelper */].goToAddSite(false, true);\n        }\n        /**\n         * Delete a site.\n         *\n         * @param event Click event.\n         * @param site Site to delete.\n         * @return Promise resolved when done.\n         */\n        deleteSite(event, site) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                event.stopPropagation();\n                let siteName = site.siteName || '';\n                siteName = yield filter[\"a\" /* CoreFilter */].formatText(siteName, { clean: true, singleLine: true, filter: false }, [], site.id);\n                try {\n                    yield dom[\"a\" /* CoreDomUtils */].showDeleteConfirm('core.login.confirmdeletesite', { sitename: siteName });\n                }\n                catch (error) {\n                    // User cancelled, stop.\n                    return;\n                }\n                try {\n                    yield login_helper[\"a\" /* CoreLoginHelper */].deleteAccountFromList(this.accountsList, site);\n                    this.showDelete = false;\n                    // If there are no sites left, go to add site.\n                    if (this.accountsList.count == 0) {\n                        login_helper[\"a\" /* CoreLoginHelper */].goToAddSite(true, true);\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'core.login.errordeletesite', true);\n                }\n            });\n        }\n        /**\n         * Login in a site.\n         *\n         * @param event Click event.\n         * @param siteId The site ID.\n         * @return Promise resolved when done.\n         */\n        login(event, siteId) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                event.preventDefault();\n                event.stopPropagation();\n                const modal = yield dom[\"a\" /* CoreDomUtils */].showModalLoading();\n                try {\n                    const loggedIn = yield sites[\"b\" /* CoreSites */].loadSite(siteId);\n                    if (loggedIn) {\n                        yield services_navigator[\"a\" /* CoreNavigator */].navigateToSiteHome();\n                        return;\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error loading site.');\n                }\n                finally {\n                    modal.dismiss();\n                }\n            });\n        }\n        /**\n         * Toggle delete.\n         */\n        toggleDelete() {\n            this.showDelete = !this.showDelete;\n        }\n        /**\n         * Open settings page.\n         */\n        openSettings() {\n            services_navigator[\"a\" /* CoreNavigator */].navigate('/settings');\n        }\n    }\n    CoreLoginSitesPage.ɵfac = function CoreLoginSitesPage_Factory(t) { return new (t || CoreLoginSitesPage)(); };\n    CoreLoginSitesPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: CoreLoginSitesPage, selectors: [[\"page-core-login-sites\"]], decls: 25, vars: 18, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"fill\", \"clear\", 3, \"click\", 4, \"ngIf\"], [3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"fas-cog\", \"aria-hidden\", \"true\"], [1, \"limited-width\"], [3, \"hideUntil\"], [1, \"core-sitelist\"], [4, \"ngFor\", \"ngForOf\"], [\"slot\", \"fixed\", \"core-fab\", \"\", \"vertical\", \"bottom\", \"horizontal\", \"end\"], [\"name\", \"fas-plus\", \"aria-hidden\", \"true\"], [1, \"sr-only\"], [\"fill\", \"clear\", 3, \"click\"], [\"slot\", \"icon-only\", \"name\", \"fas-pen\", \"aria-hidden\", \"true\"], [\"sticky\", \"true\", \"class\", \"core-sitelist-sitename\", 4, \"ngIf\"], [\"button\", \"\", \"detail\", \"true\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"sticky\", \"true\", 1, \"core-sitelist-sitename\"], [\"clean\", \"true\", 3, \"text\", \"siteId\"], [\"core-link\", \"\", \"autoLogin\", \"no\", 3, \"href\"], [\"button\", \"\", \"detail\", \"true\", 3, \"click\"], [\"core-external-content\", \"\", \"onError\", \"this.src='assets/img/user-avatar.png'\", 3, \"src\", \"siteId\", \"alt\"], [1, \"item-heading\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\", 4, \"ngIf\"], [\"aria-hidden\", \"true\"], [\"slot\", \"end\", \"fill\", \"clear\", \"color\", \"danger\", 3, \"click\"], [\"name\", \"fas-trash\", \"slot\", \"icon-only\", \"aria-hidden\", \"true\"]], template: function CoreLoginSitesPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"pd\" /* ɵɵtext */](7);\n                core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-buttons\", 2);\n                core[\"nd\" /* ɵɵtemplate */](10, CoreLoginSitesPage_ion_button_10_Template, 3, 3, \"ion-button\", 3);\n                core[\"Ec\" /* ɵɵelementStart */](11, \"ion-button\", 4);\n                core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreLoginSitesPage_Template_ion_button_click_11_listener() { return ctx.openSettings(); });\n                core[\"Pc\" /* ɵɵpipe */](12, \"translate\");\n                core[\"zc\" /* ɵɵelement */](13, \"ion-icon\", 5);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](14, \"ion-content\", 6);\n                core[\"Ec\" /* ɵɵelementStart */](15, \"core-loading\", 7);\n                core[\"Ec\" /* ɵɵelementStart */](16, \"ion-list\", 8);\n                core[\"nd\" /* ɵɵtemplate */](17, CoreLoginSitesPage_ion_card_17_Template, 3, 2, \"ion-card\", 9);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](18, \"ion-fab\", 10);\n                core[\"Ec\" /* ɵɵelementStart */](19, \"ion-fab-button\", 4);\n                core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreLoginSitesPage_Template_ion_fab_button_click_19_listener() { return ctx.add(); });\n                core[\"Pc\" /* ɵɵpipe */](20, \"translate\");\n                core[\"zc\" /* ɵɵelement */](21, \"ion-icon\", 11);\n                core[\"Ec\" /* ɵɵelementStart */](22, \"span\", 12);\n                core[\"pd\" /* ɵɵtext */](23);\n                core[\"Pc\" /* ɵɵpipe */](24, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 8, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](8, 10, \"core.login.accounts\"));\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.accountsList.count > 0);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](12, 12, \"core.settings.appsettings\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx.accountsList.otherSites);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](20, 14, \"core.login.add\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](24, 16, \"core.login.add\"));\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], common[\"t\" /* NgIf */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], loading[\"a\" /* CoreLoadingComponent */], ionic_angular[\"P\" /* IonList */], common[\"s\" /* NgForOf */], ionic_angular[\"x\" /* IonFab */], fab[\"a\" /* CoreFabDirective */], ionic_angular[\"y\" /* IonFabButton */], ionic_angular[\"n\" /* IonCard */], ionic_angular[\"J\" /* IonItemDivider */], ionic_angular[\"O\" /* IonLabel */], format_text[\"a\" /* CoreFormatTextDirective */], directives_link[\"a\" /* CoreLinkDirective */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"g\" /* IonAvatar */], external_content[\"a\" /* CoreExternalContentDirective */], ionic_angular[\"k\" /* IonBadge */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], styles: [\"ion-list.core-sitelist[_ngcontent-%COMP%]   .core-sitelist-sitename[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke)}ion-list.core-sitelist[_ngcontent-%COMP%]   .core-sitelist-sitename[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}\"], data: { animation: [animations[\"a\" /* CoreAnimations */].SLIDE_IN_OUT, animations[\"a\" /* CoreAnimations */].SHOW_HIDE] } });\n    return CoreLoginSitesPage;\n})();\n\n// CONCATENATED MODULE: ./src/core/features/login/pages/sites/sites.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: sites_CoreLoginSitesPage,\n    },\n];\nlet sites_module_CoreLoginSitesPageModule = /*@__PURE__*/ (() => {\n    class CoreLoginSitesPageModule {\n    }\n    CoreLoginSitesPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: CoreLoginSitesPageModule });\n    CoreLoginSitesPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function CoreLoginSitesPageModule_Factory(t) { return new (t || CoreLoginSitesPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return CoreLoginSitesPageModule;\n})();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](sites_module_CoreLoginSitesPageModule, { declarations: [sites_CoreLoginSitesPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */]], exports: [router[\"m\" /* RouterModule */]] }); })();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}