(window.webpackJsonp=window.webpackJsonp||[]).push([[13],{LXV0:function(e,t,n){"use strict";n.r(t),n.d(t,"AddonModFeedbackAttemptPageModule",(function(){return w}));var o=n("L3Fv"),c=n("tyNb"),i=n("mrSG"),a=n("baaQ"),d=n("eoiU"),r=n("pHTc"),_=n("3LXp"),s=n("vuGA"),m=n("jVvP"),l=n("MNPK"),p=n("96hm"),u=n("fXoL"),g=n("TEn/"),f=n("ofXK"),A=n("nt/U"),b=n("OZH1"),h=n("PgjG"),I=n("nu3w"),k=n("FeAf"),P=n("nEkO"),M=n("FasJ"),F=n("hMzs"),v=n("sYmb"),y=n("uYHD");function AddonModFeedbackAttemptPage_h1_6_Template(e,t){if(1&e&&(u.Ec(0,"h1"),u.pd(1),u.Dc()),2&e){const e=u.Oc();u.lc(1),u.qd(e.attempt.fullname)}}function AddonModFeedbackAttemptPage_h1_7_Template(e,t){1&e&&(u.Ec(0,"h1"),u.pd(1),u.Pc(2,"translate"),u.Dc()),2&e&&(u.lc(1),u.qd(u.Qc(2,1,"addon.mod_feedback.anonymous_user")))}function AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_p_6_Template(e,t){if(1&e&&(u.Ec(0,"p"),u.pd(1),u.Pc(2,"coreFormatDate"),u.Dc()),2&e){const e=u.Oc(3);u.lc(1),u.qd(u.Qc(2,1,1e3*e.attempt.timemodified))}}function AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_Template(e,t){if(1&e&&(u.Ec(0,"ion-item",9),u.Pc(1,"translate"),u.zc(2,"core-user-avatar",10),u.Ec(3,"ion-label"),u.Ec(4,"h2"),u.pd(5),u.Dc(),u.nd(6,AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_p_6_Template,3,3,"p",2),u.Dc(),u.Dc()),2&e){const e=u.Oc(2);u.Vc("userId",e.attempt.userid)("courseId",e.attempt.courseid),u.mc("aria-label",u.Qc(1,7,"core.user.viewprofile")),u.lc(2),u.Vc("user",e.attempt)("linkProfile",!1),u.lc(3),u.qd(e.attempt.fullname),u.lc(1),u.Vc("ngIf",e.attempt.timemodified)}}function AddonModFeedbackAttemptPage_ion_list_10_ion_item_2_Template(e,t){if(1&e&&(u.Ec(0,"ion-item",11),u.zc(1,"core-user-avatar",12),u.Ec(2,"ion-label"),u.Ec(3,"h2"),u.pd(4),u.Pc(5,"translate"),u.Dc(),u.Ec(6,"p"),u.pd(7),u.Pc(8,"translate"),u.Dc(),u.Dc(),u.Dc()),2&e){const e=u.Oc(2);u.lc(1),u.Vc("linkProfile",!1),u.lc(3),u.qd(u.Qc(5,4,"addon.mod_feedback.anonymous_user")),u.lc(3),u.sd("",u.Qc(8,6,"addon.mod_feedback.response_nr"),": ",e.anonAttempt.number,"")}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_core_spacer_1_Template(e,t){1&e&&u.zc(0,"core-spacer")}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_h2_2_span_1_Template(e,t){if(1&e&&(u.Ec(0,"span"),u.pd(1),u.Dc()),2&e){const e=u.Oc(3).$implicit;u.lc(1),u.rd("",e.itemnumber,". ")}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_h2_2_Template(e,t){if(1&e&&(u.Ec(0,"h2",17),u.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_h2_2_span_1_Template,2,1,"span",2),u.zc(2,"core-format-text",18),u.Dc()),2&e){const e=u.Oc(2).$implicit,t=u.Oc(3);u.Vc("core-mark-required",e.required),u.lc(1),u.Vc("ngIf",t.feedback.autonumbering&&e.itemnumber),u.lc(1),u.Vc("component",t.component)("componentId",t.cmId)("text",e.name)("contextInstanceId",t.cmId)("courseId",t.courseId)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_3_Template(e,t){if(1&e&&(u.Ec(0,"p"),u.zc(1,"core-format-text",18),u.Dc()),2&e){const e=u.Oc(2).$implicit,t=u.Oc(3);u.lc(1),u.Vc("component",t.component)("componentId",t.cmId)("text",e.submittedValue)("contextInstanceId",t.cmId)("courseId",t.courseId)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_Template(e,t){if(1&e&&(u.Ec(0,"ion-item",15),u.Ec(1,"ion-label"),u.nd(2,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_h2_2_Template,3,7,"h2",16),u.nd(3,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_p_3_Template,2,5,"p",2),u.Dc(),u.Dc()),2&e){const e=u.Oc().$implicit;u.Vc("color",e.dependitem>0?"light":""),u.lc(2),u.Vc("ngIf",e.name),u.lc(1),u.Vc("ngIf",e.submittedValue)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_Template(e,t){if(1&e&&(u.Cc(0),u.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_core_spacer_1_Template,1,0,"core-spacer",2),u.nd(2,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_ion_item_2_Template,4,3,"ion-item",14),u.Bc()),2&e){const e=t.$implicit;u.lc(1),u.Vc("ngIf","pagebreak"==e.typ),u.lc(1),u.Vc("ngIf","pagebreak"!=e.typ)}}function AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_Template(e,t){if(1&e&&(u.Cc(0),u.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_ng_container_1_Template,3,2,"ng-container",13),u.Bc()),2&e){const e=u.Oc(2);u.lc(1),u.Vc("ngForOf",e.items)}}function AddonModFeedbackAttemptPage_ion_list_10_Template(e,t){if(1&e&&(u.Ec(0,"ion-list",6),u.nd(1,AddonModFeedbackAttemptPage_ion_list_10_ion_item_1_Template,7,9,"ion-item",7),u.nd(2,AddonModFeedbackAttemptPage_ion_list_10_ion_item_2_Template,9,8,"ion-item",8),u.nd(3,AddonModFeedbackAttemptPage_ion_list_10_ng_container_3_Template,2,1,"ng-container",2),u.Dc()),2&e){const e=u.Oc();u.lc(1),u.Vc("ngIf",e.attempt),u.lc(1),u.Vc("ngIf",e.anonAttempt),u.lc(1),u.Vc("ngIf",e.items&&e.items.length)}}let T=(()=>{class AddonModFeedbackAttemptPage{constructor(){this.items=[],this.component=l.b.COMPONENT,this.loaded=!1,this.cmId=r.a.getRequiredRouteNumberParam("cmId"),this.courseId=r.a.getRequiredRouteNumberParam("courseId"),this.attemptId=r.a.getRequiredRouteNumberParam("attemptId");const e=a.a.getOrCreateSource(m.a,[this.courseId,this.cmId]);this.attempts=new attempt_AddonModFeedbackAttemptsSwipeManager(e)}ngOnInit(){return Object(i.a)(this,void 0,void 0,(function*(){try{yield this.attempts.start()}catch(e){return _.a.showErrorModal(e),r.a.back(),void 0}this.fetchData()}))}ngOnDestroy(){this.attempts.destroy()}fetchData(){return Object(i.a)(this,void 0,void 0,(function*(){try{this.feedback=yield l.a.getFeedback(this.courseId,this.cmId);const e=yield l.a.getAttempt(this.feedback.id,this.attemptId,{cmId:this.cmId});this.isAnonAttempt(e)?(this.anonAttempt=e,delete this.attempt):(this.attempt=e,delete this.anonAttempt);const t=yield l.a.getItems(this.feedback.id,{cmId:this.cmId});this.items=t.items.map((t=>{const n=p.a.getItemForm(t,!0);if(!n)return;const o=n;if("label"==t.typ)o.submittedValue=s.a.replacePluginfileUrls(t.presentation,t.itemfiles);else for(const n in e.responses)if(e.responses[n].id==t.id){o.submittedValue=e.responses[n].printval;break}return o})).filter((e=>e))}catch(e){_.a.showErrorModalDefault(e,"core.course.errorgetmodule",!0),r.a.back()}finally{this.loaded=!0}}))}isAnonAttempt(e){return!("fullname"in e)}}return AddonModFeedbackAttemptPage.ɵfac=function AddonModFeedbackAttemptPage_Factory(e){return new(e||AddonModFeedbackAttemptPage)},AddonModFeedbackAttemptPage.ɵcmp=u.sc({type:AddonModFeedbackAttemptPage,selectors:[["page-addon-mod-feedback-attempt"]],decls:11,vars:8,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[3,"core-swipe-navigation"],[3,"hideUntil"],["class","ion-no-margin",4,"ngIf"],[1,"ion-no-margin"],["class","ion-text-wrap","core-user-link","",3,"userId","courseId",4,"ngIf"],["class","ion-text-wrap",4,"ngIf"],["core-user-link","",1,"ion-text-wrap",3,"userId","courseId"],["slot","start",3,"user","linkProfile"],[1,"ion-text-wrap"],["slot","start",3,"linkProfile"],[4,"ngFor","ngForOf"],["class","ion-text-wrap",3,"color",4,"ngIf"],[1,"ion-text-wrap",3,"color"],[3,"core-mark-required",4,"ngIf"],[3,"core-mark-required"],["contextLevel","module",3,"component","componentId","text","contextInstanceId","courseId"]],template:function AddonModFeedbackAttemptPage_Template(e,t){1&e&&(u.Ec(0,"ion-header"),u.Ec(1,"ion-toolbar"),u.Ec(2,"ion-buttons",0),u.zc(3,"ion-back-button",1),u.Pc(4,"translate"),u.Dc(),u.Ec(5,"ion-title"),u.nd(6,AddonModFeedbackAttemptPage_h1_6_Template,2,1,"h1",2),u.nd(7,AddonModFeedbackAttemptPage_h1_7_Template,3,3,"h1",2),u.Dc(),u.Dc(),u.Dc(),u.Ec(8,"ion-content",3),u.Ec(9,"core-loading",4),u.nd(10,AddonModFeedbackAttemptPage_ion_list_10_Template,4,3,"ion-list",5),u.Dc(),u.Dc()),2&e&&(u.lc(3),u.Vc("text",u.Qc(4,6,"core.back")),u.lc(3),u.Vc("ngIf",t.attempt),u.lc(1),u.Vc("ngIf",t.anonAttempt),u.lc(1),u.Vc("core-swipe-navigation",t.attempts),u.lc(1),u.Vc("hideUntil",t.loaded),u.lc(1),u.Vc("ngIf",t.attempt||t.anonAttempt))},directives:[g.C,g.Ab,g.m,g.h,g.i,g.yb,f.t,A.a,g.v,b.a,h.a,g.P,g.I,I.a,k.a,g.O,f.s,P.a,M.a,F.a],pipes:[v.d,y.a],encapsulation:2}),AddonModFeedbackAttemptPage})();class attempt_AddonModFeedbackAttemptsSwipeManager extends d.a{getSelectedItemPathFromRoute(e){return e.params.attemptId}}const O=[{path:"",component:T}];let w=(()=>{class AddonModFeedbackAttemptPageModule{}return AddonModFeedbackAttemptPageModule.ɵmod=u.wc({type:AddonModFeedbackAttemptPageModule}),AddonModFeedbackAttemptPageModule.ɵinj=u.vc({factory:function AddonModFeedbackAttemptPageModule_Factory(e){return new(e||AddonModFeedbackAttemptPageModule)},imports:[[c.m.forChild(O),o.a],c.m]}),AddonModFeedbackAttemptPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&u.kd(w,{declarations:[T],imports:[c.m,o.a],exports:[c.m]}))},eoiU:function(e,t,n){"use strict";n.d(t,"a",(function(){return CoreSwipeNavigationItemsManager}));var o=n("mrSG"),c=n("pHTc"),i=n("CtbY");class CoreSwipeNavigationItemsManager extends i.a{start(){return Object(o.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,"forward")}))}navigateToPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,"back")}))}hasNextItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(o.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return c.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const t=[];for(;e&&(t.push(...e.url),e.firstChild);)e=e.firstChild;return t.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,t){return Object(o.a)(this,void 0,void 0,(function*(){const n=yield this.getItemBy(e);n&&(yield this.navigateToItem(n,{animationDirection:t,replace:!0}))}))}getItemBy(e){var t;return Object(o.a)(this,void 0,void 0,(function*(){const n=this.getSource().getItems(),o=null!==(t=this.selectedItem&&(null==n?void 0:n.indexOf(this.selectedItem)))&&void 0!==t?t:-1;if(-1===o||null===n)return null;const c=e>0?1:-1;let i=o,a=0;for(;a!==e&&(i+=c,!(i<0||i>=n.length));)this.skipItemInSwipe(n[i])||(a+=c);return a===e?n[i]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}}}]);