(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{"g77/":function(e,o,s){"use strict";s.r(o),s.d(o,"CoreCoursesMyCoursesPageModule",(function(){return E}));var r=s("tyNb"),t=s("L3Fv"),a=s("5p9q"),c=s("mrSG"),n=s("mSZx"),i=s("OYIH"),l=s("YyYz"),d=s("9+EE"),u=s("3LXp"),C=s("bFG1"),b=s("fjkH"),g=s("Xzvb"),_=s("fXoL"),m=s("TEn/"),v=s("hMzs"),h=s("C1x5"),y=s("nt/U"),f=s("PgjG"),p=s("ofXK"),k=s("ACYt"),M=s("3CSS"),P=s("aSim"),w=s("r8G5"),D=s("sYmb");function CoreCoursesMyCoursesPage_div_22_ion_button_1_Template(e,o){if(1&e){const e=_.Fc();_.Ec(0,"ion-button",19),_.Mc("click",(function CoreCoursesMyCoursesPage_div_22_ion_button_1_Template_ion_button_click_0_listener(){_.fd(e);return _.Oc(2).myOverviewBlock.prefetchCourses()})),_.Pc(1,"translate"),_.zc(2,"ion-icon",20),_.Dc()}if(2&e){const e=_.Oc(2);_.mc("aria-label",_.Qc(1,2,e.myOverviewBlock.prefetchCoursesData.statusTranslatable)),_.lc(2),_.Vc("name",e.myOverviewBlock.prefetchCoursesData.icon)}}function CoreCoursesMyCoursesPage_div_22_ion_badge_2_Template(e,o){if(1&e&&(_.Ec(0,"ion-badge",21),_.pd(1),_.Dc()),2&e){const e=_.Oc(2);_.mc("aria-valuemax",e.myOverviewBlock.prefetchCoursesData.total)("aria-valuenow",e.myOverviewBlock.prefetchCoursesData.count)("aria-valuetext",e.myOverviewBlock.prefetchCoursesData.badgeA11yText),_.lc(1),_.rd(" ",e.myOverviewBlock.prefetchCoursesData.badge," ")}}function CoreCoursesMyCoursesPage_div_22_ion_spinner_3_Template(e,o){1&e&&(_.zc(0,"ion-spinner"),_.Pc(1,"translate")),2&e&&_.mc("aria-label",_.Qc(1,1,"core.loading"))}function CoreCoursesMyCoursesPage_div_22_Template(e,o){if(1&e&&(_.Ec(0,"div",15),_.nd(1,CoreCoursesMyCoursesPage_div_22_ion_button_1_Template,3,4,"ion-button",16),_.nd(2,CoreCoursesMyCoursesPage_div_22_ion_badge_2_Template,2,4,"ion-badge",17),_.nd(3,CoreCoursesMyCoursesPage_div_22_ion_spinner_3_Template,2,3,"ion-spinner",18),_.Dc()),2&e){const e=_.Oc();_.lc(1),_.Vc("ngIf",!e.myOverviewBlock.prefetchCoursesData.loading),_.lc(1),_.Vc("ngIf",e.myOverviewBlock.prefetchCoursesData.badge),_.lc(1),_.Vc("ngIf",e.myOverviewBlock.prefetchCoursesData.loading)}}function CoreCoursesMyCoursesPage_core_block_24_Template(e,o){if(1&e&&_.zc(0,"core-block",22),2&e){const e=_.Oc();_.Vc("block",e.loadedBlock)("instanceId",e.userId)}}function CoreCoursesMyCoursesPage_core_block_side_blocks_button_25_Template(e,o){if(1&e&&_.zc(0,"core-block-side-blocks-button",23),2&e){const e=_.Oc();_.Vc("instanceId",e.userId)("myDashboardPage",e.myPageCourses)}}function CoreCoursesMyCoursesPage_core_empty_box_26_Template(e,o){1&e&&(_.zc(0,"core-empty-box",24),_.Pc(1,"translate")),2&e&&_.Vc("message",_.Qc(1,1,"core.course.nocontentavailable"))}let O=(()=>{class CoreCoursesMyCoursesPage{constructor(){this.siteName="",this.downloadCoursesEnabled=!1,this.loaded=!1,this.myPageCourses=i.b.MY_PAGE_COURSES,this.hasSideBlocks=!1,this.updateSiteObserver=b.b.on(b.b.SITE_UPDATED,(()=>{this.downloadCoursesEnabled=!g.a.isDownloadCoursesDisabledInSite(),this.loadSiteName()}),d.b.getCurrentSiteId()),this.userId=d.b.getCurrentSiteUserId()}ngOnInit(){this.downloadCoursesEnabled=!g.a.isDownloadCoursesDisabledInSite();(new l.a).treatLink(),this.loadSiteName(),this.loadContent()}loadContent(){var e,o;return Object(c.a)(this,void 0,void 0,(function*(){const s=yield i.a.isAvailable(),r=yield g.a.isMyCoursesDisabled();if(s&&!r)try{const s=yield i.a.getDashboardBlocks(void 0,void 0,this.myPageCourses);this.loadedBlock=s.mainBlocks.concat(s.sideBlocks).find((e=>"myoverview"==e.name)),this.hasSideBlocks=s.sideBlocks.length>0,yield C.a.nextTicks(2),this.myOverviewBlock=null===(o=null===(e=this.block)||void 0===e?void 0:e.dynamicComponent)||void 0===o?void 0:o.instance}catch(e){u.a.showErrorModal(e),this.loadFallbackBlock()}else s?this.loadedBlock=void 0:this.loadFallbackBlock();this.loaded=!0}))}loadSiteName(){this.siteName=d.b.getRequiredCurrentSite().getSiteName()||""}loadFallbackBlock(){this.loadedBlock={name:"myoverview",visible:!0}}refresh(e){return Object(c.a)(this,void 0,void 0,(function*(){const o=[];o.push(i.a.invalidateDashboardBlocks(i.b.MY_PAGE_COURSES)),this.myOverviewBlock&&o.push(C.a.ignoreErrors(this.myOverviewBlock.doRefresh())),Promise.all(o).finally((()=>{this.loadContent().finally((()=>{null==e?void 0:e.complete()}))}))}))}ngOnDestroy(){var e;null===(e=this.updateSiteObserver)||void 0===e?void 0:e.off()}}return CoreCoursesMyCoursesPage.ɵfac=function CoreCoursesMyCoursesPage_Factory(e){return new(e||CoreCoursesMyCoursesPage)},CoreCoursesMyCoursesPage.ɵcmp=_.sc({type:CoreCoursesMyCoursesPage,selectors:[["page-core-courses-my"]],viewQuery:function CoreCoursesMyCoursesPage_Query(e,o){var s;(1&e&&_.ud(n.a,!0),2&e)&&(_.dd(s=_.Nc())&&(o.block=s.first))},decls:27,vars:18,consts:[["slot","start"],[3,"text"],["contextLevel","system",1,"core-header-sitename",3,"text","contextInstanceId"],["src","assets/img/top_logo.png",1,"core-header-logo",3,"alt"],["slot","end"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-text-wrap","divider"],[1,"big"],["slot","end",1,"flex-row"],["class","core-button-spinner",4,"ngIf"],["contextLevel","user",3,"block","instanceId",4,"ngIf"],["slot","fixed","contextLevel","user",3,"instanceId","myDashboardPage",4,"ngIf"],["icon","fas-cubes",3,"message",4,"ngIf"],[1,"core-button-spinner"],["fill","clear",3,"click",4,"ngIf"],["class","core-course-download-courses-progress","role","progressbar",4,"ngIf"],[4,"ngIf"],["fill","clear",3,"click"],["slot","icon-only","aria-hidden","true",3,"name"],["role","progressbar",1,"core-course-download-courses-progress"],["contextLevel","user",3,"block","instanceId"],["slot","fixed","contextLevel","user",3,"instanceId","myDashboardPage"],["icon","fas-cubes",3,"message"]],template:function CoreCoursesMyCoursesPage_Template(e,o){1&e&&(_.Ec(0,"ion-header"),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",0),_.zc(3,"ion-back-button",1),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.Ec(6,"h1"),_.zc(7,"core-format-text",2),_.zc(8,"img",3),_.Dc(),_.Dc(),_.Ec(9,"ion-buttons",4),_.zc(10,"core-user-menu-button"),_.Dc(),_.Dc(),_.Dc(),_.Ec(11,"ion-content"),_.Ec(12,"ion-refresher",5),_.Mc("ionRefresh",(function CoreCoursesMyCoursesPage_Template_ion_refresher_ionRefresh_12_listener(e){return o.refresh(e.target)})),_.zc(13,"ion-refresher-content",6),_.Pc(14,"translate"),_.Dc(),_.Ec(15,"core-loading",7),_.Ec(16,"ion-item",8),_.Ec(17,"ion-label"),_.Ec(18,"h2",9),_.pd(19),_.Pc(20,"translate"),_.Dc(),_.Dc(),_.Ec(21,"div",10),_.nd(22,CoreCoursesMyCoursesPage_div_22_Template,4,3,"div",11),_.Dc(),_.Dc(),_.Ec(23,"ion-list"),_.nd(24,CoreCoursesMyCoursesPage_core_block_24_Template,1,2,"core-block",12),_.Dc(),_.nd(25,CoreCoursesMyCoursesPage_core_block_side_blocks_button_25_Template,1,2,"core-block-side-blocks-button",13),_.nd(26,CoreCoursesMyCoursesPage_core_empty_box_26_Template,2,3,"core-empty-box",14),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,12,"core.back")),_.lc(4),_.Vc("text",o.siteName)("contextInstanceId",0),_.lc(1),_.Vc("alt",o.siteName),_.lc(4),_.Vc("disabled",!o.loaded),_.lc(1),_.Wc("pullingText",_.Qc(14,14,"core.pulltorefresh")),_.lc(2),_.Vc("hideUntil",o.loaded),_.lc(4),_.qd(_.Qc(20,16,"core.courses.mycourses")),_.lc(3),_.Vc("ngIf",o.downloadCoursesEnabled&&o.myOverviewBlock&&o.myOverviewBlock.filteredCourses.length>0),_.lc(2),_.Vc("ngIf",null==o.loadedBlock?null:o.loadedBlock.visible),_.lc(1),_.Vc("ngIf",o.hasSideBlocks),_.lc(1),_.Vc("ngIf",!o.loadedBlock))},directives:[m.C,m.Ab,m.m,m.h,m.i,m.yb,v.a,h.a,y.a,m.v,m.bb,m.cb,f.a,m.I,m.O,p.t,m.P,k.a,m.l,m.D,M.a,m.k,m.qb,n.a,P.a,w.a],pipes:[D.d],styles:["[_nghost-%COMP%]     ion-item-divider{display:none!important}[_nghost-%COMP%]     core-loading{--internal-loading-inline-min-height:calc(100vh - var(--core-header-toolbar-height))}ion-tabs.placement-bottom[_nghost-%COMP%]     core-loading, ion-tabs.placement-bottom   [_nghost-%COMP%]     core-loading{--internal-loading-inline-min-height:calc(100vh - var(--core-header-toolbar-height) - var(--bottom-tabs-size) - 2px)}core-block[_ngcontent-%COMP%]     ion-card.addon-block-myoverview{--border-width:0;--background:transparent;margin:0}"]}),CoreCoursesMyCoursesPage})();var I=s("dQ3M");const B=[{path:"",component:O}];let E=(()=>{class CoreCoursesMyCoursesPageModule{}return CoreCoursesMyCoursesPageModule.ɵmod=_.wc({type:CoreCoursesMyCoursesPageModule}),CoreCoursesMyCoursesPageModule.ɵinj=_.vc({factory:function CoreCoursesMyCoursesPageModule_Factory(e){return new(e||CoreCoursesMyCoursesPageModule)},imports:[[r.m.forChild(B),t.a,a.a,I.a],r.m]}),CoreCoursesMyCoursesPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&_.kd(E,{declarations:[O],imports:[r.m,t.a,a.a,I.a],exports:[r.m]}))}}]);