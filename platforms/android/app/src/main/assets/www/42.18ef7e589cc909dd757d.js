(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{cx1z:function(o,e,t){"use strict";t.r(e),t.d(e,"AddonCourseCompletionLazyModule",(function(){return b}));var c=t("L3Fv"),n=t("tyNb"),i=t("rGK3"),r=t("yQkb"),d=t("mrSG"),l=t("xd1G"),a=t("pHTc"),s=t("9+EE"),p=t("3LXp"),m=t("fXoL"),u=t("TEn/"),_=t("nt/U"),C=t("PgjG"),f=t("ofXK"),g=t("hMzs"),h=t("ACYt"),E=t("3CSS"),D=t("sYmb"),P=t("uYHD");function AddonCourseCompletionReportPage_ion_card_14_p_14_Template(o,e){1&o&&(m.Ec(0,"p"),m.pd(1),m.Pc(2,"translate"),m.Dc()),2&o&&(m.lc(1),m.qd(m.Qc(2,1,"addon.coursecompletion.criteriarequiredall")))}function AddonCourseCompletionReportPage_ion_card_14_p_15_Template(o,e){1&o&&(m.Ec(0,"p"),m.pd(1),m.Pc(2,"translate"),m.Dc()),2&o&&(m.lc(1),m.qd(m.Qc(2,1,"addon.coursecompletion.criteriarequiredany")))}function AddonCourseCompletionReportPage_ion_card_14_Template(o,e){if(1&o&&(m.Ec(0,"ion-card"),m.Ec(1,"ion-item",7),m.Ec(2,"ion-label"),m.Ec(3,"h2"),m.pd(4),m.Pc(5,"translate"),m.Dc(),m.Ec(6,"p"),m.pd(7),m.Pc(8,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Ec(9,"ion-item",7),m.Ec(10,"ion-label"),m.Ec(11,"h2"),m.pd(12),m.Pc(13,"translate"),m.Dc(),m.nd(14,AddonCourseCompletionReportPage_ion_card_14_p_14_Template,3,3,"p",5),m.nd(15,AddonCourseCompletionReportPage_ion_card_14_p_15_Template,3,3,"p",5),m.Dc(),m.Dc(),m.Dc()),2&o){const o=m.Oc();m.lc(4),m.qd(m.Qc(5,5,"addon.coursecompletion.status")),m.lc(3),m.qd(m.Qc(8,7,o.statusText)),m.lc(5),m.qd(m.Qc(13,9,"addon.coursecompletion.required")),m.lc(2),m.Vc("ngIf",1===o.completion.aggregation),m.lc(1),m.Vc("ngIf",2===o.completion.aggregation)}}function AddonCourseCompletionReportPage_ion_card_15_ion_item_6_Template(o,e){if(1&o&&(m.Ec(0,"ion-item",11),m.Ec(1,"ion-label"),m.Ec(2,"p",12),m.zc(3,"core-format-text",13),m.Dc(),m.Ec(4,"p"),m.zc(5,"core-format-text",13),m.Dc(),m.Dc(),m.Ec(6,"strong",14),m.pd(7),m.Dc(),m.Dc()),2&o){const o=e.$implicit;m.lc(3),m.Vc("text",o.details.criteria)("filter",!1),m.lc(2),m.Vc("text",o.details.requirement)("filter",!1),m.lc(2),m.qd(o.status)}}function AddonCourseCompletionReportPage_ion_card_15_ion_row_34_ion_col_11_Template(o,e){if(1&o&&(m.Ec(0,"ion-col"),m.pd(1),m.Pc(2,"coreFormatDate"),m.Dc()),2&o){const o=m.Oc().$implicit;m.lc(1),m.rd(" ",m.Rc(2,1,1e3*o.timecompleted,"strftimedatetimeshort")," ")}}function AddonCourseCompletionReportPage_ion_card_15_ion_row_34_ion_col_12_Template(o,e){1&o&&m.zc(0,"ion-col")}function AddonCourseCompletionReportPage_ion_card_15_ion_row_34_Template(o,e){if(1&o&&(m.Ec(0,"ion-row"),m.Ec(1,"ion-col"),m.zc(2,"core-format-text",13),m.Dc(),m.Ec(3,"ion-col"),m.zc(4,"core-format-text",13),m.Dc(),m.Ec(5,"ion-col"),m.zc(6,"core-format-text",13),m.Dc(),m.Ec(7,"ion-col"),m.zc(8,"core-format-text",15),m.Dc(),m.Ec(9,"ion-col"),m.pd(10),m.Dc(),m.nd(11,AddonCourseCompletionReportPage_ion_card_15_ion_row_34_ion_col_11_Template,3,4,"ion-col",5),m.nd(12,AddonCourseCompletionReportPage_ion_card_15_ion_row_34_ion_col_12_Template,1,0,"ion-col",5),m.Dc()),2&o){const o=e.$implicit;m.lc(2),m.Vc("text",o.title)("filter",!1),m.lc(2),m.Vc("text",o.details.criteria)("filter",!1),m.lc(2),m.Vc("text",o.details.requirement)("filter",!1),m.lc(2),m.Vc("text",o.details.status)("filter",!1),m.lc(2),m.qd(o.status),m.lc(1),m.Vc("ngIf",o.timecompleted),m.lc(1),m.Vc("ngIf",!o.timecompleted)}}function AddonCourseCompletionReportPage_ion_card_15_Template(o,e){if(1&o&&(m.Ec(0,"ion-card"),m.Ec(1,"ion-item-divider"),m.Ec(2,"ion-label"),m.Ec(3,"h2"),m.pd(4),m.Pc(5,"translate"),m.Dc(),m.Dc(),m.Dc(),m.nd(6,AddonCourseCompletionReportPage_ion_card_15_ion_item_6_Template,8,5,"ion-item",8),m.Ec(7,"ion-item",9),m.Ec(8,"ion-label"),m.Ec(9,"ion-row"),m.Ec(10,"ion-col"),m.Ec(11,"strong"),m.pd(12),m.Pc(13,"translate"),m.Dc(),m.Dc(),m.Ec(14,"ion-col"),m.Ec(15,"strong"),m.pd(16),m.Pc(17,"translate"),m.Dc(),m.Dc(),m.Ec(18,"ion-col"),m.Ec(19,"strong"),m.pd(20),m.Pc(21,"translate"),m.Dc(),m.Dc(),m.Ec(22,"ion-col"),m.Ec(23,"strong"),m.pd(24),m.Pc(25,"translate"),m.Dc(),m.Dc(),m.Ec(26,"ion-col"),m.Ec(27,"strong"),m.pd(28),m.Pc(29,"translate"),m.Dc(),m.Dc(),m.Ec(30,"ion-col"),m.Ec(31,"strong"),m.pd(32),m.Pc(33,"translate"),m.Dc(),m.Dc(),m.Dc(),m.nd(34,AddonCourseCompletionReportPage_ion_card_15_ion_row_34_Template,13,11,"ion-row",10),m.Dc(),m.Dc(),m.Dc()),2&o){const o=m.Oc();m.lc(4),m.qd(m.Qc(5,9,"addon.coursecompletion.requiredcriteria")),m.lc(2),m.Vc("ngForOf",o.completion.completions),m.lc(6),m.qd(m.Qc(13,11,"addon.coursecompletion.criteriagroup")),m.lc(4),m.qd(m.Qc(17,13,"addon.coursecompletion.criteria")),m.lc(4),m.qd(m.Qc(21,15,"addon.coursecompletion.requirement")),m.lc(4),m.qd(m.Qc(25,17,"addon.coursecompletion.status")),m.lc(4),m.qd(m.Qc(29,19,"addon.coursecompletion.complete")),m.lc(4),m.qd(m.Qc(33,21,"addon.coursecompletion.completiondate")),m.lc(2),m.Vc("ngForOf",o.completion.completions)}}function AddonCourseCompletionReportPage_ion_card_16_Template(o,e){if(1&o){const o=m.Fc();m.Ec(0,"ion-card"),m.Ec(1,"ion-item-divider"),m.Ec(2,"ion-label"),m.Ec(3,"h2"),m.pd(4),m.Pc(5,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Ec(6,"ion-item"),m.Ec(7,"ion-label"),m.Ec(8,"ion-button",16),m.Mc("click",(function AddonCourseCompletionReportPage_ion_card_16_Template_ion_button_click_8_listener(){m.fd(o);return m.Oc().completeCourse()})),m.pd(9),m.Pc(10,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Dc()}2&o&&(m.lc(4),m.qd(m.Qc(5,2,"addon.coursecompletion.manualselfcompletion")),m.lc(5),m.rd(" ",m.Qc(10,4,"addon.coursecompletion.completecourse")," "))}function AddonCourseCompletionReportPage_ion_card_17_Template(o,e){1&o&&(m.Ec(0,"ion-card",17),m.Ec(1,"ion-item"),m.zc(2,"ion-icon",18),m.Ec(3,"ion-label"),m.pd(4),m.Pc(5,"translate"),m.Dc(),m.Dc(),m.Dc()),2&o&&(m.lc(4),m.qd(m.Qc(5,1,"addon.coursecompletion.nottracked")))}let A=(()=>{class AddonCourseCompletionReportPage{constructor(){this.completionLoaded=!1,this.showSelfComplete=!1,this.tracked=!0}ngOnInit(){try{this.courseId=a.a.getRequiredRouteNumberParam("courseId"),this.userId=a.a.getRouteNumberParam("userId")||s.b.getCurrentSiteUserId()}catch(o){return p.a.showErrorModal(o),a.a.back(),void 0}this.fetchCompletion().finally((()=>{this.completionLoaded=!0}))}fetchCompletion(){return Object(d.a)(this,void 0,void 0,(function*(){try{this.completion=yield l.a.getCompletion(this.courseId,this.userId),this.statusText=l.a.getCompletedStatusText(this.completion),this.showSelfComplete=l.a.canMarkSelfCompleted(this.userId,this.completion),this.tracked=!0}catch(o){o&&"notenroled"==o.errorcode?this.tracked=!1:p.a.showErrorModalDefault(o,"addon.coursecompletion.couldnotloadreport",!0)}}))}refreshCompletion(o){return Object(d.a)(this,void 0,void 0,(function*(){yield l.a.invalidateCourseCompletion(this.courseId,this.userId).finally((()=>{this.fetchCompletion().finally((()=>{null==o?void 0:o.complete()}))}))}))}completeCourse(){return Object(d.a)(this,void 0,void 0,(function*(){const o=yield p.a.showModalLoading("core.sending",!0);try{yield l.a.markCourseAsSelfCompleted(this.courseId),yield this.refreshCompletion()}catch(o){p.a.showErrorModal(o)}finally{o.dismiss()}}))}}return AddonCourseCompletionReportPage.ɵfac=function AddonCourseCompletionReportPage_Factory(o){return new(o||AddonCourseCompletionReportPage)},AddonCourseCompletionReportPage.ɵcmp=m.sc({type:AddonCourseCompletionReportPage,selectors:[["page-addon-course-completion-report"]],decls:18,vars:15,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[4,"ngIf"],["class","core-warning-card",4,"ngIf"],[1,"ion-text-wrap"],["class","ion-hide-md-up ion-text-wrap",4,"ngFor","ngForOf"],[1,"ion-hide-md-down","ion-text-wrap"],[4,"ngFor","ngForOf"],[1,"ion-hide-md-up","ion-text-wrap"],[1,"item-heading"],["clean","true",3,"text","filter"],["slot","end"],[3,"text","filter"],["expand","block",3,"click"],[1,"core-warning-card"],["name","fas-exclamation-triangle","slot","start","aria-hidden","true"]],template:function AddonCourseCompletionReportPage_Template(o,e){1&o&&(m.Ec(0,"ion-header"),m.Ec(1,"ion-toolbar"),m.Ec(2,"ion-buttons",0),m.zc(3,"ion-back-button",1),m.Pc(4,"translate"),m.Dc(),m.Ec(5,"ion-title"),m.Ec(6,"h1"),m.pd(7),m.Pc(8,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Dc(),m.Ec(9,"ion-content"),m.Ec(10,"ion-refresher",2),m.Mc("ionRefresh",(function AddonCourseCompletionReportPage_Template_ion_refresher_ionRefresh_10_listener(o){return e.refreshCompletion(o.target)})),m.zc(11,"ion-refresher-content",3),m.Pc(12,"translate"),m.Dc(),m.Ec(13,"core-loading",4),m.nd(14,AddonCourseCompletionReportPage_ion_card_14_Template,16,11,"ion-card",5),m.nd(15,AddonCourseCompletionReportPage_ion_card_15_Template,35,23,"ion-card",5),m.nd(16,AddonCourseCompletionReportPage_ion_card_16_Template,11,6,"ion-card",5),m.nd(17,AddonCourseCompletionReportPage_ion_card_17_Template,6,3,"ion-card",6),m.Dc(),m.Dc()),2&o&&(m.lc(3),m.Vc("text",m.Qc(4,9,"core.back")),m.lc(4),m.qd(m.Qc(8,11,"addon.coursecompletion.coursecompletion")),m.lc(3),m.Vc("disabled",!e.completionLoaded),m.lc(1),m.Wc("pullingText",m.Qc(12,13,"core.pulltorefresh")),m.lc(2),m.Vc("hideUntil",e.completionLoaded),m.lc(1),m.Vc("ngIf",e.completion&&e.tracked),m.lc(1),m.Vc("ngIf",e.completion&&e.tracked),m.lc(1),m.Vc("ngIf",e.showSelfComplete&&e.tracked),m.lc(1),m.Vc("ngIf",!e.tracked))},directives:[u.C,u.Ab,u.m,u.h,u.i,u.yb,_.a,u.v,u.bb,u.cb,C.a,f.t,u.n,u.I,u.O,u.J,f.s,u.hb,u.u,g.a,h.a,u.l,u.D,E.a],pipes:[D.d,P.a],encapsulation:2}),AddonCourseCompletionReportPage})();const R=[{path:"",component:A}];let b=(()=>{class AddonCourseCompletionLazyModule{}return AddonCourseCompletionLazyModule.ɵmod=m.wc({type:AddonCourseCompletionLazyModule}),AddonCourseCompletionLazyModule.ɵinj=m.vc({factory:function AddonCourseCompletionLazyModule_Factory(o){return new(o||AddonCourseCompletionLazyModule)},imports:[[n.m.forChild(R),c.a,i.a,r.a],n.m]}),AddonCourseCompletionLazyModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&m.kd(b,{declarations:[A],imports:[n.m,c.a,i.a,r.a],exports:[n.m]}))}}]);