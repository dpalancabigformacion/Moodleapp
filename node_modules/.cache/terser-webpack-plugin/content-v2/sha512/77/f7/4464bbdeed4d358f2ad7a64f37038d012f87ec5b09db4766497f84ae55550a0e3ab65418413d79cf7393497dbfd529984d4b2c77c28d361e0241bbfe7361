{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[124],{Jn5w:function(e,t,a){\"use strict\";a.r(t),a.d(t,\"CoreTagIndexPageModule\",(function(){return D}));var n=a(\"tyNb\"),o=a(\"vY5A\"),i=a(\"fg4u\"),r=a(\"Y+03\"),c=a(\"L3Fv\"),s=a(\"mrSG\"),d=a(\"3LXp\"),l=a(\"kWmn\"),g=a(\"J82s\"),m=a(\"pHTc\"),h=a(\"fXoL\"),p=a(\"TEn/\"),u=a(\"nt/U\"),_=a(\"46ml\"),I=a(\"PgjG\"),f=a(\"ofXK\"),x=a(\"3CSS\"),T=a(\"r8G5\"),P=a(\"sYmb\");function CoreTagIndexPage_ion_list_15_ion_item_1_Template(e,t){1&e&&(h.Ec(0,\"ion-item\",9),h.zc(1,\"ion-icon\",10),h.Ec(2,\"ion-label\",11),h.pd(3),h.Pc(4,\"translate\"),h.Dc(),h.Dc()),2&e&&(h.lc(3),h.qd(h.Qc(4,1,\"core.tag.warningareasnotsupported\")))}const _c0=function(e){return{count:e}};function CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template(e,t){if(1&e&&(h.Ec(0,\"ion-badge\",14),h.Ec(1,\"span\",15),h.pd(2),h.Dc(),h.Ec(3,\"span\",16),h.pd(4),h.Pc(5,\"translate\"),h.Dc(),h.Dc()),2&e){const e=h.Oc().$implicit;h.lc(2),h.qd(e.badge),h.lc(2),h.qd(h.Rc(5,2,\"core.tag.tagareabadgedescription\",h.ad(5,_c0,e.badge)))}}function CoreTagIndexPage_ion_list_15_ion_item_2_Template(e,t){if(1&e){const e=h.Fc();h.Ec(0,\"ion-item\",12),h.Mc(\"click\",(function CoreTagIndexPage_ion_list_15_ion_item_2_Template_ion_item_click_0_listener(){h.fd(e);const a=t.$implicit;return h.Oc(2).openArea(a)})),h.Pc(1,\"translate\"),h.Ec(2,\"ion-label\"),h.Ec(3,\"h2\"),h.pd(4),h.Pc(5,\"translate\"),h.Dc(),h.Dc(),h.nd(6,CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template,6,7,\"ion-badge\",13),h.Dc()}if(2&e){const e=t.$implicit,a=h.Oc(2);h.mc(\"aria-label\",h.Qc(1,4,e.nameKey))(\"aria-current\",e.id==a.selectedAreaId?\"page\":\"false\"),h.lc(4),h.qd(h.Qc(5,6,e.nameKey)),h.lc(2),h.Vc(\"ngIf\",e.badge)}}function CoreTagIndexPage_ion_list_15_Template(e,t){if(1&e&&(h.Ec(0,\"ion-list\"),h.nd(1,CoreTagIndexPage_ion_list_15_ion_item_1_Template,5,3,\"ion-item\",7),h.nd(2,CoreTagIndexPage_ion_list_15_ion_item_2_Template,7,8,\"ion-item\",8),h.Dc()),2&e){const e=h.Oc();h.lc(1),h.Vc(\"ngIf\",e.hasUnsupportedAreas),h.lc(1),h.Vc(\"ngForOf\",e.areas)}}const _c1=function(e){return{$a:e}};function CoreTagIndexPage_core_empty_box_16_Template(e,t){if(1&e&&(h.zc(0,\"core-empty-box\",17),h.Pc(1,\"translate\")),2&e){const e=h.Oc();h.Vc(\"message\",h.Rc(1,1,\"core.tag.noresultsfor\",h.ad(4,_c1,e.tagName)))}}let b=(()=>{class CoreTagIndexPage{constructor(){this.tagId=0,this.tagName=\"\",this.collectionId=0,this.areaId=0,this.fromContextId=0,this.contextId=0,this.recursive=!0,this.loaded=!1,this.hasUnsupportedAreas=!1,this.areas=[]}ngOnInit(){var e;return Object(s.a)(this,void 0,void 0,(function*(){this.tagId=m.a.getRouteNumberParam(\"tagId\")||this.tagId,this.tagName=m.a.getRouteParam(\"tagName\")||this.tagName,this.collectionId=m.a.getRouteNumberParam(\"collectionId\")||this.collectionId,this.areaId=m.a.getRouteNumberParam(\"areaId\")||this.areaId,this.fromContextId=m.a.getRouteNumberParam(\"fromContextId\")||this.fromContextId,this.contextId=m.a.getRouteNumberParam(\"contextId\")||this.contextId,this.recursive=null===(e=m.a.getRouteBooleanParam(\"recursive\"))||void 0===e||e;try{if(yield this.fetchData(),r.a.isTablet&&this.areas&&this.areas.length>0){const e=this.areas.find((e=>e.id==this.areaId));this.openArea(e||this.areas[0])}}finally{this.loaded=!0}}))}fetchData(){return Object(s.a)(this,void 0,void 0,(function*(){try{const e=yield l.a.getTagIndexPerArea(this.tagId,this.tagName,this.collectionId,this.areaId,this.fromContextId,this.contextId,this.recursive,0);this.areas=[],this.hasUnsupportedAreas=!1;const t=[];yield Promise.all(e.map((e=>Object(s.a)(this,void 0,void 0,(function*(){const a=yield g.a.parseContent(e.component,e.itemtype,e.content);if(!a||!a.length)return this.hasUnsupportedAreas=!0,void 0;t.push({id:e.ta,componentName:e.component,itemType:e.itemtype,nameKey:g.a.getDisplayNameKey(e.component,e.itemtype),items:a,canLoadMore:!!e.nextpageurl,badge:a&&a.length?a.length+(e.nextpageurl?\"+\":\"\"):\"\"})}))))),this.areas=t}catch(e){d.a.showErrorModalDefault(e,\"Error loading tag index\")}}))}refreshData(e){l.a.invalidateTagIndexPerArea(this.tagId,this.tagName,this.collectionId,this.areaId,this.fromContextId,this.contextId,this.recursive).finally((()=>{this.fetchData().finally((()=>{null==e?void 0:e.complete()}))}))}openArea(e){this.selectedAreaId=e.id;const t={tagId:this.tagId,tagName:this.tagName,collectionId:this.collectionId,areaId:e.id,fromContextId:this.fromContextId,contextId:this.contextId,recursive:this.recursive,areaNameKey:e.nameKey,componentName:e.componentName,itemType:e.itemType,items:e.items.slice(),canLoadMore:e.canLoadMore,nextPage:1},a=m.a.isCurrentPathInTablet(\"**/tag/index/index-area\");m.a.navigate((a?\"../\":\"\")+\"index-area\",{params:t})}}return CoreTagIndexPage.ɵfac=function CoreTagIndexPage_Factory(e){return new(e||CoreTagIndexPage)},CoreTagIndexPage.ɵcmp=h.sc({type:CoreTagIndexPage,selectors:[[\"page-core-tag-index\"]],decls:17,vars:14,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[4,\"ngIf\"],[\"icon\",\"fas-tag\",3,\"message\",4,\"ngIf\"],[\"class\",\"core-warning-item\",4,\"ngIf\"],[\"class\",\"ion-text-wrap\",\"button\",\"\",\"detail\",\"true\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[1,\"core-warning-item\"],[\"slot\",\"start\",\"name\",\"fas-exclamation-triangle\",\"color\",\"warning\",\"aria-hidden\",\"true\"],[1,\"ion-text-wrap\"],[\"button\",\"\",\"detail\",\"true\",1,\"ion-text-wrap\",3,\"click\"],[\"slot\",\"end\",4,\"ngIf\"],[\"slot\",\"end\"],[\"aria-hidden\",\"true\"],[1,\"sr-only\"],[\"icon\",\"fas-tag\",3,\"message\"]],template:function CoreTagIndexPage_Template(e,t){1&e&&(h.Ec(0,\"ion-header\"),h.Ec(1,\"ion-toolbar\"),h.Ec(2,\"ion-buttons\",0),h.zc(3,\"ion-back-button\",1),h.Pc(4,\"translate\"),h.Dc(),h.Ec(5,\"ion-title\"),h.Ec(6,\"h1\"),h.pd(7),h.Pc(8,\"translate\"),h.Dc(),h.Dc(),h.Dc(),h.Dc(),h.Ec(9,\"ion-content\"),h.Ec(10,\"core-split-view\"),h.Ec(11,\"ion-refresher\",2),h.Mc(\"ionRefresh\",(function CoreTagIndexPage_Template_ion_refresher_ionRefresh_11_listener(e){return t.refreshData(e.target)})),h.zc(12,\"ion-refresher-content\",3),h.Pc(13,\"translate\"),h.Dc(),h.Ec(14,\"core-loading\",4),h.nd(15,CoreTagIndexPage_ion_list_15_Template,3,2,\"ion-list\",5),h.nd(16,CoreTagIndexPage_core_empty_box_16_Template,2,6,\"core-empty-box\",6),h.Dc(),h.Dc(),h.Dc()),2&e&&(h.lc(3),h.Vc(\"text\",h.Qc(4,8,\"core.back\")),h.lc(4),h.sd(\"\",h.Qc(8,10,\"core.tag.tag\"),\": \",t.tagName,\"\"),h.lc(4),h.Vc(\"disabled\",!t.loaded),h.lc(1),h.Wc(\"pullingText\",h.Qc(13,12,\"core.pulltorefresh\")),h.lc(2),h.Vc(\"hideUntil\",t.loaded),h.lc(1),h.Vc(\"ngIf\",t.hasUnsupportedAreas||t.areas.length),h.lc(1),h.Vc(\"ngIf\",!(t.hasUnsupportedAreas||t.areas&&t.areas.length)))},directives:[p.C,p.Ab,p.m,p.h,p.i,p.yb,u.a,p.v,_.a,p.bb,p.cb,I.a,f.t,p.P,f.s,p.I,p.D,x.a,p.O,p.k,T.a],pipes:[P.d],encapsulation:2}),CoreTagIndexPage})();const C=[{path:\"\",component:b},i.CoreTagIndexAreaRoute],y=[{path:\"\",component:b,children:[i.CoreTagIndexAreaRoute]}],v=[...Object(o.c)(C,(()=>r.a.isMobile)),...Object(o.c)(y,(()=>r.a.isTablet))];let D=(()=>{class CoreTagIndexPageModule{}return CoreTagIndexPageModule.ɵmod=h.wc({type:CoreTagIndexPageModule}),CoreTagIndexPageModule.ɵinj=h.vc({factory:function CoreTagIndexPageModule_Factory(e){return new(e||CoreTagIndexPageModule)},imports:[[n.m.forChild(v),c.a],n.m]}),CoreTagIndexPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&h.kd(D,{declarations:[b],imports:[n.m,c.a],exports:[n.m]}))}}]);","name":"124.a225fe7a70eadde28cb1.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[124],{\n\n/***/ \"Jn5w\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"CoreTagIndexPageModule\", function() { return /* binding */ index_page_module_CoreTagIndexPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/app/app-routing.module.ts\nvar app_routing_module = __webpack_require__(\"vY5A\");\n\n// EXTERNAL MODULE: ./src/core/features/tag/tag-lazy.module.ts\nvar tag_lazy_module = __webpack_require__(\"fg4u\");\n\n// EXTERNAL MODULE: ./src/core/services/screen.ts\nvar screen = __webpack_require__(\"Y+03\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/features/tag/services/tag.ts\nvar tag = __webpack_require__(\"kWmn\");\n\n// EXTERNAL MODULE: ./src/core/features/tag/services/tag-area-delegate.ts\nvar tag_area_delegate = __webpack_require__(\"J82s\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/split-view/split-view.ts\nvar split_view = __webpack_require__(\"46ml\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/components/empty-box/empty-box.ts\nvar empty_box = __webpack_require__(\"r8G5\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/core/features/tag/pages/index/index.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction CoreTagIndexPage_ion_list_15_ion_item_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 9);\n        core[\"zc\" /* ɵɵelement */](1, \"ion-icon\", 10);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\", 11);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](4, 1, \"core.tag.warningareasnotsupported\"));\n    }\n}\nconst _c0 = function (a0) { return { count: a0 }; };\nfunction CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-badge\", 14);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"span\", 15);\n        core[\"pd\" /* ɵɵtext */](2);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](3, \"span\", 16);\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const area_r4 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"qd\" /* ɵɵtextInterpolate */](area_r4.badge);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Rc\" /* ɵɵpipeBind2 */](5, 2, \"core.tag.tagareabadgedescription\", core[\"ad\" /* ɵɵpureFunction1 */](5, _c0, area_r4.badge)));\n    }\n}\nfunction CoreTagIndexPage_ion_list_15_ion_item_2_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r8 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 12);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function CoreTagIndexPage_ion_list_15_ion_item_2_Template_ion_item_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r8); const area_r4 = ctx.$implicit; const ctx_r7 = core[\"Oc\" /* ɵɵnextContext */](2); return ctx_r7.openArea(area_r4); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"h2\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, CoreTagIndexPage_ion_list_15_ion_item_2_ion_badge_6_Template, 6, 7, \"ion-badge\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const area_r4 = ctx.$implicit;\n        const ctx_r3 = core[\"Oc\" /* ɵɵnextContext */](2);\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 4, area_r4.nameKey))(\"aria-current\", area_r4.id == ctx_r3.selectedAreaId ? \"page\" : \"false\");\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 6, area_r4.nameKey));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", area_r4.badge);\n    }\n}\nfunction CoreTagIndexPage_ion_list_15_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-list\");\n        core[\"nd\" /* ɵɵtemplate */](1, CoreTagIndexPage_ion_list_15_ion_item_1_Template, 5, 3, \"ion-item\", 7);\n        core[\"nd\" /* ɵɵtemplate */](2, CoreTagIndexPage_ion_list_15_ion_item_2_Template, 7, 8, \"ion-item\", 8);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r0.hasUnsupportedAreas);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx_r0.areas);\n    }\n}\nconst _c1 = function (a0) { return { $a: a0 }; };\nfunction CoreTagIndexPage_core_empty_box_16_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-empty-box\", 17);\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n    }\n    if (rf & 2) {\n        const ctx_r1 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"message\", core[\"Rc\" /* ɵɵpipeBind2 */](1, 1, \"core.tag.noresultsfor\", core[\"ad\" /* ɵɵpureFunction1 */](4, _c1, ctx_r1.tagName)));\n    }\n}\n/**\n * Page that displays the tag index.\n */\nlet index_page_CoreTagIndexPage = /*@__PURE__*/ (() => {\n    class CoreTagIndexPage {\n        constructor() {\n            this.tagId = 0;\n            this.tagName = '';\n            this.collectionId = 0;\n            this.areaId = 0;\n            this.fromContextId = 0;\n            this.contextId = 0;\n            this.recursive = true;\n            this.loaded = false;\n            this.hasUnsupportedAreas = false;\n            this.areas = [];\n        }\n        /**\n         * View loaded.\n         */\n        ngOnInit() {\n            var _a;\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.tagId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('tagId') || this.tagId;\n                this.tagName = services_navigator[\"a\" /* CoreNavigator */].getRouteParam('tagName') || this.tagName;\n                this.collectionId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('collectionId') || this.collectionId;\n                this.areaId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('areaId') || this.areaId;\n                this.fromContextId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('fromContextId') || this.fromContextId;\n                this.contextId = services_navigator[\"a\" /* CoreNavigator */].getRouteNumberParam('contextId') || this.contextId;\n                this.recursive = (_a = services_navigator[\"a\" /* CoreNavigator */].getRouteBooleanParam('recursive')) !== null && _a !== void 0 ? _a : true;\n                try {\n                    yield this.fetchData();\n                    if (screen[\"a\" /* CoreScreen */].isTablet && this.areas && this.areas.length > 0) {\n                        const area = this.areas.find((area) => area.id == this.areaId);\n                        this.openArea(area || this.areas[0]);\n                    }\n                }\n                finally {\n                    this.loaded = true;\n                }\n            });\n        }\n        /**\n         * Fetch first page of tag index per area.\n         *\n         * @return Resolved when done.\n         */\n        fetchData() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    const areas = yield tag[\"a\" /* CoreTag */].getTagIndexPerArea(this.tagId, this.tagName, this.collectionId, this.areaId, this.fromContextId, this.contextId, this.recursive, 0);\n                    this.areas = [];\n                    this.hasUnsupportedAreas = false;\n                    const areasDisplay = [];\n                    yield Promise.all(areas.map((area) => Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                        const items = yield tag_area_delegate[\"a\" /* CoreTagAreaDelegate */].parseContent(area.component, area.itemtype, area.content);\n                        if (!items || !items.length) {\n                            // Tag area not supported, skip.\n                            this.hasUnsupportedAreas = true;\n                            return;\n                        }\n                        areasDisplay.push({\n                            id: area.ta,\n                            componentName: area.component,\n                            itemType: area.itemtype,\n                            nameKey: tag_area_delegate[\"a\" /* CoreTagAreaDelegate */].getDisplayNameKey(area.component, area.itemtype),\n                            items,\n                            canLoadMore: !!area.nextpageurl,\n                            badge: items && items.length ? items.length + (area.nextpageurl ? '+' : '') : '',\n                        });\n                    })));\n                    this.areas = areasDisplay;\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error loading tag index');\n                }\n            });\n        }\n        /**\n         * Refresh data.\n         *\n         * @param refresher Refresher.\n         */\n        refreshData(refresher) {\n            tag[\"a\" /* CoreTag */].invalidateTagIndexPerArea(this.tagId, this.tagName, this.collectionId, this.areaId, this.fromContextId, this.contextId, this.recursive).finally(() => {\n                this.fetchData().finally(() => {\n                    refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n                });\n            });\n        }\n        /**\n         * Navigate to an index area.\n         *\n         * @param area Area.\n         */\n        openArea(area) {\n            this.selectedAreaId = area.id;\n            const params = {\n                tagId: this.tagId,\n                tagName: this.tagName,\n                collectionId: this.collectionId,\n                areaId: area.id,\n                fromContextId: this.fromContextId,\n                contextId: this.contextId,\n                recursive: this.recursive,\n                areaNameKey: area.nameKey,\n                componentName: area.componentName,\n                itemType: area.itemType,\n                items: area.items.slice(),\n                canLoadMore: area.canLoadMore,\n                nextPage: 1,\n            };\n            const splitViewLoaded = services_navigator[\"a\" /* CoreNavigator */].isCurrentPathInTablet('**/tag/index/index-area');\n            const path = (splitViewLoaded ? '../' : '') + 'index-area';\n            services_navigator[\"a\" /* CoreNavigator */].navigate(path, { params });\n        }\n    }\n    CoreTagIndexPage.ɵfac = function CoreTagIndexPage_Factory(t) { return new (t || CoreTagIndexPage)(); };\n    CoreTagIndexPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: CoreTagIndexPage, selectors: [[\"page-core-tag-index\"]], decls: 17, vars: 14, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [4, \"ngIf\"], [\"icon\", \"fas-tag\", 3, \"message\", 4, \"ngIf\"], [\"class\", \"core-warning-item\", 4, \"ngIf\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", \"detail\", \"true\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [1, \"core-warning-item\"], [\"slot\", \"start\", \"name\", \"fas-exclamation-triangle\", \"color\", \"warning\", \"aria-hidden\", \"true\"], [1, \"ion-text-wrap\"], [\"button\", \"\", \"detail\", \"true\", 1, \"ion-text-wrap\", 3, \"click\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"slot\", \"end\"], [\"aria-hidden\", \"true\"], [1, \"sr-only\"], [\"icon\", \"fas-tag\", 3, \"message\"]], template: function CoreTagIndexPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"pd\" /* ɵɵtext */](7);\n                core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](10, \"core-split-view\");\n                core[\"Ec\" /* ɵɵelementStart */](11, \"ion-refresher\", 2);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function CoreTagIndexPage_Template_ion_refresher_ionRefresh_11_listener($event) { return ctx.refreshData($event.target); });\n                core[\"zc\" /* ɵɵelement */](12, \"ion-refresher-content\", 3);\n                core[\"Pc\" /* ɵɵpipe */](13, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](14, \"core-loading\", 4);\n                core[\"nd\" /* ɵɵtemplate */](15, CoreTagIndexPage_ion_list_15_Template, 3, 2, \"ion-list\", 5);\n                core[\"nd\" /* ɵɵtemplate */](16, CoreTagIndexPage_core_empty_box_16_Template, 2, 6, \"core-empty-box\", 6);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 8, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"sd\" /* ɵɵtextInterpolate2 */](\"\", core[\"Qc\" /* ɵɵpipeBind1 */](8, 10, \"core.tag.tag\"), \": \", ctx.tagName, \"\");\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](13, 12, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.hasUnsupportedAreas || ctx.areas.length);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !ctx.hasUnsupportedAreas && (!ctx.areas || !ctx.areas.length));\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], split_view[\"a\" /* CoreSplitViewComponent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], common[\"t\" /* NgIf */], ionic_angular[\"P\" /* IonList */], common[\"s\" /* NgForOf */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], ionic_angular[\"O\" /* IonLabel */], ionic_angular[\"k\" /* IonBadge */], empty_box[\"a\" /* CoreEmptyBoxComponent */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], encapsulation: 2 });\n    return CoreTagIndexPage;\n})();\n\n// CONCATENATED MODULE: ./src/core/features/tag/pages/index/index.page.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\nconst mobileRoutes = [\n    {\n        path: '',\n        component: index_page_CoreTagIndexPage,\n    },\n    tag_lazy_module[\"CoreTagIndexAreaRoute\"],\n];\nconst tabletRoutes = [\n    {\n        path: '',\n        component: index_page_CoreTagIndexPage,\n        children: [\n            tag_lazy_module[\"CoreTagIndexAreaRoute\"],\n        ],\n    },\n];\nconst routes = [\n    ...Object(app_routing_module[\"c\" /* conditionalRoutes */])(mobileRoutes, () => screen[\"a\" /* CoreScreen */].isMobile),\n    ...Object(app_routing_module[\"c\" /* conditionalRoutes */])(tabletRoutes, () => screen[\"a\" /* CoreScreen */].isTablet),\n];\nlet index_page_module_CoreTagIndexPageModule = /*@__PURE__*/ (() => {\n    class CoreTagIndexPageModule {\n    }\n    CoreTagIndexPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: CoreTagIndexPageModule });\n    CoreTagIndexPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function CoreTagIndexPageModule_Factory(t) { return new (t || CoreTagIndexPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return CoreTagIndexPageModule;\n})();\n(function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](index_page_module_CoreTagIndexPageModule, { declarations: [index_page_CoreTagIndexPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */]], exports: [router[\"m\" /* RouterModule */]] }); })();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}