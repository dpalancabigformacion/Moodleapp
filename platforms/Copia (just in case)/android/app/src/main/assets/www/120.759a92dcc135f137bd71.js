(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{IUk5:function(e,n,t){"use strict";t.r(n),t.d(n,"CoreSiteHomeIndexPageModule",(function(){return L}));var o=t("tyNb"),i=t("L3Fv"),c=t("5p9q"),a=t("Fjfc"),_=t("mrSG"),r=t("ULAo"),s=t("3LXp"),l=t("9+EE"),g=t("SV+s"),d=t("Xzvb"),m=t("fjkH"),u=t("GBcW"),p=t("yQ+R"),C=t("zbKZ"),h=t("pHTc"),S=t("0NpS"),f=t("bFG1"),I=t("fXoL"),x=t("ACV2"),P=t("ofXK"),H=t("nt/U"),T=t("TEn/"),b=t("PgjG"),v=t("ACYt"),O=t("3CSS"),E=t("hMzs"),y=t("1Y1L"),M=t("nEkO"),k=t("aSim"),w=t("r8G5"),D=t("sYmb");function CoreSiteHomeIndexPage_ion_button_1_Template(e,n){if(1&e){const e=I.Fc();I.Ec(0,"ion-button",14),I.Mc("click",(function CoreSiteHomeIndexPage_ion_button_1_Template_ion_button_click_0_listener(){I.fd(e);return I.Oc().openSearch()})),I.Pc(1,"translate"),I.zc(2,"ion-icon",15),I.Dc()}2&e&&I.mc("aria-label",I.Qc(1,1,"core.courses.searchcourses"))}function CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template(e,n){if(1&e&&(I.Ec(0,"ion-item",18),I.Ec(1,"ion-label"),I.zc(2,"core-format-text",19),I.Dc(),I.Dc()),2&e){const e=I.Oc(2);I.lc(2),I.Vc("text",e.section.summary)("contextInstanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template(e,n){if(1&e&&I.zc(0,"core-course-module",20),2&e){const e=n.$implicit,t=I.Oc(2);I.Vc("module",e)("section",t.section)}}function CoreSiteHomeIndexPage_ng_container_8_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_8_ion_item_1_Template,3,2,"ion-item",16),I.nd(2,CoreSiteHomeIndexPage_ng_container_8_core_course_module_2_Template,1,2,"core-course-module",17),I.Bc()),2&e){const e=I.Oc();I.lc(1),I.Vc("ngIf",e.section.summary),I.lc(1),I.Vc("ngForOf",e.section.modules)}}function CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template(e,n){1&e&&I.zc(0,"core-spacer")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template(e,n){1&e&&I.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_1_Template,1,0,void 0,24),I.Bc()),2&e){I.Oc(3);const e=I.ed(13);I.lc(1),I.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template(e,n){1&e&&I.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_1_Template,1,0,void 0,24),I.Bc()),2&e){I.Oc(3);const e=I.ed(17);I.lc(1),I.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template(e,n){1&e&&I.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_1_Template,1,0,void 0,24),I.Bc()),2&e){I.Oc(3);const e=I.ed(21);I.lc(1),I.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template(e,n){1&e&&I.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_1_Template,1,0,void 0,24),I.Bc()),2&e){I.Oc(3);const e=I.ed(19);I.lc(1),I.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template(e,n){}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template(e,n){1&e&&I.nd(0,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_ng_template_0_Template,0,0,"ng-template")}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_1_Template,1,0,void 0,24),I.Bc()),2&e){I.Oc(3);const e=I.ed(15);I.lc(1),I.Vc("ngTemplateOutlet",e)}}function CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template(e,n){if(1&e&&(I.Cc(0),I.Cc(1,22),I.nd(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_2_Template,2,1,"ng-container",23),I.nd(3,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_3_Template,2,1,"ng-container",23),I.nd(4,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_4_Template,2,1,"ng-container",23),I.nd(5,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_5_Template,2,1,"ng-container",23),I.nd(6,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_ng_container_6_Template,2,1,"ng-container",23),I.Bc(),I.Bc()),2&e){const e=n.$implicit;I.lc(1),I.Vc("ngSwitch",e),I.lc(1),I.Vc("ngSwitchCase","LIST_OF_COURSE"),I.lc(1),I.Vc("ngSwitchCase","LIST_OF_CATEGORIES"),I.lc(1),I.Vc("ngSwitchCase","COURSE_SEARCH_BOX"),I.lc(1),I.Vc("ngSwitchCase","ENROLLED_COURSES"),I.lc(1),I.Vc("ngSwitchCase","NEWS_ITEMS")}}function CoreSiteHomeIndexPage_ng_container_9_Template(e,n){if(1&e&&(I.Cc(0),I.nd(1,CoreSiteHomeIndexPage_ng_container_9_core_spacer_1_Template,1,0,"core-spacer",6),I.nd(2,CoreSiteHomeIndexPage_ng_container_9_ng_container_2_Template,7,6,"ng-container",21),I.Bc()),2&e){const e=I.Oc();I.lc(1),I.Vc("ngIf",e.section&&e.section.hasContent),I.lc(1),I.Vc("ngForOf",e.items)}}function CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template(e,n){if(1&e&&I.zc(0,"core-block-side-blocks-button",25),2&e){const e=I.Oc();I.Vc("instanceId",e.siteHomeId)}}function CoreSiteHomeIndexPage_core_empty_box_11_Template(e,n){1&e&&(I.zc(0,"core-empty-box",26),I.Pc(1,"translate")),2&e&&I.Vc("message",I.Qc(1,1,"core.course.nocontentavailable"))}function CoreSiteHomeIndexPage_ng_template_12_Template(e,n){if(1&e){const e=I.Fc();I.Ec(0,"ion-card"),I.Ec(1,"ion-item",27),I.Mc("click",(function CoreSiteHomeIndexPage_ng_template_12_Template_ion_item_click_1_listener(){I.fd(e);return I.Oc().openAvailableCourses()})),I.zc(2,"ion-icon",28),I.Ec(3,"ion-label"),I.Ec(4,"h2"),I.pd(5),I.Pc(6,"translate"),I.Dc(),I.Dc(),I.Dc(),I.Dc()}2&e&&(I.lc(5),I.qd(I.Qc(6,1,"core.courses.availablecourses")))}function CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template(e,n){if(1&e&&I.zc(0,"core-course-module",30),2&e){const e=I.Oc(2);I.Vc("module",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_14_Template(e,n){if(1&e&&I.nd(0,CoreSiteHomeIndexPage_ng_template_14_core_course_module_0_Template,1,1,"core-course-module",29),2&e){const e=I.Oc();I.Vc("ngIf",e.newsForumModule)}}function CoreSiteHomeIndexPage_ng_template_16_Template(e,n){if(1&e){const e=I.Fc();I.Ec(0,"ion-card"),I.Ec(1,"ion-item",27),I.Mc("click",(function CoreSiteHomeIndexPage_ng_template_16_Template_ion_item_click_1_listener(){I.fd(e);return I.Oc().openCourseCategories()})),I.zc(2,"ion-icon",31),I.Ec(3,"ion-label"),I.Ec(4,"h2"),I.pd(5),I.Pc(6,"translate"),I.Dc(),I.Dc(),I.Dc(),I.Dc()}2&e&&(I.lc(5),I.qd(I.Qc(6,1,"core.courses.categories")))}function CoreSiteHomeIndexPage_ng_template_18_Template(e,n){if(1&e){const e=I.Fc();I.Ec(0,"ion-card"),I.Ec(1,"ion-item",27),I.Mc("click",(function CoreSiteHomeIndexPage_ng_template_18_Template_ion_item_click_1_listener(){I.fd(e);return I.Oc().openMyCourses()})),I.zc(2,"ion-icon",28),I.Ec(3,"ion-label"),I.Ec(4,"h2"),I.pd(5),I.Pc(6,"translate"),I.Dc(),I.Dc(),I.Dc(),I.Dc()}2&e&&(I.lc(5),I.qd(I.Qc(6,1,"core.courses.mycourses")))}function CoreSiteHomeIndexPage_ng_template_20_Template(e,n){if(1&e){const e=I.Fc();I.Ec(0,"ion-card"),I.Ec(1,"ion-item",27),I.Mc("click",(function CoreSiteHomeIndexPage_ng_template_20_Template_ion_item_click_1_listener(){I.fd(e);return I.Oc().openSearch()})),I.zc(2,"ion-icon",32),I.Ec(3,"ion-label"),I.Ec(4,"h2"),I.pd(5),I.Pc(6,"translate"),I.Dc(),I.Dc(),I.Dc(),I.Dc()}2&e&&(I.lc(5),I.qd(I.Qc(6,1,"core.courses.searchcourses")))}let V=(()=>{class CoreSiteHomeIndexPage{constructor(){this.dataLoaded=!1,this.hasContent=!1,this.hasBlocks=!1,this.items=[],this.siteHomeId=1,this.searchEnabled=!1,this.fetchSuccess=!1,this.updateSiteObserver=m.b.on(m.b.SITE_UPDATED,(()=>{this.searchEnabled=!d.a.isSearchCoursesDisabledInSite()}),l.b.getCurrentSiteId())}ngOnInit(){this.searchEnabled=!d.a.isSearchCoursesDisabledInSite(),this.currentSite=l.b.getRequiredCurrentSite(),this.siteHomeId=l.b.getCurrentSiteHomeId();const e=h.a.getRouteParam("module");if(e){let n=h.a.getRouteParam("modNavOptions");if(!n){const e=h.a.getRouteParam("modParams");e&&(n={params:e})}u.a.openModule(e,this.siteHomeId,{modNavOptions:n})}this.loadContent().finally((()=>{this.dataLoaded=!0}))}loadContent(){var e;return Object(_.a)(this,void 0,void 0,(function*(){this.hasContent=!1;const n=this.currentSite.getStoredConfig()||{numsections:1,frontpageloggedin:void 0};if(this.items=yield g.a.getFrontPageItems(n.frontpageloggedin),this.hasContent=this.items.length>0,this.items.includes("NEWS_ITEMS"))try{const e=yield g.a.getNewsForum(this.siteHomeId);this.newsForumModule=yield r.a.getModule(e.cmid,e.course),this.newsForumModule.handlerData=yield p.a.getModuleDataFor(this.newsForumModule.modname,this.newsForumModule,this.siteHomeId,void 0,!0)}catch(e){}try{const t=yield r.a.getSections(this.siteHomeId,!1,!0);if(this.section=n.numsections?t.find((e=>1==e.section)):void 0,this.section){const e=yield u.a.addHandlerDataForModules([this.section],this.siteHomeId,void 0,void 0,!0);this.section.hasContent=e.hasContent,this.hasContent=e.hasContent||this.hasContent}this.fetchSuccess||(this.fetchSuccess=!0,f.a.ignoreErrors(r.a.logView(this.siteHomeId,void 0,void 0,null===(e=this.currentSite.getInfo())||void 0===e?void 0:e.sitename)))}catch(e){s.a.showErrorModalDefault(e,"core.course.couldnotloadsectioncontent",!0)}this.hasBlocks=yield S.a.hasCourseBlocks(this.siteHomeId)}))}doRefresh(e){const n=[];n.push(r.a.invalidateSections(this.siteHomeId)),n.push(this.currentSite.invalidateConfig().then((()=>Object(_.a)(this,void 0,void 0,(function*(){const e=yield this.currentSite.getConfig();this.currentSite.setConfig(e)}))))),n.push(r.a.invalidateCourseBlocks(this.siteHomeId)),this.section&&this.section.modules&&n.push(C.a.invalidateModules(this.section.modules,this.siteHomeId)),Promise.all(n).finally((()=>Object(_.a)(this,void 0,void 0,(function*(){yield this.loadContent().finally((()=>{null==e?void 0:e.complete()}))}))))}openSearch(){h.a.navigateToSitePath("courses/list",{params:{mode:"search"}})}openAvailableCourses(){h.a.navigateToSitePath("courses/list",{params:{mode:"all"}})}openMyCourses(){h.a.navigateToSitePath("courses/list",{params:{mode:"my"}})}openCourseCategories(){h.a.navigateToSitePath("courses/categories")}ngOnDestroy(){this.updateSiteObserver.off()}}return CoreSiteHomeIndexPage.ɵfac=function CoreSiteHomeIndexPage_Factory(e){return new(e||CoreSiteHomeIndexPage)},CoreSiteHomeIndexPage.ɵcmp=I.sc({type:CoreSiteHomeIndexPage,selectors:[["page-core-sitehome-index"]],decls:22,vars:10,consts:[["slot","end","prepend",""],[3,"click",4,"ngIf"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"core-course-module-list-wrapper"],[4,"ngIf"],["slot","fixed","contextLevel","course",3,"instanceId",4,"ngIf"],["icon","fas-box-open",3,"message",4,"ngIf"],["allCourseList",""],["news",""],["categories",""],["enrolledCourseList",""],["courseSearch",""],[3,"click"],["name","fas-search","slot","icon-only","aria-hidden","true"],["class","ion-text-wrap",4,"ngIf"],[3,"module","section",4,"ngFor","ngForOf"],[1,"ion-text-wrap"],["contextLevel","course",3,"text","contextInstanceId"],[3,"module","section"],[4,"ngFor","ngForOf"],[3,"ngSwitch"],[4,"ngSwitchCase"],[4,"ngTemplateOutlet"],["slot","fixed","contextLevel","course",3,"instanceId"],["icon","fas-box-open",3,"message"],["button","",1,"ion-text-wrap",3,"click"],["name","fas-graduation-cap","fixed-width","","slot","start","aria-hidden","true"],["class","core-sitehome-news",3,"module",4,"ngIf"],[1,"core-sitehome-news",3,"module"],["name","fas-folder","slot","start","aria-hidden","true"],["name","fas-search","slot","start","aria-hidden","true"]],template:function CoreSiteHomeIndexPage_Template(e,n){1&e&&(I.Ec(0,"core-navbar-buttons",0),I.nd(1,CoreSiteHomeIndexPage_ion_button_1_Template,3,3,"ion-button",1),I.Dc(),I.Ec(2,"ion-content"),I.Ec(3,"ion-refresher",2),I.Mc("ionRefresh",(function CoreSiteHomeIndexPage_Template_ion_refresher_ionRefresh_3_listener(e){return n.doRefresh(e.target)})),I.zc(4,"ion-refresher-content",3),I.Pc(5,"translate"),I.Dc(),I.Ec(6,"core-loading",4),I.Ec(7,"ion-list",5),I.nd(8,CoreSiteHomeIndexPage_ng_container_8_Template,3,2,"ng-container",6),I.nd(9,CoreSiteHomeIndexPage_ng_container_9_Template,3,2,"ng-container",6),I.Dc(),I.nd(10,CoreSiteHomeIndexPage_core_block_side_blocks_button_10_Template,1,1,"core-block-side-blocks-button",7),I.nd(11,CoreSiteHomeIndexPage_core_empty_box_11_Template,2,3,"core-empty-box",8),I.Dc(),I.Dc(),I.nd(12,CoreSiteHomeIndexPage_ng_template_12_Template,7,3,"ng-template",null,9,I.od),I.nd(14,CoreSiteHomeIndexPage_ng_template_14_Template,1,1,"ng-template",null,10,I.od),I.nd(16,CoreSiteHomeIndexPage_ng_template_16_Template,7,3,"ng-template",null,11,I.od),I.nd(18,CoreSiteHomeIndexPage_ng_template_18_Template,7,3,"ng-template",null,12,I.od),I.nd(20,CoreSiteHomeIndexPage_ng_template_20_Template,7,3,"ng-template",null,13,I.od)),2&e&&(I.lc(1),I.Vc("ngIf",n.searchEnabled),I.lc(2),I.Vc("disabled",!n.dataLoaded),I.lc(1),I.Wc("pullingText",I.Qc(5,8,"core.pulltorefresh")),I.lc(2),I.Vc("hideUntil",n.dataLoaded),I.lc(2),I.Vc("ngIf",n.section&&n.section.hasContent),I.lc(1),I.Vc("ngIf",n.items.length>0),I.lc(1),I.Vc("ngIf",n.hasBlocks),I.lc(1),I.Vc("ngIf",!n.hasContent))},directives:[x.a,P.t,H.a,T.v,T.bb,T.cb,b.a,T.P,v.a,T.l,T.D,O.a,P.s,T.I,T.O,E.a,y.a,M.a,P.x,P.y,P.A,k.a,w.a,T.n],pipes:[D.d],styles:["ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{display:inline-block;border-radius:var(--module-icon-radius);padding:.7rem;background-color:var(--gray-100);color:var(--gray-900);line-height:var(--size);--margin-end:1rem;margin-right:var(--margin-end)}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:var(--margin-end);margin-inline-end:var(--margin-end)}}core-spacer[_ngcontent-%COMP%]{--spacer-horizontal:10px}"]}),CoreSiteHomeIndexPage})();const F=[{path:"",component:V}];let L=(()=>{class CoreSiteHomeIndexPageModule{}return CoreSiteHomeIndexPageModule.ɵmod=I.wc({type:CoreSiteHomeIndexPageModule}),CoreSiteHomeIndexPageModule.ɵinj=I.vc({factory:function CoreSiteHomeIndexPageModule_Factory(e){return new(e||CoreSiteHomeIndexPageModule)},imports:[[o.m.forChild(F),i.a,c.a,a.a],o.m]}),CoreSiteHomeIndexPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&I.kd(L,{declarations:[V],imports:[o.m,i.a,c.a,a.a],exports:[o.m]}))}}]);