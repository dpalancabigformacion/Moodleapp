(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"2ACH":function(e,t,n){"use strict";n.d(t,"a",(function(){return AddonCompetencyCourseCompetenciesSource}));var c=n("mrSG"),o=n("CvRw"),i=n("bFG1"),a=n("FBtE"),r=n("qjHM");class AddonCompetencyCourseCompetenciesSource extends o.a{constructor(e,t){super(),this.COURSE_ID=e,this.USER_ID=t}static getSourceId(e,t){return`${e}-${t||"current-user"}`}getItemPath(e){return String(e.competency.id)}load(){const e=Object.create(null,{load:{get:()=>super.load}});return Object(c.a)(this,void 0,void 0,(function*(){!this.dirty&&this.courseCompetencies||(yield this.loadCourseCompetencies()),yield e.load.call(this)}))}invalidateCache(){return Object(c.a)(this,void 0,void 0,(function*(){yield i.a.ignoreErrors(a.a.invalidateCourseCompetencies(this.COURSE_ID,this.USER_ID))}))}loadPageItems(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.courseCompetencies)throw new Error("Can't load competencies without course data");return{items:this.courseCompetencies.competencies}}))}loadCourseCompetencies(){return Object(c.a)(this,void 0,void 0,(function*(){[this.courseCompetencies,this.user]=yield Promise.all([a.a.getCourseCompetencies(this.COURSE_ID,this.USER_ID),r.a.getProfile(this.USER_ID)])}))}}},"47DI":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var c=n("mrSG"),o=n("3LXp"),i=n("46ml"),a=n("j3ag"),r=n("pHTc"),d=n("93ts"),m=n("l4/z"),p=n("2ACH"),s=n("EoRH"),l=n("baaQ"),_=n("fXoL"),y=n("TEn/"),u=n("nt/U"),g=n("PgjG"),C=n("ofXK"),f=n("sYmb");function AddonCompetencyCompetenciesPage_ion_item_15_ion_badge_6_Template(e,t){if(1&e&&(_.Ec(0,"ion-badge",9),_.pd(1),_.Dc()),2&e){const e=_.Oc().$implicit;_.Vc("color",e.usercompetency.proficiency?"success":"danger"),_.lc(1),_.rd(" ",e.usercompetency.gradename," ")}}function AddonCompetencyCompetenciesPage_ion_item_15_ion_badge_7_Template(e,t){if(1&e&&(_.Ec(0,"ion-badge",9),_.pd(1),_.Dc()),2&e){const e=_.Oc().$implicit;_.Vc("color",e.usercompetencycourse.proficiency?"success":"danger"),_.lc(1),_.rd(" ",e.usercompetencycourse.gradename," ")}}function AddonCompetencyCompetenciesPage_ion_item_15_Template(e,t){if(1&e){const e=_.Fc();_.Ec(0,"ion-item",6),_.Mc("click",(function AddonCompetencyCompetenciesPage_ion_item_15_Template_ion_item_click_0_listener(){_.fd(e);const n=t.$implicit;return _.Oc().competencies.select(n)})),_.Ec(1,"ion-label"),_.Ec(2,"p",7),_.pd(3),_.Ec(4,"em"),_.pd(5),_.Dc(),_.Dc(),_.Dc(),_.nd(6,AddonCompetencyCompetenciesPage_ion_item_15_ion_badge_6_Template,2,2,"ion-badge",8),_.nd(7,AddonCompetencyCompetenciesPage_ion_item_15_ion_badge_7_Template,2,2,"ion-badge",8),_.Dc()}if(2&e){const e=t.$implicit,n=_.Oc();_.mc("aria-label",e.competency.shortname)("aria-current",n.competencies.getItemAriaCurrent(e)),_.lc(3),_.rd("",e.competency.shortname," "),_.lc(2),_.qd(e.competency.idnumber),_.lc(1),_.Vc("ngIf",e.usercompetency),_.lc(1),_.Vc("ngIf",e.usercompetencycourse)}}let h=(()=>{class AddonCompetencyCompetenciesPage{constructor(){this.title="";const e=r.a.getRouteNumberParam("planId");if(!e){const e=r.a.getRequiredRouteNumberParam("courseId"),t=r.a.getRouteNumberParam("userId"),n=l.a.getOrCreateSource(p.a,[e,t]);return this.competencies=new s.a(n,AddonCompetencyCompetenciesPage),void 0}const t=l.a.getOrCreateSource(m.a,[e]);this.competencies=new s.a(t,AddonCompetencyCompetenciesPage)}ngAfterViewInit(){return Object(c.a)(this,void 0,void 0,(function*(){yield this.fetchCompetencies(),this.competencies.start(this.splitView)}))}fetchCompetencies(){return Object(c.a)(this,void 0,void 0,(function*(){try{const e=this.competencies.getSource();if(yield this.competencies.load(),e instanceof m.a){if(!e.plan||e.plan&&e.plan.competencycount<=0)throw new d.a(a.J.instant("addon.competency.errornocompetenciesfound"));this.title=e.plan.plan.name}else this.title=a.J.instant("addon.competency.coursecompetencies")}catch(e){o.a.showErrorModalDefault(e,"Error getting competencies data.")}}))}refreshCompetencies(e){return Object(c.a)(this,void 0,void 0,(function*(){yield this.competencies.getSource().invalidateCache(),this.competencies.getSource().setDirty(!0),this.fetchCompetencies().finally((()=>{null==e?void 0:e.complete()}))}))}ngOnDestroy(){this.competencies.destroy()}}return AddonCompetencyCompetenciesPage.ɵfac=function AddonCompetencyCompetenciesPage_Factory(e){return new(e||AddonCompetencyCompetenciesPage)},AddonCompetencyCompetenciesPage.ɵcmp=_.sc({type:AddonCompetencyCompetenciesPage,selectors:[["page-addon-competency-competencies"]],viewQuery:function AddonCompetencyCompetenciesPage_Query(e,t){var n;(1&e&&_.ud(i.a,!0),2&e)&&(_.dd(n=_.Nc())&&(t.splitView=n.first))},decls:16,vars:10,consts:[["slot","start"],[3,"text"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["class","ion-text-wrap","button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",1,"ion-text-wrap",3,"click"],[1,"item-heading"],["slot","end",3,"color",4,"ngIf"],["slot","end",3,"color"]],template:function AddonCompetencyCompetenciesPage_Template(e,t){1&e&&(_.Ec(0,"ion-header"),_.Ec(1,"ion-toolbar"),_.Ec(2,"ion-buttons",0),_.zc(3,"ion-back-button",1),_.Pc(4,"translate"),_.Dc(),_.Ec(5,"ion-title"),_.Ec(6,"h1"),_.pd(7),_.Dc(),_.Dc(),_.Dc(),_.Dc(),_.Ec(8,"ion-content"),_.Ec(9,"core-split-view"),_.Ec(10,"ion-refresher",2),_.Mc("ionRefresh",(function AddonCompetencyCompetenciesPage_Template_ion_refresher_ionRefresh_10_listener(e){return t.refreshCompetencies(e.target)})),_.zc(11,"ion-refresher-content",3),_.Pc(12,"translate"),_.Dc(),_.Ec(13,"core-loading",4),_.Ec(14,"ion-list"),_.nd(15,AddonCompetencyCompetenciesPage_ion_item_15_Template,8,6,"ion-item",5),_.Dc(),_.Dc(),_.Dc(),_.Dc()),2&e&&(_.lc(3),_.Vc("text",_.Qc(4,6,"core.back")),_.lc(4),_.qd(t.title),_.lc(3),_.Vc("disabled",!t.competencies.loaded),_.lc(1),_.Wc("pullingText",_.Qc(12,8,"core.pulltorefresh")),_.lc(2),_.Vc("hideUntil",t.competencies.loaded),_.lc(2),_.Vc("ngForOf",t.competencies.items))},directives:[y.C,y.Ab,y.m,y.h,y.i,y.yb,u.a,y.v,i.a,y.bb,y.cb,g.a,y.P,C.s,y.I,y.O,C.t,y.k],pipes:[f.d],encapsulation:2}),AddonCompetencyCompetenciesPage})()},"7Dkd":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("L3Fv"),o=n("vgj2"),i=n("fXoL");let a=(()=>{class AddonCompetencyCompetencySummaryPageModule{}return AddonCompetencyCompetencySummaryPageModule.ɵmod=i.wc({type:AddonCompetencyCompetencySummaryPageModule}),AddonCompetencyCompetencySummaryPageModule.ɵinj=i.vc({factory:function AddonCompetencyCompetencySummaryPageModule_Factory(e){return new(e||AddonCompetencyCompetencySummaryPageModule)},imports:[[c.a]]}),AddonCompetencyCompetencySummaryPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&i.kd(a,{declarations:[o.a],imports:[c.a]}))},H4nd:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("L3Fv"),o=n("47DI"),i=n("fXoL");let a=(()=>{class AddonCompetencyCompetenciesPageModule{}return AddonCompetencyCompetenciesPageModule.ɵmod=i.wc({type:AddonCompetencyCompetenciesPageModule}),AddonCompetencyCompetenciesPageModule.ɵinj=i.vc({factory:function AddonCompetencyCompetenciesPageModule_Factory(e){return new(e||AddonCompetencyCompetenciesPageModule)},imports:[[c.a]]}),AddonCompetencyCompetenciesPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&i.kd(a,{declarations:[o.a],imports:[c.a]}))},XQtJ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var c=n("L3Fv"),o=n("ZnQC"),i=n("fXoL");let a=(()=>{class AddonCompetencyCompetencyPageModule{}return AddonCompetencyCompetencyPageModule.ɵmod=i.wc({type:AddonCompetencyCompetencyPageModule}),AddonCompetencyCompetencyPageModule.ɵinj=i.vc({factory:function AddonCompetencyCompetencyPageModule_Factory(e){return new(e||AddonCompetencyCompetencyPageModule)},imports:[[c.a]]}),AddonCompetencyCompetencyPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&i.kd(a,{declarations:[o.a],imports:[c.a]}))},ZnQC:function(e,t,n){"use strict";n.d(t,"a",(function(){return O}));var c=n("mrSG"),o=n("qjHM"),i=n("9+EE"),a=n("3LXp"),r=n("j3ag"),d=n("FBtE"),m=n("pHTc"),p=n("bFG1"),s=n("RJwM"),l=n("eoiU"),_=n("baaQ"),y=n("l4/z"),u=n("2ACH"),g=n("fXoL"),C=n("TEn/"),f=n("ofXK"),h=n("nt/U"),P=n("OZH1"),I=n("PgjG"),v=n("FeAf"),A=n("hMzs"),b=n("iSJP"),E=n("eAud"),D=n("nu3w"),S=n("sYmb"),T=n("uYHD");function AddonCompetencyCompetencyPage_h1_6_Template(e,t){if(1&e&&(g.Ec(0,"h1"),g.pd(1),g.Ec(2,"small"),g.pd(3),g.Dc(),g.Dc()),2&e){const e=g.Oc();g.lc(1),g.rd(" ",e.competency.competency.competency.shortname," "),g.lc(2),g.qd(e.competency.competency.competency.idnumber)}}function AddonCompetencyCompetencyPage_ion_card_12_Template(e,t){if(1&e&&(g.Ec(0,"ion-card"),g.Ec(1,"ion-item",7),g.zc(2,"core-user-avatar",8),g.Ec(3,"ion-label"),g.Ec(4,"h2"),g.pd(5),g.Dc(),g.Dc(),g.Dc(),g.Dc()),2&e){const e=g.Oc();g.lc(2),g.Vc("user",e.user),g.lc(3),g.qd(e.user.fullname)}}function AddonCompetencyCompetencyPage_ion_card_13_ion_item_1_Template(e,t){if(1&e&&(g.Ec(0,"ion-item",7),g.Ec(1,"ion-label"),g.zc(2,"core-format-text",14),g.Dc(),g.Dc()),2&e){const e=g.Oc(2);g.lc(2),g.Vc("text",e.competency.competency.competency.description)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId)}}function AddonCompetencyCompetencyPage_ion_card_13_a_8_Template(e,t){if(1&e&&(g.Ec(0,"a",15),g.pd(1),g.Dc()),2&e){const e=g.Oc(2);g.Vc("href",e.competencyFrameworkUrl,g.id),g.lc(1),g.rd(" ",e.competency.competency.comppath.framework.name," ")}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_9_Template(e,t){if(1&e&&(g.Cc(0),g.pd(1),g.Bc()),2&e){const e=g.Oc(2);g.lc(1),g.rd(" ",e.competency.competency.comppath.framework.name," ")}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template(e,t){if(1&e){const e=g.Fc();g.Ec(0,"button",17),g.Mc("click",(function AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template_button_click_0_listener(){g.fd(e);const t=g.Oc().$implicit;return g.Oc(2).openCompetencySummary(t.id)})),g.pd(1),g.Dc()}if(2&e){const e=g.Oc().$implicit;g.lc(1),g.rd(" ",e.name," ")}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_2_Template(e,t){if(1&e&&(g.Cc(0),g.pd(1),g.Bc()),2&e){const e=g.Oc().$implicit;g.lc(1),g.qd(e.name)}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_3_Template(e,t){1&e&&(g.Cc(0),g.pd(1," / "),g.Bc())}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_Template(e,t){if(1&e&&(g.Cc(0),g.nd(1,AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_button_1_Template,2,1,"button",16),g.nd(2,AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_2_Template,2,1,"ng-container",2),g.nd(3,AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_ng_container_3_Template,2,0,"ng-container",2),g.Bc()),2&e){const e=t.$implicit,n=g.Oc(2);g.lc(1),g.Vc("ngIf",n.competency.competency.comppath.showlinks),g.lc(1),g.Vc("ngIf",!n.competency.competency.comppath.showlinks),g.lc(1),g.Vc("ngIf",!e.last)}}function AddonCompetencyCompetencyPage_ion_card_13_p_17_Template(e,t){1&e&&(g.Ec(0,"p"),g.pd(1),g.Pc(2,"translate"),g.Dc()),2&e&&(g.lc(1),g.rd(" ",g.Qc(2,1,"addon.competency.nocrossreferencedcompetencies")," "))}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template(e,t){if(1&e){const e=g.Fc();g.Ec(0,"p"),g.Ec(1,"button",17),g.Mc("click",(function AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template_button_click_1_listener(){g.fd(e);const n=t.$implicit;return g.Oc(3).openCompetencySummary(n.id)})),g.pd(2),g.Dc(),g.Dc()}if(2&e){const e=t.$implicit;g.lc(2),g.sd(" ",e.shortname," - ",e.idnumber," ")}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_Template(e,t){if(1&e&&(g.Cc(0),g.nd(1,AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_p_1_Template,3,2,"p",13),g.Bc()),2&e){const e=g.Oc(2);g.lc(1),g.Vc("ngForOf",e.competency.competency.relatedcompetencies)}}function AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_p_5_Template(e,t){1&e&&(g.Ec(0,"p"),g.pd(1),g.Pc(2,"translate"),g.Dc()),2&e&&(g.lc(1),g.rd(" ",g.Qc(2,1,"addon.competency.noactivities")," "))}function AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_core_mod_icon_1_Template(e,t){if(1&e&&g.zc(0,"core-mod-icon",22),2&e){const e=g.Oc().$implicit;g.Vc("modicon",e.iconurl)("showAlt",!1)}}function AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_Template(e,t){if(1&e&&(g.Ec(0,"ion-item",19),g.nd(1,AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_core_mod_icon_1_Template,1,2,"core-mod-icon",20),g.Ec(2,"ion-label"),g.zc(3,"core-format-text",21),g.Dc(),g.Dc()),2&e){const e=t.$implicit,n=g.Oc(3);g.Vc("href",e.url),g.mc("aria-label",e.name),g.lc(1),g.Vc("ngIf",e.iconurl),g.lc(2),g.Vc("text",e.name)("contextInstanceId",e.id)("courseId",n.courseId)}}function AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_Template(e,t){if(1&e&&(g.Ec(0,"ion-item",7),g.Ec(1,"ion-label"),g.Ec(2,"p",11),g.pd(3),g.Pc(4,"translate"),g.Dc(),g.nd(5,AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_p_5_Template,3,3,"p",2),g.nd(6,AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_ion_item_6_Template,4,6,"ion-item",18),g.Dc(),g.Dc()),2&e){const e=g.Oc(2);g.lc(3),g.qd(g.Qc(4,3,"addon.competency.activities")),g.lc(2),g.Vc("ngIf",0==e.coursemodules.length),g.lc(1),g.Vc("ngForOf",e.coursemodules)}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_item_1_Template(e,t){if(1&e&&(g.Ec(0,"ion-item",7),g.Ec(1,"ion-label"),g.Ec(2,"p",11),g.pd(3),g.Pc(4,"translate"),g.Dc(),g.Ec(5,"p"),g.pd(6),g.Dc(),g.Dc(),g.Dc()),2&e){const e=g.Oc(3);g.lc(3),g.qd(g.Qc(4,2,"addon.competency.reviewstatus")),g.lc(3),g.qd(e.competency.usercompetency.statusname)}}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_7_Template(e,t){1&e&&(g.Ec(0,"ion-badge",26),g.pd(1),g.Pc(2,"translate"),g.Dc()),2&e&&(g.lc(1),g.rd(" ",g.Qc(2,1,"core.yes")," "))}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_8_Template(e,t){1&e&&(g.Ec(0,"ion-badge",27),g.pd(1),g.Pc(2,"translate"),g.Dc()),2&e&&(g.lc(1),g.rd(" ",g.Qc(2,1,"core.no")," "))}function AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_Template(e,t){if(1&e&&(g.Cc(0),g.nd(1,AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_item_1_Template,7,4,"ion-item",9),g.Ec(2,"ion-item",7),g.Ec(3,"ion-label"),g.Ec(4,"p",11),g.pd(5),g.Pc(6,"translate"),g.Dc(),g.Dc(),g.nd(7,AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_7_Template,3,3,"ion-badge",23),g.nd(8,AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_ion_badge_8_Template,3,3,"ion-badge",24),g.Dc(),g.Ec(9,"ion-item",7),g.Ec(10,"ion-label"),g.Ec(11,"p",11),g.pd(12),g.Pc(13,"translate"),g.Dc(),g.Dc(),g.Ec(14,"ion-badge",25),g.pd(15),g.Dc(),g.Dc(),g.Bc()),2&e){const e=g.Oc(2);g.lc(1),g.Vc("ngIf",e.competency.usercompetency&&e.competency.usercompetency.status),g.lc(4),g.qd(g.Qc(6,6,"addon.competency.proficient")),g.lc(2),g.Vc("ngIf",e.userCompetency.proficiency),g.lc(1),g.Vc("ngIf",!e.userCompetency.proficiency),g.lc(4),g.qd(g.Qc(13,8,"addon.competency.rating")),g.lc(3),g.qd(e.userCompetency.gradename)}}function AddonCompetencyCompetencyPage_ion_card_13_Template(e,t){if(1&e&&(g.Ec(0,"ion-card"),g.nd(1,AddonCompetencyCompetencyPage_ion_card_13_ion_item_1_Template,3,3,"ion-item",9),g.Ec(2,"ion-item",10),g.Ec(3,"ion-label"),g.Ec(4,"p",11),g.pd(5),g.Pc(6,"translate"),g.Dc(),g.Ec(7,"p"),g.nd(8,AddonCompetencyCompetencyPage_ion_card_13_a_8_Template,2,2,"a",12),g.nd(9,AddonCompetencyCompetencyPage_ion_card_13_ng_container_9_Template,2,1,"ng-container",2),g.pd(10,"  /  "),g.nd(11,AddonCompetencyCompetencyPage_ion_card_13_ng_container_11_Template,4,3,"ng-container",13),g.Dc(),g.Dc(),g.Dc(),g.Ec(12,"ion-item",7),g.Ec(13,"ion-label"),g.Ec(14,"p",11),g.pd(15),g.Pc(16,"translate"),g.Dc(),g.nd(17,AddonCompetencyCompetencyPage_ion_card_13_p_17_Template,3,3,"p",2),g.nd(18,AddonCompetencyCompetencyPage_ion_card_13_ng_container_18_Template,2,1,"ng-container",2),g.Dc(),g.Dc(),g.nd(19,AddonCompetencyCompetencyPage_ion_card_13_ion_item_19_Template,7,5,"ion-item",9),g.nd(20,AddonCompetencyCompetencyPage_ion_card_13_ng_container_20_Template,16,10,"ng-container",2),g.Dc()),2&e){const e=g.Oc();g.lc(1),g.Vc("ngIf",e.competency.competency.competency.description),g.lc(4),g.qd(g.Qc(6,10,"addon.competency.path")),g.lc(3),g.Vc("ngIf",e.competency.competency.comppath.showlinks),g.lc(1),g.Vc("ngIf",!e.competency.competency.comppath.showlinks),g.lc(2),g.Vc("ngForOf",e.competency.competency.comppath.ancestors),g.lc(4),g.qd(g.Qc(16,12,"addon.competency.crossreferencedcompetencies")),g.lc(2),g.Vc("ngIf",!e.competency.competency.hasrelatedcompetencies),g.lc(1),g.Vc("ngIf",e.competency.competency.hasrelatedcompetencies),g.lc(1),g.Vc("ngIf",e.coursemodules),g.lc(1),g.Vc("ngIf",e.userCompetency)}}function AddonCompetencyCompetencyPage_div_14_p_4_Template(e,t){1&e&&(g.Ec(0,"p",28),g.pd(1),g.Pc(2,"translate"),g.Dc()),2&e&&(g.lc(1),g.rd(" ",g.Qc(2,1,"addon.competency.noevidence")," "))}function AddonCompetencyCompetencyPage_div_14_ion_card_5_ion_item_1_Template(e,t){if(1&e&&(g.Ec(0,"ion-item",33),g.zc(1,"core-user-avatar",34),g.Ec(2,"ion-label"),g.Ec(3,"p",11),g.pd(4),g.Dc(),g.Ec(5,"p"),g.pd(6),g.Pc(7,"coreFormatDate"),g.Dc(),g.Dc(),g.Dc()),2&e){const e=g.Oc().$implicit,t=g.Oc(2);g.Vc("userId",e.actionuser.id)("courseId",t.courseId),g.lc(1),g.Vc("user",e.actionuser)("linkProfile",!1),g.lc(3),g.qd(e.actionuser.fullname),g.lc(2),g.qd(g.Qc(7,6,1e3*e.timemodified))}}function AddonCompetencyCompetencyPage_div_14_ion_card_5_p_7_Template(e,t){if(1&e&&(g.Ec(0,"p",35),g.pd(1),g.Dc()),2&e){const e=g.Oc().$implicit;g.lc(1),g.qd(e.description)}}function AddonCompetencyCompetencyPage_div_14_ion_card_5_blockquote_8_Template(e,t){if(1&e&&(g.Ec(0,"blockquote"),g.pd(1),g.Dc()),2&e){const e=g.Oc().$implicit;g.lc(1),g.qd(e.note)}}function AddonCompetencyCompetencyPage_div_14_ion_card_5_Template(e,t){if(1&e&&(g.Ec(0,"ion-card"),g.nd(1,AddonCompetencyCompetencyPage_div_14_ion_card_5_ion_item_1_Template,8,8,"ion-item",30),g.Ec(2,"ion-item",7),g.Ec(3,"ion-label"),g.Ec(4,"p"),g.Ec(5,"ion-badge",31),g.pd(6),g.Dc(),g.Dc(),g.nd(7,AddonCompetencyCompetencyPage_div_14_ion_card_5_p_7_Template,2,1,"p",32),g.nd(8,AddonCompetencyCompetencyPage_div_14_ion_card_5_blockquote_8_Template,2,1,"blockquote",2),g.Dc(),g.Dc(),g.Dc()),2&e){const e=t.$implicit;g.lc(1),g.Vc("ngIf",e.actionuser),g.lc(5),g.qd(e.gradename),g.lc(1),g.Vc("ngIf",e.description),g.lc(1),g.Vc("ngIf",e.note)}}function AddonCompetencyCompetencyPage_div_14_Template(e,t){if(1&e&&(g.Ec(0,"div"),g.Ec(1,"h3",28),g.pd(2),g.Pc(3,"translate"),g.Dc(),g.nd(4,AddonCompetencyCompetencyPage_div_14_p_4_Template,3,3,"p",29),g.nd(5,AddonCompetencyCompetencyPage_div_14_ion_card_5_Template,9,4,"ion-card",13),g.Dc()),2&e){const e=g.Oc();g.lc(2),g.qd(g.Qc(3,3,"addon.competency.evidence")),g.lc(2),g.Vc("ngIf",0==e.competency.evidence.length),g.lc(1),g.Vc("ngForOf",e.competency.evidence)}}let O=(()=>{class AddonCompetencyCompetencyPage{constructor(){this.competencyLoaded=!1,this.fetchSuccess=!1;try{const e=m.a.getRouteNumberParam("planId");if(!e){const e=m.a.getRequiredRouteNumberParam("courseId"),t=m.a.getRouteNumberParam("userId"),n=_.a.getOrCreateSource(u.a,[e,t]);return this.competencies=new AddonCompetencyCompetenciesSwipeManager(n),void 0}const t=_.a.getOrCreateSource(y.a,[e]);this.competencies=new AddonCompetencyCompetenciesSwipeManager(t)}catch(e){return a.a.showErrorModal(e),m.a.back(),void 0}}get competencyFrameworkUrl(){if(!this.competency)return;const{pluginbaseurl:e,framework:t,pagecontextid:n}=this.competency.competency.comppath;return`${e}/competencies.php?competencyframeworkid=${t.id}&pagecontextid=${n}`}get courseId(){const e=this.competencies.getSource();if(e instanceof u.a)return e.COURSE_ID}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){try{const e=this.competencies.getSource();yield e.reload(),yield this.competencies.start(),yield this.fetchCompetency()}finally{this.competencyLoaded=!0}}))}ngOnDestroy(){this.competencies.destroy()}fetchCompetency(){var e;return Object(c.a)(this,void 0,void 0,(function*(){try{const t=this.competencies.getSource();if(this.competency=t instanceof y.a?yield this.fetchCompetencySummaryFromPlan(t):yield this.fetchCompetencySummaryFromCourse(t),this.competency.user.id!=i.b.getCurrentSiteUserId()&&(this.user=this.competency.user),this.competency.evidence.forEach((e=>{if(e.descidentifier){e.description=r.J.instant("addon.competency."+e.descidentifier,{$a:e.desca})}})),!this.fetchSuccess){this.fetchSuccess=!0;const n=this.competency.competency.competency.shortname;t instanceof y.a?this.planStatus&&(yield p.a.ignoreErrors(d.a.logCompetencyInPlanView(t.PLAN_ID,this.requireCompetencyId(),this.planStatus,n,null===(e=t.user)||void 0===e?void 0:e.id))):yield p.a.ignoreErrors(d.a.logCompetencyInCourseView(t.COURSE_ID,this.requireCompetencyId(),n,t.USER_ID))}}catch(e){a.a.showErrorModalDefault(e,"Error getting competency data.")}}))}refreshCompetency(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=this.competencies.getSource();yield p.a.ignoreErrors(t instanceof y.a?d.a.invalidateCompetencyInPlan(t.PLAN_ID,this.requireCompetencyId()):d.a.invalidateCompetencyInCourse(t.COURSE_ID,this.requireCompetencyId(),t.USER_ID)),this.fetchCompetency().finally((()=>{null==e?void 0:e.complete()}))}))}openCompetencySummary(e){m.a.navigate(`../${e}/${s.d}`,{params:{contextLevel:this.contextLevel,contextInstanceId:this.contextInstanceId}})}requireCompetencyId(){const e=this.competencies.getSelectedItem();if(!e)throw new Error("Failed to get competency id from selected item");return e.competency.id}fetchCompetencySummaryFromPlan(e){var t;return Object(c.a)(this,void 0,void 0,(function*(){const n=yield d.a.getCompetencyInPlan(e.PLAN_ID,this.requireCompetencyId());return this.planStatus=n.plan.status,n.usercompetencysummary.usercompetency&&(n.usercompetencysummary.usercompetency.statusname=o.a.getCompetencyStatusName(n.usercompetencysummary.usercompetency.status)),this.contextLevel="user",this.contextInstanceId=(null===(t=e.user)||void 0===t?void 0:t.id)||n.usercompetencysummary.user.id,this.userCompetency=n.usercompetencysummary.usercompetencyplan||n.usercompetencysummary.usercompetency,n.usercompetencysummary}))}fetchCompetencySummaryFromCourse(e){return Object(c.a)(this,void 0,void 0,(function*(){const t=yield d.a.getCompetencyInCourse(e.COURSE_ID,this.requireCompetencyId(),e.USER_ID);return this.coursemodules=t.coursemodules,this.contextLevel="course",this.contextInstanceId=e.COURSE_ID,this.userCompetency=t.usercompetencysummary.usercompetencycourse||t.usercompetencysummary.usercompetency,t.usercompetencysummary}))}}return AddonCompetencyCompetencyPage.ɵfac=function AddonCompetencyCompetencyPage_Factory(e){return new(e||AddonCompetencyCompetencyPage)},AddonCompetencyCompetencyPage.ɵcmp=g.sc({type:AddonCompetencyCompetencyPage,selectors:[["page-addon-competency-competency"]],decls:15,vars:13,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[1,"limited-width",3,"core-swipe-navigation"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],[1,"ion-text-wrap"],["slot","start",3,"user"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap","only-links"],[1,"item-heading"],["core-link","",3,"href",4,"ngIf"],[4,"ngFor","ngForOf"],[3,"text","contextLevel","contextInstanceId"],["core-link","",3,"href"],["class","as-link",3,"click",4,"ngIf"],[1,"as-link",3,"click"],["class","ion-text-wrap","core-link","","capture","true",3,"href",4,"ngFor","ngForOf"],["core-link","","capture","true",1,"ion-text-wrap",3,"href"],["slot","start",3,"modicon","showAlt",4,"ngIf"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["slot","start",3,"modicon","showAlt"],["slot","end","color","success",4,"ngIf"],["slot","end","color","danger",4,"ngIf"],["color","dark","slot","end"],["slot","end","color","success"],["slot","end","color","danger"],[1,"ion-margin-horizontal"],["class","ion-margin-horizontal",4,"ngIf"],["class","ion-text-wrap","core-user-link","",3,"userId","courseId",4,"ngIf"],["color","dark"],["class","ion-margin-top",4,"ngIf"],["core-user-link","",1,"ion-text-wrap",3,"userId","courseId"],["slot","start",3,"user","linkProfile"],[1,"ion-margin-top"]],template:function AddonCompetencyCompetencyPage_Template(e,t){1&e&&(g.Ec(0,"ion-header"),g.Ec(1,"ion-toolbar"),g.Ec(2,"ion-buttons",0),g.zc(3,"ion-back-button",1),g.Pc(4,"translate"),g.Dc(),g.Ec(5,"ion-title"),g.nd(6,AddonCompetencyCompetencyPage_h1_6_Template,4,2,"h1",2),g.Dc(),g.Dc(),g.Dc(),g.Ec(7,"ion-content",3),g.Ec(8,"ion-refresher",4),g.Mc("ionRefresh",(function AddonCompetencyCompetencyPage_Template_ion_refresher_ionRefresh_8_listener(e){return t.refreshCompetency(e.target)})),g.zc(9,"ion-refresher-content",5),g.Pc(10,"translate"),g.Dc(),g.Ec(11,"core-loading",6),g.nd(12,AddonCompetencyCompetencyPage_ion_card_12_Template,6,2,"ion-card",2),g.nd(13,AddonCompetencyCompetencyPage_ion_card_13_Template,21,14,"ion-card",2),g.nd(14,AddonCompetencyCompetencyPage_div_14_Template,6,5,"div",2),g.Dc(),g.Dc()),2&e&&(g.lc(3),g.Vc("text",g.Qc(4,9,"core.back")),g.lc(3),g.Vc("ngIf",t.competency),g.lc(1),g.Vc("core-swipe-navigation",t.competencies),g.lc(1),g.Vc("disabled",!t.competencyLoaded),g.lc(1),g.Wc("pullingText",g.Qc(10,11,"core.pulltorefresh")),g.lc(2),g.Vc("hideUntil",t.competencyLoaded),g.lc(1),g.Vc("ngIf",t.user),g.lc(1),g.Vc("ngIf",t.competency),g.lc(1),g.Vc("ngIf",t.competency))},directives:[C.C,C.Ab,C.m,C.h,C.i,C.yb,f.t,h.a,C.v,P.a,C.bb,C.cb,I.a,C.n,C.I,v.a,C.O,f.s,A.a,b.a,E.a,C.k,D.a],pipes:[S.d,T.a],encapsulation:2}),AddonCompetencyCompetencyPage})();class AddonCompetencyCompetenciesSwipeManager extends l.a{getSelectedItemPathFromRoute(e){return e.params.competencyId}}},eoiU:function(e,t,n){"use strict";n.d(t,"a",(function(){return CoreSwipeNavigationItemsManager}));var c=n("mrSG"),o=n("pHTc"),i=n("CtbY");class CoreSwipeNavigationItemsManager extends i.a{start(){return Object(c.a)(this,void 0,void 0,(function*(){this.updateSelectedItem()}))}navigateToNextItem(){return Object(c.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(1,"forward")}))}navigateToPreviousItem(){return Object(c.a)(this,void 0,void 0,(function*(){yield this.navigateToItemBy(-1,"back")}))}hasNextItem(){return Object(c.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(1))}))}hasPreviousItem(){return Object(c.a)(this,void 0,void 0,(function*(){return!!(yield this.getItemBy(-1))}))}getCurrentPageRoute(){return o.a.getCurrentRoute()}getSelectedItemPathFromRoute(e){const t=[];for(;e&&(t.push(...e.url),e.firstChild);)e=e.firstChild;return t.map((e=>e.path)).join("/").replace(/\/+/,"/").trim()||null}navigateToItemBy(e,t){return Object(c.a)(this,void 0,void 0,(function*(){const n=yield this.getItemBy(e);n&&(yield this.navigateToItem(n,{animationDirection:t,replace:!0}))}))}getItemBy(e){var t;return Object(c.a)(this,void 0,void 0,(function*(){const n=this.getSource().getItems(),c=null!==(t=this.selectedItem&&(null==n?void 0:n.indexOf(this.selectedItem)))&&void 0!==t?t:-1;if(-1===c||null===n)return null;const o=e>0?1:-1;let i=c,a=0;for(;a!==e&&(i+=o,!(i<0||i>=n.length));)this.skipItemInSwipe(n[i])||(a+=o);return a===e?n[i]:this.getSource().isCompleted()?null:(yield this.getSource().load(),this.getItemBy(e))}))}skipItemInSwipe(e){return!1}}},"l4/z":function(e,t,n){"use strict";n.d(t,"a",(function(){return AddonCompetencyPlanCompetenciesSource}));var c=n("mrSG"),o=n("CvRw"),i=n("bFG1"),a=n("FBtE"),r=n("qjHM");class AddonCompetencyPlanCompetenciesSource extends o.a{constructor(e){super(),this.PLAN_ID=e}getItemPath(e){return String(e.competency.id)}load(){const e=Object.create(null,{load:{get:()=>super.load}});return Object(c.a)(this,void 0,void 0,(function*(){!this.dirty&&this.plan||(yield this.loadLearningPlan()),yield e.load.call(this)}))}invalidateCache(){return Object(c.a)(this,void 0,void 0,(function*(){yield i.a.ignoreErrors(a.a.invalidateLearningPlan(this.PLAN_ID))}))}loadPageItems(){return Object(c.a)(this,void 0,void 0,(function*(){if(!this.plan)throw new Error("Can't load competencies without plan!");return{items:this.plan.competencies}}))}loadLearningPlan(){return Object(c.a)(this,void 0,void 0,(function*(){this.plan=yield a.a.getLearningPlan(this.PLAN_ID),this.plan.plan.statusname=r.a.getPlanStatusName(this.plan.plan.status),this.user=yield r.a.getProfile(this.plan.plan.userid)}))}}},vgj2:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var c=n("mrSG"),o=n("FBtE"),i=n("pHTc"),a=n("3LXp"),r=n("bFG1"),d=n("RJwM"),m=n("fXoL"),p=n("TEn/"),s=n("ofXK"),l=n("nt/U"),_=n("PgjG"),y=n("hMzs"),u=n("sYmb");function AddonCompetencyCompetencySummaryPage_h1_6_Template(e,t){if(1&e&&(m.Ec(0,"h1"),m.pd(1),m.Ec(2,"small"),m.pd(3),m.Dc(),m.Dc()),2&e){const e=m.Oc();m.lc(1),m.rd(" ",e.competency.competency.shortname," "),m.lc(2),m.qd(e.competency.competency.idnumber)}}function AddonCompetencyCompetencySummaryPage_ion_card_12_ion_item_1_Template(e,t){if(1&e&&(m.Ec(0,"ion-item",8),m.Ec(1,"ion-label"),m.zc(2,"core-format-text",11),m.Dc(),m.Dc()),2&e){const e=m.Oc(2);m.lc(2),m.Vc("text",e.competency.competency.description)("contextLevel",e.contextLevel)("contextInstanceId",e.contextInstanceId)}}function AddonCompetencyCompetencySummaryPage_ion_card_12_ng_container_9_Template(e,t){if(1&e){const e=m.Fc();m.Cc(0),m.pd(1,"  /  "),m.Ec(2,"button",12),m.Mc("click",(function AddonCompetencyCompetencySummaryPage_ion_card_12_ng_container_9_Template_button_click_2_listener(){m.fd(e);const n=t.$implicit;return m.Oc(2).openCompetencySummary(n.id)})),m.pd(3),m.Dc(),m.Bc()}if(2&e){const e=t.$implicit;m.lc(3),m.rd(" ",e.name," ")}}function AddonCompetencyCompetencySummaryPage_ion_card_12_Template(e,t){if(1&e&&(m.Ec(0,"ion-card"),m.nd(1,AddonCompetencyCompetencySummaryPage_ion_card_12_ion_item_1_Template,3,3,"ion-item",7),m.Ec(2,"ion-item",8),m.Ec(3,"ion-label"),m.Ec(4,"p",9),m.pd(5),m.Pc(6,"translate"),m.Dc(),m.Ec(7,"p"),m.pd(8),m.nd(9,AddonCompetencyCompetencySummaryPage_ion_card_12_ng_container_9_Template,4,1,"ng-container",10),m.Dc(),m.Dc(),m.Dc(),m.Dc()),2&e){const e=m.Oc();m.lc(1),m.Vc("ngIf",e.competency.competency.description),m.lc(4),m.qd(m.Qc(6,4,"addon.competency.path")),m.lc(3),m.rd("",e.competency.comppath.framework.name," "),m.lc(1),m.Vc("ngForOf",e.competency.comppath.ancestors)}}let g=(()=>{class AddonCompetencyCompetencySummaryPage{constructor(){this.competencyLoaded=!1,this.fetchSuccess=!1}ngOnInit(){return Object(c.a)(this,void 0,void 0,(function*(){try{this.competencyId=i.a.getRequiredRouteNumberParam("competencyId"),this.contextLevel=i.a.getRouteParam("contextLevel"),this.contextInstanceId=i.a.getRouteNumberParam("contextInstanceId")}catch(e){return a.a.showErrorModal(e),i.a.back(),void 0}try{yield this.fetchCompetency()}finally{this.competencyLoaded=!0}}))}fetchCompetency(){var e;return Object(c.a)(this,void 0,void 0,(function*(){try{const t=yield o.a.getCompetencySummary(this.competencyId);this.contextLevel&&void 0!==this.contextInstanceId||(this.contextLevel="user",this.contextInstanceId=null===(e=t.usercompetency)||void 0===e?void 0:e.userid),this.competency=t.competency,this.fetchSuccess||(this.fetchSuccess=!0,r.a.ignoreErrors(o.a.logCompetencyView(this.competencyId,this.competency.competency.shortname)))}catch(e){a.a.showErrorModalDefault(e,"Error getting competency summary data.")}}))}refreshCompetency(e){o.a.invalidateCompetencySummary(this.competencyId).finally((()=>{this.fetchCompetency().finally((()=>{null==e?void 0:e.complete()}))}))}openCompetencySummary(e){i.a.navigate(`../../${e}/${d.d}`,{params:{contextLevel:this.contextLevel,contextInstanceId:this.contextInstanceId}})}}return AddonCompetencyCompetencySummaryPage.ɵfac=function AddonCompetencyCompetencySummaryPage_Factory(e){return new(e||AddonCompetencyCompetencySummaryPage)},AddonCompetencyCompetencySummaryPage.ɵcmp=m.sc({type:AddonCompetencyCompetencySummaryPage,selectors:[["page-addon-competency-competency-summary"]],decls:13,vars:10,consts:[["slot","start"],[3,"text"],[4,"ngIf"],[1,"limited-width"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[3,"hideUntil"],["class","ion-text-wrap",4,"ngIf"],[1,"ion-text-wrap"],[1,"item-heading"],[4,"ngFor","ngForOf"],[3,"text","contextLevel","contextInstanceId"],[1,"as-link",3,"click"]],template:function AddonCompetencyCompetencySummaryPage_Template(e,t){1&e&&(m.Ec(0,"ion-header"),m.Ec(1,"ion-toolbar"),m.Ec(2,"ion-buttons",0),m.zc(3,"ion-back-button",1),m.Pc(4,"translate"),m.Dc(),m.Ec(5,"ion-title"),m.nd(6,AddonCompetencyCompetencySummaryPage_h1_6_Template,4,2,"h1",2),m.Dc(),m.Dc(),m.Dc(),m.Ec(7,"ion-content",3),m.Ec(8,"ion-refresher",4),m.Mc("ionRefresh",(function AddonCompetencyCompetencySummaryPage_Template_ion_refresher_ionRefresh_8_listener(e){return t.refreshCompetency(e.target)})),m.zc(9,"ion-refresher-content",5),m.Pc(10,"translate"),m.Dc(),m.Ec(11,"core-loading",6),m.nd(12,AddonCompetencyCompetencySummaryPage_ion_card_12_Template,10,6,"ion-card",2),m.Dc(),m.Dc()),2&e&&(m.lc(3),m.Vc("text",m.Qc(4,6,"core.back")),m.lc(3),m.Vc("ngIf",t.competency),m.lc(2),m.Vc("disabled",!t.competencyLoaded),m.lc(1),m.Wc("pullingText",m.Qc(10,8,"core.pulltorefresh")),m.lc(2),m.Vc("hideUntil",t.competencyLoaded),m.lc(1),m.Vc("ngIf",t.competency))},directives:[p.C,p.Ab,p.m,p.h,p.i,p.yb,s.t,l.a,p.v,p.bb,p.cb,_.a,p.n,p.I,p.O,s.s,y.a],pipes:[u.d],encapsulation:2}),AddonCompetencyCompetencySummaryPage})()}}]);