{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{NNBU:function(i,t,n){\"use strict\";n.r(t),n.d(t,\"AddonNotificationsListPageModule\",(function(){return Q}));var o=n(\"tyNb\"),e=n(\"L3Fv\"),a=n(\"mrSG\"),c=n(\"3LXp\"),r=n(\"bFG1\"),s=n(\"fjkH\"),d=n(\"yjU1\"),l=n(\"pHTc\"),_=n(\"46ml\"),f=n(\"baaQ\"),g=n(\"2eZG\"),m=n(\"9+EE\"),p=n(\"YyYz\"),u=n(\"Q98t\"),h=n(\"VUQF\"),b=n(\"EoRH\"),P=n(\"qkYQ\"),A=n(\"fXoL\"),v=n(\"TEn/\"),N=n(\"C1x5\"),M=n(\"nt/U\"),O=n(\"PgjG\"),x=n(\"ofXK\"),C=n(\"xpMl\"),k=n(\"3jOR\"),w=n(\"hMzs\"),L=n(\"FeAf\"),E=n(\"eAud\"),y=n(\"3CSS\"),T=n(\"r8G5\"),V=n(\"sYmb\"),I=n(\"lAaw\");function AddonNotificationsListPage_ion_item_17_core_user_avatar_2_div_1_Template(i,t){if(1&i&&(A.Ec(0,\"div\",20),A.zc(1,\"img\",21),A.Dc()),2&i){const i=A.Oc(2).$implicit;A.lc(1),A.Vc(\"src\",i.iconurl,A.id)}}function AddonNotificationsListPage_ion_item_17_core_user_avatar_2_core_mod_icon_2_Template(i,t){if(1&i&&A.zc(0,\"core-mod-icon\",22),2&i){const i=A.Oc(2).$implicit;A.Vc(\"modicon\",i.iconurl)(\"modname\",i.modname)(\"showAlt\",!1)}}function AddonNotificationsListPage_ion_item_17_core_user_avatar_2_Template(i,t){if(1&i&&(A.Ec(0,\"core-user-avatar\",17),A.nd(1,AddonNotificationsListPage_ion_item_17_core_user_avatar_2_div_1_Template,2,1,\"div\",18),A.nd(2,AddonNotificationsListPage_ion_item_17_core_user_avatar_2_core_mod_icon_2_Template,1,3,\"core-mod-icon\",19),A.Dc()),2&i){const i=A.Oc().$implicit;A.Vc(\"user\",i)(\"profileUrl\",i.profileimageurlfrom)(\"fullname\",i.userfromfullname)(\"userId\",i.useridfrom),A.lc(1),A.Vc(\"ngIf\",i.iconurl&&!i.modname),A.lc(1),A.Vc(\"ngIf\",i.modname)}}function AddonNotificationsListPage_ion_item_17_ng_container_3_div_1_Template(i,t){if(1&i&&(A.Ec(0,\"div\",25),A.zc(1,\"img\",21),A.Dc()),2&i){const i=A.Oc(2).$implicit;A.lc(1),A.Vc(\"src\",i.iconurl,A.id)}}function AddonNotificationsListPage_ion_item_17_ng_container_3_core_mod_icon_2_Template(i,t){if(1&i&&A.zc(0,\"core-mod-icon\",26),2&i){const i=A.Oc(2).$implicit;A.Vc(\"modicon\",i.iconurl)(\"modname\",i.modname)(\"showAlt\",!1)}}function AddonNotificationsListPage_ion_item_17_ng_container_3_Template(i,t){if(1&i&&(A.Cc(0),A.nd(1,AddonNotificationsListPage_ion_item_17_ng_container_3_div_1_Template,2,1,\"div\",23),A.nd(2,AddonNotificationsListPage_ion_item_17_ng_container_3_core_mod_icon_2_Template,1,3,\"core-mod-icon\",24),A.Bc()),2&i){const i=A.Oc().$implicit;A.lc(1),A.Vc(\"ngIf\",!i.modname),A.lc(1),A.Vc(\"ngIf\",i.modname)}}function AddonNotificationsListPage_ion_item_17_ng_container_10_Template(i,t){if(1&i&&(A.Cc(0),A.pd(1),A.Bc()),2&i){const i=A.Oc().$implicit;A.lc(1),A.rd(\" · \",i.userfromfullname,\"\")}}function AddonNotificationsListPage_ion_item_17_ion_note_11_Template(i,t){1&i&&(A.Ec(0,\"ion-note\",2),A.zc(1,\"ion-icon\",27),A.Dc())}const _c0=function(i){return{$a:i}};function AddonNotificationsListPage_ion_item_17_Template(i,t){if(1&i){const i=A.Fc();A.Ec(0,\"ion-item\",11),A.Mc(\"click\",(function AddonNotificationsListPage_ion_item_17_Template_ion_item_click_0_listener(){A.fd(i);const n=t.$implicit;return A.Oc().notifications.select(n)})),A.Pc(1,\"translate\"),A.nd(2,AddonNotificationsListPage_ion_item_17_core_user_avatar_2_Template,3,6,\"core-user-avatar\",12),A.nd(3,AddonNotificationsListPage_ion_item_17_ng_container_3_Template,3,2,\"ng-container\",13),A.Ec(4,\"ion-label\"),A.Ec(5,\"p\",14),A.zc(6,\"core-format-text\",15),A.Dc(),A.Ec(7,\"p\"),A.pd(8),A.Pc(9,\"coreTimeAgo\"),A.nd(10,AddonNotificationsListPage_ion_item_17_ng_container_10_Template,2,1,\"ng-container\",13),A.Dc(),A.Dc(),A.nd(11,AddonNotificationsListPage_ion_item_17_ion_note_11_Template,2,0,\"ion-note\",16),A.Dc()}if(2&i){const i=t.$implicit,n=A.Oc();A.Vc(\"detail\",!1),A.mc(\"aria-current\",n.notifications.getItemAriaCurrent(i))(\"aria-label\",i.timeread?i.subject:A.Rc(1,11,\"addon.notifications.unreadnotification\",A.ad(16,_c0,i.subject))),A.lc(2),A.Vc(\"ngIf\",i.useridfrom>0),A.lc(1),A.Vc(\"ngIf\",i.useridfrom<=0&&i.iconurl),A.lc(3),A.Vc(\"text\",i.subject)(\"contextInstanceId\",0)(\"wsNotFiltered\",!0),A.lc(2),A.qd(A.Qc(9,14,i.timecreated)),A.lc(2),A.Vc(\"ngIf\",i.useridfrom>0),A.lc(1),A.Vc(\"ngIf\",!i.timeread)}}function AddonNotificationsListPage_core_empty_box_18_Template(i,t){1&i&&(A.zc(0,\"core-empty-box\",28),A.Pc(1,\"translate\")),2&i&&A.Vc(\"message\",A.Qc(1,1,\"addon.notifications.therearentnotificationsyet\"))}function AddonNotificationsListPage_ion_chip_21_ion_icon_1_Template(i,t){1&i&&A.zc(0,\"ion-icon\",31)}function AddonNotificationsListPage_ion_chip_21_ion_spinner_2_Template(i,t){1&i&&(A.zc(0,\"ion-spinner\"),A.Pc(1,\"translate\")),2&i&&A.mc(\"aria-label\",A.Qc(1,1,\"core.loading\"))}function AddonNotificationsListPage_ion_chip_21_Template(i,t){if(1&i){const i=A.Fc();A.Ec(0,\"ion-chip\",29),A.Mc(\"click\",(function AddonNotificationsListPage_ion_chip_21_Template_ion_chip_click_0_listener(){A.fd(i);return A.Oc().markAllNotificationsAsRead()})),A.nd(1,AddonNotificationsListPage_ion_chip_21_ion_icon_1_Template,1,0,\"ion-icon\",30),A.nd(2,AddonNotificationsListPage_ion_chip_21_ion_spinner_2_Template,2,3,\"ion-spinner\",13),A.pd(3),A.Pc(4,\"translate\"),A.Dc()}if(2&i){const i=A.Oc();A.Vc(\"disabled\",i.loadingMarkAllNotificationsAsRead),A.lc(1),A.Vc(\"ngIf\",!i.loadingMarkAllNotificationsAsRead),A.lc(1),A.Vc(\"ngIf\",i.loadingMarkAllNotificationsAsRead),A.lc(1),A.rd(\" \",A.Qc(4,4,\"addon.notifications.markallread\"),\" \")}}let z=(()=>{class AddonNotificationsListPage{constructor(){this.fetchMoreNotificationsFailed=!1,this.canMarkAllNotificationsAsRead=!1,this.loadingMarkAllNotificationsAsRead=!1,this.pendingRefresh=!1;try{const i=f.a.getOrCreateSource(m.b.getRequiredCurrentSite().isVersionGreaterEqualThan(\"4.0\")?h.a:P.a,[]);this.notifications=new b.a(i,AddonNotificationsListPage)}catch(i){c.a.showErrorModal(i),l.a.back()}}ngAfterViewInit(){return Object(a.a)(this,void 0,void 0,(function*(){yield this.fetchInitialNotifications(),this.notifications.start(this.splitView),this.cronObserver=s.b.on(d.c.READ_CRON_EVENT,(()=>{this.isCurrentView&&this.refreshNotifications()}),m.b.getCurrentSiteId()),this.pushObserver=g.a.on(\"receive\").subscribe((i=>{if(!this.isCurrentView)return this.pendingRefresh=!0,void 0;r.a.isTrueOrOne(i.notif)&&m.b.isCurrentSite(i.site)&&this.refreshNotifications()})),this.readObserver=s.b.on(d.c.READ_CHANGED_EVENT,(i=>{if(!i.id)return;const t=this.notifications.items.find((t=>t.id===i.id));t&&(t.read=!0,t.timeread=i.time,this.loadMarkAllAsReadButton())}));(new p.a).treatLink()}))}fetchNotifications(i){return Object(a.a)(this,void 0,void 0,(function*(){i?yield this.notifications.reload():yield this.notifications.load(),this.fetchMoreNotificationsFailed=!1,this.loadMarkAllAsReadButton()}))}fetchInitialNotifications(){return Object(a.a)(this,void 0,void 0,(function*(){try{yield this.fetchNotifications(!0)}catch(i){c.a.showErrorModalDefault(i,\"Error loading notifications\"),this.notifications.reset()}}))}fetchMoreNotifications(i){return Object(a.a)(this,void 0,void 0,(function*(){try{yield this.fetchNotifications(!1)}catch(i){c.a.showErrorModalDefault(i,\"Error loading more notifications\"),this.fetchMoreNotificationsFailed=!0}i()}))}markAllNotificationsAsRead(){return Object(a.a)(this,void 0,void 0,(function*(){this.loadingMarkAllNotificationsAsRead=!0,yield r.a.ignoreErrors(d.a.markAllNotificationsAsRead()),s.b.trigger(d.c.READ_CHANGED_EVENT,{time:u.a.timestamp()},m.b.getCurrentSiteId()),yield this.refreshNotifications()}))}loadMarkAllAsReadButton(){return Object(a.a)(this,void 0,void 0,(function*(){try{this.loadingMarkAllNotificationsAsRead=!0;const i=yield d.a.getUnreadNotificationsCount();this.canMarkAllNotificationsAsRead=i.count>0}finally{this.loadingMarkAllNotificationsAsRead=!1}}))}refreshNotifications(i){return Object(a.a)(this,void 0,void 0,(function*(){yield r.a.ignoreErrors(d.a.invalidateNotificationsList()),yield r.a.ignoreErrors(this.fetchNotifications(!0)),null==i||i.complete()}))}ionViewDidEnter(){this.isCurrentView=!0,this.pendingRefresh&&(this.pendingRefresh=!1,this.refreshNotifications())}ionViewDidLeave(){this.isCurrentView=!1}ngOnDestroy(){var i,t,n,o;null===(i=this.cronObserver)||void 0===i?void 0:i.off(),null===(t=this.readObserver)||void 0===t||t.off(),null===(n=this.pushObserver)||void 0===n||n.unsubscribe(),null===(o=this.notifications)||void 0===o||o.destroy()}}return AddonNotificationsListPage.ɵfac=function AddonNotificationsListPage_Factory(i){return new(i||AddonNotificationsListPage)},AddonNotificationsListPage.ɵcmp=A.sc({type:AddonNotificationsListPage,selectors:[[\"page-addon-notifications-list\"]],viewQuery:function AddonNotificationsListPage_Query(i,t){var n;(1&i&&A.ud(_.a,!0),2&i)&&(A.dd(n=A.Nc())&&(t.splitView=n.first))},decls:22,vars:16,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"slot\",\"end\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"hideUntil\"],[\"class\",\"ion-text-wrap\",\"button\",\"\",\"lines\",\"full\",3,\"detail\",\"click\",4,\"ngFor\",\"ngForOf\"],[\"icon\",\"far-bell\",3,\"message\",4,\"ngIf\"],[3,\"enabled\",\"error\",\"action\"],[\"slot\",\"fixed\",\"collapsible-footer\",\"\",\"appearOnBottom\",\"\",1,\"mark-all-as-read\"],[\"color\",\"primary\",3,\"disabled\",\"click\",4,\"ngIf\"],[\"button\",\"\",\"lines\",\"full\",1,\"ion-text-wrap\",3,\"detail\",\"click\"],[\"slot\",\"start\",3,\"user\",\"profileUrl\",\"fullname\",\"userId\",4,\"ngIf\"],[4,\"ngIf\"],[1,\"item-heading\"],[\"contextLevel\",\"system\",3,\"text\",\"contextInstanceId\",\"wsNotFiltered\"],[\"slot\",\"end\",4,\"ngIf\"],[\"slot\",\"start\",3,\"user\",\"profileUrl\",\"fullname\",\"userId\"],[\"class\",\"core-avatar-extra-img\",4,\"ngIf\"],[3,\"modicon\",\"modname\",\"showAlt\",4,\"ngIf\"],[1,\"core-avatar-extra-img\"],[\"alt\",\"\",\"role\",\"presentation\",3,\"src\"],[3,\"modicon\",\"modname\",\"showAlt\"],[\"class\",\"core-notification-icon\",\"slot\",\"start\",4,\"ngIf\"],[\"class\",\"core-notification-icon\",\"slot\",\"start\",3,\"modicon\",\"modname\",\"showAlt\",4,\"ngIf\"],[\"slot\",\"start\",1,\"core-notification-icon\"],[\"slot\",\"start\",1,\"core-notification-icon\",3,\"modicon\",\"modname\",\"showAlt\"],[\"name\",\"fas-circle\",\"color\",\"primary\",\"aria-hidden\",\"true\"],[\"icon\",\"far-bell\",3,\"message\"],[\"color\",\"primary\",3,\"disabled\",\"click\"],[\"name\",\"fas-eye\",\"aria-hidden\",\"true\",4,\"ngIf\"],[\"name\",\"fas-eye\",\"aria-hidden\",\"true\"]],template:function AddonNotificationsListPage_Template(i,t){1&i&&(A.Ec(0,\"ion-header\"),A.Ec(1,\"ion-toolbar\"),A.Ec(2,\"ion-buttons\",0),A.zc(3,\"ion-back-button\",1),A.Pc(4,\"translate\"),A.Dc(),A.Ec(5,\"ion-title\"),A.Ec(6,\"h1\"),A.pd(7),A.Pc(8,\"translate\"),A.Dc(),A.Dc(),A.Ec(9,\"ion-buttons\",2),A.zc(10,\"core-user-menu-button\"),A.Dc(),A.Dc(),A.Dc(),A.Ec(11,\"ion-content\"),A.Ec(12,\"core-split-view\"),A.Ec(13,\"ion-refresher\",3),A.Mc(\"ionRefresh\",(function AddonNotificationsListPage_Template_ion_refresher_ionRefresh_13_listener(i){return t.refreshNotifications(i.target)})),A.zc(14,\"ion-refresher-content\",4),A.Pc(15,\"translate\"),A.Dc(),A.Ec(16,\"core-loading\",5),A.nd(17,AddonNotificationsListPage_ion_item_17_Template,12,18,\"ion-item\",6),A.nd(18,AddonNotificationsListPage_core_empty_box_18_Template,2,3,\"core-empty-box\",7),A.Ec(19,\"core-infinite-loading\",8),A.Mc(\"action\",(function AddonNotificationsListPage_Template_core_infinite_loading_action_19_listener(i){return t.fetchMoreNotifications(i)})),A.Dc(),A.Dc(),A.Ec(20,\"div\",9),A.nd(21,AddonNotificationsListPage_ion_chip_21_Template,5,6,\"ion-chip\",10),A.Dc(),A.Dc(),A.Dc()),2&i&&(A.lc(3),A.Vc(\"text\",A.Qc(4,10,\"core.back\")),A.lc(4),A.qd(A.Qc(8,12,\"addon.notifications.notifications\")),A.lc(6),A.Vc(\"disabled\",!t.notifications.loaded),A.lc(1),A.Wc(\"pullingText\",A.Qc(15,14,\"core.pulltorefresh\")),A.lc(2),A.Vc(\"hideUntil\",t.notifications.loaded),A.lc(1),A.Vc(\"ngForOf\",t.notifications.items),A.lc(1),A.Vc(\"ngIf\",!t.notifications||t.notifications.empty),A.lc(1),A.Vc(\"enabled\",t.notifications.loaded&&!t.notifications.completed)(\"error\",t.fetchMoreNotificationsFailed),A.lc(2),A.Vc(\"ngIf\",t.notifications.loaded&&t.canMarkAllNotificationsAsRead))},directives:[v.C,v.Ab,v.m,v.h,v.i,v.yb,N.a,M.a,v.v,_.a,v.bb,v.cb,O.a,x.s,x.t,C.a,k.a,v.I,v.O,w.a,L.a,E.a,v.W,v.D,y.a,T.a,v.t,v.qb],pipes:[V.d,I.a],styles:[\"ion-item[_ngcontent-%COMP%]{--icon-size:16px;--extra-icon-size:12px;--core-avatar-size:32px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p.item-heading[_ngcontent-%COMP%]{font-size:var(--text-size);-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;display:-webkit-box}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin:0;padding-left:8px;padding-right:0;padding-top:12px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:unset;padding-right:unset;-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:0;padding-inline-end:0}}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:6px;vertical-align:middle}ion-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{align-self:start;margin-top:16px}ion-item[_ngcontent-%COMP%]   core-mod-icon.core-notification-icon[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]{padding:8px;max-width:var(--core-avatar-size);max-height:var(--core-avatar-size)}.mark-all-as-read[_ngcontent-%COMP%]{padding-bottom:16px;bottom:0;left:0;right:0;display:flex;background:transparent;box-shadow:none;pointer-events:none}.mark-all-as-read[_ngcontent-%COMP%]   ion-chip.ion-color[_ngcontent-%COMP%]{pointer-events:all;margin:0 auto;box-shadow:0 2px 4px rgba(0,0,0,.4)}.mark-all-as-read[_ngcontent-%COMP%]   ion-chip.ion-color[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:0;margin-right:8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.mark-all-as-read[_ngcontent-%COMP%]   ion-chip.ion-color[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}ion-content[_ngcontent-%COMP%]::part(scroll){padding-bottom:44px}\",\"[_nghost-%COMP%]{--extra-icon-size:16px;--icon-size:24px}[_nghost-%COMP%]     core-user-avatar .core-avatar-extra-img, [_nghost-%COMP%]     core-user-avatar core-mod-icon{margin:0!important;position:absolute;right:-4px;bottom:-4px;padding:.2rem}[_nghost-%COMP%]     core-user-avatar .core-avatar-extra-img{background:var(--background-color);border-radius:var(--medium-radius)}[_nghost-%COMP%]     core-user-avatar .core-avatar-extra-img img{max-width:var(--extra-icon-size);max-height:var(--extra-icon-size);display:block}[_nghost-%COMP%]     core-user-avatar core-mod-icon{--size:var(--extra-icon-size)}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]{padding:.7rem;background:var(--background-color);border-radius:var(--small-radius)}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size)}[_nghost-%COMP%]   .core-notification-icon[_ngcontent-%COMP%]{--module-icon-size:var(--icon-size);margin:6px 8px 6px 0}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .core-notification-icon[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}\"]}),AddonNotificationsListPage})();var D=n(\"dQ3M\"),R=n(\"vY5A\"),F=n(\"Y+03\");const j=[{path:\"\",component:z,children:Object(R.c)([{path:\":id\",loadChildren:()=>n.e(11).then(n.bind(null,\"csSw\")).then((i=>i.AddonNotificationsNotificationPageModule))}],(()=>F.a.isTablet))}];let Q=(()=>{class AddonNotificationsListPageModule{}return AddonNotificationsListPageModule.ɵmod=A.wc({type:AddonNotificationsListPageModule}),AddonNotificationsListPageModule.ɵinj=A.vc({factory:function AddonNotificationsListPageModule_Factory(i){return new(i||AddonNotificationsListPageModule)},imports:[[o.m.forChild(j),e.a,D.a],o.m]}),AddonNotificationsListPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&A.kd(Q,{declarations:[z],imports:[o.m,e.a,D.a],exports:[o.m]}))}}]);","name":"85.78c0198e35a82da082ba.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[85],{\n\n/***/ \"NNBU\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonNotificationsListPageModule\", function() { return /* binding */ list_module_AddonNotificationsListPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/utils.ts\nvar utils = __webpack_require__(\"bFG1\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/addons/notifications/services/notifications.ts\nvar notifications = __webpack_require__(\"yjU1\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./src/core/components/split-view/split-view.ts\nvar split_view = __webpack_require__(\"46ml\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/routed-items-manager-sources-tracker.ts\nvar routed_items_manager_sources_tracker = __webpack_require__(\"baaQ\");\n\n// EXTERNAL MODULE: ./src/core/features/pushnotifications/services/push-delegate.ts\nvar push_delegate = __webpack_require__(\"2eZG\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/core/features/mainmenu/classes/deep-link-manager.ts\nvar deep_link_manager = __webpack_require__(\"YyYz\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/time.ts\nvar time = __webpack_require__(\"Q98t\");\n\n// EXTERNAL MODULE: ./src/addons/notifications/classes/notifications-source.ts\nvar notifications_source = __webpack_require__(\"VUQF\");\n\n// EXTERNAL MODULE: ./src/core/classes/items-management/list-items-manager.ts\nvar list_items_manager = __webpack_require__(\"EoRH\");\n\n// EXTERNAL MODULE: ./src/addons/notifications/classes/legacy-notifications-source.ts\nvar legacy_notifications_source = __webpack_require__(\"qkYQ\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/features/mainmenu/components/user-menu-button/user-menu-button.ts\nvar user_menu_button = __webpack_require__(\"C1x5\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/infinite-loading/infinite-loading.ts\nvar infinite_loading = __webpack_require__(\"xpMl\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-footer.ts\nvar collapsible_footer = __webpack_require__(\"3jOR\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/components/user-avatar/user-avatar.ts\nvar user_avatar = __webpack_require__(\"FeAf\");\n\n// EXTERNAL MODULE: ./src/core/components/mod-icon/mod-icon.ts\nvar mod_icon = __webpack_require__(\"eAud\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/components/empty-box/empty-box.ts\nvar empty_box = __webpack_require__(\"r8G5\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// EXTERNAL MODULE: ./src/core/pipes/time-ago.ts\nvar time_ago = __webpack_require__(\"lAaw\");\n\n// CONCATENATED MODULE: ./src/addons/notifications/pages/list/list.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonNotificationsListPage_ion_item_17_core_user_avatar_2_div_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 20);\n        core[\"zc\" /* ɵɵelement */](1, \"img\", 21);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */](2).$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"src\", notification_r3.iconurl, core[\"id\" /* ɵɵsanitizeUrl */]);\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_core_user_avatar_2_core_mod_icon_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-mod-icon\", 22);\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */](2).$implicit;\n        core[\"Vc\" /* ɵɵproperty */](\"modicon\", notification_r3.iconurl)(\"modname\", notification_r3.modname)(\"showAlt\", false);\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_core_user_avatar_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"core-user-avatar\", 17);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonNotificationsListPage_ion_item_17_core_user_avatar_2_div_1_Template, 2, 1, \"div\", 18);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonNotificationsListPage_ion_item_17_core_user_avatar_2_core_mod_icon_2_Template, 1, 3, \"core-mod-icon\", 19);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"Vc\" /* ɵɵproperty */](\"user\", notification_r3)(\"profileUrl\", notification_r3.profileimageurlfrom)(\"fullname\", notification_r3.userfromfullname)(\"userId\", notification_r3.useridfrom);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", notification_r3.iconurl && !notification_r3.modname);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", notification_r3.modname);\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_ng_container_3_div_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 25);\n        core[\"zc\" /* ɵɵelement */](1, \"img\", 21);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */](2).$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"src\", notification_r3.iconurl, core[\"id\" /* ɵɵsanitizeUrl */]);\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_ng_container_3_core_mod_icon_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-mod-icon\", 26);\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */](2).$implicit;\n        core[\"Vc\" /* ɵɵproperty */](\"modicon\", notification_r3.iconurl)(\"modname\", notification_r3.modname)(\"showAlt\", false);\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_ng_container_3_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonNotificationsListPage_ion_item_17_ng_container_3_div_1_Template, 2, 1, \"div\", 23);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonNotificationsListPage_ion_item_17_ng_container_3_core_mod_icon_2_Template, 1, 3, \"core-mod-icon\", 24);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !notification_r3.modname);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", notification_r3.modname);\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_ng_container_10_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const notification_r3 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \\u00B7 \", notification_r3.userfromfullname, \"\");\n    }\n}\nfunction AddonNotificationsListPage_ion_item_17_ion_note_11_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-note\", 2);\n        core[\"zc\" /* ɵɵelement */](1, \"ion-icon\", 27);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n}\nconst _c0 = function (a0) { return { $a: a0 }; };\nfunction AddonNotificationsListPage_ion_item_17_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r20 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 11);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonNotificationsListPage_ion_item_17_Template_ion_item_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r20); const notification_r3 = ctx.$implicit; const ctx_r19 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r19.notifications.select(notification_r3); });\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n        core[\"nd\" /* ɵɵtemplate */](2, AddonNotificationsListPage_ion_item_17_core_user_avatar_2_Template, 3, 6, \"core-user-avatar\", 12);\n        core[\"nd\" /* ɵɵtemplate */](3, AddonNotificationsListPage_ion_item_17_ng_container_3_Template, 3, 2, \"ng-container\", 13);\n        core[\"Ec\" /* ɵɵelementStart */](4, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](5, \"p\", 14);\n        core[\"zc\" /* ɵɵelement */](6, \"core-format-text\", 15);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Ec\" /* ɵɵelementStart */](7, \"p\");\n        core[\"pd\" /* ɵɵtext */](8);\n        core[\"Pc\" /* ɵɵpipe */](9, \"coreTimeAgo\");\n        core[\"nd\" /* ɵɵtemplate */](10, AddonNotificationsListPage_ion_item_17_ng_container_10_Template, 2, 1, \"ng-container\", 13);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](11, AddonNotificationsListPage_ion_item_17_ion_note_11_Template, 2, 0, \"ion-note\", 16);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const notification_r3 = ctx.$implicit;\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"detail\", false);\n        core[\"mc\" /* ɵɵattribute */](\"aria-current\", ctx_r0.notifications.getItemAriaCurrent(notification_r3))(\"aria-label\", notification_r3.timeread ? notification_r3.subject : core[\"Rc\" /* ɵɵpipeBind2 */](1, 11, \"addon.notifications.unreadnotification\", core[\"ad\" /* ɵɵpureFunction1 */](16, _c0, notification_r3.subject)));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", notification_r3.useridfrom > 0);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", notification_r3.useridfrom <= 0 && notification_r3.iconurl);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", notification_r3.subject)(\"contextInstanceId\", 0)(\"wsNotFiltered\", true);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](9, 14, notification_r3.timecreated));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", notification_r3.useridfrom > 0);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !notification_r3.timeread);\n    }\n}\nfunction AddonNotificationsListPage_core_empty_box_18_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-empty-box\", 28);\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"message\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"addon.notifications.therearentnotificationsyet\"));\n    }\n}\nfunction AddonNotificationsListPage_ion_chip_21_ion_icon_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"ion-icon\", 31);\n    }\n}\nfunction AddonNotificationsListPage_ion_chip_21_ion_spinner_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"ion-spinner\");\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n    }\n    if (rf & 2) {\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"core.loading\"));\n    }\n}\nfunction AddonNotificationsListPage_ion_chip_21_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r24 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-chip\", 29);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonNotificationsListPage_ion_chip_21_Template_ion_chip_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r24); const ctx_r23 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r23.markAllNotificationsAsRead(); });\n        core[\"nd\" /* ɵɵtemplate */](1, AddonNotificationsListPage_ion_chip_21_ion_icon_1_Template, 1, 0, \"ion-icon\", 30);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonNotificationsListPage_ion_chip_21_ion_spinner_2_Template, 2, 3, \"ion-spinner\", 13);\n        core[\"pd\" /* ɵɵtext */](3);\n        core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r2 = core[\"Oc\" /* ɵɵnextContext */]();\n        core[\"Vc\" /* ɵɵproperty */](\"disabled\", ctx_r2.loadingMarkAllNotificationsAsRead);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !ctx_r2.loadingMarkAllNotificationsAsRead);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx_r2.loadingMarkAllNotificationsAsRead);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](4, 4, \"addon.notifications.markallread\"), \" \");\n    }\n}\n/**\n * Page that displays the list of notifications.\n */\nlet list_AddonNotificationsListPage = /*@__PURE__*/ (() => {\n    class AddonNotificationsListPage {\n        constructor() {\n            this.fetchMoreNotificationsFailed = false;\n            this.canMarkAllNotificationsAsRead = false;\n            this.loadingMarkAllNotificationsAsRead = false;\n            this.pendingRefresh = false;\n            try {\n                const source = routed_items_manager_sources_tracker[\"a\" /* CoreRoutedItemsManagerSourcesTracker */].getOrCreateSource(sites[\"b\" /* CoreSites */].getRequiredCurrentSite().isVersionGreaterEqualThan('4.0')\n                    ? notifications_source[\"a\" /* AddonNotificationsNotificationsSource */]\n                    : legacy_notifications_source[\"a\" /* AddonLegacyNotificationsNotificationsSource */], []);\n                this.notifications = new list_items_manager[\"a\" /* CoreListItemsManager */](source, AddonNotificationsListPage);\n            }\n            catch (error) {\n                dom[\"a\" /* CoreDomUtils */].showErrorModal(error);\n                services_navigator[\"a\" /* CoreNavigator */].back();\n            }\n        }\n        /**\n         * @inheritdoc\n         */\n        ngAfterViewInit() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                yield this.fetchInitialNotifications();\n                this.notifications.start(this.splitView);\n                this.cronObserver = events[\"b\" /* CoreEvents */].on(notifications[\"c\" /* AddonNotificationsProvider */].READ_CRON_EVENT, () => {\n                    if (!this.isCurrentView) {\n                        return;\n                    }\n                    this.refreshNotifications();\n                }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                this.pushObserver = push_delegate[\"a\" /* CorePushNotificationsDelegate */].on('receive').subscribe((notification) => {\n                    // New notification received. If it's from current site, refresh the data.\n                    if (!this.isCurrentView) {\n                        this.pendingRefresh = true;\n                        return;\n                    }\n                    if (!utils[\"a\" /* CoreUtils */].isTrueOrOne(notification.notif) || !sites[\"b\" /* CoreSites */].isCurrentSite(notification.site)) {\n                        return;\n                    }\n                    this.refreshNotifications();\n                });\n                this.readObserver = events[\"b\" /* CoreEvents */].on(notifications[\"c\" /* AddonNotificationsProvider */].READ_CHANGED_EVENT, (data) => {\n                    if (!data.id) {\n                        return;\n                    }\n                    const notification = this.notifications.items.find((notification) => notification.id === data.id);\n                    if (!notification) {\n                        return;\n                    }\n                    notification.read = true;\n                    notification.timeread = data.time;\n                    this.loadMarkAllAsReadButton();\n                });\n                const deepLinkManager = new deep_link_manager[\"a\" /* CoreMainMenuDeepLinkManager */]();\n                deepLinkManager.treatLink();\n            });\n        }\n        /**\n         * Convenience function to get notifications. Gets unread notifications first.\n         *\n         * @param reload Whether to reload the list or load the next page.\n         */\n        fetchNotifications(reload) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                reload\n                    ? yield this.notifications.reload()\n                    : yield this.notifications.load();\n                this.fetchMoreNotificationsFailed = false;\n                this.loadMarkAllAsReadButton();\n            });\n        }\n        /**\n         * Obtain the initial batch of notifications.\n         */\n        fetchInitialNotifications() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    yield this.fetchNotifications(true);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error loading notifications');\n                    this.notifications.reset();\n                }\n            });\n        }\n        /**\n         * Load a new batch of Notifications.\n         *\n         * @param complete Completion callback.\n         */\n        fetchMoreNotifications(complete) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                try {\n                    yield this.fetchNotifications(false);\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'Error loading more notifications');\n                    this.fetchMoreNotificationsFailed = true;\n                }\n                complete();\n            });\n        }\n        /**\n         * Mark all notifications as read.\n         *\n         * @return Promise resolved when done.\n         */\n        markAllNotificationsAsRead() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                this.loadingMarkAllNotificationsAsRead = true;\n                yield utils[\"a\" /* CoreUtils */].ignoreErrors(notifications[\"a\" /* AddonNotifications */].markAllNotificationsAsRead());\n                events[\"b\" /* CoreEvents */].trigger(notifications[\"c\" /* AddonNotificationsProvider */].READ_CHANGED_EVENT, {\n                    time: time[\"a\" /* CoreTimeUtils */].timestamp(),\n                }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n                yield this.refreshNotifications();\n            });\n        }\n        /**\n         * Load mark all notifications as read button.\n         *\n         * @return Promise resolved when done.\n         */\n        loadMarkAllAsReadButton() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                // Check if mark all as read should be displayed (there are unread notifications).\n                try {\n                    this.loadingMarkAllNotificationsAsRead = true;\n                    const unreadCountData = yield notifications[\"a\" /* AddonNotifications */].getUnreadNotificationsCount();\n                    this.canMarkAllNotificationsAsRead = unreadCountData.count > 0;\n                }\n                finally {\n                    this.loadingMarkAllNotificationsAsRead = false;\n                }\n            });\n        }\n        /**\n         * Refresh notifications.\n         *\n         * @param refresher Refresher.\n         */\n        refreshNotifications(refresher) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                yield utils[\"a\" /* CoreUtils */].ignoreErrors(notifications[\"a\" /* AddonNotifications */].invalidateNotificationsList());\n                yield utils[\"a\" /* CoreUtils */].ignoreErrors(this.fetchNotifications(true));\n                refresher === null || refresher === void 0 ? void 0 : refresher.complete();\n            });\n        }\n        /**\n         * User entered the page.\n         */\n        ionViewDidEnter() {\n            this.isCurrentView = true;\n            if (!this.pendingRefresh) {\n                return;\n            }\n            this.pendingRefresh = false;\n            this.refreshNotifications();\n        }\n        /**\n         * User left the page.\n         */\n        ionViewDidLeave() {\n            this.isCurrentView = false;\n        }\n        /**\n         * @inheritdoc\n         */\n        ngOnDestroy() {\n            var _a, _b, _c, _d;\n            (_a = this.cronObserver) === null || _a === void 0 ? void 0 : _a.off();\n            (_b = this.readObserver) === null || _b === void 0 ? void 0 : _b.off();\n            (_c = this.pushObserver) === null || _c === void 0 ? void 0 : _c.unsubscribe();\n            (_d = this.notifications) === null || _d === void 0 ? void 0 : _d.destroy();\n        }\n    }\n    AddonNotificationsListPage.ɵfac = function AddonNotificationsListPage_Factory(t) { return new (t || AddonNotificationsListPage)(); };\n    AddonNotificationsListPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonNotificationsListPage, selectors: [[\"page-addon-notifications-list\"]], viewQuery: function AddonNotificationsListPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](split_view[\"a\" /* CoreSplitViewComponent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.splitView = _t.first);\n            }\n        }, decls: 22, vars: 16, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"hideUntil\"], [\"class\", \"ion-text-wrap\", \"button\", \"\", \"lines\", \"full\", 3, \"detail\", \"click\", 4, \"ngFor\", \"ngForOf\"], [\"icon\", \"far-bell\", 3, \"message\", 4, \"ngIf\"], [3, \"enabled\", \"error\", \"action\"], [\"slot\", \"fixed\", \"collapsible-footer\", \"\", \"appearOnBottom\", \"\", 1, \"mark-all-as-read\"], [\"color\", \"primary\", 3, \"disabled\", \"click\", 4, \"ngIf\"], [\"button\", \"\", \"lines\", \"full\", 1, \"ion-text-wrap\", 3, \"detail\", \"click\"], [\"slot\", \"start\", 3, \"user\", \"profileUrl\", \"fullname\", \"userId\", 4, \"ngIf\"], [4, \"ngIf\"], [1, \"item-heading\"], [\"contextLevel\", \"system\", 3, \"text\", \"contextInstanceId\", \"wsNotFiltered\"], [\"slot\", \"end\", 4, \"ngIf\"], [\"slot\", \"start\", 3, \"user\", \"profileUrl\", \"fullname\", \"userId\"], [\"class\", \"core-avatar-extra-img\", 4, \"ngIf\"], [3, \"modicon\", \"modname\", \"showAlt\", 4, \"ngIf\"], [1, \"core-avatar-extra-img\"], [\"alt\", \"\", \"role\", \"presentation\", 3, \"src\"], [3, \"modicon\", \"modname\", \"showAlt\"], [\"class\", \"core-notification-icon\", \"slot\", \"start\", 4, \"ngIf\"], [\"class\", \"core-notification-icon\", \"slot\", \"start\", 3, \"modicon\", \"modname\", \"showAlt\", 4, \"ngIf\"], [\"slot\", \"start\", 1, \"core-notification-icon\"], [\"slot\", \"start\", 1, \"core-notification-icon\", 3, \"modicon\", \"modname\", \"showAlt\"], [\"name\", \"fas-circle\", \"color\", \"primary\", \"aria-hidden\", \"true\"], [\"icon\", \"far-bell\", 3, \"message\"], [\"color\", \"primary\", 3, \"disabled\", \"click\"], [\"name\", \"fas-eye\", \"aria-hidden\", \"true\", 4, \"ngIf\"], [\"name\", \"fas-eye\", \"aria-hidden\", \"true\"]], template: function AddonNotificationsListPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"pd\" /* ɵɵtext */](7);\n                core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-buttons\", 2);\n                core[\"zc\" /* ɵɵelement */](10, \"core-user-menu-button\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](11, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](12, \"core-split-view\");\n                core[\"Ec\" /* ɵɵelementStart */](13, \"ion-refresher\", 3);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonNotificationsListPage_Template_ion_refresher_ionRefresh_13_listener($event) { return ctx.refreshNotifications($event.target); });\n                core[\"zc\" /* ɵɵelement */](14, \"ion-refresher-content\", 4);\n                core[\"Pc\" /* ɵɵpipe */](15, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](16, \"core-loading\", 5);\n                core[\"nd\" /* ɵɵtemplate */](17, AddonNotificationsListPage_ion_item_17_Template, 12, 18, \"ion-item\", 6);\n                core[\"nd\" /* ɵɵtemplate */](18, AddonNotificationsListPage_core_empty_box_18_Template, 2, 3, \"core-empty-box\", 7);\n                core[\"Ec\" /* ɵɵelementStart */](19, \"core-infinite-loading\", 8);\n                core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonNotificationsListPage_Template_core_infinite_loading_action_19_listener($event) { return ctx.fetchMoreNotifications($event); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](20, \"div\", 9);\n                core[\"nd\" /* ɵɵtemplate */](21, AddonNotificationsListPage_ion_chip_21_Template, 5, 6, \"ion-chip\", 10);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 10, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](8, 12, \"addon.notifications.notifications\"));\n                core[\"lc\" /* ɵɵadvance */](6);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", !ctx.notifications.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](15, 14, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", ctx.notifications.loaded);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", ctx.notifications.items);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", !ctx.notifications || ctx.notifications.empty);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"enabled\", ctx.notifications.loaded && !ctx.notifications.completed)(\"error\", ctx.fetchMoreNotificationsFailed);\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.notifications.loaded && ctx.canMarkAllNotificationsAsRead);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], user_menu_button[\"a\" /* CoreMainMenuUserButtonComponent */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], split_view[\"a\" /* CoreSplitViewComponent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], loading[\"a\" /* CoreLoadingComponent */], common[\"s\" /* NgForOf */], common[\"t\" /* NgIf */], infinite_loading[\"a\" /* CoreInfiniteLoadingComponent */], collapsible_footer[\"a\" /* CoreCollapsibleFooterDirective */], ionic_angular[\"I\" /* IonItem */], ionic_angular[\"O\" /* IonLabel */], format_text[\"a\" /* CoreFormatTextDirective */], user_avatar[\"a\" /* CoreUserAvatarComponent */], mod_icon[\"a\" /* CoreModIconComponent */], ionic_angular[\"W\" /* IonNote */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], empty_box[\"a\" /* CoreEmptyBoxComponent */], ionic_angular[\"t\" /* IonChip */], ionic_angular[\"qb\" /* IonSpinner */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */], time_ago[\"a\" /* CoreTimeAgoPipe */]], styles: [\"ion-item[_ngcontent-%COMP%]{--icon-size:16px;--extra-icon-size:12px;--core-avatar-size:32px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p.item-heading[_ngcontent-%COMP%]{font-size:var(--text-size);-webkit-line-clamp:3;overflow:hidden;text-overflow:ellipsis;-webkit-box-orient:vertical;display:-webkit-box}ion-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:12px}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{margin:0;padding-left:8px;padding-right:0;padding-top:12px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]{padding-left:unset;padding-right:unset;-webkit-padding-start:8px;padding-inline-start:8px;-webkit-padding-end:0;padding-inline-end:0}}ion-item[_ngcontent-%COMP%]   ion-note[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{font-size:6px;vertical-align:middle}ion-item[_ngcontent-%COMP%]   [slot=start][_ngcontent-%COMP%]{align-self:start;margin-top:16px}ion-item[_ngcontent-%COMP%]   core-mod-icon.core-notification-icon[_ngcontent-%COMP%], ion-item[_ngcontent-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]{padding:8px;max-width:var(--core-avatar-size);max-height:var(--core-avatar-size)}.mark-all-as-read[_ngcontent-%COMP%]{padding-bottom:16px;bottom:0;left:0;right:0;display:flex;background:transparent;box-shadow:none;pointer-events:none}.mark-all-as-read[_ngcontent-%COMP%]   ion-chip.ion-color[_ngcontent-%COMP%]{pointer-events:all;margin:0 auto;box-shadow:0 2px 4px rgba(0,0,0,.4)}.mark-all-as-read[_ngcontent-%COMP%]   ion-chip.ion-color[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{width:16px;height:16px;margin-left:0;margin-right:8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.mark-all-as-read[_ngcontent-%COMP%]   ion-chip.ion-color[_ngcontent-%COMP%]   ion-spinner[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}ion-content[_ngcontent-%COMP%]::part(scroll){padding-bottom:44px}\", \"[_nghost-%COMP%]{--extra-icon-size:16px;--icon-size:24px}[_nghost-%COMP%]     core-user-avatar .core-avatar-extra-img, [_nghost-%COMP%]     core-user-avatar core-mod-icon{margin:0!important;position:absolute;right:-4px;bottom:-4px;padding:.2rem}[_nghost-%COMP%]     core-user-avatar .core-avatar-extra-img{background:var(--background-color);border-radius:var(--medium-radius)}[_nghost-%COMP%]     core-user-avatar .core-avatar-extra-img img{max-width:var(--extra-icon-size);max-height:var(--extra-icon-size);display:block}[_nghost-%COMP%]     core-user-avatar core-mod-icon{--size:var(--extra-icon-size)}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]{padding:.7rem;background:var(--background-color);border-radius:var(--small-radius)}[_nghost-%COMP%]   div.core-notification-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:var(--icon-size);height:var(--icon-size)}[_nghost-%COMP%]   .core-notification-icon[_ngcontent-%COMP%]{--module-icon-size:var(--icon-size);margin:6px 8px 6px 0}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){[_nghost-%COMP%]   .core-notification-icon[_ngcontent-%COMP%]{margin-left:unset;margin-right:unset;-webkit-margin-start:0;margin-inline-start:0;-webkit-margin-end:8px;margin-inline-end:8px}}\"] });\n    return AddonNotificationsListPage;\n})();\n\n// EXTERNAL MODULE: ./src/core/features/mainmenu/components/components.module.ts\nvar components_module = __webpack_require__(\"dQ3M\");\n\n// EXTERNAL MODULE: ./src/app/app-routing.module.ts\nvar app_routing_module = __webpack_require__(\"vY5A\");\n\n// EXTERNAL MODULE: ./src/core/services/screen.ts\nvar screen = __webpack_require__(\"Y+03\");\n\n// CONCATENATED MODULE: ./src/addons/notifications/pages/list/list.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\nconst routes = [\n    {\n        path: '',\n        component: list_AddonNotificationsListPage,\n        children: Object(app_routing_module[\"c\" /* conditionalRoutes */])([\n            {\n                path: ':id',\n                loadChildren: () => __webpack_require__.e(/* import() */ 11).then(__webpack_require__.bind(null, \"csSw\"))\n                    .then(m => m.AddonNotificationsNotificationPageModule),\n            },\n        ], () => screen[\"a\" /* CoreScreen */].isTablet),\n    },\n];\nlet list_module_AddonNotificationsListPageModule = /*@__PURE__*/ (() => {\n    class AddonNotificationsListPageModule {\n    }\n    AddonNotificationsListPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonNotificationsListPageModule });\n    AddonNotificationsListPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonNotificationsListPageModule_Factory(t) { return new (t || AddonNotificationsListPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* CoreMainMenuComponentsModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return AddonNotificationsListPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](list_module_AddonNotificationsListPageModule, { declarations: [list_AddonNotificationsListPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* CoreMainMenuComponentsModule */]], exports: [router[\"m\" /* RouterModule */]] });\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}