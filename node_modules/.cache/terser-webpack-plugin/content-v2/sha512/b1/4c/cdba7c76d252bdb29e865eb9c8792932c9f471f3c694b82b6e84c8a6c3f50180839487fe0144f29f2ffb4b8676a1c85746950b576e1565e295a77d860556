{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[62],{SHY4:function(t,e,n){\"use strict\";n.r(e),n.d(e,\"AddonModH5PActivityLazyModule\",(function(){return g}));var i=n(\"tyNb\"),o=n(\"L3Fv\"),d=n(\"MLi9\"),c=n(\"SqOg\"),a=n(\"mrSG\"),r=n(\"ghUQ\"),s=n(\"3LXp\"),l=n(\"j3ag\"),u=n(\"ArZS\"),y=n(\"fXoL\"),v=n(\"TEn/\"),m=n(\"4JiN\"),A=n(\"hMzs\"),h=n(\"nt/U\"),p=n(\"sYmb\");let P=(()=>{class AddonModH5PActivityIndexPage extends r.a{constructor(){super(...arguments),this.canLeaveSafely=!1}canLeave(){return Object(a.a)(this,void 0,void 0,(function*(){if(!this.activityComponent||!this.activityComponent.playing||this.activityComponent.isOpeningPage)return!0;if(!this.canLeaveSafely)try{return yield s.a.showConfirm(l.J.instant(\"core.confirmleaveunknownchanges\")),!0}catch(t){return!1}return!0}))}setCanleaveSafely(t){this.canLeaveSafely=t,this.remainingTimeout&&clearTimeout(this.remainingTimeout),this.remainingTimeout=setTimeout((()=>{this.canLeaveSafely=!1}),1e4)}ngOnDestroy(){this.remainingTimeout&&clearTimeout(this.remainingTimeout)}}return AddonModH5PActivityIndexPage.ɵfac=function AddonModH5PActivityIndexPage_Factory(t){return M(t||AddonModH5PActivityIndexPage)},AddonModH5PActivityIndexPage.ɵcmp=y.sc({type:AddonModH5PActivityIndexPage,selectors:[[\"page-addon-mod-h5pactivity-index\"]],viewQuery:function AddonModH5PActivityIndexPage_Query(t,e){var n;(1&t&&y.ud(u.a,!0),2&t)&&(y.dd(n=y.Nc())&&(e.activityComponent=n.first))},features:[y.ic],decls:14,vars:12,consts:[[\"collapsible\",\"\"],[\"slot\",\"start\"],[3,\"text\"],[\"contextLevel\",\"module\",3,\"text\",\"contextInstanceId\",\"courseId\"],[\"slot\",\"end\"],[\"slot\",\"fixed\",3,\"disabled\",\"ionRefresh\"],[3,\"pullingText\"],[3,\"module\",\"courseId\",\"dataRetrieved\",\"onActivityFinish\"]],template:function AddonModH5PActivityIndexPage_Template(t,e){1&t&&(y.Ec(0,\"ion-header\",0),y.Ec(1,\"ion-toolbar\"),y.Ec(2,\"ion-buttons\",1),y.zc(3,\"ion-back-button\",2),y.Pc(4,\"translate\"),y.Dc(),y.Ec(5,\"ion-title\"),y.Ec(6,\"h1\"),y.zc(7,\"core-format-text\",3),y.Dc(),y.Dc(),y.zc(8,\"ion-buttons\",4),y.Dc(),y.Dc(),y.Ec(9,\"ion-content\"),y.Ec(10,\"ion-refresher\",5),y.Mc(\"ionRefresh\",(function AddonModH5PActivityIndexPage_Template_ion_refresher_ionRefresh_10_listener(t){return null==e.activityComponent?null:e.activityComponent.doRefresh(t.target)})),y.zc(11,\"ion-refresher-content\",6),y.Pc(12,\"translate\"),y.Dc(),y.Ec(13,\"addon-mod-h5pactivity-index\",7),y.Mc(\"dataRetrieved\",(function AddonModH5PActivityIndexPage_Template_addon_mod_h5pactivity_index_dataRetrieved_13_listener(t){return e.updateData(t)}))(\"onActivityFinish\",(function AddonModH5PActivityIndexPage_Template_addon_mod_h5pactivity_index_onActivityFinish_13_listener(t){return e.setCanleaveSafely(t)})),y.Dc(),y.Dc()),2&t&&(y.lc(3),y.Vc(\"text\",y.Qc(4,8,\"core.back\")),y.lc(4),y.Vc(\"text\",e.title)(\"contextInstanceId\",e.module.id)(\"courseId\",e.courseId),y.lc(3),y.Vc(\"disabled\",null==e.activityComponent?null:e.activityComponent.showLoading),y.lc(1),y.Wc(\"pullingText\",y.Qc(12,10,\"core.pulltorefresh\")),y.lc(2),y.Vc(\"module\",e.module)(\"courseId\",e.courseId))},directives:[v.C,m.b,v.Ab,v.m,v.h,v.i,v.yb,A.a,h.a,v.v,v.bb,v.cb,u.a],pipes:[p.d],encapsulation:2}),AddonModH5PActivityIndexPage})();const M=y.Gc(P),f=[{path:\":courseId/:cmId\",component:P,canDeactivate:[d.a]},{path:\":courseId/:cmId/userattempts/:userId\",loadChildren:()=>n.e(64).then(n.bind(null,\"kNee\")).then((t=>t.AddonModH5PActivityUserAttemptsPageModule))},{path:\":courseId/:cmId/attemptresults/:attemptId\",loadChildren:()=>n.e(63).then(n.bind(null,\"Ottz\")).then((t=>t.AddonModH5PActivityAttemptResultsPageModule))},{path:\":courseId/:cmId/users\",loadChildren:()=>n.e(65).then(n.bind(null,\"SyS0\")).then((t=>t.AddonModH5PActivityUsersAttemptsPageModule))}];let g=(()=>{class AddonModH5PActivityLazyModule{}return AddonModH5PActivityLazyModule.ɵmod=y.wc({type:AddonModH5PActivityLazyModule}),AddonModH5PActivityLazyModule.ɵinj=y.vc({factory:function AddonModH5PActivityLazyModule_Factory(t){return new(t||AddonModH5PActivityLazyModule)},imports:[[i.m.forChild(f),o.a,c.a]]}),AddonModH5PActivityLazyModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&y.kd(g,{declarations:[P],imports:[i.m,o.a,c.a]}))}}]);","name":"62.9e8700a457193afd0763.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[62],{\n\n/***/ \"SHY4\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonModH5PActivityLazyModule\", function() { return /* binding */ h5pactivity_lazy_module_AddonModH5PActivityLazyModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./src/core/guards/can-leave.ts\nvar can_leave = __webpack_require__(\"MLi9\");\n\n// EXTERNAL MODULE: ./src/addons/mod/h5pactivity/components/components.module.ts\nvar components_module = __webpack_require__(\"SqOg\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/features/course/classes/main-activity-page.ts\nvar main_activity_page = __webpack_require__(\"ghUQ\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/singletons/index.ts\nvar singletons = __webpack_require__(\"j3ag\");\n\n// EXTERNAL MODULE: ./src/addons/mod/h5pactivity/components/index/index.ts\nvar index = __webpack_require__(\"ArZS\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/collapsible-header.ts\nvar collapsible_header = __webpack_require__(\"4JiN\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// CONCATENATED MODULE: ./src/addons/mod/h5pactivity/pages/index/index.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n/**\n * Page that displays an H5P activity.\n */\nlet index_AddonModH5PActivityIndexPage = /*@__PURE__*/ (() => {\n    class AddonModH5PActivityIndexPage extends main_activity_page[\"a\" /* CoreCourseModuleMainActivityPage */] {\n        constructor() {\n            super(...arguments);\n            this.canLeaveSafely = false;\n        }\n        /**\n         * @inheritdoc\n         */\n        canLeave() {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                if (!this.activityComponent || !this.activityComponent.playing || this.activityComponent.isOpeningPage) {\n                    return true;\n                }\n                if (!this.canLeaveSafely) {\n                    try {\n                        yield dom[\"a\" /* CoreDomUtils */].showConfirm(singletons[\"J\" /* Translate */].instant('core.confirmleaveunknownchanges'));\n                        return true;\n                    }\n                    catch (_a) {\n                        return false;\n                    }\n                }\n                return true;\n            });\n        }\n        /**\n         * Set if this activity can be leaved safely (withow showing warning modal) if activity is finished\n         * 10 seconds before.\n         *\n         * @param isDone the H5P activity is done.\n         */\n        setCanleaveSafely(isDone) {\n            this.canLeaveSafely = isDone;\n            if (this.remainingTimeout) {\n                clearTimeout(this.remainingTimeout);\n            }\n            // When user finish an activity, he have 10 seconds to leave safely (without show alert).\n            this.remainingTimeout = setTimeout(() => {\n                this.canLeaveSafely = false;\n            }, 10000);\n        }\n        /**\n         * @inheritdoc\n         */\n        ngOnDestroy() {\n            if (this.remainingTimeout) {\n                clearTimeout(this.remainingTimeout);\n            }\n        }\n    }\n    AddonModH5PActivityIndexPage.ɵfac = function AddonModH5PActivityIndexPage_Factory(t) { return ɵAddonModH5PActivityIndexPage_BaseFactory(t || AddonModH5PActivityIndexPage); };\n    AddonModH5PActivityIndexPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonModH5PActivityIndexPage, selectors: [[\"page-addon-mod-h5pactivity-index\"]], viewQuery: function AddonModH5PActivityIndexPage_Query(rf, ctx) {\n            if (rf & 1) {\n                core[\"ud\" /* ɵɵviewQuery */](index[\"a\" /* AddonModH5PActivityIndexComponent */], true);\n            }\n            if (rf & 2) {\n                var _t;\n                core[\"dd\" /* ɵɵqueryRefresh */](_t = core[\"Nc\" /* ɵɵloadQuery */]()) && (ctx.activityComponent = _t.first);\n            }\n        }, features: [core[\"ic\" /* ɵɵInheritDefinitionFeature */]], decls: 14, vars: 12, consts: [[\"collapsible\", \"\"], [\"slot\", \"start\"], [3, \"text\"], [\"contextLevel\", \"module\", 3, \"text\", \"contextInstanceId\", \"courseId\"], [\"slot\", \"end\"], [\"slot\", \"fixed\", 3, \"disabled\", \"ionRefresh\"], [3, \"pullingText\"], [3, \"module\", \"courseId\", \"dataRetrieved\", \"onActivityFinish\"]], template: function AddonModH5PActivityIndexPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\", 0);\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 1);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 2);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"zc\" /* ɵɵelement */](7, \"core-format-text\", 3);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"zc\" /* ɵɵelement */](8, \"ion-buttons\", 4);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](9, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](10, \"ion-refresher\", 5);\n                core[\"Mc\" /* ɵɵlistener */](\"ionRefresh\", function AddonModH5PActivityIndexPage_Template_ion_refresher_ionRefresh_10_listener($event) { return ctx.activityComponent == null ? null : ctx.activityComponent.doRefresh($event.target); });\n                core[\"zc\" /* ɵɵelement */](11, \"ion-refresher-content\", 6);\n                core[\"Pc\" /* ɵɵpipe */](12, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"addon-mod-h5pactivity-index\", 7);\n                core[\"Mc\" /* ɵɵlistener */](\"dataRetrieved\", function AddonModH5PActivityIndexPage_Template_addon_mod_h5pactivity_index_dataRetrieved_13_listener($event) { return ctx.updateData($event); })(\"onActivityFinish\", function AddonModH5PActivityIndexPage_Template_addon_mod_h5pactivity_index_onActivityFinish_13_listener($event) { return ctx.setCanleaveSafely($event); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 8, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", ctx.title)(\"contextInstanceId\", ctx.module.id)(\"courseId\", ctx.courseId);\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", ctx.activityComponent == null ? null : ctx.activityComponent.showLoading);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Wc\" /* ɵɵpropertyInterpolate */](\"pullingText\", core[\"Qc\" /* ɵɵpipeBind1 */](12, 10, \"core.pulltorefresh\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"module\", ctx.module)(\"courseId\", ctx.courseId);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], collapsible_header[\"b\" /* CoreCollapsibleHeaderDirective */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], format_text[\"a\" /* CoreFormatTextDirective */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], ionic_angular[\"bb\" /* IonRefresher */], ionic_angular[\"cb\" /* IonRefresherContent */], index[\"a\" /* AddonModH5PActivityIndexComponent */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */]], encapsulation: 2 });\n    return AddonModH5PActivityIndexPage;\n})();\nconst ɵAddonModH5PActivityIndexPage_BaseFactory = /*@__PURE__*/ core[\"Gc\" /* ɵɵgetInheritedFactory */](index_AddonModH5PActivityIndexPage);\n\n// CONCATENATED MODULE: ./src/addons/mod/h5pactivity/h5pactivity-lazy.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\nconst routes = [\n    {\n        path: ':courseId/:cmId',\n        component: index_AddonModH5PActivityIndexPage,\n        canDeactivate: [can_leave[\"a\" /* CanLeaveGuard */]],\n    },\n    {\n        path: ':courseId/:cmId/userattempts/:userId',\n        loadChildren: () => __webpack_require__.e(/* import() */ 64).then(__webpack_require__.bind(null, \"kNee\"))\n            .then(m => m.AddonModH5PActivityUserAttemptsPageModule),\n    },\n    {\n        path: ':courseId/:cmId/attemptresults/:attemptId',\n        loadChildren: () => __webpack_require__.e(/* import() */ 63).then(__webpack_require__.bind(null, \"Ottz\"))\n            .then(m => m.AddonModH5PActivityAttemptResultsPageModule),\n    },\n    {\n        path: ':courseId/:cmId/users',\n        loadChildren: () => __webpack_require__.e(/* import() */ 65).then(__webpack_require__.bind(null, \"SyS0\"))\n            .then(m => m.AddonModH5PActivityUsersAttemptsPageModule),\n    },\n];\nlet h5pactivity_lazy_module_AddonModH5PActivityLazyModule = /*@__PURE__*/ (() => {\n    class AddonModH5PActivityLazyModule {\n    }\n    AddonModH5PActivityLazyModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonModH5PActivityLazyModule });\n    AddonModH5PActivityLazyModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonModH5PActivityLazyModule_Factory(t) { return new (t || AddonModH5PActivityLazyModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* AddonModH5PActivityComponentsModule */],\n            ]] });\n    return AddonModH5PActivityLazyModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](h5pactivity_lazy_module_AddonModH5PActivityLazyModule, { declarations: [index_AddonModH5PActivityIndexPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* AddonModH5PActivityComponentsModule */]] });\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}