(window.webpackJsonp=window.webpackJsonp||[]).push([[94],{EWs8:function(e,o,n){"use strict";n.r(o),n.d(o,"CoreCourseModulePreviewPageModule",(function(){return O}));var t=n("tyNb"),i=n("L3Fv"),r=n("mrSG"),l=n("ULAo"),a=n("GBcW"),d=n("yQ+R"),u=n("pHTc"),c=n("3LXp"),s=n("bFG1"),m=n("fXoL"),p=n("TEn/"),h=n("4JiN"),g=n("hMzs"),C=n("ofXK"),f=n("nt/U"),P=n("PgjG"),M=n("xDoo"),_=n("NkYY"),w=n("3jOR"),v=n("ACYt"),b=n("iSJP"),I=n("3CSS"),D=n("5Yqf"),x=n("sYmb");function CoreCourseModulePreviewPage_ion_button_9_Template(e,o){if(1&e&&(m.Ec(0,"ion-button",16),m.Pc(1,"translate"),m.zc(2,"ion-icon",17),m.Dc()),2&e){const e=m.Oc();m.Vc("href",e.module.url)("showBrowserWarning",!1),m.mc("aria-label",m.Qc(1,3,"core.openinbrowser"))}}function CoreCourseModulePreviewPage_ion_chip_17_Template(e,o){if(1&e&&(m.Ec(0,"ion-chip",18),m.Ec(1,"ion-label"),m.zc(2,"span",19),m.Dc(),m.Dc()),2&e){const e=m.Oc();m.Vc("color",null==e.module.handlerData?null:e.module.handlerData.extraBadgeColor)("outline",!0),m.lc(2),m.Vc("innerHTML",null==e.module.handlerData?null:e.module.handlerData.extraBadge,m.gd)}}function CoreCourseModulePreviewPage_ion_badge_18_Template(e,o){1&e&&(m.Ec(0,"ion-badge",20),m.pd(1),m.Pc(2,"translate"),m.Dc()),2&e&&(m.lc(1),m.rd(" ",m.Qc(2,1,"core.course.hiddenfromstudents")," "))}function CoreCourseModulePreviewPage_ion_badge_19_Template(e,o){1&e&&(m.Ec(0,"ion-badge",20),m.pd(1),m.Pc(2,"translate"),m.Dc()),2&e&&(m.lc(1),m.rd(" ",m.Qc(2,1,"core.course.hiddenoncoursepage")," "))}function CoreCourseModulePreviewPage_core_course_unsupported_module_20_Template(e,o){if(1&e&&m.zc(0,"core-course-unsupported-module",21),2&e){const e=m.Oc();m.Vc("module",e.module)}}let y=(()=>{class CoreCourseModulePreviewPage{constructor(){this.loaded=!1,this.unsupported=!1,this.isDisabledInSite=!1,this.showManualCompletion=!1}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){try{this.module=u.a.getRequiredRouteParam("module"),this.courseId=u.a.getRequiredRouteNumberParam("courseId"),this.section=u.a.getRouteParam("section")}catch(e){return c.a.showErrorModal(e),u.a.back(),void 0}this.debouncedUpdateModule=s.a.debounce((()=>{this.doRefresh()}),1e4),yield this.fetchModule()}))}fetchModule(e=!1){return Object(r.a)(this,void 0,void 0,(function*(){e&&(this.module=yield l.a.getModule(this.module.id,this.courseId)),yield a.a.loadModuleOfflineCompletion(this.courseId,this.module),this.unsupported=!d.a.getHandlerName(this.module.modname),this.unsupported?this.isDisabledInSite=d.a.isModuleDisabledInSite(this.module.modname):this.module.handlerData=yield d.a.getModuleDataFor(this.module.modname,this.module,this.courseId),this.title=this.module.name,this.showManualCompletion=yield d.a.manualCompletionAlwaysShown(this.module),this.loaded=!0}))}doRefresh(e){return Object(r.a)(this,void 0,void 0,(function*(){yield l.a.invalidateModule(this.module.id),this.fetchModule(!0),null==e||e.complete()}))}onCompletionChange(){var e;return Object(r.a)(this,void 0,void 0,(function*(){null===(e=this.debouncedUpdateModule)||void 0===e?void 0:e.call(this)}))}}return CoreCourseModulePreviewPage.ɵfac=function CoreCourseModulePreviewPage_Factory(e){return new(e||CoreCourseModulePreviewPage)},CoreCourseModulePreviewPage.ɵcmp=m.sc({type:CoreCourseModulePreviewPage,selectors:[["page-core-course-module-preview"]],decls:22,vars:27,consts:[["collapsible",""],["slot","start"],[3,"text"],["contextLevel","module",3,"text","contextInstanceId","courseId"],["slot","end"],["fill","clear","core-link","",3,"href","showBrowserWarning",4,"ngIf"],[1,"limited-width"],["slot","fixed",3,"disabled","ionRefresh"],[3,"pullingText"],[1,"has-spacer",3,"hideUntil"],[3,"module","courseId","description","component","componentId","expandDescription","showAvailabilityInfo","showManualCompletion","completionChanged"],["title","",1,"core-module-additional-info"],["class","ion-text-wrap ion-text-start",3,"color","outline",4,"ngIf"],["color","warning","class","ion-text-wrap",4,"ngIf"],[3,"module",4,"ngIf"],["collapsible-footer","","appearOnBottom","",3,"hidden","courseId","currentModuleId"],["fill","clear","core-link","",3,"href","showBrowserWarning"],["name","fas-external-link-alt","slot","icon-only","aria-hidden","true"],[1,"ion-text-wrap","ion-text-start",3,"color","outline"],[3,"innerHTML"],["color","warning",1,"ion-text-wrap"],[3,"module"]],template:function CoreCourseModulePreviewPage_Template(e,o){1&e&&(m.Ec(0,"ion-header",0),m.Ec(1,"ion-toolbar"),m.Ec(2,"ion-buttons",1),m.zc(3,"ion-back-button",2),m.Pc(4,"translate"),m.Dc(),m.Ec(5,"ion-title"),m.Ec(6,"h1"),m.zc(7,"core-format-text",3),m.Dc(),m.Dc(),m.Ec(8,"ion-buttons",4),m.nd(9,CoreCourseModulePreviewPage_ion_button_9_Template,3,5,"ion-button",5),m.Dc(),m.Dc(),m.Dc(),m.Ec(10,"ion-content",6),m.Ec(11,"ion-refresher",7),m.Mc("ionRefresh",(function CoreCourseModulePreviewPage_Template_ion_refresher_ionRefresh_11_listener(e){return o.doRefresh(e.target)})),m.zc(12,"ion-refresher-content",8),m.Pc(13,"translate"),m.Dc(),m.Ec(14,"core-loading",9),m.Ec(15,"core-course-module-info",10),m.Mc("completionChanged",(function CoreCourseModulePreviewPage_Template_core_course_module_info_completionChanged_15_listener(){return o.onCompletionChange()})),m.Ec(16,"div",11),m.nd(17,CoreCourseModulePreviewPage_ion_chip_17_Template,3,3,"ion-chip",12),m.nd(18,CoreCourseModulePreviewPage_ion_badge_18_Template,3,3,"ion-badge",13),m.nd(19,CoreCourseModulePreviewPage_ion_badge_19_Template,3,3,"ion-badge",13),m.Dc(),m.Dc(),m.nd(20,CoreCourseModulePreviewPage_core_course_unsupported_module_20_Template,1,1,"core-course-unsupported-module",14),m.Dc(),m.zc(21,"core-course-module-navigation",15),m.Dc()),2&e&&(m.lc(3),m.Vc("text",m.Qc(4,23,"core.back")),m.lc(4),m.Vc("text",o.title)("contextInstanceId",o.module.id)("courseId",o.courseId),m.lc(2),m.Vc("ngIf",o.module.url&&o.module.uservisible&&!o.unsupported),m.lc(2),m.Vc("disabled",!o.loaded),m.lc(1),m.Wc("pullingText",m.Qc(13,25,"core.pulltorefresh")),m.lc(2),m.Vc("hideUntil",o.loaded),m.lc(1),m.Vc("module",o.module)("courseId",o.courseId)("description",o.module.description)("component",o.module.modname)("componentId",o.module.id)("expandDescription",!0)("showAvailabilityInfo",!0)("showManualCompletion",o.showManualCompletion),m.lc(2),m.Vc("ngIf",null==o.module.handlerData?null:o.module.handlerData.extraBadge),m.lc(1),m.Vc("ngIf",0===o.module.visible),m.lc(1),m.Vc("ngIf",0!==o.module.visible&&o.module.isStealth),m.lc(1),m.Vc("ngIf",o.unsupported),m.lc(1),m.Vc("hidden",!o.loaded)("courseId",o.courseId)("currentModuleId",o.module.id))},directives:[p.C,h.b,p.Ab,p.m,p.h,p.i,p.yb,g.a,C.t,f.a,p.v,p.bb,p.cb,P.a,M.a,_.a,w.a,v.a,p.l,b.a,p.D,I.a,p.t,p.O,p.k,D.a],pipes:[x.d],styles:[".core-module-availabilityinfo[_ngcontent-%COMP%]{background:var(--light);border-radius:var(--small-radius);padding:8px;font-size:90%}.core-module-availabilityinfo[_ngcontent-%COMP%]     ul{margin-top:.5em}.core-module-availabilityinfo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:8px}@supports ((-webkit-margin-start:0) or (margin-inline-start:0)) or (-webkit-margin-start:0){.core-module-availabilityinfo[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:unset;-webkit-margin-end:8px;margin-inline-end:8px}}"]}),CoreCourseModulePreviewPage})();var E=n("Fjfc");const T=[{path:"",component:y}];let O=(()=>{class CoreCourseModulePreviewPageModule{}return CoreCourseModulePreviewPageModule.ɵmod=m.wc({type:CoreCourseModulePreviewPageModule}),CoreCourseModulePreviewPageModule.ɵinj=m.vc({factory:function CoreCourseModulePreviewPageModule_Factory(e){return new(e||CoreCourseModulePreviewPageModule)},imports:[[t.m.forChild(T),i.a,E.a],t.m]}),CoreCourseModulePreviewPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&m.kd(O,{declarations:[y],imports:[t.m,i.a,E.a],exports:[t.m]}))}}]);