(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{C1x5:function(e,n,t){"use strict";t.d(n,"a",(function(){return g}));var o=t("Y+03"),i=t("9+EE"),c=t("3LXp"),r=t("rxSe"),a=t("EOS8"),s=t("fXoL"),l=t("TEn/"),u=t("ofXK"),d=t("FeAf"),_=t("6A9T"),m=t("saTE"),p=t("sYmb");function CoreMainMenuUserButtonComponent_core_user_avatar_0_Template(e,n){if(1&e){const e=s.Fc();s.Ec(0,"core-user-avatar",1),s.Mc("ariaButtonClick",(function CoreMainMenuUserButtonComponent_core_user_avatar_0_Template_core_user_avatar_ariaButtonClick_0_listener(n){s.fd(e);return s.Oc().openUserMenu(n)})),s.Pc(1,"translate"),s.Dc()}if(2&e){const e=s.Oc();s.Vc("user",e.siteInfo)("linkProfile",!1)("userTour",e.userTour),s.mc("aria-label",s.Qc(1,4,"core.user.useraccount"))}}let g=(()=>{class CoreMainMenuUserButtonComponent{constructor(e){this.routerOutlet=e,this.alwaysShow=!1,this.isMainScreen=!1,this.userTour={id:"user-menu",component:r.a,alignment:"start",side:o.a.isMobile?"start":"end"};const n=i.b.getRequiredCurrentSite();this.siteInfo=n.getInfo()}ngOnInit(){this.isMainScreen=!this.routerOutlet.canGoBack()}openUserMenu(e){e.preventDefault(),e.stopPropagation(),c.a.openSideModal({component:a.a})}}return CoreMainMenuUserButtonComponent.ɵfac=function CoreMainMenuUserButtonComponent_Factory(e){return new(e||CoreMainMenuUserButtonComponent)(s.yc(l.gb))},CoreMainMenuUserButtonComponent.ɵcmp=s.sc({type:CoreMainMenuUserButtonComponent,selectors:[["core-user-menu-button"]],inputs:{alwaysShow:"alwaysShow"},decls:1,vars:1,consts:[["class","core-bar-button-image clickable","role","button","tabindex","0",3,"user","linkProfile","userTour","ariaButtonClick",4,"ngIf"],["role","button","tabindex","0",1,"core-bar-button-image","clickable",3,"user","linkProfile","userTour","ariaButtonClick"]],template:function CoreMainMenuUserButtonComponent_Template(e,n){1&e&&s.nd(0,CoreMainMenuUserButtonComponent_core_user_avatar_0_Template,2,6,"core-user-avatar",0),2&e&&s.Vc("ngIf",(n.alwaysShow||n.isMainScreen)&&n.siteInfo)},directives:[u.t,d.a,_.a,m.a],pipes:[p.d],styles:["core-user-avatar[_ngcontent-%COMP%]{padding:0}ion-tabs.placement-side[_nghost-%COMP%]   ion-toolbar[_ngcontent-%COMP%], ion-tabs.placement-side   ion-toolbar   [_nghost-%COMP%]{display:none}ion-tab-bar[_nghost-%COMP%]   core-user-avatar[_ngcontent-%COMP%]     img, ion-tab-bar   [_nghost-%COMP%]   core-user-avatar[_ngcontent-%COMP%]     img, ion-toolbar[_nghost-%COMP%]   core-user-avatar[_ngcontent-%COMP%]     img, ion-toolbar   [_nghost-%COMP%]   core-user-avatar[_ngcontent-%COMP%]     img{padding:6px!important}"]}),CoreMainMenuUserButtonComponent})()},EOS8:function(e,n,t){"use strict";t.d(n,"a",(function(){return D}));var o=t("mrSG"),i=t("BaYo"),c=t("tS8V"),r=t("RiDC"),a=t("mv9v"),s=t("4pns"),l=t("+jPs"),u=t("pHTc"),d=t("9+EE"),_=t("3LXp"),m=t("j3ag"),p=t("fXoL"),g=t("TEn/"),f=t("ACYt"),C=t("3CSS"),M=t("nt/U"),h=t("PgjG"),b=t("ofXK"),v=t("iSJP"),T=t("hMzs"),O=t("FeAf"),E=t("sYmb");function CoreMainMenuUserMenuComponent_ion_item_13_img_2_Template(e,n){if(1&e&&p.zc(0,"img",20),2&e){const e=p.Oc(2);p.Vc("src",e.siteLogo,p.id)}}function CoreMainMenuUserMenuComponent_ion_item_13_Template(e,n){if(1&e&&(p.Ec(0,"ion-item",15),p.Ec(1,"ion-label"),p.nd(2,CoreMainMenuUserMenuComponent_ion_item_13_img_2_Template,1,1,"img",16),p.Ec(3,"p",17),p.zc(4,"core-format-text",18),p.Dc(),p.Ec(5,"a",19),p.pd(6),p.Dc(),p.Dc(),p.Dc()),2&e){const e=p.Oc();p.Vc("href",e.siteUrl),p.lc(2),p.Vc("ngIf",e.siteLogo&&e.siteLogoLoaded),p.lc(2),p.Vc("text",e.siteName)("contextInstanceId",0)("wsNotFiltered",!0),p.lc(1),p.Vc("href",e.siteUrl,p.id),p.lc(1),p.qd(e.siteUrl)}}function CoreMainMenuUserMenuComponent_ion_item_14_Template(e,n){if(1&e){const e=p.Fc();p.Ec(0,"ion-item",21),p.Mc("click",(function CoreMainMenuUserMenuComponent_ion_item_14_Template_ion_item_click_0_listener(n){p.fd(e);return p.Oc().openUserProfile(n)})),p.Pc(1,"translate"),p.zc(2,"core-user-avatar",22),p.Ec(3,"ion-label"),p.Ec(4,"h2"),p.pd(5),p.Dc(),p.Dc(),p.Dc()}if(2&e){const e=p.Oc();p.mc("aria-label",p.Qc(1,5,"core.user.profile")),p.lc(2),p.Vc("user",e.siteInfo)("userId",e.siteInfo.userid)("linkProfile",!1),p.lc(3),p.qd(e.siteInfo.fullname)}}function CoreMainMenuUserMenuComponent_ion_item_15_Template(e,n){1&e&&(p.Ec(0,"ion-item",23),p.Ec(1,"ion-label"),p.zc(2,"ion-spinner"),p.Pc(3,"translate"),p.Dc(),p.Dc()),2&e&&(p.lc(2),p.mc("aria-label",p.Qc(3,1,"core.loading")))}function CoreMainMenuUserMenuComponent_ion_item_16_ion_icon_2_Template(e,n){if(1&e&&p.zc(0,"ion-icon",29),2&e){const e=p.Oc().$implicit;p.Vc("name",e.icon)}}function CoreMainMenuUserMenuComponent_ion_item_16_ion_badge_7_Template(e,n){if(1&e&&(p.Ec(0,"ion-badge",30),p.pd(1),p.Dc()),2&e){const e=p.Oc().$implicit;p.Vc("hidden",e.loading||!e.badge),p.lc(1),p.rd(" ",e.badge," ")}}const _c0=function(e){return{$a:e}};function CoreMainMenuUserMenuComponent_ion_item_16_span_8_Template(e,n){if(1&e&&(p.Ec(0,"span",31),p.pd(1),p.Pc(2,"translate"),p.Dc()),2&e){const e=p.Oc().$implicit;p.lc(1),p.rd(" ",p.Rc(2,1,e.badgeA11yText,p.ad(4,_c0,e.badge))," ")}}function CoreMainMenuUserMenuComponent_ion_item_16_ion_spinner_9_Template(e,n){1&e&&(p.zc(0,"ion-spinner",0),p.Pc(1,"translate")),2&e&&p.mc("aria-label",p.Qc(1,1,"core.loading"))}const _c1=function(e){return["core-user-menu-handler",e]};function CoreMainMenuUserMenuComponent_ion_item_16_Template(e,n){if(1&e){const e=p.Fc();p.Ec(0,"ion-item",24),p.Mc("click",(function CoreMainMenuUserMenuComponent_ion_item_16_Template_ion_item_click_0_listener(t){p.fd(e);const o=n.$implicit;return p.Oc().handlerClicked(t,o)})),p.Pc(1,"translate"),p.nd(2,CoreMainMenuUserMenuComponent_ion_item_16_ion_icon_2_Template,1,1,"ion-icon",25),p.Ec(3,"ion-label"),p.Ec(4,"p",10),p.pd(5),p.Pc(6,"translate"),p.Dc(),p.Dc(),p.nd(7,CoreMainMenuUserMenuComponent_ion_item_16_ion_badge_7_Template,2,2,"ion-badge",26),p.nd(8,CoreMainMenuUserMenuComponent_ion_item_16_span_8_Template,3,6,"span",27),p.nd(9,CoreMainMenuUserMenuComponent_ion_item_16_ion_spinner_9_Template,2,3,"ion-spinner",28),p.Dc()}if(2&e){const e=n.$implicit;p.Vc("ngClass",p.ad(12,_c1,e.class||""))("hidden",e.hidden),p.mc("aria-label",p.Qc(1,8,e.title)),p.lc(2),p.Vc("ngIf",e.icon),p.lc(3),p.qd(p.Qc(6,10,e.title)),p.lc(2),p.Vc("ngIf",e.showBadge),p.lc(1),p.Vc("ngIf",e.showBadge&&e.badge&&e.badgeA11yText),p.lc(1),p.Vc("ngIf",e.showBadge&&e.loading)}}function CoreMainMenuUserMenuComponent_ion_item_25_Template(e,n){if(1&e){const e=p.Fc();p.Ec(0,"ion-item",32),p.Mc("click",(function CoreMainMenuUserMenuComponent_ion_item_25_Template_ion_item_click_0_listener(n){p.fd(e);return p.Oc().switchAccounts(n)})),p.zc(1,"ion-icon",33),p.Ec(2,"ion-label"),p.Ec(3,"p",10),p.pd(4),p.Pc(5,"translate"),p.Dc(),p.Dc(),p.Dc()}2&e&&(p.lc(4),p.qd(p.Qc(5,1,"core.mainmenu.switchaccount")))}function CoreMainMenuUserMenuComponent_ng_container_29_Template(e,n){1&e&&(p.Cc(0),p.zc(1,"ion-icon",34),p.pd(2),p.Pc(3,"translate"),p.Bc()),2&e&&(p.lc(2),p.rd(" ",p.Qc(3,1,"core.mainmenu.logout")," "))}function CoreMainMenuUserMenuComponent_ng_container_30_Template(e,n){1&e&&(p.Cc(0),p.zc(1,"ion-icon",35),p.pd(2),p.Pc(3,"translate"),p.Bc()),2&e&&(p.lc(2),p.rd(" ",p.Qc(3,1,"core.login.removeaccount")," "))}let D=(()=>{class CoreMainMenuUserMenuComponent{constructor(){this.siteLogoLoaded=!1,this.handlers=[],this.handlersLoaded=!1,this.displaySwitchAccount=!0,this.removeAccountOnLogout=!1}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){const e=d.b.getRequiredCurrentSite();if(this.siteId=e.getId(),this.siteInfo=e.getInfo(),this.siteName=e.getSiteName(),this.siteUrl=e.getURL(),this.displaySwitchAccount=!e.isFeatureDisabled("NoDelegate_SwitchAccount"),this.removeAccountOnLogout=!!i.a.CONFIG.removeaccountonlogout,this.loadSiteLogo(e),this.siteInfo){try{this.user=yield s.a.getProfile(this.siteInfo.userid)}catch(e){this.user={id:this.siteInfo.userid,fullname:this.siteInfo.fullname}}this.subscription=l.a.getProfileHandlersFor(this.user,l.b.USER_MENU).subscribe((e=>{if(!e||!this.user)return;const n=e.filter((e=>e.type===l.c.TYPE_NEW_PAGE)).map((e=>e.data));n.length===this.handlers.length&&JSON.stringify(n)===JSON.stringify(this.handlers)||(this.handlers=n),this.handlersLoaded=l.a.areHandlersLoaded(this.user.id,l.b.USER_MENU)}))}}))}loadSiteLogo(e){return Object(o.a)(this,void 0,void 0,(function*(){if(i.a.CONFIG.forceLoginLogo)return this.siteLogo="assets/img/login_logo.png",this.siteLogoLoaded=!0,void 0;try{const n=yield e.getPublicConfig();this.siteLogo=a.a.getLogoUrl(n)}catch(e){}finally{this.siteLogoLoaded=!0}}))}openUserProfile(e){return Object(o.a)(this,void 0,void 0,(function*(){this.siteInfo&&(yield this.close(e),u.a.navigateToSitePath("user/about",{params:{userId:this.siteInfo.userid}}))}))}openPreferences(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.close(e),u.a.navigateToSitePath("preferences")}))}handlerClicked(e,n){return Object(o.a)(this,void 0,void 0,(function*(){this.user&&(yield this.close(e),n.action(e,this.user,l.b.USER_MENU))}))}logout(e){return Object(o.a)(this,void 0,void 0,(function*(){if(u.a.currentRouteCanBlockLeave())return yield _.a.showAlert(void 0,m.J.instant("core.cannotlogoutpageblocks")),void 0;if(this.removeAccountOnLogout){const e=this.siteName?yield c.a.formatText(this.siteName,{clean:!0,singleLine:!0,filter:!1},[],this.siteId):"";try{yield _.a.showDeleteConfirm("core.login.confirmdeletesite",{sitename:e})}catch(e){return}}yield this.close(e),yield d.b.logout({forceLogout:!0,removeAccount:this.removeAccountOnLogout})}))}switchAccounts(e){return Object(o.a)(this,void 0,void 0,(function*(){if(u.a.currentRouteCanBlockLeave())return yield _.a.showAlert(void 0,m.J.instant("core.cannotlogoutpageblocks")),void 0;const n=yield m.x.getTop();e.preventDefault(),e.stopPropagation();(yield _.a.openSideModal({component:r.a,cssClass:"core-modal-lateral core-modal-lateral-sm"}))&&(yield m.x.dismiss(void 0,void 0,n.id))}))}addAccount(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.close(e),yield a.a.goToAddSite(!0,!0)}))}close(e){return Object(o.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation(),yield m.x.dismiss()}))}ngOnDestroy(){var e;null===(e=this.subscription)||void 0===e?void 0:e.unsubscribe()}}return CoreMainMenuUserMenuComponent.ɵfac=function CoreMainMenuUserMenuComponent_Factory(e){return new(e||CoreMainMenuUserMenuComponent)},CoreMainMenuUserMenuComponent.ɵcmp=p.sc({type:CoreMainMenuUserMenuComponent,selectors:[["core-main-menu-user-menu"]],decls:31,vars:23,consts:[["slot","end"],["fill","clear",3,"click"],["name","fas-times","slot","icon-only","aria-hidden","true"],[3,"hideUntil"],["button","","class","core-usermenu-siteinfo ion-text-wrap","lines","full","detail","false","core-link","","auto-login","yes",3,"href",4,"ngIf"],["button","","class","core-usermenu-handler ion-text-wrap","lines","full","detail","true",3,"click",4,"ngIf"],["class","ion-text-center",4,"ngIf"],["button","","class","ion-text-wrap","detail","true",3,"ngClass","hidden","click",4,"ngFor","ngForOf"],["button","","detail","true",1,"core-user-menu-preferences",3,"click"],["name","fas-wrench","slot","start","aria-hidden","true"],[1,"item-heading"],["button","","lines","full","detail","true","class","ion-text-wrap",3,"click",4,"ngIf"],[1,"ion-padding"],["expand","block","color","danger",1,"ion-text-wrap",3,"click"],[4,"ngIf"],["button","","lines","full","detail","false","core-link","","auto-login","yes",1,"core-usermenu-siteinfo","ion-text-wrap",3,"href"],["class","core-usermenu-site-logo","role","presentation","alt","","onError","this.class='image-not-found'",3,"src",4,"ngIf"],[1,"core-usermenu-sitename"],["contextLevel","system",3,"text","contextInstanceId","wsNotFiltered"],["core-link","","auto-login","yes",1,"core-usermenu-siteurl",3,"href"],["role","presentation","alt","","onError","this.class='image-not-found'",1,"core-usermenu-site-logo",3,"src"],["button","","lines","full","detail","true",1,"core-usermenu-handler","ion-text-wrap",3,"click"],["slot","start",3,"user","userId","linkProfile"],[1,"ion-text-center"],["button","","detail","true",1,"ion-text-wrap",3,"ngClass","hidden","click"],["slot","start","aria-hidden","true",3,"name",4,"ngIf"],["slot","end","aria-hidden","true",3,"hidden",4,"ngIf"],["class","sr-only",4,"ngIf"],["slot","end",4,"ngIf"],["slot","start","aria-hidden","true",3,"name"],["slot","end","aria-hidden","true",3,"hidden"],[1,"sr-only"],["button","","lines","full","detail","true",1,"ion-text-wrap",3,"click"],["name","fas-exchange-alt","slot","start","aria-hidden","true"],["name","fas-sign-out-alt","slot","start","aria-hidden","true"],["name","fas-trash","slot","start","aria-hidden","true"]],template:function CoreMainMenuUserMenuComponent_Template(e,n){1&e&&(p.Ec(0,"ion-header"),p.Ec(1,"ion-toolbar"),p.Ec(2,"ion-title"),p.Ec(3,"h2"),p.pd(4),p.Pc(5,"translate"),p.Dc(),p.Dc(),p.Ec(6,"ion-buttons",0),p.Ec(7,"ion-button",1),p.Mc("click",(function CoreMainMenuUserMenuComponent_Template_ion_button_click_7_listener(e){return n.close(e)})),p.Pc(8,"translate"),p.zc(9,"ion-icon",2),p.Dc(),p.Dc(),p.Dc(),p.Dc(),p.Ec(10,"ion-content"),p.Ec(11,"core-loading",3),p.Ec(12,"ion-list"),p.nd(13,CoreMainMenuUserMenuComponent_ion_item_13_Template,7,7,"ion-item",4),p.nd(14,CoreMainMenuUserMenuComponent_ion_item_14_Template,6,7,"ion-item",5),p.nd(15,CoreMainMenuUserMenuComponent_ion_item_15_Template,4,3,"ion-item",6),p.nd(16,CoreMainMenuUserMenuComponent_ion_item_16_Template,10,14,"ion-item",7),p.Ec(17,"ion-item",8),p.Mc("click",(function CoreMainMenuUserMenuComponent_Template_ion_item_click_17_listener(e){return n.openPreferences(e)})),p.Pc(18,"translate"),p.zc(19,"ion-icon",9),p.Ec(20,"ion-label"),p.Ec(21,"p",10),p.pd(22),p.Pc(23,"translate"),p.Dc(),p.Dc(),p.Dc(),p.Dc(),p.Dc(),p.Dc(),p.Ec(24,"ion-footer"),p.nd(25,CoreMainMenuUserMenuComponent_ion_item_25_Template,6,3,"ion-item",11),p.Ec(26,"div",12),p.Ec(27,"ion-button",13),p.Mc("click",(function CoreMainMenuUserMenuComponent_Template_ion_button_click_27_listener(e){return n.logout(e)})),p.Pc(28,"translate"),p.nd(29,CoreMainMenuUserMenuComponent_ng_container_29_Template,4,3,"ng-container",14),p.nd(30,CoreMainMenuUserMenuComponent_ng_container_30_Template,4,3,"ng-container",14),p.Dc(),p.Dc(),p.Dc()),2&e&&(p.lc(4),p.rd(" ",p.Qc(5,13,"core.user.useraccount")," "),p.lc(3),p.mc("aria-label",p.Qc(8,15,"core.close")),p.lc(4),p.Vc("hideUntil",n.siteLogoLoaded&&n.handlersLoaded),p.lc(2),p.Vc("ngIf",n.siteInfo),p.lc(1),p.Vc("ngIf",n.siteInfo),p.lc(1),p.Vc("ngIf",!(n.handlers&&n.handlers.length||n.handlersLoaded)),p.lc(1),p.Vc("ngForOf",n.handlers),p.lc(1),p.mc("aria-label",p.Qc(18,17,"core.settings.preferences")),p.lc(5),p.qd(p.Qc(23,19,"core.settings.preferences")),p.lc(3),p.Vc("ngIf",n.displaySwitchAccount),p.lc(2),p.mc("aria-label",p.Qc(28,21,"core.mainmenu.logout")),p.lc(2),p.Vc("ngIf",!n.removeAccountOnLogout),p.lc(1),p.Vc("ngIf",n.removeAccountOnLogout))},directives:[g.C,g.Ab,g.yb,g.m,f.a,g.l,g.D,C.a,M.a,g.v,h.a,g.P,b.t,b.s,g.I,g.O,g.A,v.a,T.a,O.a,g.qb,b.q,g.k],pipes:[E.d],styles:["[_nghost-%COMP%]   .core-user-menu-preferences[_ngcontent-%COMP%]{--inner-border-width:0;--border-width:1px 0 0 0}.core-usermenu-siteinfo[_ngcontent-%COMP%]{text-align:center;--padding-top:10px;--padding-bottom:10px}.core-usermenu-siteinfo[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin:0}.core-usermenu-sitename[_ngcontent-%COMP%]{font-weight:700;font-size:20px;line-height:24px}img.core-usermenu-site-logo[_ngcontent-%COMP%]{margin-bottom:8px;max-height:var(--core-user-menu-site-logo-max-height)}img.image-not-found[_ngcontent-%COMP%]{display:none}ion-footer[_ngcontent-%COMP%]{background:var(--contrast-background)}"]}),CoreMainMenuUserMenuComponent})()},RiDC:function(e,n,t){"use strict";t.d(n,"a",(function(){return O}));var o=t("mrSG"),i=t("3LXp"),c=t("9+EE"),r=t("mv9v"),a=t("pHTc"),s=t("tS8V"),l=t("MUy3"),u=t("j3ag"),d=t("fXoL"),_=t("TEn/"),m=t("ACYt"),p=t("3CSS"),g=t("ofXK"),f=t("nt/U"),C=t("PgjG"),M=t("yNDK"),h=t("hMzs"),b=t("iSJP"),v=t("NcPy"),T=t("sYmb");function CoreLoginSitesComponent_ion_button_11_Template(e,n){if(1&e){const e=d.Fc();d.Ec(0,"ion-button",1),d.Mc("click",(function CoreLoginSitesComponent_ion_button_11_Template_ion_button_click_0_listener(){d.fd(e);return d.Oc().toggleDelete()})),d.Pc(1,"translate"),d.zc(2,"ion-icon",14),d.Dc()}2&e&&d.mc("aria-label",d.Qc(1,1,"core.login.toggleremove"))}function CoreLoginSitesComponent_ion_card_15_ng_container_16_Template(e,n){1&e&&d.Ac(0)}const _c0=function(e){return{$a:e}},_c1=function(e){return{sites:e}};function CoreLoginSitesComponent_ion_card_15_Template(e,n){if(1&e&&(d.Ec(0,"ion-card"),d.Ec(1,"ion-item-divider",15),d.Ec(2,"ion-label"),d.Ec(3,"h2"),d.zc(4,"core-format-text",16),d.Dc(),d.Ec(5,"p"),d.Ec(6,"a",17),d.pd(7),d.Dc(),d.Dc(),d.Dc(),d.Dc(),d.Ec(8,"ion-item",18),d.Ec(9,"ion-avatar",0),d.zc(10,"img",19),d.Pc(11,"translate"),d.Dc(),d.Ec(12,"ion-label"),d.Ec(13,"p",20),d.pd(14),d.Dc(),d.Dc(),d.zc(15,"ion-icon",21),d.Dc(),d.nd(16,CoreLoginSitesComponent_ion_card_15_ng_container_16_Template,1,0,"ng-container",22),d.Dc()),2&e){const e=d.Oc(),n=d.ed(25);d.lc(4),d.Vc("text",e.accountsList.currentSite.siteName)("siteId",e.accountsList.currentSite.id),d.lc(2),d.Vc("href",e.accountsList.currentSite.siteUrl,d.id),d.lc(1),d.qd(e.accountsList.currentSite.siteUrlWithoutProtocol),d.lc(3),d.Wc("alt",d.Rc(11,10,"core.pictureof",d.ad(13,_c0,e.accountsList.currentSite.fullName))),d.Vc("src",e.accountsList.currentSite.avatar,d.id)("siteId",e.accountsList.currentSite.id),d.lc(4),d.qd(e.accountsList.currentSite.fullName),d.lc(2),d.Vc("ngTemplateOutlet",n)("ngTemplateOutletContext",d.ad(15,_c1,e.accountsList.sameSite))}}function CoreLoginSitesComponent_ion_card_16_ion_item_divider_1_Template(e,n){if(1&e&&(d.Ec(0,"ion-item-divider",15),d.Ec(1,"ion-label"),d.Ec(2,"h2"),d.zc(3,"core-format-text",16),d.Dc(),d.Ec(4,"p"),d.Ec(5,"a",24),d.pd(6),d.Dc(),d.Dc(),d.Dc(),d.Dc()),2&e){const e=d.Oc().$implicit;d.lc(3),d.Vc("text",e[0].siteName)("siteId",e[0].id),d.lc(2),d.Vc("href",e[0].siteUrl,d.id),d.lc(1),d.qd(e[0].siteUrlWithoutProtocol)}}function CoreLoginSitesComponent_ion_card_16_ng_container_2_Template(e,n){1&e&&d.Ac(0)}function CoreLoginSitesComponent_ion_card_16_Template(e,n){if(1&e&&(d.Ec(0,"ion-card"),d.nd(1,CoreLoginSitesComponent_ion_card_16_ion_item_divider_1_Template,7,4,"ion-item-divider",23),d.nd(2,CoreLoginSitesComponent_ion_card_16_ng_container_2_Template,1,0,"ng-container",22),d.Dc()),2&e){const e=n.$implicit;d.Oc();const t=d.ed(25);d.lc(1),d.Vc("ngIf",e[0]),d.lc(1),d.Vc("ngTemplateOutlet",t)("ngTemplateOutletContext",d.ad(3,_c1,e))}}const _c2=function(e){return{count:e}};function CoreLoginSitesComponent_ng_template_24_ion_item_0_ion_badge_7_Template(e,n){if(1&e&&(d.Ec(0,"ion-badge",3),d.Ec(1,"span",29),d.pd(2),d.Dc(),d.Ec(3,"span",12),d.pd(4),d.Pc(5,"translate"),d.Dc(),d.Dc()),2&e){const e=d.Oc().$implicit;d.Vc("@coreShowHideAnimation",void 0),d.lc(2),d.qd(e.badge),d.lc(2),d.qd(d.Rc(5,3,"core.login.sitebadgedescription",d.ad(6,_c2,e.badge)))}}function CoreLoginSitesComponent_ng_template_24_ion_item_0_ion_button_8_Template(e,n){if(1&e){const e=d.Fc();d.Ec(0,"ion-button",30),d.Mc("click",(function CoreLoginSitesComponent_ng_template_24_ion_item_0_ion_button_8_Template_ion_button_click_0_listener(n){d.fd(e);const t=d.Oc().$implicit;return d.Oc(2).deleteSite(n,t)})),d.Pc(1,"translate"),d.zc(2,"ion-icon",31),d.Dc()}2&e&&(d.Vc("@coreSlideInOut","fromRight"),d.mc("aria-label",d.Qc(1,2,"core.login.removeaccount")))}function CoreLoginSitesComponent_ng_template_24_ion_item_0_Template(e,n){if(1&e){const e=d.Fc();d.Ec(0,"ion-item",26),d.Mc("click",(function CoreLoginSitesComponent_ng_template_24_ion_item_0_Template_ion_item_click_0_listener(t){d.fd(e);const o=n.$implicit;return d.Oc(2).login(t,o.id)})),d.Ec(1,"ion-avatar",0),d.zc(2,"img",19),d.Pc(3,"translate"),d.Dc(),d.Ec(4,"ion-label"),d.Ec(5,"p",20),d.pd(6),d.Dc(),d.Dc(),d.nd(7,CoreLoginSitesComponent_ng_template_24_ion_item_0_ion_badge_7_Template,6,8,"ion-badge",27),d.nd(8,CoreLoginSitesComponent_ng_template_24_ion_item_0_ion_button_8_Template,3,4,"ion-button",28),d.Dc()}if(2&e){const e=n.$implicit,t=d.Oc(2);d.lc(2),d.Wc("alt",d.Rc(3,6,"core.pictureof",d.ad(9,_c0,e.fullName))),d.Vc("src",e.avatar,d.id)("siteId",e.id),d.lc(4),d.qd(e.fullName),d.lc(1),d.Vc("ngIf",!t.showDelete&&e.badge),d.lc(1),d.Vc("ngIf",t.showDelete)}}function CoreLoginSitesComponent_ng_template_24_Template(e,n){if(1&e&&d.nd(0,CoreLoginSitesComponent_ng_template_24_ion_item_0_Template,9,11,"ion-item",25),2&e){d.Vc("ngForOf",n.sites)}}let O=(()=>{class CoreLoginSitesComponent{constructor(){this.accountsList={sameSite:[],otherSites:[],count:0},this.showDelete=!1,this.loaded=!1,this.currentSiteId=c.b.getRequiredCurrentSite().getId()}ngOnInit(){return Object(o.a)(this,void 0,void 0,(function*(){this.accountsList=yield r.a.getAccountsList(this.currentSiteId),this.loaded=!0}))}add(e){return Object(o.a)(this,void 0,void 0,(function*(){yield this.close(e,!0),yield r.a.goToAddSite(!0,!0)}))}deleteSite(e,n){return Object(o.a)(this,void 0,void 0,(function*(){e.stopPropagation();let t=n.siteName||"";t=yield s.a.formatText(t,{clean:!0,singleLine:!0,filter:!1},[],n.id);try{yield i.a.showDeleteConfirm("core.login.confirmdeletesite",{sitename:t})}catch(e){return}try{yield r.a.deleteAccountFromList(this.accountsList,n),this.showDelete=!1}catch(e){i.a.showErrorModalDefault(e,"core.login.errordeletesite",!0)}}))}login(e,n){return Object(o.a)(this,void 0,void 0,(function*(){yield this.close(e,!0),yield a.a.navigateToSiteHome({preferCurrentTab:!1,siteId:n})}))}toggleDelete(){this.showDelete=!this.showDelete}close(e,n=!1){return Object(o.a)(this,void 0,void 0,(function*(){e.preventDefault(),e.stopPropagation(),yield u.x.dismiss(n)}))}}return CoreLoginSitesComponent.ɵfac=function CoreLoginSitesComponent_Factory(e){return new(e||CoreLoginSitesComponent)},CoreLoginSitesComponent.ɵcmp=d.sc({type:CoreLoginSitesComponent,selectors:[["core-login-sites"]],decls:26,vars:16,consts:[["slot","start"],["fill","clear",3,"click"],["name","arrow-back","slot","icon-only","aria-hidden","true"],["slot","end"],["fill","clear",3,"click",4,"ngIf"],[3,"hideUntil"],[1,"core-sitelist"],[4,"ngIf"],[4,"ngFor","ngForOf"],["slot","fixed","core-fab","","vertical","bottom","horizontal","end"],[3,"click"],["name","fas-plus","aria-hidden","true"],[1,"sr-only"],["siteList",""],["slot","icon-only","name","fas-pen","aria-hidden","true"],["sticky","true",1,"core-sitelist-sitename"],["clean","true",3,"text","siteId"],["core-link","","autoLogin","yes",3,"href"],["detail","false"],["core-external-content","","onError","this.src='assets/img/user-avatar.png'",3,"src","siteId","alt"],[1,"item-heading"],["color","success","name","fas-check"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["sticky","true","class","core-sitelist-sitename",4,"ngIf"],["core-link","","autoLogin","no",3,"href"],["button","","detail","true",3,"click",4,"ngFor","ngForOf"],["button","","detail","true",3,"click"],["slot","end",4,"ngIf"],["slot","end","fill","clear","color","danger",3,"click",4,"ngIf"],["aria-hidden","true"],["slot","end","fill","clear","color","danger",3,"click"],["name","fas-trash","slot","icon-only","aria-hidden","true"]],template:function CoreLoginSitesComponent_Template(e,n){1&e&&(d.Ec(0,"ion-header"),d.Ec(1,"ion-toolbar"),d.Ec(2,"ion-buttons",0),d.Ec(3,"ion-button",1),d.Mc("click",(function CoreLoginSitesComponent_Template_ion_button_click_3_listener(e){return n.close(e)})),d.Pc(4,"translate"),d.zc(5,"ion-icon",2),d.Dc(),d.Dc(),d.Ec(6,"ion-title"),d.Ec(7,"h1"),d.pd(8),d.Pc(9,"translate"),d.Dc(),d.Dc(),d.Ec(10,"ion-buttons",3),d.nd(11,CoreLoginSitesComponent_ion_button_11_Template,3,3,"ion-button",4),d.Dc(),d.Dc(),d.Dc(),d.Ec(12,"ion-content"),d.Ec(13,"core-loading",5),d.Ec(14,"ion-list",6),d.nd(15,CoreLoginSitesComponent_ion_card_15_Template,17,17,"ion-card",7),d.nd(16,CoreLoginSitesComponent_ion_card_16_Template,3,5,"ion-card",8),d.Dc(),d.Dc(),d.Ec(17,"ion-fab",9),d.Ec(18,"ion-fab-button",10),d.Mc("click",(function CoreLoginSitesComponent_Template_ion_fab_button_click_18_listener(e){return n.add(e)})),d.Pc(19,"translate"),d.zc(20,"ion-icon",11),d.Ec(21,"span",12),d.pd(22),d.Pc(23,"translate"),d.Dc(),d.Dc(),d.Dc(),d.Dc(),d.nd(24,CoreLoginSitesComponent_ng_template_24_Template,1,1,"ng-template",null,13,d.od)),2&e&&(d.lc(3),d.mc("aria-label",d.Qc(4,8,"core.back")),d.lc(5),d.qd(d.Qc(9,10,"core.mainmenu.switchaccount")),d.lc(3),d.Vc("ngIf",n.accountsList.count>1),d.lc(2),d.Vc("hideUntil",n.loaded),d.lc(2),d.Vc("ngIf",n.accountsList.currentSite),d.lc(1),d.Vc("ngForOf",n.accountsList.otherSites),d.lc(2),d.mc("aria-label",d.Qc(19,12,"core.login.add")),d.lc(4),d.qd(d.Qc(23,14,"core.login.add")))},directives:[_.C,_.Ab,_.m,m.a,_.l,_.D,p.a,_.yb,g.t,f.a,_.v,C.a,_.P,g.s,_.x,M.a,_.y,_.n,_.J,_.O,h.a,b.a,_.I,_.g,v.a,g.A,_.k],pipes:[T.d],styles:["ion-list.core-sitelist[_ngcontent-%COMP%]   .core-sitelist-sitename[_ngcontent-%COMP%]{border-bottom:1px solid var(--stroke)}ion-list.core-sitelist[_ngcontent-%COMP%]   .core-sitelist-sitename[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{margin-top:8px;margin-bottom:8px}"],data:{animation:[l.a.SLIDE_IN_OUT,l.a.SHOW_HIDE]}}),CoreLoginSitesComponent})()},rxSe:function(e,n,t){"use strict";t.d(n,"a",(function(){return l}));var o=t("mrSG"),i=t("7fqT"),c=t("fXoL"),r=t("ACYt"),a=t("TEn/"),s=t("sYmb");let l=(()=>{class CoreMainMenuUserMenuTourComponent{dismiss(){return Object(o.a)(this,void 0,void 0,(function*(){yield i.a.dismiss()}))}}return CoreMainMenuUserMenuTourComponent.ɵfac=function CoreMainMenuUserMenuTourComponent_Factory(e){return new(e||CoreMainMenuUserMenuTourComponent)},CoreMainMenuUserMenuTourComponent.ɵcmp=c.sc({type:CoreMainMenuUserMenuTourComponent,selectors:[["core-mainmenu-user-menu-tour"]],decls:9,vars:9,consts:[["expand","block",3,"click"]],template:function CoreMainMenuUserMenuTourComponent_Template(e,n){1&e&&(c.Ec(0,"h2"),c.pd(1),c.Pc(2,"translate"),c.Dc(),c.Ec(3,"p"),c.pd(4),c.Pc(5,"translate"),c.Dc(),c.Ec(6,"ion-button",0),c.Mc("click",(function CoreMainMenuUserMenuTourComponent_Template_ion_button_click_6_listener(){return n.dismiss()})),c.pd(7),c.Pc(8,"translate"),c.Dc()),2&e&&(c.lc(1),c.qd(c.Qc(2,3,"core.mainmenu.usermenutourtitle")),c.lc(3),c.qd(c.Qc(5,5,"core.mainmenu.usermenutourdescription")),c.lc(3),c.rd(" ",c.Qc(8,7,"core.endonesteptour"),"\n"))},directives:[r.a,a.l],pipes:[s.d],styles:["[_nghost-%COMP%]   h2[_ngcontent-%COMP%]{margin-top:0}[_nghost-%COMP%]   h2[_ngcontent-%COMP%], [_nghost-%COMP%]   p[_ngcontent-%COMP%]{text-align:center}[_nghost-%COMP%]   ion-button[_ngcontent-%COMP%]{margin:0}"]}),CoreMainMenuUserMenuTourComponent})()}}]);