{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{\"+T7f\":function(e,s,n){\"use strict\";n.r(s),n.d(s,\"AddonMessagesSearchPageModule\",(function(){return w}));var t=n(\"tyNb\"),a=n(\"Y+03\"),c=n(\"vY5A\"),o=n(\"muSn\"),i=n(\"L3Fv\"),r=n(\"PM4H\"),l=n(\"mrSG\"),g=n(\"fjkH\"),_=n(\"9+EE\"),d=n(\"KMk0\"),h=n(\"3LXp\"),m=n(\"nvXB\"),u=n(\"pHTc\"),p=n(\"fXoL\"),M=n(\"TEn/\"),f=n(\"nt/U\"),S=n(\"46ml\"),b=n(\"9zps\"),P=n(\"PgjG\"),A=n(\"ofXK\"),T=n(\"xpMl\"),v=n(\"r8G5\"),C=n(\"FeAf\"),y=n(\"hMzs\"),E=n(\"3CSS\"),I=n(\"ACYt\"),k=n(\"sYmb\"),x=n(\"Cg42\");function AddonMessagesSearchPage_ion_list_15_ng_container_1_Template(e,s){1&e&&p.Ac(0)}function AddonMessagesSearchPage_ion_list_15_ng_container_2_Template(e,s){1&e&&p.Ac(0)}function AddonMessagesSearchPage_ion_list_15_ng_container_3_Template(e,s){1&e&&p.Ac(0)}const _c0=function(e){return{item:e}};function AddonMessagesSearchPage_ion_list_15_Template(e,s){if(1&e){const e=p.Fc();p.Ec(0,\"ion-list\"),p.nd(1,AddonMessagesSearchPage_ion_list_15_ng_container_1_Template,1,0,\"ng-container\",8),p.nd(2,AddonMessagesSearchPage_ion_list_15_ng_container_2_Template,1,0,\"ng-container\",8),p.nd(3,AddonMessagesSearchPage_ion_list_15_ng_container_3_Template,1,0,\"ng-container\",8),p.Ec(4,\"core-infinite-loading\",9),p.Mc(\"action\",(function AddonMessagesSearchPage_ion_list_15_Template_core_infinite_loading_action_4_listener(s){p.fd(e);const n=p.Oc();return n.search(n.query,\"messages\",s)})),p.Dc(),p.Dc()}if(2&e){const e=p.Oc(),s=p.ed(18);p.lc(1),p.Vc(\"ngTemplateOutlet\",s)(\"ngTemplateOutletContext\",p.ad(8,_c0,e.contacts)),p.lc(1),p.Vc(\"ngTemplateOutlet\",s)(\"ngTemplateOutletContext\",p.ad(10,_c0,e.nonContacts)),p.lc(1),p.Vc(\"ngTemplateOutlet\",s)(\"ngTemplateOutletContext\",p.ad(12,_c0,e.messages)),p.lc(1),p.Vc(\"enabled\",e.messages.canLoadMore)(\"error\",e.messages.loadMoreError)}}function AddonMessagesSearchPage_core_empty_box_16_Template(e,s){1&e&&(p.zc(0,\"core-empty-box\",10),p.Pc(1,\"translate\")),2&e&&p.Vc(\"message\",p.Qc(1,1,\"core.noresults\"))}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_icon_5_Template(e,s){1&e&&(p.zc(0,\"ion-icon\",21),p.Pc(1,\"translate\")),2&e&&p.mc(\"aria-label\",p.Qc(1,1,\"addon.messages.contactblocked\"))}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_note_6_Template(e,s){if(1&e&&(p.Ec(0,\"ion-note\"),p.pd(1),p.Pc(2,\"coreDateDayOrTime\"),p.Dc()),2&e){const e=p.Oc().$implicit;p.lc(1),p.rd(\" \",p.Qc(2,1,e.lastmessagedate),\" \")}}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_span_8_Template(e,s){1&e&&(p.Ec(0,\"span\",22),p.pd(1),p.Pc(2,\"translate\"),p.Dc()),2&e&&(p.lc(1),p.rd(\" \",p.Qc(2,1,\"addon.messages.you\"),\" \"))}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_Template(e,s){if(1&e){const e=p.Fc();p.Ec(0,\"ion-item\",13),p.Mc(\"click\",(function AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_Template_ion_item_click_0_listener(){p.fd(e);const n=s.$implicit;return p.Oc(3).openConversation(n)})),p.zc(1,\"core-user-avatar\",14),p.Ec(2,\"ion-label\"),p.Ec(3,\"p\",15),p.zc(4,\"core-format-text\",16),p.nd(5,AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_icon_5_Template,2,3,\"ion-icon\",17),p.Dc(),p.nd(6,AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_note_6_Template,3,3,\"ion-note\",5),p.Ec(7,\"p\",18),p.nd(8,AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_span_8_Template,3,3,\"span\",19),p.zc(9,\"core-format-text\",20),p.Dc(),p.Dc(),p.Dc()}if(2&e){const e=s.$implicit,n=p.Oc(3);p.mc(\"aria-label\",e.fullname)(\"aria-current\",e==n.selectedResult?\"page\":\"false\"),p.lc(1),p.Vc(\"user\",e)(\"checkOnline\",!0)(\"linkProfile\",!1),p.lc(3),p.Vc(\"text\",e.fullname)(\"highlight\",e.highlightName)(\"filter\",!1),p.lc(1),p.Vc(\"ngIf\",e.isblocked),p.lc(1),p.Vc(\"ngIf\",e.lastmessagedate>0),p.lc(2),p.Vc(\"ngIf\",e.sentfromcurrentuser),p.lc(1),p.Vc(\"text\",e.lastmessage)(\"highlight\",e.highlightMessage)(\"contextInstanceId\",0)}}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_1_Template(e,s){if(1&e){const e=p.Fc();p.Ec(0,\"div\",25),p.Ec(1,\"ion-button\",26),p.Mc(\"click\",(function AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_1_Template_ion_button_click_1_listener(){p.fd(e);const s=p.Oc(3).item,n=p.Oc();return n.search(n.query,s.type)})),p.pd(2),p.Pc(3,\"translate\"),p.Dc(),p.Dc()}2&e&&(p.lc(2),p.rd(\" \",p.Qc(3,1,\"core.loadmore\"),\" \"))}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_2_Template(e,s){1&e&&(p.Ec(0,\"div\",27),p.zc(1,\"ion-spinner\"),p.Pc(2,\"translate\"),p.Dc()),2&e&&(p.lc(1),p.mc(\"aria-label\",p.Qc(2,1,\"core.loading\")))}function AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_Template(e,s){if(1&e&&(p.Cc(0),p.nd(1,AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_1_Template,4,3,\"div\",23),p.nd(2,AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_2_Template,3,3,\"div\",24),p.Bc()),2&e){const e=p.Oc(2).item;p.lc(1),p.Vc(\"ngIf\",e.canLoadMore&&!e.loadingMore),p.lc(1),p.Vc(\"ngIf\",e.loadingMore)}}function AddonMessagesSearchPage_ng_template_17_ng_container_0_Template(e,s){if(1&e&&(p.Cc(0),p.Ec(1,\"ion-item-divider\",11),p.Ec(2,\"ion-label\"),p.Ec(3,\"h2\"),p.pd(4),p.Pc(5,\"translate\"),p.Dc(),p.Dc(),p.Dc(),p.nd(6,AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_Template,10,14,\"ion-item\",12),p.nd(7,AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_Template,3,2,\"ng-container\",5),p.Bc()),2&e){const e=p.Oc().item;p.lc(4),p.qd(p.Qc(5,3,e.titleString)),p.lc(2),p.Vc(\"ngForOf\",e.results),p.lc(1),p.Vc(\"ngIf\",\"messages\"!=e.type)}}function AddonMessagesSearchPage_ng_template_17_Template(e,s){if(1&e&&p.nd(0,AddonMessagesSearchPage_ng_template_17_ng_container_0_Template,8,5,\"ng-container\",5),2&e){p.Vc(\"ngIf\",s.item.results.length>0)}}let D=(()=>{class AddonMessagesSearchPage{constructor(){this.disableSearch=!1,this.displaySearching=!1,this.displayResults=!1,this.query=\"\",this.contacts={type:\"contacts\",titleString:\"addon.messages.contacts\",results:[],canLoadMore:!1,loadingMore:!1},this.nonContacts={type:\"noncontacts\",titleString:\"addon.messages.noncontacts\",results:[],canLoadMore:!1,loadingMore:!1},this.messages={type:\"messages\",titleString:\"addon.messages.messages\",results:[],canLoadMore:!1,loadingMore:!1,loadMoreError:!1},this.memberInfoObserver=g.b.on(d.b.MEMBER_INFO_CHANGED_EVENT,(e=>{if(!e.userBlocked&&!e.userUnblocked)return;const s=this.contacts.results.find((s=>s.id==e.userId));if(s)s.isblocked=!!e.userBlocked;else{const s=this.nonContacts.results.find((s=>s.id==e.userId));s&&(s.isblocked=!!e.userBlocked)}this.messages.results.forEach((s=>{s.userid==e.userId&&(s.isblocked=!!e.userBlocked)}))}),_.b.getCurrentSiteId())}clearSearch(){this.query=\"\",this.displayResults=!1;u.a.isCurrentPathInTablet(\"**/messages/search/discussion\")&&u.a.navigate(\"../\")}search(e,s,n){return Object(l.a)(this,void 0,void 0,(function*(){m.a.closeKeyboard(),this.query=e,this.disableSearch=!0,this.displaySearching=!s;const t=[];let a=[],c=[],o=[],i=!1,r=!1,l=!1;if(!s||\"contacts\"==s||\"noncontacts\"==s){const n=s?d.b.LIMIT_SEARCH:d.b.LIMIT_INITIAL_USER_SEARCH;let o=0;\"contacts\"==s?(o=this.contacts.results.length,this.contacts.loadingMore=!0):\"noncontacts\"==s&&(o=this.nonContacts.results.length,this.nonContacts.loadingMore=!0),t.push(d.a.searchUsers(e,o,n).then((e=>{s&&\"contacts\"!=s||(a=e.contacts,i=e.canLoadMoreContacts),s&&\"noncontacts\"!=s||(c=e.nonContacts,r=e.canLoadMoreNonContacts)})))}if(!s||\"messages\"==s){let n=0;\"messages\"==s&&(n=this.messages.results.length,this.messages.loadingMore=!0),t.push(d.a.searchMessages(e,void 0,n).then((e=>{o=e.messages,l=e.canLoadMore})))}try{yield Promise.all(t),s||(this.contacts.results=[],this.nonContacts.results=[],this.messages.results=[]),this.displayResults=!0,s&&\"contacts\"!=s||(this.contacts.results.push(...a),this.contacts.canLoadMore=i,this.setHighlight(a,!0)),s&&\"noncontacts\"!=s||(this.nonContacts.results.push(...c),this.nonContacts.canLoadMore=r,this.setHighlight(c,!0)),s&&\"messages\"!=s||(this.messages.results.push(...o),this.messages.canLoadMore=l,this.messages.loadMoreError=!1,this.setHighlight(o,!1)),s||(this.contacts.results.length>0?this.openConversation(this.contacts.results[0],!0):this.nonContacts.results.length>0?this.openConversation(this.nonContacts.results[0],!0):this.messages.results.length>0&&this.openConversation(this.messages.results[0],!0))}catch(e){h.a.showErrorModalDefault(e,\"addon.messages.errorwhileretrievingusers\",!0),\"messages\"==s&&(this.messages.loadMoreError=!0)}finally{this.disableSearch=!1,this.displaySearching=!1,\"contacts\"==s?this.contacts.loadingMore=!1:\"noncontacts\"==s?this.nonContacts.loadingMore=!1:\"messages\"==s&&(this.messages.loadingMore=!1),n&&n()}}))}openConversation(e,s=!1){if(!s||a.a.isTablet){this.selectedResult=e;const s={};\"conversationid\"in e?s.conversationId=e.conversationid:s.userId=e.id;const n=u.a.isCurrentPathInTablet(\"**/messages/search/discussion\");u.a.navigate((n?\"../\":\"\")+\"discussion\",{params:s})}}setHighlight(e,s=!1){e.forEach((e=>{e.highlightName=s?this.query:void 0,e.highlightMessage=s?void 0:this.query}))}ngOnDestroy(){var e;null===(e=this.memberInfoObserver)||void 0===e?void 0:e.off()}}return AddonMessagesSearchPage.ɵfac=function AddonMessagesSearchPage_Factory(e){return new(e||AddonMessagesSearchPage)},AddonMessagesSearchPage.ɵcmp=p.sc({type:AddonMessagesSearchPage,selectors:[[\"page-addon-messages-search\"]],decls:19,vars:16,consts:[[\"slot\",\"start\"],[3,\"text\"],[\"slot\",\"end\"],[\"autocorrect\",\"off\",\"searchArea\",\"AddonMessagesSearch\",3,\"disabled\",\"spellcheck\",\"autoFocus\",\"lengthCheck\",\"onSubmit\",\"onClear\"],[3,\"hideUntil\",\"message\"],[4,\"ngIf\"],[\"icon\",\"fas-search\",3,\"message\",4,\"ngIf\"],[\"resultsTemplate\",\"\"],[4,\"ngTemplateOutlet\",\"ngTemplateOutletContext\"],[3,\"enabled\",\"error\",\"action\"],[\"icon\",\"fas-search\",3,\"message\"],[1,\"ion-text-wrap\"],[\"class\",\"addon-message-discussion ion-text-wrap\",\"detail\",\"true\",\"button\",\"\",3,\"click\",4,\"ngFor\",\"ngForOf\"],[\"detail\",\"true\",\"button\",\"\",1,\"addon-message-discussion\",\"ion-text-wrap\",3,\"click\"],[\"slot\",\"start\",3,\"user\",\"checkOnline\",\"linkProfile\"],[1,\"item-heading\"],[3,\"text\",\"highlight\",\"filter\"],[\"name\",\"fas-ban\",4,\"ngIf\"],[1,\"addon-message-last-message\"],[\"class\",\"addon-message-last-message-user\",4,\"ngIf\"],[\"clean\",\"true\",\"singleLine\",\"true\",\"contextLevel\",\"system\",1,\"addon-message-last-message-text\",3,\"text\",\"highlight\",\"contextInstanceId\"],[\"name\",\"fas-ban\"],[1,\"addon-message-last-message-user\"],[\"class\",\"ion-padding-horizontal\",4,\"ngIf\"],[\"class\",\"ion-padding ion-text-center\",4,\"ngIf\"],[1,\"ion-padding-horizontal\"],[\"expand\",\"block\",\"fill\",\"outline\",3,\"click\"],[1,\"ion-padding\",\"ion-text-center\"]],template:function AddonMessagesSearchPage_Template(e,s){1&e&&(p.Ec(0,\"ion-header\"),p.Ec(1,\"ion-toolbar\"),p.Ec(2,\"ion-buttons\",0),p.zc(3,\"ion-back-button\",1),p.Pc(4,\"translate\"),p.Dc(),p.Ec(5,\"ion-title\"),p.Ec(6,\"h1\"),p.pd(7),p.Pc(8,\"translate\"),p.Dc(),p.Dc(),p.zc(9,\"ion-buttons\",2),p.Dc(),p.Dc(),p.Ec(10,\"ion-content\"),p.Ec(11,\"core-split-view\"),p.Ec(12,\"core-search-box\",3),p.Mc(\"onSubmit\",(function AddonMessagesSearchPage_Template_core_search_box_onSubmit_12_listener(e){return s.search(e)}))(\"onClear\",(function AddonMessagesSearchPage_Template_core_search_box_onClear_12_listener(){return s.clearSearch()})),p.Dc(),p.Ec(13,\"core-loading\",4),p.Pc(14,\"translate\"),p.nd(15,AddonMessagesSearchPage_ion_list_15_Template,5,14,\"ion-list\",5),p.nd(16,AddonMessagesSearchPage_core_empty_box_16_Template,2,3,\"core-empty-box\",6),p.Dc(),p.Dc(),p.Dc(),p.nd(17,AddonMessagesSearchPage_ng_template_17_Template,1,1,\"ng-template\",null,7,p.od)),2&e&&(p.lc(3),p.Vc(\"text\",p.Qc(4,10,\"core.back\")),p.lc(4),p.qd(p.Qc(8,12,\"addon.messages.searchcombined\")),p.lc(5),p.Vc(\"disabled\",s.disableSearch)(\"spellcheck\",!1)(\"autoFocus\",!0)(\"lengthCheck\",1),p.lc(1),p.Vc(\"hideUntil\",!s.displaySearching)(\"message\",p.Qc(14,14,\"core.searching\")),p.lc(2),p.Vc(\"ngIf\",s.displayResults),p.lc(1),p.Vc(\"ngIf\",s.displayResults&&!s.contacts.results.length&&!s.nonContacts.results.length&&!s.messages.results.length))},directives:[M.C,M.Ab,M.m,M.h,M.i,M.yb,f.a,M.v,S.a,b.a,P.a,A.t,M.P,A.A,T.a,v.a,M.J,M.O,A.s,M.I,C.a,y.a,M.D,E.a,M.W,I.a,M.l,M.qb],pipes:[k.d,x.a],encapsulation:2}),AddonMessagesSearchPage})();const O=[{path:\"\",component:D},o.AddonMessagesDiscussionRoute],V=[{path:\"\",component:D,children:[o.AddonMessagesDiscussionRoute]}],L=[...Object(c.c)(O,(()=>a.a.isMobile)),...Object(c.c)(V,(()=>a.a.isTablet))];let w=(()=>{class AddonMessagesSearchPageModule{}return AddonMessagesSearchPageModule.ɵmod=p.wc({type:AddonMessagesSearchPageModule}),AddonMessagesSearchPageModule.ɵinj=p.vc({factory:function AddonMessagesSearchPageModule_Factory(e){return new(e||AddonMessagesSearchPageModule)},imports:[[t.m.forChild(L),i.a,r.a],t.m]}),AddonMessagesSearchPageModule})();void((\"undefined\"==typeof ngJitMode||ngJitMode)&&p.kd(w,{declarations:[D],imports:[t.m,i.a,r.a],exports:[t.m]}))}}]);","name":"50.2162b308bf14ac3e748f.js","input":"(window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || []).push([[50],{\n\n/***/ \"+T7f\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXPORTS\n__webpack_require__.d(__webpack_exports__, \"AddonMessagesSearchPageModule\", function() { return /* binding */ search_module_AddonMessagesSearchPageModule; });\n\n// EXTERNAL MODULE: ./node_modules/@angular/router/__ivy_ngcc__/fesm2015/router.js + 10 modules\nvar router = __webpack_require__(\"tyNb\");\n\n// EXTERNAL MODULE: ./src/core/services/screen.ts\nvar screen = __webpack_require__(\"Y+03\");\n\n// EXTERNAL MODULE: ./src/app/app-routing.module.ts\nvar app_routing_module = __webpack_require__(\"vY5A\");\n\n// EXTERNAL MODULE: ./src/addons/messages/messages-lazy.module.ts + 1 modules\nvar messages_lazy_module = __webpack_require__(\"muSn\");\n\n// EXTERNAL MODULE: ./src/core/shared.module.ts + 3 modules\nvar shared_module = __webpack_require__(\"L3Fv\");\n\n// EXTERNAL MODULE: ./src/core/features/search/components/components.module.ts\nvar components_module = __webpack_require__(\"PM4H\");\n\n// EXTERNAL MODULE: ./node_modules/tslib/tslib.es6.js\nvar tslib_es6 = __webpack_require__(\"mrSG\");\n\n// EXTERNAL MODULE: ./src/core/singletons/events.ts\nvar events = __webpack_require__(\"fjkH\");\n\n// EXTERNAL MODULE: ./src/core/services/sites.ts\nvar sites = __webpack_require__(\"9+EE\");\n\n// EXTERNAL MODULE: ./src/addons/messages/services/messages.ts\nvar messages = __webpack_require__(\"KMk0\");\n\n// EXTERNAL MODULE: ./src/core/services/utils/dom.ts + 2 modules\nvar dom = __webpack_require__(\"3LXp\");\n\n// EXTERNAL MODULE: ./src/core/services/app.ts + 1 modules\nvar app = __webpack_require__(\"nvXB\");\n\n// EXTERNAL MODULE: ./src/core/services/navigator.ts\nvar services_navigator = __webpack_require__(\"pHTc\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/core/__ivy_ngcc__/fesm2015/core.js\nvar core = __webpack_require__(\"fXoL\");\n\n// EXTERNAL MODULE: ./node_modules/@ionic/angular/__ivy_ngcc__/fesm2015/ionic-angular.js + 5 modules\nvar ionic_angular = __webpack_require__(\"TEn/\");\n\n// EXTERNAL MODULE: ./src/core/directives/content.ts\nvar content = __webpack_require__(\"nt/U\");\n\n// EXTERNAL MODULE: ./src/core/components/split-view/split-view.ts\nvar split_view = __webpack_require__(\"46ml\");\n\n// EXTERNAL MODULE: ./src/core/features/search/components/search-box/search-box.ts\nvar search_box = __webpack_require__(\"9zps\");\n\n// EXTERNAL MODULE: ./src/core/components/loading/loading.ts\nvar loading = __webpack_require__(\"PgjG\");\n\n// EXTERNAL MODULE: ./node_modules/@angular/common/__ivy_ngcc__/fesm2015/common.js\nvar common = __webpack_require__(\"ofXK\");\n\n// EXTERNAL MODULE: ./src/core/components/infinite-loading/infinite-loading.ts\nvar infinite_loading = __webpack_require__(\"xpMl\");\n\n// EXTERNAL MODULE: ./src/core/components/empty-box/empty-box.ts\nvar empty_box = __webpack_require__(\"r8G5\");\n\n// EXTERNAL MODULE: ./src/core/components/user-avatar/user-avatar.ts\nvar user_avatar = __webpack_require__(\"FeAf\");\n\n// EXTERNAL MODULE: ./src/core/directives/format-text.ts\nvar format_text = __webpack_require__(\"hMzs\");\n\n// EXTERNAL MODULE: ./src/core/directives/fa-icon.ts\nvar fa_icon = __webpack_require__(\"3CSS\");\n\n// EXTERNAL MODULE: ./src/core/directives/update-non-reactive-attributes.ts\nvar update_non_reactive_attributes = __webpack_require__(\"ACYt\");\n\n// EXTERNAL MODULE: ./node_modules/@ngx-translate/core/__ivy_ngcc__/fesm2015/ngx-translate-core.js + 8 modules\nvar ngx_translate_core = __webpack_require__(\"sYmb\");\n\n// EXTERNAL MODULE: ./src/core/pipes/date-day-or-time.ts\nvar date_day_or_time = __webpack_require__(\"Cg42\");\n\n// CONCATENATED MODULE: ./src/addons/messages/pages/search/search.page.ts\n\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nfunction AddonMessagesSearchPage_ion_list_15_ng_container_1_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ac\" /* ɵɵelementContainer */](0);\n    }\n}\nfunction AddonMessagesSearchPage_ion_list_15_ng_container_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ac\" /* ɵɵelementContainer */](0);\n    }\n}\nfunction AddonMessagesSearchPage_ion_list_15_ng_container_3_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ac\" /* ɵɵelementContainer */](0);\n    }\n}\nconst _c0 = function (a0) { return { item: a0 }; };\nfunction AddonMessagesSearchPage_ion_list_15_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r8 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-list\");\n        core[\"nd\" /* ɵɵtemplate */](1, AddonMessagesSearchPage_ion_list_15_ng_container_1_Template, 1, 0, \"ng-container\", 8);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonMessagesSearchPage_ion_list_15_ng_container_2_Template, 1, 0, \"ng-container\", 8);\n        core[\"nd\" /* ɵɵtemplate */](3, AddonMessagesSearchPage_ion_list_15_ng_container_3_Template, 1, 0, \"ng-container\", 8);\n        core[\"Ec\" /* ɵɵelementStart */](4, \"core-infinite-loading\", 9);\n        core[\"Mc\" /* ɵɵlistener */](\"action\", function AddonMessagesSearchPage_ion_list_15_Template_core_infinite_loading_action_4_listener($event) { core[\"fd\" /* ɵɵrestoreView */](_r8); const ctx_r7 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r7.search(ctx_r7.query, \"messages\", $event); });\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const ctx_r0 = core[\"Oc\" /* ɵɵnextContext */]();\n        const _r2 = core[\"ed\" /* ɵɵreference */](18);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", core[\"ad\" /* ɵɵpureFunction1 */](8, _c0, ctx_r0.contacts));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", core[\"ad\" /* ɵɵpureFunction1 */](10, _c0, ctx_r0.nonContacts));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngTemplateOutlet\", _r2)(\"ngTemplateOutletContext\", core[\"ad\" /* ɵɵpureFunction1 */](12, _c0, ctx_r0.messages));\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"enabled\", ctx_r0.messages.canLoadMore)(\"error\", ctx_r0.messages.loadMoreError);\n    }\n}\nfunction AddonMessagesSearchPage_core_empty_box_16_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"core-empty-box\", 10);\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n    }\n    if (rf & 2) {\n        core[\"Vc\" /* ɵɵproperty */](\"message\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"core.noresults\"));\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_icon_5_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"zc\" /* ɵɵelement */](0, \"ion-icon\", 21);\n        core[\"Pc\" /* ɵɵpipe */](1, \"translate\");\n    }\n    if (rf & 2) {\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](1, 1, \"addon.messages.contactblocked\"));\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_note_6_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-note\");\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Pc\" /* ɵɵpipe */](2, \"coreDateDayOrTime\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const result_r13 = core[\"Oc\" /* ɵɵnextContext */]().$implicit;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](2, 1, result_r13.lastmessagedate), \" \");\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_span_8_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"span\", 22);\n        core[\"pd\" /* ɵɵtext */](1);\n        core[\"Pc\" /* ɵɵpipe */](2, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](2, 1, \"addon.messages.you\"), \" \");\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r19 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"ion-item\", 13);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_Template_ion_item_click_0_listener() { core[\"fd\" /* ɵɵrestoreView */](_r19); const result_r13 = ctx.$implicit; const ctx_r18 = core[\"Oc\" /* ɵɵnextContext */](3); return ctx_r18.openConversation(result_r13); });\n        core[\"zc\" /* ɵɵelement */](1, \"core-user-avatar\", 14);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"p\", 15);\n        core[\"zc\" /* ɵɵelement */](4, \"core-format-text\", 16);\n        core[\"nd\" /* ɵɵtemplate */](5, AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_icon_5_Template, 2, 3, \"ion-icon\", 17);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_ion_note_6_Template, 3, 3, \"ion-note\", 5);\n        core[\"Ec\" /* ɵɵelementStart */](7, \"p\", 18);\n        core[\"nd\" /* ɵɵtemplate */](8, AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_span_8_Template, 3, 3, \"span\", 19);\n        core[\"zc\" /* ɵɵelement */](9, \"core-format-text\", 20);\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        const result_r13 = ctx.$implicit;\n        const ctx_r11 = core[\"Oc\" /* ɵɵnextContext */](3);\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", result_r13.fullname)(\"aria-current\", result_r13 == ctx_r11.selectedResult ? \"page\" : \"false\");\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"user\", result_r13)(\"checkOnline\", true)(\"linkProfile\", false);\n        core[\"lc\" /* ɵɵadvance */](3);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", result_r13.fullname)(\"highlight\", result_r13.highlightName)(\"filter\", false);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", result_r13.isblocked);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", result_r13.lastmessagedate > 0);\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", result_r13.sentfromcurrentuser);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"text\", result_r13.lastmessage)(\"highlight\", result_r13.highlightMessage)(\"contextInstanceId\", 0);\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_1_Template(rf, ctx) {\n    if (rf & 1) {\n        const _r23 = core[\"Fc\" /* ɵɵgetCurrentView */]();\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 25);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-button\", 26);\n        core[\"Mc\" /* ɵɵlistener */](\"click\", function AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_1_Template_ion_button_click_1_listener() { core[\"fd\" /* ɵɵrestoreView */](_r23); const item_r9 = core[\"Oc\" /* ɵɵnextContext */](3).item; const ctx_r22 = core[\"Oc\" /* ɵɵnextContext */](); return ctx_r22.search(ctx_r22.query, item_r9.type); });\n        core[\"pd\" /* ɵɵtext */](2);\n        core[\"Pc\" /* ɵɵpipe */](3, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"rd\" /* ɵɵtextInterpolate1 */](\" \", core[\"Qc\" /* ɵɵpipeBind1 */](3, 1, \"core.loadmore\"), \" \");\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_2_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Ec\" /* ɵɵelementStart */](0, \"div\", 27);\n        core[\"zc\" /* ɵɵelement */](1, \"ion-spinner\");\n        core[\"Pc\" /* ɵɵpipe */](2, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n    }\n    if (rf & 2) {\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"mc\" /* ɵɵattribute */](\"aria-label\", core[\"Qc\" /* ɵɵpipeBind1 */](2, 1, \"core.loading\"));\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"nd\" /* ɵɵtemplate */](1, AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_1_Template, 4, 3, \"div\", 23);\n        core[\"nd\" /* ɵɵtemplate */](2, AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_div_2_Template, 3, 3, \"div\", 24);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const item_r9 = core[\"Oc\" /* ɵɵnextContext */](2).item;\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", item_r9.canLoadMore && !item_r9.loadingMore);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", item_r9.loadingMore);\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_ng_container_0_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"Cc\" /* ɵɵelementContainerStart */](0);\n        core[\"Ec\" /* ɵɵelementStart */](1, \"ion-item-divider\", 11);\n        core[\"Ec\" /* ɵɵelementStart */](2, \"ion-label\");\n        core[\"Ec\" /* ɵɵelementStart */](3, \"h2\");\n        core[\"pd\" /* ɵɵtext */](4);\n        core[\"Pc\" /* ɵɵpipe */](5, \"translate\");\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"Dc\" /* ɵɵelementEnd */]();\n        core[\"nd\" /* ɵɵtemplate */](6, AddonMessagesSearchPage_ng_template_17_ng_container_0_ion_item_6_Template, 10, 14, \"ion-item\", 12);\n        core[\"nd\" /* ɵɵtemplate */](7, AddonMessagesSearchPage_ng_template_17_ng_container_0_ng_container_7_Template, 3, 2, \"ng-container\", 5);\n        core[\"Bc\" /* ɵɵelementContainerEnd */]();\n    }\n    if (rf & 2) {\n        const item_r9 = core[\"Oc\" /* ɵɵnextContext */]().item;\n        core[\"lc\" /* ɵɵadvance */](4);\n        core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](5, 3, item_r9.titleString));\n        core[\"lc\" /* ɵɵadvance */](2);\n        core[\"Vc\" /* ɵɵproperty */](\"ngForOf\", item_r9.results);\n        core[\"lc\" /* ɵɵadvance */](1);\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", item_r9.type != \"messages\");\n    }\n}\nfunction AddonMessagesSearchPage_ng_template_17_Template(rf, ctx) {\n    if (rf & 1) {\n        core[\"nd\" /* ɵɵtemplate */](0, AddonMessagesSearchPage_ng_template_17_ng_container_0_Template, 8, 5, \"ng-container\", 5);\n    }\n    if (rf & 2) {\n        const item_r9 = ctx.item;\n        core[\"Vc\" /* ɵɵproperty */](\"ngIf\", item_r9.results.length > 0);\n    }\n}\n/**\n * Page for searching users.\n */\nlet search_page_AddonMessagesSearchPage = /*@__PURE__*/ (() => {\n    class AddonMessagesSearchPage {\n        constructor() {\n            this.disableSearch = false;\n            this.displaySearching = false;\n            this.displayResults = false;\n            this.query = '';\n            this.contacts = {\n                type: 'contacts',\n                titleString: 'addon.messages.contacts',\n                results: [],\n                canLoadMore: false,\n                loadingMore: false,\n            };\n            this.nonContacts = {\n                type: 'noncontacts',\n                titleString: 'addon.messages.noncontacts',\n                results: [],\n                canLoadMore: false,\n                loadingMore: false,\n            };\n            this.messages = {\n                type: 'messages',\n                titleString: 'addon.messages.messages',\n                results: [],\n                canLoadMore: false,\n                loadingMore: false,\n                loadMoreError: false,\n            };\n            // Update block status of a user.\n            this.memberInfoObserver = events[\"b\" /* CoreEvents */].on(messages[\"b\" /* AddonMessagesProvider */].MEMBER_INFO_CHANGED_EVENT, (data) => {\n                if (!data.userBlocked && !data.userUnblocked) {\n                    // The block status has not changed, ignore.\n                    return;\n                }\n                const contact = this.contacts.results.find((user) => user.id == data.userId);\n                if (contact) {\n                    contact.isblocked = !!data.userBlocked;\n                }\n                else {\n                    const nonContact = this.nonContacts.results.find((user) => user.id == data.userId);\n                    if (nonContact) {\n                        nonContact.isblocked = !!data.userBlocked;\n                    }\n                }\n                this.messages.results.forEach((message) => {\n                    if (message.userid == data.userId) {\n                        message.isblocked = !!data.userBlocked;\n                    }\n                });\n            }, sites[\"b\" /* CoreSites */].getCurrentSiteId());\n        }\n        /**\n         * Clear search.\n         */\n        clearSearch() {\n            this.query = '';\n            this.displayResults = false;\n            // Empty details.\n            const splitViewLoaded = services_navigator[\"a\" /* CoreNavigator */].isCurrentPathInTablet('**/messages/search/discussion');\n            if (splitViewLoaded) {\n                services_navigator[\"a\" /* CoreNavigator */].navigate('../');\n            }\n        }\n        /**\n         * Start a new search or load more results.\n         *\n         * @param query Text to search for.\n         * @param loadMore Load more contacts, noncontacts or messages. If undefined, start a new search.\n         * @param infiniteComplete Infinite scroll complete function. Only used from core-infinite-loading.\n         * @return Resolved when done.\n         */\n        search(query, loadMore, infiniteComplete) {\n            return Object(tslib_es6[\"a\" /* __awaiter */])(this, void 0, void 0, function* () {\n                app[\"a\" /* CoreApp */].closeKeyboard();\n                this.query = query;\n                this.disableSearch = true;\n                this.displaySearching = !loadMore;\n                const promises = [];\n                let newContacts = [];\n                let newNonContacts = [];\n                let newMessages = [];\n                let canLoadMoreContacts = false;\n                let canLoadMoreNonContacts = false;\n                let canLoadMoreMessages = false;\n                if (!loadMore || loadMore == 'contacts' || loadMore == 'noncontacts') {\n                    const limitNum = loadMore ? messages[\"b\" /* AddonMessagesProvider */].LIMIT_SEARCH : messages[\"b\" /* AddonMessagesProvider */].LIMIT_INITIAL_USER_SEARCH;\n                    let limitFrom = 0;\n                    if (loadMore == 'contacts') {\n                        limitFrom = this.contacts.results.length;\n                        this.contacts.loadingMore = true;\n                    }\n                    else if (loadMore == 'noncontacts') {\n                        limitFrom = this.nonContacts.results.length;\n                        this.nonContacts.loadingMore = true;\n                    }\n                    promises.push(messages[\"a\" /* AddonMessages */].searchUsers(query, limitFrom, limitNum).then((result) => {\n                        if (!loadMore || loadMore == 'contacts') {\n                            newContacts = result.contacts;\n                            canLoadMoreContacts = result.canLoadMoreContacts;\n                        }\n                        if (!loadMore || loadMore == 'noncontacts') {\n                            newNonContacts = result.nonContacts;\n                            canLoadMoreNonContacts = result.canLoadMoreNonContacts;\n                        }\n                        return;\n                    }));\n                }\n                if (!loadMore || loadMore == 'messages') {\n                    let limitFrom = 0;\n                    if (loadMore == 'messages') {\n                        limitFrom = this.messages.results.length;\n                        this.messages.loadingMore = true;\n                    }\n                    promises.push(messages[\"a\" /* AddonMessages */].searchMessages(query, undefined, limitFrom).then((result) => {\n                        newMessages = result.messages;\n                        canLoadMoreMessages = result.canLoadMore;\n                        return;\n                    }));\n                }\n                try {\n                    yield Promise.all(promises);\n                    if (!loadMore) {\n                        this.contacts.results = [];\n                        this.nonContacts.results = [];\n                        this.messages.results = [];\n                    }\n                    this.displayResults = true;\n                    if (!loadMore || loadMore == 'contacts') {\n                        this.contacts.results.push(...newContacts);\n                        this.contacts.canLoadMore = canLoadMoreContacts;\n                        this.setHighlight(newContacts, true);\n                    }\n                    if (!loadMore || loadMore == 'noncontacts') {\n                        this.nonContacts.results.push(...newNonContacts);\n                        this.nonContacts.canLoadMore = canLoadMoreNonContacts;\n                        this.setHighlight(newNonContacts, true);\n                    }\n                    if (!loadMore || loadMore == 'messages') {\n                        this.messages.results.push(...newMessages);\n                        this.messages.canLoadMore = canLoadMoreMessages;\n                        this.messages.loadMoreError = false;\n                        this.setHighlight(newMessages, false);\n                    }\n                    if (!loadMore) {\n                        if (this.contacts.results.length > 0) {\n                            this.openConversation(this.contacts.results[0], true);\n                        }\n                        else if (this.nonContacts.results.length > 0) {\n                            this.openConversation(this.nonContacts.results[0], true);\n                        }\n                        else if (this.messages.results.length > 0) {\n                            this.openConversation(this.messages.results[0], true);\n                        }\n                    }\n                }\n                catch (error) {\n                    dom[\"a\" /* CoreDomUtils */].showErrorModalDefault(error, 'addon.messages.errorwhileretrievingusers', true);\n                    if (loadMore == 'messages') {\n                        this.messages.loadMoreError = true;\n                    }\n                }\n                finally {\n                    this.disableSearch = false;\n                    this.displaySearching = false;\n                    if (loadMore == 'contacts') {\n                        this.contacts.loadingMore = false;\n                    }\n                    else if (loadMore == 'noncontacts') {\n                        this.nonContacts.loadingMore = false;\n                    }\n                    else if (loadMore == 'messages') {\n                        this.messages.loadingMore = false;\n                    }\n                    infiniteComplete && infiniteComplete();\n                }\n            });\n        }\n        /**\n         * Open a conversation in the split view.\n         *\n         * @param result User or message.\n         * @param onInit Whether the tser was selected on initial load.\n         */\n        openConversation(result, onInit = false) {\n            if (!onInit || screen[\"a\" /* CoreScreen */].isTablet) {\n                this.selectedResult = result;\n                const params = {};\n                if ('conversationid' in result) {\n                    params.conversationId = result.conversationid;\n                }\n                else {\n                    params.userId = result.id;\n                }\n                const splitViewLoaded = services_navigator[\"a\" /* CoreNavigator */].isCurrentPathInTablet('**/messages/search/discussion');\n                const path = (splitViewLoaded ? '../' : '') + 'discussion';\n                services_navigator[\"a\" /* CoreNavigator */].navigate(path, { params });\n            }\n        }\n        /**\n         * Set the highlight values for each entry.\n         *\n         * @param results Results to highlight.\n         * @param isUser Whether the results are from a user search or from a message search.\n         */\n        setHighlight(results, isUser = false) {\n            results.forEach((result) => {\n                result.highlightName = isUser ? this.query : undefined;\n                result.highlightMessage = !isUser ? this.query : undefined;\n            });\n        }\n        /**\n         * Component destroyed.\n         */\n        ngOnDestroy() {\n            var _a;\n            (_a = this.memberInfoObserver) === null || _a === void 0 ? void 0 : _a.off();\n        }\n    }\n    AddonMessagesSearchPage.ɵfac = function AddonMessagesSearchPage_Factory(t) { return new (t || AddonMessagesSearchPage)(); };\n    AddonMessagesSearchPage.ɵcmp = core[\"sc\" /* ɵɵdefineComponent */]({ type: AddonMessagesSearchPage, selectors: [[\"page-addon-messages-search\"]], decls: 19, vars: 16, consts: [[\"slot\", \"start\"], [3, \"text\"], [\"slot\", \"end\"], [\"autocorrect\", \"off\", \"searchArea\", \"AddonMessagesSearch\", 3, \"disabled\", \"spellcheck\", \"autoFocus\", \"lengthCheck\", \"onSubmit\", \"onClear\"], [3, \"hideUntil\", \"message\"], [4, \"ngIf\"], [\"icon\", \"fas-search\", 3, \"message\", 4, \"ngIf\"], [\"resultsTemplate\", \"\"], [4, \"ngTemplateOutlet\", \"ngTemplateOutletContext\"], [3, \"enabled\", \"error\", \"action\"], [\"icon\", \"fas-search\", 3, \"message\"], [1, \"ion-text-wrap\"], [\"class\", \"addon-message-discussion ion-text-wrap\", \"detail\", \"true\", \"button\", \"\", 3, \"click\", 4, \"ngFor\", \"ngForOf\"], [\"detail\", \"true\", \"button\", \"\", 1, \"addon-message-discussion\", \"ion-text-wrap\", 3, \"click\"], [\"slot\", \"start\", 3, \"user\", \"checkOnline\", \"linkProfile\"], [1, \"item-heading\"], [3, \"text\", \"highlight\", \"filter\"], [\"name\", \"fas-ban\", 4, \"ngIf\"], [1, \"addon-message-last-message\"], [\"class\", \"addon-message-last-message-user\", 4, \"ngIf\"], [\"clean\", \"true\", \"singleLine\", \"true\", \"contextLevel\", \"system\", 1, \"addon-message-last-message-text\", 3, \"text\", \"highlight\", \"contextInstanceId\"], [\"name\", \"fas-ban\"], [1, \"addon-message-last-message-user\"], [\"class\", \"ion-padding-horizontal\", 4, \"ngIf\"], [\"class\", \"ion-padding ion-text-center\", 4, \"ngIf\"], [1, \"ion-padding-horizontal\"], [\"expand\", \"block\", \"fill\", \"outline\", 3, \"click\"], [1, \"ion-padding\", \"ion-text-center\"]], template: function AddonMessagesSearchPage_Template(rf, ctx) {\n            if (rf & 1) {\n                core[\"Ec\" /* ɵɵelementStart */](0, \"ion-header\");\n                core[\"Ec\" /* ɵɵelementStart */](1, \"ion-toolbar\");\n                core[\"Ec\" /* ɵɵelementStart */](2, \"ion-buttons\", 0);\n                core[\"zc\" /* ɵɵelement */](3, \"ion-back-button\", 1);\n                core[\"Pc\" /* ɵɵpipe */](4, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](5, \"ion-title\");\n                core[\"Ec\" /* ɵɵelementStart */](6, \"h1\");\n                core[\"pd\" /* ɵɵtext */](7);\n                core[\"Pc\" /* ɵɵpipe */](8, \"translate\");\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"zc\" /* ɵɵelement */](9, \"ion-buttons\", 2);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](10, \"ion-content\");\n                core[\"Ec\" /* ɵɵelementStart */](11, \"core-split-view\");\n                core[\"Ec\" /* ɵɵelementStart */](12, \"core-search-box\", 3);\n                core[\"Mc\" /* ɵɵlistener */](\"onSubmit\", function AddonMessagesSearchPage_Template_core_search_box_onSubmit_12_listener($event) { return ctx.search($event); })(\"onClear\", function AddonMessagesSearchPage_Template_core_search_box_onClear_12_listener() { return ctx.clearSearch(); });\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Ec\" /* ɵɵelementStart */](13, \"core-loading\", 4);\n                core[\"Pc\" /* ɵɵpipe */](14, \"translate\");\n                core[\"nd\" /* ɵɵtemplate */](15, AddonMessagesSearchPage_ion_list_15_Template, 5, 14, \"ion-list\", 5);\n                core[\"nd\" /* ɵɵtemplate */](16, AddonMessagesSearchPage_core_empty_box_16_Template, 2, 3, \"core-empty-box\", 6);\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"Dc\" /* ɵɵelementEnd */]();\n                core[\"nd\" /* ɵɵtemplate */](17, AddonMessagesSearchPage_ng_template_17_Template, 1, 1, \"ng-template\", null, 7, core[\"od\" /* ɵɵtemplateRefExtractor */]);\n            }\n            if (rf & 2) {\n                core[\"lc\" /* ɵɵadvance */](3);\n                core[\"Vc\" /* ɵɵproperty */](\"text\", core[\"Qc\" /* ɵɵpipeBind1 */](4, 10, \"core.back\"));\n                core[\"lc\" /* ɵɵadvance */](4);\n                core[\"qd\" /* ɵɵtextInterpolate */](core[\"Qc\" /* ɵɵpipeBind1 */](8, 12, \"addon.messages.searchcombined\"));\n                core[\"lc\" /* ɵɵadvance */](5);\n                core[\"Vc\" /* ɵɵproperty */](\"disabled\", ctx.disableSearch)(\"spellcheck\", false)(\"autoFocus\", true)(\"lengthCheck\", 1);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"hideUntil\", !ctx.displaySearching)(\"message\", core[\"Qc\" /* ɵɵpipeBind1 */](14, 14, \"core.searching\"));\n                core[\"lc\" /* ɵɵadvance */](2);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.displayResults);\n                core[\"lc\" /* ɵɵadvance */](1);\n                core[\"Vc\" /* ɵɵproperty */](\"ngIf\", ctx.displayResults && !ctx.contacts.results.length && !ctx.nonContacts.results.length && !ctx.messages.results.length);\n            }\n        }, directives: [ionic_angular[\"C\" /* IonHeader */], ionic_angular[\"Ab\" /* IonToolbar */], ionic_angular[\"m\" /* IonButtons */], ionic_angular[\"h\" /* IonBackButton */], ionic_angular[\"i\" /* IonBackButtonDelegate */], ionic_angular[\"yb\" /* IonTitle */], content[\"a\" /* CoreContentDirective */], ionic_angular[\"v\" /* IonContent */], split_view[\"a\" /* CoreSplitViewComponent */], search_box[\"a\" /* CoreSearchBoxComponent */], loading[\"a\" /* CoreLoadingComponent */], common[\"t\" /* NgIf */], ionic_angular[\"P\" /* IonList */], common[\"A\" /* NgTemplateOutlet */], infinite_loading[\"a\" /* CoreInfiniteLoadingComponent */], empty_box[\"a\" /* CoreEmptyBoxComponent */], ionic_angular[\"J\" /* IonItemDivider */], ionic_angular[\"O\" /* IonLabel */], common[\"s\" /* NgForOf */], ionic_angular[\"I\" /* IonItem */], user_avatar[\"a\" /* CoreUserAvatarComponent */], format_text[\"a\" /* CoreFormatTextDirective */], ionic_angular[\"D\" /* IonIcon */], fa_icon[\"a\" /* CoreFaIconDirective */], ionic_angular[\"W\" /* IonNote */], update_non_reactive_attributes[\"a\" /* CoreUpdateNonReactiveAttributesDirective */], ionic_angular[\"l\" /* IonButton */], ionic_angular[\"qb\" /* IonSpinner */]], pipes: [ngx_translate_core[\"d\" /* TranslatePipe */], date_day_or_time[\"a\" /* CoreDateDayOrTimePipe */]], encapsulation: 2 });\n    return AddonMessagesSearchPage;\n})();\n\n// CONCATENATED MODULE: ./src/addons/messages/pages/search/search.module.ts\n// (C) Copyright 2015 Moodle Pty Ltd.\n//\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n//     http://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\n\n\n\n\n\n\n\n\n\nconst mobileRoutes = [\n    {\n        path: '',\n        component: search_page_AddonMessagesSearchPage,\n    },\n    messages_lazy_module[\"AddonMessagesDiscussionRoute\"],\n];\nconst tabletRoutes = [\n    {\n        path: '',\n        component: search_page_AddonMessagesSearchPage,\n        children: [\n            messages_lazy_module[\"AddonMessagesDiscussionRoute\"],\n        ],\n    },\n];\nconst routes = [\n    ...Object(app_routing_module[\"c\" /* conditionalRoutes */])(mobileRoutes, () => screen[\"a\" /* CoreScreen */].isMobile),\n    ...Object(app_routing_module[\"c\" /* conditionalRoutes */])(tabletRoutes, () => screen[\"a\" /* CoreScreen */].isTablet),\n];\nlet search_module_AddonMessagesSearchPageModule = /*@__PURE__*/ (() => {\n    class AddonMessagesSearchPageModule {\n    }\n    AddonMessagesSearchPageModule.ɵmod = core[\"wc\" /* ɵɵdefineNgModule */]({ type: AddonMessagesSearchPageModule });\n    AddonMessagesSearchPageModule.ɵinj = core[\"vc\" /* ɵɵdefineInjector */]({ factory: function AddonMessagesSearchPageModule_Factory(t) { return new (t || AddonMessagesSearchPageModule)(); }, imports: [[\n                router[\"m\" /* RouterModule */].forChild(routes),\n                shared_module[\"a\" /* CoreSharedModule */],\n                components_module[\"a\" /* CoreSearchComponentsModule */],\n            ], router[\"m\" /* RouterModule */]] });\n    return AddonMessagesSearchPageModule;\n})();\n(function () {\n    (typeof ngJitMode === \"undefined\" || ngJitMode) && core[\"kd\" /* ɵɵsetNgModuleScope */](search_module_AddonMessagesSearchPageModule, { declarations: [search_page_AddonMessagesSearchPage], imports: [router[\"m\" /* RouterModule */], shared_module[\"a\" /* CoreSharedModule */],\n            components_module[\"a\" /* CoreSearchComponentsModule */]], exports: [router[\"m\" /* RouterModule */]] });\n})();\n\n\n/***/ })\n\n}]);","inputSourceMap":null}