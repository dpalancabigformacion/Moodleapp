(window.webpackJsonp=window.webpackJsonp||[]).push([[104],{aDgO:function(o,e,r){"use strict";r.r(e),r.d(e,"CoreLoginForgottenPasswordPageModule",(function(){return v}));var t=r("tyNb"),a=r("L3Fv"),n=r("mrSG"),s=r("3Pt+"),i=r("3LXp"),c=r("mv9v"),l=r("j3ag"),d=r("pHTc"),u=r("4reR"),g=r("r2Z7"),m=r("fXoL"),P=r("TEn/"),p=r("nt/U"),w=r("6uVz"),f=r("ACYt"),b=r("sYmb");const h=["resetPasswordForm"];let E=(()=>{class CoreLoginForgottenPasswordPage{constructor(o){this.formBuilder=o}ngOnInit(){const o=d.a.getRouteParam("siteUrl");if(!o)return i.a.showErrorModal("Site URL not supplied."),d.a.back(),void 0;this.siteUrl=o,this.autoFocus=g.a.is("tablet"),this.myForm=this.formBuilder.group({field:["username",s.F.required],value:[d.a.getRouteParam("username")||"",s.F.required]})}resetPassword(o){return Object(n.a)(this,void 0,void 0,(function*(){o.preventDefault(),o.stopPropagation();const e=this.myForm.value.field,r=this.myForm.value.value;if(!r)return i.a.showErrorModal("core.login.usernameoremail",!0),void 0;const t=yield i.a.showModalLoading("core.sending",!0),a="email"==e;try{const o=yield c.a.requestPasswordReset(this.siteUrl,a?"":r,a?r:"");"dataerror"==o.status?this.showError(a,o.warnings):"emailpasswordconfirmnotsent"==o.status||"emailpasswordconfirmnoemail"==o.status?i.a.showErrorModal(o.notice):(u.a.triggerFormSubmittedEvent(this.formElement,!0),i.a.showAlert(l.J.instant("core.success"),o.notice),d.a.back())}catch(o){i.a.showErrorModal(o)}finally{t.dismiss()}}))}showError(o,e){for(let r=0;r<e.length;r++){const t=e[r];if("email"==t.item&&o||"username"==t.item&&!o){i.a.showErrorModal(t.message);break}}}}return CoreLoginForgottenPasswordPage.ɵfac=function CoreLoginForgottenPasswordPage_Factory(o){return new(o||CoreLoginForgottenPasswordPage)(m.yc(s.f))},CoreLoginForgottenPasswordPage.ɵcmp=m.sc({type:CoreLoginForgottenPasswordPage,selectors:[["page-core-login-forgotten-password"]],viewQuery:function CoreLoginForgottenPasswordPage_Query(o,e){var r;(1&o&&m.ud(h,!0),2&o)&&(m.dd(r=m.Nc())&&(e.formElement=r.first))},decls:44,vars:30,consts:[["slot","start"],[3,"text"],[1,"list-item-limited-width"],[1,"ion-text-wrap"],[3,"formGroup","ngSubmit"],["resetPasswordForm",""],["formControlName","field"],["slot","end","value","username"],["slot","end","value","email"],[1,"sr-only"],["type","text","name","value","formControlName","value","autocapitalize","none","autocorrect","off",3,"placeholder","core-auto-focus"],["type","submit","expand","block",1,"ion-margin",3,"disabled"]],template:function CoreLoginForgottenPasswordPage_Template(o,e){1&o&&(m.Ec(0,"ion-header"),m.Ec(1,"ion-toolbar"),m.Ec(2,"ion-buttons",0),m.zc(3,"ion-back-button",1),m.Pc(4,"translate"),m.Dc(),m.Ec(5,"ion-title"),m.Ec(6,"h1"),m.pd(7),m.Pc(8,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Dc(),m.Ec(9,"ion-content"),m.Ec(10,"div",2),m.Ec(11,"ion-list"),m.Ec(12,"ion-item",3),m.Ec(13,"ion-label"),m.pd(14),m.Pc(15,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Ec(16,"ion-card"),m.Ec(17,"form",4,5),m.Mc("ngSubmit",(function CoreLoginForgottenPasswordPage_Template_form_ngSubmit_17_listener(o){return e.resetPassword(o)})),m.Ec(19,"ion-item-divider",3),m.Ec(20,"ion-label"),m.Ec(21,"h2"),m.pd(22),m.Pc(23,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Ec(24,"ion-radio-group",6),m.Ec(25,"ion-item"),m.Ec(26,"ion-label"),m.pd(27),m.Pc(28,"translate"),m.Dc(),m.zc(29,"ion-radio",7),m.Dc(),m.Ec(30,"ion-item"),m.Ec(31,"ion-label"),m.pd(32),m.Pc(33,"translate"),m.Dc(),m.zc(34,"ion-radio",8),m.Dc(),m.Dc(),m.Ec(35,"ion-item"),m.Ec(36,"ion-label",9),m.pd(37),m.Pc(38,"translate"),m.Dc(),m.zc(39,"ion-input",10),m.Pc(40,"translate"),m.Dc(),m.Ec(41,"ion-button",11),m.pd(42),m.Pc(43,"translate"),m.Dc(),m.Dc(),m.Dc(),m.Dc(),m.Dc()),2&o&&(m.lc(3),m.Vc("text",m.Qc(4,12,"core.back")),m.lc(4),m.qd(m.Qc(8,14,"core.login.passwordforgotten")),m.lc(7),m.qd(m.Qc(15,16,"core.login.passwordforgotteninstructions2")),m.lc(3),m.Vc("formGroup",e.myForm),m.lc(5),m.qd(m.Qc(23,18,"core.login.searchby")),m.lc(5),m.qd(m.Qc(28,20,"core.login.username")),m.lc(5),m.qd(m.Qc(33,22,"core.user.email")),m.lc(5),m.qd(m.Qc(38,24,"core.login.usernameoremail")),m.lc(2),m.Wc("placeholder",m.Qc(40,26,"core.login.usernameoremail")),m.Vc("core-auto-focus",e.autoFocus),m.lc(2),m.Vc("disabled",!e.myForm.valid),m.lc(1),m.rd(" ",m.Qc(43,28,"core.courses.search")," "))},directives:[P.C,P.Ab,P.m,P.h,P.i,P.yb,p.a,P.v,P.P,P.I,P.O,P.n,s.H,s.s,s.k,P.J,P.Z,P.Ob,s.r,s.i,P.Y,P.Mb,P.H,P.Pb,w.a,f.a,P.l],pipes:[b.d],encapsulation:2}),CoreLoginForgottenPasswordPage})();const F=[{path:"",component:E}];let v=(()=>{class CoreLoginForgottenPasswordPageModule{}return CoreLoginForgottenPasswordPageModule.ɵmod=m.wc({type:CoreLoginForgottenPasswordPageModule}),CoreLoginForgottenPasswordPageModule.ɵinj=m.vc({factory:function CoreLoginForgottenPasswordPageModule_Factory(o){return new(o||CoreLoginForgottenPasswordPageModule)},imports:[[t.m.forChild(F),a.a],t.m]}),CoreLoginForgottenPasswordPageModule})();void(("undefined"==typeof ngJitMode||ngJitMode)&&m.kd(v,{declarations:[E],imports:[t.m,a.a],exports:[t.m]}))}}]);